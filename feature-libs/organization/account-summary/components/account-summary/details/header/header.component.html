<div>
  <h2>
    {{ 'orgAccountSummary.details.header' | cxTranslate }}
  </h2>
</div>
<div class="cx-account-summary" *ngIf="headerDetails$ | async as headerDetails">
  <div class="container">

    <div class="cx-summary-card">

      <cx-card
        [content]="getIdCardContent(headerDetails?.b2BUnitWsDTO?.uid) | async"
      ></cx-card>

      <cx-card
        [content]="getNameCardContent(headerDetails?.b2BUnitWsDTO?.name) | async"
      ></cx-card>

      <cx-card
        [content]="getAddressCardContent(
          headerDetails?.billingAddress?.fullnameWithTitle,
          headerDetails?.billingAddress?.formattedAddress,
          headerDetails?.billingAddress?.country?.name
        ) | async"
      ></cx-card>

    </div>

    <div class="cx-summary-card">

      <cx-card
        [content]="getCreditRepCardContent(headerDetails?.accountManagerName) | async"
      ></cx-card>

      <cx-card
        [content]="getCreditLineCardContent(headerDetails?.formattedCreditLimit) | async"
      ></cx-card>

    </div>

    <div class="cx-summary-card">

      <cx-card
        [content]="getCurrentBalanceCardContent(headerDetails?.amountBalanceData?.currentBalance) | async"
      ></cx-card>

      <cx-card
        [content]="getOpenBalanceCardContent(headerDetails?.amountBalanceData?.openBalance) | async"
      ></cx-card>

    </div>

    <div class="cx-summary-card">

      <div *ngIf="headerDetails?.amountBalanceData?.dueBalance as pastDue; else noDueRange" [class.past-due-section]="pastDue?.length > 0">
        <div *ngIf="pastDue?.length > 0" class="past-due-range-block">
          <div *ngFor="let rangeBalance of pastDue" class="past-due-range-container">
            <div class="past-due-range-date">
              <span>{{rangeBalance?.key?.minBoundery}}</span>
              <span>{{rangeBalance?.key?.maxBoundery ? '-' + rangeBalance?.key?.maxBoundery : '+'}}</span>
              <span> Days</span>
            </div>
            <div class="past-due-range-value">
              {{rangeBalance?.value}}
            </div>
          </div>
        </div>

        <div class="past-due-balance-text cx-card-title">{{ 'orgAccountSummary.details.pastDueBalance' | cxTranslate }}</div>
        <div>{{headerDetails?.amountBalanceData?.openBalance}}</div>
      </div>

      <ng-template #noDueRange>
        <cx-card
          [content]="getPastDueBalanceCardContent(headerDetails?.amountBalanceData?.openBalance) | async"
        ></cx-card>
      </ng-template>

    </div>

  </div>
</div>
