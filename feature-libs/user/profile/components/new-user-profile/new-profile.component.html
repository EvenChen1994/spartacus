<cx-spinner class="overlay" *ngIf="(isUpdating$ | async) || !(user$ | async )"> </cx-spinner>
<div>
  <div class="myaccount-enhancedUI-header-area myaccount-enhancedUI-headertext-2">
    <label class="myaccount-enhancedUI-headertext">{{
      'newUserProfile.myInformation' | cxTranslate
      }}</label>
    <button class="myaccount-enhancedUI-editButton" *ngIf="!isEditing" (click)="onEdit()">
      {{ 'common.edit' | cxTranslate }}
    </button>
  </div>
  <div *ngIf="!isEditing" class="myaccount-enhancedUI-body-area">
    <div style="display: flex">
      <label class="myaccount-enhancedUI-text-head">
        {{ 'newUserProfile.title' | cxTranslate }}
      </label>
      <label class="myaccount-enhancedUI-value">
        {{ (user$ | async)?.title }}
      </label>
    </div>
    <div style="display: flex">
      <label class="myaccount-enhancedUI-text-head">
        <span class="">{{ 'newUserProfile.name' | cxTranslate }}</span>
      </label>
      <label class="myaccount-enhancedUI-value">
        {{ (user$ | async)?.firstName }} {{ (user$ | async)?.lastName }}
      </label>
    </div>
    <div style="display: flex">
      <label class="myaccount-enhancedUI-text-head">
        <span class="">{{ 'newUserProfile.customerId' | cxTranslate }}</span>
      </label>
      <label class="myaccount-enhancedUI-value">
        {{ (user$ | async)?.customerId }}
      </label>
    </div>
  </div>

  <div *ngIf="isEditing" style="clear: both" class="user-form">
    <form (ngSubmit)="onSubmit()" [formGroup]="form">
      <label>
        <span class="label-content, myaccount-enhancedUI-text-head">{{
          'newUserProfile.title' | cxTranslate
          }}</span>
        <ng-select [clearable]="false" [searchable]="false" formControlName="titleCode" id="title-select"
          [cxNgSelectA11y]="{
            ariaLabel: 'newUserProfile.title' | cxTranslate
          }">
          <ng-option *ngFor="let title of titles$ | async" [value]="title.code">{{ title.name }}</ng-option>
        </ng-select>
      </label>
      <label>
        <span class="label-content, myaccount-enhancedUI-text-head">{{
          'newUserProfile.firstName' | cxTranslate
          }}</span>
        <input required="true" type="text" class="form-control" name="firstName" formControlName="firstName" />
        <cx-form-errors [control]="form.get('firstName')"></cx-form-errors>
      </label>

      <label>
        <span class="label-content, myaccount-enhancedUI-text-head">{{
          'newUserProfile.lastName' | cxTranslate
          }}</span>
        <input required="true" type="text" class="form-control" name="lastName" formControlName="lastName" />
        <cx-form-errors [control]="form.get('lastName')"></cx-form-errors>
      </label>

      <label>
        <span class="label-content, myaccount-enhancedUI-text-head">{{
          'newUserProfile.customerId' | cxTranslate
          }}</span>
        <input required="true" type="text" class="form-control" name="customerId" formControlName="customerId"
          readonly />
        <cx-form-errors [control]="form.get('lastName')"></cx-form-errors>
      </label>
    </form>
    <div style="display: flex">
      <button class="
          btn
          myaccount-enhancedUI-button myaccount-enhancedUI-button-cancel
        " (click)="cancelEdit()">
        {{ 'common.cancel' | cxTranslate }}
      </button>

      <button class="btn btn-primary myaccount-enhancedUI-button" (click)="onSubmit()" [disabled]="form.disabled">
        {{ 'common.save' | cxTranslate }}
      </button>
    </div>
  </div>
</div>