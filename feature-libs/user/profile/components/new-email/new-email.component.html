<cx-spinner class="overlay" *ngIf="isUpdating$ | async"> </cx-spinner>
<div>
  <div class="email-enhancedUI-header-area">
    <label class="email-enhancedUI-headertext">{{ 'newUserProfile.myEmailAddress' | cxTranslate }}
    </label>
    <button
    class="email-enhancedUI-editButton" 
      *ngIf="!isEditing" (click)="onEdit()"> {{ 'common.edit' | cxTranslate }} </button>
  </div>
  <div>

  <div *ngIf="!isEditing" class="email-enhancedUI-body-area">
    <div style="display:flex">
      <label class="email-enhancedUI-text-head">
        {{ 'newUserProfile.email' | cxTranslate }}
      </label>
      <label class="email-enhancedUI-value">
        {{(user$ | async)?.uid}}
      </label>
    </div>
  </div>
  
  </div>
  <div *ngIf="isEditing" style="clear:both" class="user-form">

    <form (ngSubmit)="onSubmit()" [formGroup]="form">

      <label>
        <span class="email-enhancedUI-text-head">{{
          'newUserProfile.emailAddress' | cxTranslate
          }}</span>
        <input required="true" type="text" class="form-control" name="oldEmail" formControlName="oldEmail"
        [ngModel] = "(user$ | async)?.uid"
          readonly />
      </label>

      <label >
        <span class="email-enhancedUI-text-head">{{
          'newUserProfile.newEmailAddress' | cxTranslate
        }}</span>
        <input
          required="true"
          type="email"
          name="email"
          formControlName="email"
          placeholder="{{
            'newUserProfile.emailPlaceHolder' | cxTranslate
          }}"
          class="form-control"
        />
        <cx-form-errors [control]="form.get('email')"></cx-form-errors>
      </label>
    
      <label>
        <span class="email-enhancedUI-text-head">{{
          'newUserProfile.confirmNewEmailAddress' | cxTranslate
        }}</span>
        <input
          required="true"
          type="email"
          name="confirmEmail"
          formControlName="confirmEmail"
          placeholder="{{
            'newUserProfile.emailPlaceHolder' | cxTranslate
          }}"
          class="form-control"
        />
        <cx-form-errors [control]="form.get('confirmEmail')"></cx-form-errors>
      </label>
    
      <label>
        <span class="label-content, email-enhancedUI-text-head">{{
          'newUserProfile.password' | cxTranslate
        }}</span>
        <input
          required="true"
          type="password"
          name="password"
          formControlName="password"
          placeholder="{{ 'newUserProfile.passwordPlaceHolder' | cxTranslate }}"
          class="form-control"
          autocomplete="new-password"
          [attr.aria-label]="'newUserProfile.passwordPlaceHolder' | cxTranslate"
          cxPasswordVisibilitySwitch
        />
        <cx-form-errors [control]="form.get('password')"></cx-form-errors>
      </label>
    
      <div style="display: flex">
        <button class="btn email-enhancedUI-button email-enhancedUI-button-cancel" (click)="cancelEdit()">{{ 'common.cancel' | cxTranslate }}</button>
    
        <button class="btn btn-primary email-enhancedUI-button" (click)="onSubmit()" [disabled]="form.disabled">
          {{ 'common.save' | cxTranslate }}
        </button>
      </div>
    </form>
  </div>
</div>

