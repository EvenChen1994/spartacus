<ng-container *ngIf="configuration$ | async">
  <div class="cx-container">
    <cx-icon
      *ngIf="!showChat"
      class="cx-speech-bubble"
      [type]="iconTypes.COMMENTS"
      (click)="displayChat()"
    >
    </cx-icon>
  </div>
  <div *ngIf="showChat" class="cx-chat-container">
    <div class="cx-buttons-container">
      <ng-container *ngIf="isSpeechTextRecognitionSupported">
        <button
          title="{{ getVolumeTitle() }}"
          type="button"
          class="cx-volume"
          (click)="startOrStopReading()"
        >
          <span
            [ngClass]="{ 'fa-stack fa-2x small': !isVolume }"
            aria-hidden="true"
          >
            <cx-icon
              [ngClass]="{ 'fa-stack-1x fa-2x': !isVolume }"
              [type]="iconTypes.VOLUME_OFF"
            ></cx-icon>
            <cx-icon
              *ngIf="!isVolume"
              class="cx-ban fa-stack-2x"
              [type]="iconTypes.BAN"
            ></cx-icon>
          </span>
        </button>
        <button
          title="{{ getMicroTitle() }}"
          type="button"
          class="cx-microphone"
          (click)="startOrStopRecording()"
        >
          <span aria-hidden="true">
            <cx-icon [type]="getMicroIcon()"></cx-icon>
          </span>
        </button>
      </ng-container>
      <button title="Close" type="button" class="cx-close" (click)="hideChat()">
        <span aria-hidden="true">
          <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
        </span>
      </button>
    </div>
    <cx-messaging
      [messageEvents$]="messageEvents$"
      [messagingConfigs]="messagingConfigs"
      (send)="onSend($event)"
    ></cx-messaging>
  </div>
</ng-container>
