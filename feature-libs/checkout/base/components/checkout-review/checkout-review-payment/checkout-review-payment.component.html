<div class="cx-review-summary cx-review-summary-container">
  <ng-container *ngIf="(steps$ | async)?.slice(0, -1) as steps">
    <ng-container *ngFor="let step of paymentSteps(steps)">
      <ng-container [ngSwitch]="step.type[0]">
        <ng-container *ngSwitchCase="checkoutStepTypePaymentDetails">
          <ng-container *ngTemplateOutlet="paymentCards"></ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-container>
</div>

<ng-template #paymentCards>
  <div class="cx-review-summary-card cx-review-summary-payment-card">
    <div>
      <cx-card
        *ngIf="paymentDetails$ | async as paymentDetails"
        [content]="getPaymentTypeCard() | async"
      ></cx-card>
    </div>
    <div class="cx-review-summary-edit-step">
      <a
        [attr.aria-label]="'checkoutReview.editPaymentDetails' | cxTranslate"
        [routerLink]="
          { cxRoute: getCheckoutStepUrl(checkoutStepTypePaymentDetails) }
            | cxUrl
        "
      >
        <cx-icon aria-hidden="true" [type]="iconTypes.PENCIL"></cx-icon>
      </a>
    </div>
  </div>

  <div class="cx-review-summary-card cx-review-summary-payment-card">
    <div>
      <cx-card
        *ngIf="paymentDetails$ | async as paymentDetails"
        [content]="getPaymentMethodCard(paymentDetails) | async"
      ></cx-card>
    </div>
  </div>
</ng-template>
