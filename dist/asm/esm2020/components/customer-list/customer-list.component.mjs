/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component, Optional, ViewChild, } from '@angular/core';
import { UntypedFormControl } from '@angular/forms';
import { CustomerListColumnActionType, } from '@spartacus/asm/root';
import { BREAKPOINT, ICON_TYPE, } from '@spartacus/storefront';
import { combineLatest, NEVER, Subscription } from 'rxjs';
import { distinctUntilChanged, map, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/storefront";
import * as i2 from "@spartacus/asm/root";
import * as i3 from "@spartacus/core";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
import * as i6 from "@ng-select/ng-select";
export class CustomerListComponent {
    constructor(launchDialogService, breakpointService, asmConfig, translation, asmCustomerListFacade, 
    // TODO:(CXSPA-3090) for next major release remove feature level
    featureConfig, occConfig) {
        this.launchDialogService = launchDialogService;
        this.breakpointService = breakpointService;
        this.asmConfig = asmConfig;
        this.translation = translation;
        this.asmCustomerListFacade = asmCustomerListFacade;
        this.featureConfig = featureConfig;
        this.occConfig = occConfig;
        this.DEFAULT_PAGE_SIZE = 5;
        this.focusConfig = {
            trap: true,
            block: true,
            autofocus: 'customer-list-selector',
            focusOnEscape: true,
        };
        this.iconTypes = ICON_TYPE;
        this.BREAKPOINT = BREAKPOINT;
        this.currentPage = 0;
        this.maxPage = 0;
        this.loaded = false;
        this.listsError = false;
        this.listsEmpty = false;
        this.enableAsmB2bCustomerList = false;
        this.customerListColumnActionType = CustomerListColumnActionType;
        this.searchBox = new UntypedFormControl();
        this.teardown = new Subscription();
        this.breakpoint$ = this.getBreakpoint();
    }
    ngOnInit() {
        this.pageSize =
            this.asmConfig.asm?.customerList?.pageSize ?? this.DEFAULT_PAGE_SIZE;
        this.customerListConfig = this.asmConfig?.asm?.customerList;
        this.customerListsPage$ =
            this.asmCustomerListFacade.getCustomerListsState().pipe(tap((state) => (this.listsError = !!state.error)), map((state) => {
                if (state?.data?.userGroups?.length === 0) {
                    this.listsEmpty = true;
                    return undefined;
                }
                else {
                    return state.data;
                }
            }), distinctUntilChanged(), tap((result) => {
                // set the first value of this.customerListsPage$ to be selected
                if (!this.selectedUserGroupId) {
                    this.selectedUserGroupId = result?.userGroups?.[0]?.uid;
                    this.sorts = null;
                    this.fetchCustomers();
                }
            })) ?? NEVER;
        this.customerSearchLoading$ = this.asmCustomerListFacade
            .getCustomerListCustomersSearchResultsLoading()
            .pipe(tap((loading) => (this.loaded = !loading)));
        this.teardown.add(this.customerSearchLoading$.subscribe());
        this.teardown.add(() => this.asmCustomerListFacade.customerListCustomersSearchReset());
        this.customerSearchError$ =
            this.asmCustomerListFacade.getCustomerListCustomersSearchResultsError();
        this.customerSearchPage$ = this.asmCustomerListFacade
            .getCustomerListCustomersSearchResults()
            .pipe(tap((result) => {
            if (result?.sorts) {
                this.sorts = result.sorts;
                this.sortCode = result.pagination?.sort;
            }
            if (result?.entries.length < this.pageSize) {
                this.maxPage = result.pagination?.currentPage ?? 0;
            }
            else {
                this.maxPage = this.currentPage + 1;
            }
        }));
    }
    ngOnDestroy() {
        this.teardown.unsubscribe();
    }
    changePage(page) {
        const options = {
            customerListId: this.selectedUserGroupId,
            pageSize: this.pageSize,
            currentPage: page,
            sort: this.sortCode,
        };
        if (this.searchBox?.value) {
            options.query = this.searchBox.value;
        }
        this.asmCustomerListFacade.customerListCustomersSearch(options);
    }
    fetchCustomers() {
        // TODO: (CXSPA-2722 for remove ) Remove FeatureConfigService for 7.0
        this.enableAsmB2bCustomerList =
            (this.featureConfig?.isLevel('6.1') ?? false) &&
                this.selectedUserGroupId === 'b2bCustomerList';
        if (this.selectedUserGroupId) {
            const options = {
                customerListId: this.selectedUserGroupId,
                pageSize: this.pageSize,
                currentPage: this.currentPage,
            };
            if (this.sortCode) {
                options.sort = this.sortCode;
            }
            if (this.searchBox?.value) {
                options.query = this.searchBox.value;
            }
            this.asmCustomerListFacade.customerListCustomersSearchReset();
            this.asmCustomerListFacade.customerListCustomersSearch(options);
        }
        this.updateCustomerListColumns();
    }
    updateCustomerListColumns() {
        const columns = this.customerListConfig?.columns || [];
        for (const column of columns) {
            if (column.headerLocalizationKey ===
                'asm.customerList.tableHeader.account' ||
                column.headerLocalizationKey === 'hideHeaders') {
                column.headerLocalizationKey = this.enableAsmB2bCustomerList
                    ? 'asm.customerList.tableHeader.account'
                    : 'hideHeaders';
            }
            if (column.headerLocalizationKey === 'asm.customerList.tableHeader.cart') {
                column.headerLocalizationKey = this.featureConfig?.isLevel('6.1')
                    ? column.headerLocalizationKey
                    : 'hideHeaders';
            }
        }
    }
    onChangeCustomerGroup() {
        this.currentPage = 0;
        this.sorts = null;
        this.sortCode = '';
        this.fetchCustomers();
    }
    getGroupName(customerListsPage, id) {
        return (customerListsPage?.userGroups?.find((userGroup) => userGroup.uid === id)
            ?.name ?? '');
    }
    getBadgeText(customerEntry) {
        return ((customerEntry.firstName?.charAt(0) ?? '') +
            (customerEntry.lastName?.charAt(0) ?? ''));
    }
    startColumnAction(customerEntry, action) {
        this.selectedCustomer = customerEntry;
        const closeValue = {
            actionType: action,
            selectedUser: customerEntry,
        };
        this.closeModal(closeValue);
    }
    onKey(event) {
        if (event.key === 'Enter') {
            this.searchCustomers();
        }
    }
    searchCustomers() {
        this.currentPage = 0;
        this.fetchCustomers();
    }
    isRequired(customerEntry, type) {
        if (type === CustomerListColumnActionType.ACTIVE_CART &&
            !customerEntry.lastCartId) {
            return true;
        }
        if (type === CustomerListColumnActionType.ORDER_HISTORY &&
            customerEntry.hasOrder !== true) {
            return true;
        }
        return false;
    }
    changeSortCode(sortCode) {
        this.sortCode = sortCode;
        this.fetchCustomers();
    }
    goToNextPage() {
        if (this.currentPage >= this.maxPage) {
            this.currentPage = this.maxPage;
        }
        else {
            if (this.loaded) {
                this.currentPage++;
                this.fetchCustomers();
            }
        }
    }
    goToPreviousPage() {
        if (this.currentPage <= 0) {
            this.currentPage = 0;
        }
        else {
            if (this.loaded) {
                this.currentPage--;
                this.fetchCustomers();
            }
        }
    }
    closeModal(reason) {
        this.launchDialogService.closeDialog(reason);
    }
    getSortLabels() {
        return combineLatest([
            this.translation.translate('asm.customerList.tableSort.byName'),
            this.translation.translate('asm.customerList.tableSort.byNameAsc'),
            this.translation.translate('asm.customerList.tableSort.byNameDesc'),
            this.translation.translate('asm.customerList.tableSort.byDateAsc'),
            this.translation.translate('asm.customerList.tableSort.byDateDesc'),
            this.translation.translate('asm.customerList.tableSort.byOrderDateAsc'),
            this.translation.translate('asm.customerList.tableSort.byOrderDateDesc'),
            this.translation.translate('asm.customerList.tableSort.byUnit'),
            this.translation.translate('asm.customerList.tableSort.byUnitDesc'),
        ]).pipe(map(([textByName, textByNameAsc, textByNameDesc, textByDateAsc, textByDateDesc, textByOrderDateAsc, textByOrderDateDesc, textByUnit, textByUnitDesc,]) => {
            return {
                byName: textByName,
                byNameAsc: textByNameAsc,
                byNameDesc: textByNameDesc,
                byOrderDateAsc: textByOrderDateAsc,
                byOrderDateDesc: textByOrderDateDesc,
                byDateAsc: textByDateAsc,
                byDateDesc: textByDateDesc,
                byUnit: textByUnit,
                byUnitDesc: textByUnitDesc,
            };
        }));
    }
    createCustomer() {
        this.launchDialogService.closeDialog('Create customer click');
        this.launchDialogService?.openDialogAndSubscribe("ASM_CREATE_CUSTOMER_FORM" /* LAUNCH_CALLER.ASM_CREATE_CUSTOMER_FORM */, this.addNewCustomerLink);
    }
    getBreakpoint() {
        return this.breakpointService.breakpoint$.pipe(map((breakpoint) => {
            if (breakpoint === BREAKPOINT.lg || breakpoint === BREAKPOINT.xl) {
                breakpoint = BREAKPOINT.md;
            }
            return breakpoint;
        }));
    }
}
CustomerListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CustomerListComponent, deps: [{ token: i1.LaunchDialogService }, { token: i1.BreakpointService }, { token: i2.AsmConfig }, { token: i3.TranslationService }, { token: i2.AsmCustomerListFacade }, { token: i3.FeatureConfigService, optional: true }, { token: i3.OccConfig, optional: true }], target: i0.ɵɵFactoryTarget.Component });
CustomerListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: CustomerListComponent, selector: "cx-customer-list", viewQueries: [{ propertyName: "addNewCustomerLink", first: true, predicate: ["addNewCustomerLink"], descendants: true }], ngImport: i0, template: "<div\n  class=\"cx-asm-customer-list cx-modal-container cx-asm-dialog\"\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"closeModal('Escape clicked')\"\n>\n  <div class=\"cx-modal-content\">\n    <!-- Modal Header -->\n    <ng-container>\n      <div class=\"cx-dialog-header modal-header\">\n        <h2 id=\"asm-customer-list-title\" class=\"title modal-title\">\n          {{ 'asm.customerList.title' | cxTranslate }}\n        </h2>\n        <div id=\"asm-customer-list-desc\" class=\"cx-visually-hidden\">\n          {{ 'asm.customerList.description' | cxTranslate }}\n        </div>\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'!6.1'\">\n          <ng-template *ngTemplateOutlet=\"closeButton\"></ng-template>\n        </ng-container>\n        <ng-container *cxFeatureLevel=\"'6.1'\">\n          <ng-template *ngTemplateOutlet=\"createCustomerButton\"></ng-template>\n        </ng-container>\n      </div>\n      <div\n        class=\"cx-dialog-sub-header modal-header\"\n        [class.tablet-mobile]=\"(breakpoint$ | async) !== BREAKPOINT.md\"\n        *ngIf=\"customerListsPage$ | async as customerListsPage\"\n      >\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'!6.1'\">\n          <ng-template\n            *ngTemplateOutlet=\"\n              groupSelector;\n              context: { customerListsPage: customerListsPage }\n            \"\n          ></ng-template>\n        </ng-container>\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'6.1'\">\n          <div\n            class=\"cx-header-select\"\n            [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n          >\n            <ng-template\n              *ngTemplateOutlet=\"\n                groupSelector;\n                context: { customerListsPage: customerListsPage }\n              \"\n            ></ng-template>\n            <ng-template\n              *ngTemplateOutlet=\"\n                total;\n                context: {\n                  customerSearchPage: customerSearchPage$ | async\n                }\n              \"\n            >\n            </ng-template>\n          </div>\n        </ng-container>\n\n        <div\n          class=\"cx-header-actions\"\n          [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n        >\n          <ng-template *ngTemplateOutlet=\"sort\"></ng-template>\n          <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'!6.1'\">\n            <ng-template *ngTemplateOutlet=\"pagination\"></ng-template>\n          </ng-container>\n          <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.1'\">\n            <ng-template *ngTemplateOutlet=\"search\"></ng-template>\n          </ng-container>\n        </div>\n      </div>\n      <!-- Modal Body -->\n      <div class=\"cx-dialog-body modal-body\">\n        <div class=\"cx-dialog-row\">\n          <div class=\"cx-dialog-item\">\n            <div *ngIf=\"listsEmpty\" class=\"cx-error-state\">\n              {{ 'asm.customerList.noLists' | cxTranslate }}\n            </div>\n            <div *ngIf=\"listsError\" class=\"cx-error-state\">\n              {{ 'asm.customerList.listsError' | cxTranslate }}\n            </div>\n            <div *ngIf=\"customerSearchError$ | async\" class=\"cx-error-state\">\n              {{ 'generalErrors.pageFailure' | cxTranslate }}\n            </div>\n            <cx-spinner *ngIf=\"customerSearchLoading$ | async\"></cx-spinner>\n            <div *ngIf=\"customerSearchPage$ | async as customerSearchPage\">\n              <table\n                id=\"asm-cusomer-list-table\"\n                role=\"table\"\n                class=\"table\"\n                *ngIf=\"loaded\"\n              >\n                <caption class=\"cx-visually-hidden\">\n                  {{\n                    'asm.customerList.title' | cxTranslate\n                  }}\n                </caption>\n                <thead *ngIf=\"(breakpoint$ | async) === BREAKPOINT.md\">\n                  <tr role=\"row\">\n                    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                    <ng-container *cxFeatureLevel=\"'!6.1'\">\n                      <th\n                        role=\"columnheader\"\n                        class=\"cx-avatar-cell\"\n                        *ngIf=\"customerListConfig?.showAvatar\"\n                      >\n                        <span class=\"cx-visually-hidden\">\n                          {{\n                            'asm.customerList.tableHeader.customer'\n                              | cxTranslate\n                          }}\n                        </span>\n                      </th>\n                    </ng-container>\n                    <th\n                      role=\"columnheader\"\n                      *ngFor=\"let column of customerListConfig?.columns\"\n                    >\n                      <span\n                        *ngIf=\"\n                          column.headerLocalizationKey &&\n                          column.headerLocalizationKey !== 'hideHeaders'\n                        \"\n                      >\n                        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                        <ng-container *cxFeatureLevel=\"'!6.1'\">\n                          {{ column.headerLocalizationKey | cxTranslate }}\n                        </ng-container>\n                        <ng-container *cxFeatureLevel=\"'6.1'\">\n                          <!-- TODO:(CXSPA-3090) for next major release replace the translation lable -->\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey ===\n                              'asm.customerList.tableHeader.customer'\n                            \"\n                          >\n                            {{\n                              'asm.customerList.tableHeader.customerName'\n                                | cxTranslate\n                            }}\n                          </ng-container>\n                          <!-- TODO:(CXSPA-3090) for next major release replace the translation lable -->\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey ===\n                              'asm.customerList.tableHeader.email'\n                            \"\n                          >\n                            {{\n                              'asm.customerList.tableHeader.emailId'\n                                | cxTranslate\n                            }}\n                          </ng-container>\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey !==\n                                'asm.customerList.tableHeader.customer' &&\n                              column.headerLocalizationKey !==\n                                'asm.customerList.tableHeader.email'\n                            \"\n                          >\n                            {{ column.headerLocalizationKey | cxTranslate }}\n                          </ng-container>\n                        </ng-container>\n                      </span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    role=\"row\"\n                    *ngFor=\"let customerEntry of customerSearchPage?.entries\"\n                  >\n                    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                    <ng-container *cxFeatureLevel=\"'!6.1'\">\n                      <td\n                        role=\"cell\"\n                        *ngIf=\"customerListConfig?.showAvatar\"\n                        class=\"cx-avatar-cell\"\n                      >\n                        <div class=\"cx-avatar\">\n                          {{ getBadgeText(customerEntry) }}\n                        </div>\n                      </td>\n                    </ng-container>\n                    <!-- multi columns if desktop -->\n                    <ng-container\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.md\"\n                    >\n                      <td\n                        role=\"cell\"\n                        *ngFor=\"let column of customerListConfig?.columns\"\n                      >\n                        <ng-template\n                          *ngTemplateOutlet=\"\n                            cell;\n                            context: {\n                              customerEntry: customerEntry,\n                              column: column,\n                              showHeader: false\n                            }\n                          \"\n                        ></ng-template>\n                      </td>\n                    </ng-container>\n                    <!-- two column if tablet -->\n                    <ng-container\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.sm\"\n                    >\n                      <td role=\"cell\" class=\"cx-multi-cell\">\n                        <ng-container\n                          *ngFor=\"\n                            let column of customerListConfig?.columns;\n                            let even = even\n                          \"\n                        >\n                          <ng-container *ngIf=\"even\">\n                            <ng-template\n                              *ngTemplateOutlet=\"\n                                cell;\n                                context: {\n                                  customerEntry: customerEntry,\n                                  column: column,\n                                  showHeader: true\n                                }\n                              \"\n                            ></ng-template>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td role=\"cell\" class=\"cx-multi-cell\">\n                        <ng-container\n                          *ngFor=\"\n                            let column of customerListConfig?.columns;\n                            let odd = odd\n                          \"\n                        >\n                          <ng-container *ngIf=\"odd\">\n                            <ng-template\n                              *ngTemplateOutlet=\"\n                                cell;\n                                context: {\n                                  customerEntry: customerEntry,\n                                  column: column,\n                                  showHeader: true\n                                }\n                              \"\n                            ></ng-template>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                    </ng-container>\n                    <!-- one column if mobile -->\n                    <td\n                      role=\"cell\"\n                      class=\"cx-multi-cell\"\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n                    >\n                      <ng-container\n                        *ngFor=\"let column of customerListConfig?.columns\"\n                      >\n                        <ng-template\n                          *ngTemplateOutlet=\"\n                            cell;\n                            context: {\n                              customerEntry: customerEntry,\n                              column: column,\n                              showHeader: true\n                            }\n                          \"\n                        ></ng-template>\n                      </ng-container>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div\n                class=\"cx-empty-state\"\n                *ngIf=\"!customerSearchPage?.entries.length\"\n              >\n                {{ 'asm.customerList.noCustomers' | cxTranslate }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n      <ng-container *cxFeatureLevel=\"'6.1'\">\n        <!-- Modal Foot -->\n        <div\n          class=\"cx-dialog-sub-header modal-header cx-dialog-foot\"\n          [class.asm-mobile-pagination]=\"\n            (breakpoint$ | async) !== BREAKPOINT.md\n          \"\n          *ngIf=\"customerListsPage$ | async as customerListsPage\"\n        >\n          <div\n            class=\"cx-header-actions\"\n            [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n          >\n            <div *ngIf=\"customerSearchPage$ | async as customerSearchPage\">\n              <cx-pagination\n                [pagination]=\"customerSearchPage.pagination\"\n                (viewPageEvent)=\"changePage($event)\"\n              ></cx-pagination>\n            </div>\n          </div>\n        </div>\n        <div class=\"cx-dialog-footer modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn cx-asm-customer-list-btn-cancel\"\n            (click)=\"closeModal('Cancel click')\"\n          >\n            {{ 'asm.createCustomerForm.cancel' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n\n<ng-template\n  #cell\n  let-customerEntry=\"customerEntry\"\n  let-column=\"column\"\n  let-showHeader=\"showHeader\"\n>\n  <div\n    class=\"cx-cell-container\"\n    *ngIf=\"column.headerLocalizationKey !== 'hideHeaders'\"\n  >\n    <span class=\"cx-header-text\" *ngIf=\"showHeader\">\n      {{ column.headerLocalizationKey | cxTranslate }}\n    </span>\n\n    <ng-container *ngIf=\"!column.actionType\">\n      <ng-container\n        *ngTemplateOutlet=\"\n          cellContent;\n          context: { column: column, customerEntry: customerEntry }\n        \"\n      ></ng-container>\n    </ng-container>\n\n    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n    <ng-container *cxFeatureLevel=\"'6.1'\">\n      <div\n        class=\"cx-avatar\"\n        *ngIf=\"\n          customerListConfig?.showAvatar &&\n          column?.actionType === customerListColumnActionType?.START_SESSION\n        \"\n      >\n        <img\n          *ngIf=\"customerEntry?.userAvatar?.url\"\n          [attr.src]=\"\n            occConfig?.backend?.occ?.baseUrl + customerEntry?.userAvatar?.url\n          \"\n          alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n        />\n        <div class=\"cx-avatar-text\" *ngIf=\"!customerEntry?.userAvatar?.url\">\n          {{ getBadgeText(customerEntry) }}\n        </div>\n      </div>\n    </ng-container>\n\n    <button\n      *ngIf=\"column.actionType\"\n      (click)=\"startColumnAction(customerEntry, column.actionType)\"\n      class=\"btn btn-link cx-action-link cx-btn-cell\"\n      [class]=\"column.actionType === 'ACTIVE_CART' ? 'cx-cart' : ''\"\n      [disabled]=\"isRequired(customerEntry, column.actionType)\"\n      [attr.title]=\"\n        column.icon\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n      [attr.aria-label]=\"\n        column.icon\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n    >\n      <ng-container\n        *ngTemplateOutlet=\"\n          cellContent;\n          context: { column: column, customerEntry: customerEntry }\n        \"\n      ></ng-container>\n    </button>\n  </div>\n</ng-template>\n<ng-template #cellContent let-customerEntry=\"customerEntry\" let-column=\"column\">\n  <div>\n    <span *ngIf=\"!column.icon\">{{\n      column.renderer?.(customerEntry) || ''\n    }}</span>\n    <cx-icon\n      *ngIf=\"column.icon\"\n      [attr.title]=\"\n        !column.actionType\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n      [class.cx-action-color]=\"\n        column.actionType && !isRequired(customerEntry, column.actionType)\n      \"\n      [type]=\"column.icon.symbol\"\n      [attr.aria-label]=\"\n        !column.actionType\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n    ></cx-icon>\n  </div>\n</ng-template>\n\n<ng-template #search>\n  <div class=\"form-group search-wrapper\">\n    <input\n      [formControl]=\"searchBox\"\n      (keyup)=\"onKey($event)\"\n      type=\"text\"\n      class=\"form-control\"\n      placeholder=\"{{ 'asm.customerList.searchBox' | cxTranslate }}\"\n      attr.aria-label=\"{{ 'asm.customerList.enterSearchBox' | cxTranslate }}\"\n    />\n    <cx-icon\n      [type]=\"iconTypes.SEARCH\"\n      role=\"button\"\n      [attr.aria-label]=\"'storeFinder.searchNearestStores' | cxTranslate\"\n      class=\"search\"\n      (click)=\"searchCustomers()\"\n    ></cx-icon>\n  </div>\n</ng-template>\n\n<ng-template #total let-customerSearchPage=\"customerSearchPage\">\n  <span class=\"cx-total\" *ngIf=\"customerSearchPage?.pagination?.totalResults\">\n    <ng-container *ngIf=\"customerSearchPage?.pagination?.totalResults > 1\">\n      {{\n        'asm.customerList.noOfCustomers'\n          | cxTranslate: { count: customerSearchPage?.pagination?.totalResults }\n      }}\n    </ng-container>\n    <ng-container *ngIf=\"customerSearchPage?.pagination?.totalResults === 1\">\n      {{ 'asm.customerList.oneCustomer' | cxTranslate }}\n    </ng-container>\n  </span>\n</ng-template>\n\n<ng-template #sort>\n  <label>\n    <span class=\"cx-visually-hidden\">{{\n      'asm.customerList.tableSort.sortBy' | cxTranslate\n    }}</span>\n    <cx-sorting\n      class=\"sort-selector\"\n      [sortOptions]=\"sorts\"\n      [sortLabels]=\"getSortLabels() | async\"\n      (sortListEvent)=\"changeSortCode($event)\"\n      [selectedOption]=\"sortCode\"\n      placeholder=\"{{ 'asm.customerList.tableSort.sortBy' | cxTranslate }}\"\n      [cxNgSelectA11y]=\"{\n        ariaLabel: sortCode,\n        ariaControls: 'asm-cusomer-list-table'\n      }\"\n    ></cx-sorting>\n  </label>\n</ng-template>\n\n<ng-template #pagination>\n  <div class=\"cx-pagination-buttons\">\n    <div>\n      {{\n        'asm.customerList.page.page' | cxTranslate: { count: currentPage + 1 }\n      }}\n    </div>\n    <button\n      *ngIf=\"maxPage > 0\"\n      (click)=\"goToPreviousPage()\"\n      class=\"btn btn-link cx-action-link cx-btn-previous\"\n      [disabled]=\"currentPage === 0 || !loaded\"\n    >\n      <cx-icon class=\"previous\" [type]=\"iconTypes.CARET_LEFT\"></cx-icon\n      ><span>{{ 'asm.customerList.page.previous' | cxTranslate }}</span>\n    </button>\n    <button\n      *ngIf=\"maxPage > 0\"\n      (click)=\"goToNextPage()\"\n      class=\"btn btn-link cx-action-link cx-btn-next\"\n      [disabled]=\"currentPage === maxPage || !loaded\"\n    >\n      <span>{{ 'asm.customerList.page.next' | cxTranslate }}</span\n      ><cx-icon class=\"next\" [type]=\"iconTypes.CARET_RIGHT\"></cx-icon>\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #groupSelector let-customerListsPage=\"customerListsPage\">\n  <label>\n    <span class=\"cx-visually-hidden\">{{\n      'asm.customerList.title' | cxTranslate\n    }}</span>\n    <ng-select\n      class=\"customer-list-selector\"\n      [searchable]=\"false\"\n      [clearable]=\"false\"\n      (change)=\"onChangeCustomerGroup()\"\n      [tabIndex]=\"0\"\n      [(ngModel)]=\"selectedUserGroupId\"\n      [items]=\"customerListsPage?.userGroups\"\n      bindLabel=\"name\"\n      bindValue=\"uid\"\n      [cxNgSelectA11y]=\"{\n        ariaLabel: getGroupName(customerListsPage, selectedUserGroupId),\n        ariaControls: 'asm-cusomer-list-table'\n      }\"\n    >\n    </ng-select>\n  </label>\n</ng-template>\n\n<ng-template #closeButton>\n  <button\n    type=\"button\"\n    class=\"close\"\n    attr.aria-label=\"{{ 'common.close' | cxTranslate }}\"\n    (click)=\"closeModal('Cross click')\"\n  >\n    <span aria-hidden=\"true\">\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </span>\n  </button>\n</ng-template>\n\n<ng-template #createCustomerButton>\n  <button\n    type=\"button\"\n    class=\"btn cx-asm-create-customer-btn\"\n    (click)=\"createCustomer()\"\n  >\n    <cx-icon [type]=\"iconTypes.USER_PLUS\"></cx-icon>\n    <span>{{ 'asm.customerList.createCustomer' | cxTranslate }}</span>\n  </button>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i5.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i5.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "component", type: i1.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "component", type: i6.NgSelectComponent, selector: "ng-select", inputs: ["bindLabel", "bindValue", "markFirst", "placeholder", "notFoundText", "typeToSearchText", "addTagText", "loadingText", "clearAllText", "appearance", "dropdownPosition", "appendTo", "loading", "closeOnSelect", "hideSelected", "selectOnTab", "openOnEnter", "maxSelectedItems", "groupBy", "groupValue", "bufferAmount", "virtualScroll", "selectableGroup", "selectableGroupAsModel", "searchFn", "trackByFn", "clearOnBackspace", "labelForId", "inputAttrs", "tabIndex", "readonly", "searchWhileComposing", "minTermLength", "editableSearchTerm", "keyDownFn", "typeahead", "multiple", "addTag", "searchable", "clearable", "isOpen", "items", "compareWith", "clearSearchOnAdd"], outputs: ["blur", "focus", "change", "open", "close", "search", "clear", "add", "remove", "scroll", "scrollToEnd"] }, { kind: "directive", type: i5.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i1.SpinnerComponent, selector: "cx-spinner" }, { kind: "directive", type: i1.FocusDirective, selector: "[cxFocus]", inputs: ["cxFocus"] }, { kind: "directive", type: i1.NgSelectA11yDirective, selector: "[cxNgSelectA11y]", inputs: ["cxNgSelectA11y"] }, { kind: "component", type: i1.SortingComponent, selector: "cx-sorting", inputs: ["sortOptions", "ariaControls", "ariaLabel", "selectedOption", "placeholder", "sortLabels"], outputs: ["sortListEvent"] }, { kind: "component", type: i1.PaginationComponent, selector: "cx-pagination", inputs: ["pageRoute", "queryParam", "defaultPage", "pagination"], outputs: ["viewPageEvent"] }, { kind: "directive", type: i3.FeatureLevelDirective, selector: "[cxFeatureLevel]", inputs: ["cxFeatureLevel"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i3.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CustomerListComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-customer-list', template: "<div\n  class=\"cx-asm-customer-list cx-modal-container cx-asm-dialog\"\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"closeModal('Escape clicked')\"\n>\n  <div class=\"cx-modal-content\">\n    <!-- Modal Header -->\n    <ng-container>\n      <div class=\"cx-dialog-header modal-header\">\n        <h2 id=\"asm-customer-list-title\" class=\"title modal-title\">\n          {{ 'asm.customerList.title' | cxTranslate }}\n        </h2>\n        <div id=\"asm-customer-list-desc\" class=\"cx-visually-hidden\">\n          {{ 'asm.customerList.description' | cxTranslate }}\n        </div>\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'!6.1'\">\n          <ng-template *ngTemplateOutlet=\"closeButton\"></ng-template>\n        </ng-container>\n        <ng-container *cxFeatureLevel=\"'6.1'\">\n          <ng-template *ngTemplateOutlet=\"createCustomerButton\"></ng-template>\n        </ng-container>\n      </div>\n      <div\n        class=\"cx-dialog-sub-header modal-header\"\n        [class.tablet-mobile]=\"(breakpoint$ | async) !== BREAKPOINT.md\"\n        *ngIf=\"customerListsPage$ | async as customerListsPage\"\n      >\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'!6.1'\">\n          <ng-template\n            *ngTemplateOutlet=\"\n              groupSelector;\n              context: { customerListsPage: customerListsPage }\n            \"\n          ></ng-template>\n        </ng-container>\n        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'6.1'\">\n          <div\n            class=\"cx-header-select\"\n            [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n          >\n            <ng-template\n              *ngTemplateOutlet=\"\n                groupSelector;\n                context: { customerListsPage: customerListsPage }\n              \"\n            ></ng-template>\n            <ng-template\n              *ngTemplateOutlet=\"\n                total;\n                context: {\n                  customerSearchPage: customerSearchPage$ | async\n                }\n              \"\n            >\n            </ng-template>\n          </div>\n        </ng-container>\n\n        <div\n          class=\"cx-header-actions\"\n          [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n        >\n          <ng-template *ngTemplateOutlet=\"sort\"></ng-template>\n          <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'!6.1'\">\n            <ng-template *ngTemplateOutlet=\"pagination\"></ng-template>\n          </ng-container>\n          <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.1'\">\n            <ng-template *ngTemplateOutlet=\"search\"></ng-template>\n          </ng-container>\n        </div>\n      </div>\n      <!-- Modal Body -->\n      <div class=\"cx-dialog-body modal-body\">\n        <div class=\"cx-dialog-row\">\n          <div class=\"cx-dialog-item\">\n            <div *ngIf=\"listsEmpty\" class=\"cx-error-state\">\n              {{ 'asm.customerList.noLists' | cxTranslate }}\n            </div>\n            <div *ngIf=\"listsError\" class=\"cx-error-state\">\n              {{ 'asm.customerList.listsError' | cxTranslate }}\n            </div>\n            <div *ngIf=\"customerSearchError$ | async\" class=\"cx-error-state\">\n              {{ 'generalErrors.pageFailure' | cxTranslate }}\n            </div>\n            <cx-spinner *ngIf=\"customerSearchLoading$ | async\"></cx-spinner>\n            <div *ngIf=\"customerSearchPage$ | async as customerSearchPage\">\n              <table\n                id=\"asm-cusomer-list-table\"\n                role=\"table\"\n                class=\"table\"\n                *ngIf=\"loaded\"\n              >\n                <caption class=\"cx-visually-hidden\">\n                  {{\n                    'asm.customerList.title' | cxTranslate\n                  }}\n                </caption>\n                <thead *ngIf=\"(breakpoint$ | async) === BREAKPOINT.md\">\n                  <tr role=\"row\">\n                    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                    <ng-container *cxFeatureLevel=\"'!6.1'\">\n                      <th\n                        role=\"columnheader\"\n                        class=\"cx-avatar-cell\"\n                        *ngIf=\"customerListConfig?.showAvatar\"\n                      >\n                        <span class=\"cx-visually-hidden\">\n                          {{\n                            'asm.customerList.tableHeader.customer'\n                              | cxTranslate\n                          }}\n                        </span>\n                      </th>\n                    </ng-container>\n                    <th\n                      role=\"columnheader\"\n                      *ngFor=\"let column of customerListConfig?.columns\"\n                    >\n                      <span\n                        *ngIf=\"\n                          column.headerLocalizationKey &&\n                          column.headerLocalizationKey !== 'hideHeaders'\n                        \"\n                      >\n                        <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                        <ng-container *cxFeatureLevel=\"'!6.1'\">\n                          {{ column.headerLocalizationKey | cxTranslate }}\n                        </ng-container>\n                        <ng-container *cxFeatureLevel=\"'6.1'\">\n                          <!-- TODO:(CXSPA-3090) for next major release replace the translation lable -->\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey ===\n                              'asm.customerList.tableHeader.customer'\n                            \"\n                          >\n                            {{\n                              'asm.customerList.tableHeader.customerName'\n                                | cxTranslate\n                            }}\n                          </ng-container>\n                          <!-- TODO:(CXSPA-3090) for next major release replace the translation lable -->\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey ===\n                              'asm.customerList.tableHeader.email'\n                            \"\n                          >\n                            {{\n                              'asm.customerList.tableHeader.emailId'\n                                | cxTranslate\n                            }}\n                          </ng-container>\n                          <ng-container\n                            *ngIf=\"\n                              column.headerLocalizationKey !==\n                                'asm.customerList.tableHeader.customer' &&\n                              column.headerLocalizationKey !==\n                                'asm.customerList.tableHeader.email'\n                            \"\n                          >\n                            {{ column.headerLocalizationKey | cxTranslate }}\n                          </ng-container>\n                        </ng-container>\n                      </span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    role=\"row\"\n                    *ngFor=\"let customerEntry of customerSearchPage?.entries\"\n                  >\n                    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n                    <ng-container *cxFeatureLevel=\"'!6.1'\">\n                      <td\n                        role=\"cell\"\n                        *ngIf=\"customerListConfig?.showAvatar\"\n                        class=\"cx-avatar-cell\"\n                      >\n                        <div class=\"cx-avatar\">\n                          {{ getBadgeText(customerEntry) }}\n                        </div>\n                      </td>\n                    </ng-container>\n                    <!-- multi columns if desktop -->\n                    <ng-container\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.md\"\n                    >\n                      <td\n                        role=\"cell\"\n                        *ngFor=\"let column of customerListConfig?.columns\"\n                      >\n                        <ng-template\n                          *ngTemplateOutlet=\"\n                            cell;\n                            context: {\n                              customerEntry: customerEntry,\n                              column: column,\n                              showHeader: false\n                            }\n                          \"\n                        ></ng-template>\n                      </td>\n                    </ng-container>\n                    <!-- two column if tablet -->\n                    <ng-container\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.sm\"\n                    >\n                      <td role=\"cell\" class=\"cx-multi-cell\">\n                        <ng-container\n                          *ngFor=\"\n                            let column of customerListConfig?.columns;\n                            let even = even\n                          \"\n                        >\n                          <ng-container *ngIf=\"even\">\n                            <ng-template\n                              *ngTemplateOutlet=\"\n                                cell;\n                                context: {\n                                  customerEntry: customerEntry,\n                                  column: column,\n                                  showHeader: true\n                                }\n                              \"\n                            ></ng-template>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                      <td role=\"cell\" class=\"cx-multi-cell\">\n                        <ng-container\n                          *ngFor=\"\n                            let column of customerListConfig?.columns;\n                            let odd = odd\n                          \"\n                        >\n                          <ng-container *ngIf=\"odd\">\n                            <ng-template\n                              *ngTemplateOutlet=\"\n                                cell;\n                                context: {\n                                  customerEntry: customerEntry,\n                                  column: column,\n                                  showHeader: true\n                                }\n                              \"\n                            ></ng-template>\n                          </ng-container>\n                        </ng-container>\n                      </td>\n                    </ng-container>\n                    <!-- one column if mobile -->\n                    <td\n                      role=\"cell\"\n                      class=\"cx-multi-cell\"\n                      *ngIf=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n                    >\n                      <ng-container\n                        *ngFor=\"let column of customerListConfig?.columns\"\n                      >\n                        <ng-template\n                          *ngTemplateOutlet=\"\n                            cell;\n                            context: {\n                              customerEntry: customerEntry,\n                              column: column,\n                              showHeader: true\n                            }\n                          \"\n                        ></ng-template>\n                      </ng-container>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div\n                class=\"cx-empty-state\"\n                *ngIf=\"!customerSearchPage?.entries.length\"\n              >\n                {{ 'asm.customerList.noCustomers' | cxTranslate }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n      <ng-container *cxFeatureLevel=\"'6.1'\">\n        <!-- Modal Foot -->\n        <div\n          class=\"cx-dialog-sub-header modal-header cx-dialog-foot\"\n          [class.asm-mobile-pagination]=\"\n            (breakpoint$ | async) !== BREAKPOINT.md\n          \"\n          *ngIf=\"customerListsPage$ | async as customerListsPage\"\n        >\n          <div\n            class=\"cx-header-actions\"\n            [class.mobile]=\"(breakpoint$ | async) === BREAKPOINT.xs\"\n          >\n            <div *ngIf=\"customerSearchPage$ | async as customerSearchPage\">\n              <cx-pagination\n                [pagination]=\"customerSearchPage.pagination\"\n                (viewPageEvent)=\"changePage($event)\"\n              ></cx-pagination>\n            </div>\n          </div>\n        </div>\n        <div class=\"cx-dialog-footer modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn cx-asm-customer-list-btn-cancel\"\n            (click)=\"closeModal('Cancel click')\"\n          >\n            {{ 'asm.createCustomerForm.cancel' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n\n<ng-template\n  #cell\n  let-customerEntry=\"customerEntry\"\n  let-column=\"column\"\n  let-showHeader=\"showHeader\"\n>\n  <div\n    class=\"cx-cell-container\"\n    *ngIf=\"column.headerLocalizationKey !== 'hideHeaders'\"\n  >\n    <span class=\"cx-header-text\" *ngIf=\"showHeader\">\n      {{ column.headerLocalizationKey | cxTranslate }}\n    </span>\n\n    <ng-container *ngIf=\"!column.actionType\">\n      <ng-container\n        *ngTemplateOutlet=\"\n          cellContent;\n          context: { column: column, customerEntry: customerEntry }\n        \"\n      ></ng-container>\n    </ng-container>\n\n    <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n    <ng-container *cxFeatureLevel=\"'6.1'\">\n      <div\n        class=\"cx-avatar\"\n        *ngIf=\"\n          customerListConfig?.showAvatar &&\n          column?.actionType === customerListColumnActionType?.START_SESSION\n        \"\n      >\n        <img\n          *ngIf=\"customerEntry?.userAvatar?.url\"\n          [attr.src]=\"\n            occConfig?.backend?.occ?.baseUrl + customerEntry?.userAvatar?.url\n          \"\n          alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n        />\n        <div class=\"cx-avatar-text\" *ngIf=\"!customerEntry?.userAvatar?.url\">\n          {{ getBadgeText(customerEntry) }}\n        </div>\n      </div>\n    </ng-container>\n\n    <button\n      *ngIf=\"column.actionType\"\n      (click)=\"startColumnAction(customerEntry, column.actionType)\"\n      class=\"btn btn-link cx-action-link cx-btn-cell\"\n      [class]=\"column.actionType === 'ACTIVE_CART' ? 'cx-cart' : ''\"\n      [disabled]=\"isRequired(customerEntry, column.actionType)\"\n      [attr.title]=\"\n        column.icon\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n      [attr.aria-label]=\"\n        column.icon\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n    >\n      <ng-container\n        *ngTemplateOutlet=\"\n          cellContent;\n          context: { column: column, customerEntry: customerEntry }\n        \"\n      ></ng-container>\n    </button>\n  </div>\n</ng-template>\n<ng-template #cellContent let-customerEntry=\"customerEntry\" let-column=\"column\">\n  <div>\n    <span *ngIf=\"!column.icon\">{{\n      column.renderer?.(customerEntry) || ''\n    }}</span>\n    <cx-icon\n      *ngIf=\"column.icon\"\n      [attr.title]=\"\n        !column.actionType\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n      [class.cx-action-color]=\"\n        column.actionType && !isRequired(customerEntry, column.actionType)\n      \"\n      [type]=\"column.icon.symbol\"\n      [attr.aria-label]=\"\n        !column.actionType\n          ? (column.icon.captionLocalizationKey ?? column.headerLocalizationKey\n            | cxTranslate)\n          : undefined\n      \"\n    ></cx-icon>\n  </div>\n</ng-template>\n\n<ng-template #search>\n  <div class=\"form-group search-wrapper\">\n    <input\n      [formControl]=\"searchBox\"\n      (keyup)=\"onKey($event)\"\n      type=\"text\"\n      class=\"form-control\"\n      placeholder=\"{{ 'asm.customerList.searchBox' | cxTranslate }}\"\n      attr.aria-label=\"{{ 'asm.customerList.enterSearchBox' | cxTranslate }}\"\n    />\n    <cx-icon\n      [type]=\"iconTypes.SEARCH\"\n      role=\"button\"\n      [attr.aria-label]=\"'storeFinder.searchNearestStores' | cxTranslate\"\n      class=\"search\"\n      (click)=\"searchCustomers()\"\n    ></cx-icon>\n  </div>\n</ng-template>\n\n<ng-template #total let-customerSearchPage=\"customerSearchPage\">\n  <span class=\"cx-total\" *ngIf=\"customerSearchPage?.pagination?.totalResults\">\n    <ng-container *ngIf=\"customerSearchPage?.pagination?.totalResults > 1\">\n      {{\n        'asm.customerList.noOfCustomers'\n          | cxTranslate: { count: customerSearchPage?.pagination?.totalResults }\n      }}\n    </ng-container>\n    <ng-container *ngIf=\"customerSearchPage?.pagination?.totalResults === 1\">\n      {{ 'asm.customerList.oneCustomer' | cxTranslate }}\n    </ng-container>\n  </span>\n</ng-template>\n\n<ng-template #sort>\n  <label>\n    <span class=\"cx-visually-hidden\">{{\n      'asm.customerList.tableSort.sortBy' | cxTranslate\n    }}</span>\n    <cx-sorting\n      class=\"sort-selector\"\n      [sortOptions]=\"sorts\"\n      [sortLabels]=\"getSortLabels() | async\"\n      (sortListEvent)=\"changeSortCode($event)\"\n      [selectedOption]=\"sortCode\"\n      placeholder=\"{{ 'asm.customerList.tableSort.sortBy' | cxTranslate }}\"\n      [cxNgSelectA11y]=\"{\n        ariaLabel: sortCode,\n        ariaControls: 'asm-cusomer-list-table'\n      }\"\n    ></cx-sorting>\n  </label>\n</ng-template>\n\n<ng-template #pagination>\n  <div class=\"cx-pagination-buttons\">\n    <div>\n      {{\n        'asm.customerList.page.page' | cxTranslate: { count: currentPage + 1 }\n      }}\n    </div>\n    <button\n      *ngIf=\"maxPage > 0\"\n      (click)=\"goToPreviousPage()\"\n      class=\"btn btn-link cx-action-link cx-btn-previous\"\n      [disabled]=\"currentPage === 0 || !loaded\"\n    >\n      <cx-icon class=\"previous\" [type]=\"iconTypes.CARET_LEFT\"></cx-icon\n      ><span>{{ 'asm.customerList.page.previous' | cxTranslate }}</span>\n    </button>\n    <button\n      *ngIf=\"maxPage > 0\"\n      (click)=\"goToNextPage()\"\n      class=\"btn btn-link cx-action-link cx-btn-next\"\n      [disabled]=\"currentPage === maxPage || !loaded\"\n    >\n      <span>{{ 'asm.customerList.page.next' | cxTranslate }}</span\n      ><cx-icon class=\"next\" [type]=\"iconTypes.CARET_RIGHT\"></cx-icon>\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #groupSelector let-customerListsPage=\"customerListsPage\">\n  <label>\n    <span class=\"cx-visually-hidden\">{{\n      'asm.customerList.title' | cxTranslate\n    }}</span>\n    <ng-select\n      class=\"customer-list-selector\"\n      [searchable]=\"false\"\n      [clearable]=\"false\"\n      (change)=\"onChangeCustomerGroup()\"\n      [tabIndex]=\"0\"\n      [(ngModel)]=\"selectedUserGroupId\"\n      [items]=\"customerListsPage?.userGroups\"\n      bindLabel=\"name\"\n      bindValue=\"uid\"\n      [cxNgSelectA11y]=\"{\n        ariaLabel: getGroupName(customerListsPage, selectedUserGroupId),\n        ariaControls: 'asm-cusomer-list-table'\n      }\"\n    >\n    </ng-select>\n  </label>\n</ng-template>\n\n<ng-template #closeButton>\n  <button\n    type=\"button\"\n    class=\"close\"\n    attr.aria-label=\"{{ 'common.close' | cxTranslate }}\"\n    (click)=\"closeModal('Cross click')\"\n  >\n    <span aria-hidden=\"true\">\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </span>\n  </button>\n</ng-template>\n\n<ng-template #createCustomerButton>\n  <button\n    type=\"button\"\n    class=\"btn cx-asm-create-customer-btn\"\n    (click)=\"createCustomer()\"\n  >\n    <cx-icon [type]=\"iconTypes.USER_PLUS\"></cx-icon>\n    <span>{{ 'asm.customerList.createCustomer' | cxTranslate }}</span>\n  </button>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.LaunchDialogService }, { type: i1.BreakpointService }, { type: i2.AsmConfig }, { type: i3.TranslationService }, { type: i2.AsmCustomerListFacade }, { type: i3.FeatureConfigService, decorators: [{
                    type: Optional
                }] }, { type: i3.OccConfig, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { addNewCustomerLink: [{
                type: ViewChild,
                args: ['addNewCustomerLink']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXItbGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2NvbXBvbmVudHMvY3VzdG9tZXItbGlzdC9jdXN0b21lci1saXN0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9hc20vY29tcG9uZW50cy9jdXN0b21lci1saXN0L2N1c3RvbWVyLWxpc3QuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFDTCxTQUFTLEVBSVQsUUFBUSxFQUNSLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxPQUFPLEVBR0wsNEJBQTRCLEdBSTdCLE1BQU0scUJBQXFCLENBQUM7QUFRN0IsT0FBTyxFQUNMLFVBQVUsRUFHVixTQUFTLEdBR1YsTUFBTSx1QkFBdUIsQ0FBQztBQUMvQixPQUFPLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBYyxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7QUFPaEUsTUFBTSxPQUFPLHFCQUFxQjtJQStFaEMsWUFDWSxtQkFBd0MsRUFDeEMsaUJBQW9DLEVBQ3BDLFNBQW9CLEVBQ3BCLFdBQStCLEVBQy9CLHFCQUE0QztJQUN0RCxnRUFBZ0U7SUFDMUMsYUFBb0MsRUFDcEMsU0FBcUI7UUFQakMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUN4QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFDcEIsZ0JBQVcsR0FBWCxXQUFXLENBQW9CO1FBQy9CLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBdUI7UUFFaEMsa0JBQWEsR0FBYixhQUFhLENBQXVCO1FBQ3BDLGNBQVMsR0FBVCxTQUFTLENBQVk7UUF0Rm5DLHNCQUFpQixHQUFHLENBQUMsQ0FBQztRQUVoQyxnQkFBVyxHQUFnQjtZQUN6QixJQUFJLEVBQUUsSUFBSTtZQUNWLEtBQUssRUFBRSxJQUFJO1lBQ1gsU0FBUyxFQUFFLHdCQUF3QjtZQUNuQyxhQUFhLEVBQUUsSUFBSTtTQUNwQixDQUFDO1FBRUYsY0FBUyxHQUFHLFNBQVMsQ0FBQztRQUV0QixlQUFVLEdBQUcsVUFBVSxDQUFDO1FBVXhCLGdCQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRWhCLFlBQU8sR0FBRyxDQUFDLENBQUM7UUFFWixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBZ0JmLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFFbkIsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUVuQiw2QkFBd0IsR0FBRyxLQUFLLENBQUM7UUFFakMsaUNBQTRCLEdBQUcsNEJBQTRCLENBQUM7UUFFNUQsY0FBUyxHQUF1QixJQUFJLGtCQUFrQixFQUFFLENBQUM7UUFFL0MsYUFBUSxHQUFpQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBcUNwRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMxQyxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxRQUFRO1lBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsWUFBWSxFQUFFLFFBQVEsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUM7UUFDdkUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFLFlBQVksQ0FBQztRQUU1RCxJQUFJLENBQUMsa0JBQWtCO1lBQ3JCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLElBQUksQ0FDckQsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUNqRCxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtnQkFDWixJQUFJLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sS0FBSyxDQUFDLEVBQUU7b0JBQ3pDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO29CQUN2QixPQUFPLFNBQVMsQ0FBQztpQkFDbEI7cUJBQU07b0JBQ0wsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDO2lCQUNuQjtZQUNILENBQUMsQ0FBQyxFQUNGLG9CQUFvQixFQUFFLEVBQ3RCLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO2dCQUNiLGdFQUFnRTtnQkFDaEUsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtvQkFDN0IsSUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUM7b0JBQ3hELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO29CQUNsQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7aUJBQ3ZCO1lBQ0gsQ0FBQyxDQUFDLENBQ0gsSUFBSSxLQUFLLENBQUM7UUFFYixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLHFCQUFxQjthQUNyRCw0Q0FBNEMsRUFBRTthQUM5QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQ3JCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxnQ0FBZ0MsRUFBRSxDQUM5RCxDQUFDO1FBRUYsSUFBSSxDQUFDLG9CQUFvQjtZQUN2QixJQUFJLENBQUMscUJBQXFCLENBQUMsMENBQTBDLEVBQUUsQ0FBQztRQUUxRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLHFCQUFxQjthQUNsRCxxQ0FBcUMsRUFBRTthQUN2QyxJQUFJLENBQ0gsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDYixJQUFJLE1BQU0sRUFBRSxLQUFLLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztnQkFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQzthQUN6QztZQUNELElBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDMUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLFdBQVcsSUFBSSxDQUFDLENBQUM7YUFDcEQ7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQzthQUNyQztRQUNILENBQUMsQ0FBQyxDQUNILENBQUM7SUFDTixDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFZO1FBQ3JCLE1BQU0sT0FBTyxHQUEwQjtZQUNyQyxjQUFjLEVBQUUsSUFBSSxDQUFDLG1CQUFtQjtZQUN4QyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDdkIsV0FBVyxFQUFFLElBQUk7WUFDakIsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRO1NBQ3BCLENBQUM7UUFDRixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFO1lBQ3pCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7U0FDdEM7UUFFRCxJQUFJLENBQUMscUJBQXFCLENBQUMsMkJBQTJCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELGNBQWM7UUFDWixxRUFBcUU7UUFDckUsSUFBSSxDQUFDLHdCQUF3QjtZQUMzQixDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQztnQkFDN0MsSUFBSSxDQUFDLG1CQUFtQixLQUFLLGlCQUFpQixDQUFDO1FBQ2pELElBQUksSUFBSSxDQUFDLG1CQUFtQixFQUFFO1lBQzVCLE1BQU0sT0FBTyxHQUEwQjtnQkFDckMsY0FBYyxFQUFFLElBQUksQ0FBQyxtQkFBbUI7Z0JBQ3hDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtnQkFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO2FBQzlCLENBQUM7WUFDRixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2pCLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzthQUM5QjtZQUNELElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUU7Z0JBQ3pCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7YUFDdEM7WUFFRCxJQUFJLENBQUMscUJBQXFCLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQztZQUU5RCxJQUFJLENBQUMscUJBQXFCLENBQUMsMkJBQTJCLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDakU7UUFDRCxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBRU8seUJBQXlCO1FBQy9CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLElBQUksRUFBRSxDQUFDO1FBRXZELEtBQUssTUFBTSxNQUFNLElBQUksT0FBTyxFQUFFO1lBQzVCLElBQ0UsTUFBTSxDQUFDLHFCQUFxQjtnQkFDMUIsc0NBQXNDO2dCQUN4QyxNQUFNLENBQUMscUJBQXFCLEtBQUssYUFBYSxFQUM5QztnQkFDQSxNQUFNLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLHdCQUF3QjtvQkFDMUQsQ0FBQyxDQUFDLHNDQUFzQztvQkFDeEMsQ0FBQyxDQUFDLGFBQWEsQ0FBQzthQUNuQjtZQUNELElBQ0UsTUFBTSxDQUFDLHFCQUFxQixLQUFLLG1DQUFtQyxFQUNwRTtnQkFDQSxNQUFNLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDO29CQUMvRCxDQUFDLENBQUMsTUFBTSxDQUFDLHFCQUFxQjtvQkFDOUIsQ0FBQyxDQUFDLGFBQWEsQ0FBQzthQUNuQjtTQUNGO0lBQ0gsQ0FBQztJQUVELHFCQUFxQjtRQUNuQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELFlBQVksQ0FDVixpQkFBb0MsRUFDcEMsRUFBc0I7UUFFdEIsT0FBTyxDQUNMLGlCQUFpQixFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDO1lBQ3RFLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FDZixDQUFDO0lBQ0osQ0FBQztJQUVELFlBQVksQ0FBQyxhQUFtQjtRQUM5QixPQUFPLENBQ0wsQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDMUMsQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FDMUMsQ0FBQztJQUNKLENBQUM7SUFFRCxpQkFBaUIsQ0FDZixhQUFtQixFQUNuQixNQUFvQztRQUVwQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsYUFBYSxDQUFDO1FBQ3RDLE1BQU0sVUFBVSxHQUF1QjtZQUNyQyxVQUFVLEVBQUUsTUFBTTtZQUNsQixZQUFZLEVBQUUsYUFBYTtTQUM1QixDQUFDO1FBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQW9CO1FBQ3hCLElBQUksS0FBSyxDQUFDLEdBQUcsS0FBSyxPQUFPLEVBQUU7WUFDekIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQztJQUNELGVBQWU7UUFDYixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELFVBQVUsQ0FBQyxhQUFtQixFQUFFLElBQVk7UUFDMUMsSUFDRSxJQUFJLEtBQUssNEJBQTRCLENBQUMsV0FBVztZQUNqRCxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQ3pCO1lBQ0EsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUNELElBQ0UsSUFBSSxLQUFLLDRCQUE0QixDQUFDLGFBQWE7WUFDbkQsYUFBYSxDQUFDLFFBQVEsS0FBSyxJQUFJLEVBQy9CO1lBQ0EsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELGNBQWMsQ0FBQyxRQUFnQjtRQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELFlBQVk7UUFDVixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNwQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDakM7YUFBTTtZQUNMLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDZixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN2QjtTQUNGO0lBQ0gsQ0FBQztJQUVELGdCQUFnQjtRQUNkLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLEVBQUU7WUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7U0FDdEI7YUFBTTtZQUNMLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDZixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN2QjtTQUNGO0lBQ0gsQ0FBQztJQUVELFVBQVUsQ0FBQyxNQUFZO1FBQ3JCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELGFBQWE7UUFRWCxPQUFPLGFBQWEsQ0FBQztZQUNuQixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxtQ0FBbUMsQ0FBQztZQUMvRCxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQztZQUNsRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQztZQUNuRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQztZQUNsRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQztZQUNuRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQywyQ0FBMkMsQ0FBQztZQUN2RSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyw0Q0FBNEMsQ0FBQztZQUN4RSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxtQ0FBbUMsQ0FBQztZQUMvRCxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQztTQUNwRSxDQUFDLENBQUMsSUFBSSxDQUNMLEdBQUcsQ0FDRCxDQUFDLENBQ0MsVUFBVSxFQUNWLGFBQWEsRUFDYixjQUFjLEVBQ2QsYUFBYSxFQUNiLGNBQWMsRUFDZCxrQkFBa0IsRUFDbEIsbUJBQW1CLEVBQ25CLFVBQVUsRUFDVixjQUFjLEVBQ2YsRUFBRSxFQUFFO1lBQ0gsT0FBTztnQkFDTCxNQUFNLEVBQUUsVUFBVTtnQkFDbEIsU0FBUyxFQUFFLGFBQWE7Z0JBQ3hCLFVBQVUsRUFBRSxjQUFjO2dCQUMxQixjQUFjLEVBQUUsa0JBQWtCO2dCQUNsQyxlQUFlLEVBQUUsbUJBQW1CO2dCQUNwQyxTQUFTLEVBQUUsYUFBYTtnQkFDeEIsVUFBVSxFQUFFLGNBQWM7Z0JBQzFCLE1BQU0sRUFBRSxVQUFVO2dCQUNsQixVQUFVLEVBQUUsY0FBYzthQUMzQixDQUFDO1FBQ0osQ0FBQyxDQUNGLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRCxjQUFjO1FBQ1osSUFBSSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBRTlELElBQUksQ0FBQyxtQkFBbUIsRUFBRSxzQkFBc0IsMEVBRTlDLElBQUksQ0FBQyxrQkFBa0IsQ0FDeEIsQ0FBQztJQUNKLENBQUM7SUFFTyxhQUFhO1FBQ25CLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQzVDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFO1lBQ2pCLElBQUksVUFBVSxLQUFLLFVBQVUsQ0FBQyxFQUFFLElBQUksVUFBVSxLQUFLLFVBQVUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2hFLFVBQVUsR0FBRyxVQUFVLENBQUMsRUFBRSxDQUFDO2FBQzVCO1lBQ0QsT0FBTyxVQUFVLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7O2tIQW5YVSxxQkFBcUI7c0dBQXJCLHFCQUFxQixrTEM5Q2xDLDRvcEJBNGlCQTsyRkQ5ZmEscUJBQXFCO2tCQUpqQyxTQUFTOytCQUNFLGtCQUFrQjs7MEJBeUZ6QixRQUFROzswQkFDUixRQUFROzRDQWpDc0Isa0JBQWtCO3NCQUFsRCxTQUFTO3VCQUFDLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE9wdGlvbmFsLFxuICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVW50eXBlZEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHtcbiAgQXNtQ29uZmlnLFxuICBBc21DdXN0b21lckxpc3RGYWNhZGUsXG4gIEN1c3RvbWVyTGlzdENvbHVtbkFjdGlvblR5cGUsXG4gIEN1c3RvbWVyTGlzdHNQYWdlLFxuICBDdXN0b21lclNlYXJjaE9wdGlvbnMsXG4gIEN1c3RvbWVyU2VhcmNoUGFnZSxcbn0gZnJvbSAnQHNwYXJ0YWN1cy9hc20vcm9vdCc7XG5pbXBvcnQge1xuICBTb3J0TW9kZWwsXG4gIFRyYW5zbGF0aW9uU2VydmljZSxcbiAgVXNlcixcbiAgT2NjQ29uZmlnLFxuICBGZWF0dXJlQ29uZmlnU2VydmljZSxcbn0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7XG4gIEJSRUFLUE9JTlQsXG4gIEJyZWFrcG9pbnRTZXJ2aWNlLFxuICBGb2N1c0NvbmZpZyxcbiAgSUNPTl9UWVBFLFxuICBMQVVOQ0hfQ0FMTEVSLFxuICBMYXVuY2hEaWFsb2dTZXJ2aWNlLFxufSBmcm9tICdAc3BhcnRhY3VzL3N0b3JlZnJvbnQnO1xuaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgTkVWRVIsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGlzdGluY3RVbnRpbENoYW5nZWQsIG1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ3VzdG9tZXJMaXN0QWN0aW9uIH0gZnJvbSAnLi9jdXN0b21lci1saXN0Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtY3VzdG9tZXItbGlzdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9jdXN0b21lci1saXN0LmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBwcm90ZWN0ZWQgREVGQVVMVF9QQUdFX1NJWkUgPSA1O1xuXG4gIGZvY3VzQ29uZmlnOiBGb2N1c0NvbmZpZyA9IHtcbiAgICB0cmFwOiB0cnVlLFxuICAgIGJsb2NrOiB0cnVlLFxuICAgIGF1dG9mb2N1czogJ2N1c3RvbWVyLWxpc3Qtc2VsZWN0b3InLFxuICAgIGZvY3VzT25Fc2NhcGU6IHRydWUsXG4gIH07XG5cbiAgaWNvblR5cGVzID0gSUNPTl9UWVBFO1xuXG4gIEJSRUFLUE9JTlQgPSBCUkVBS1BPSU5UO1xuXG4gIHNlbGVjdGVkVXNlckdyb3VwSWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICBjdXN0b21lclNlYXJjaFBhZ2UkOiBPYnNlcnZhYmxlPEN1c3RvbWVyU2VhcmNoUGFnZSB8IHVuZGVmaW5lZD47XG5cbiAgY3VzdG9tZXJMaXN0c1BhZ2UkOiBPYnNlcnZhYmxlPEN1c3RvbWVyTGlzdHNQYWdlIHwgdW5kZWZpbmVkPjtcblxuICBzZWxlY3RlZEN1c3RvbWVyOiBVc2VyO1xuXG4gIGN1cnJlbnRQYWdlID0gMDtcblxuICBtYXhQYWdlID0gMDtcblxuICBsb2FkZWQgPSBmYWxzZTtcblxuICBzb3J0czogU29ydE1vZGVsW10gfCBudWxsO1xuXG4gIHNvcnRDb2RlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgYnJlYWtwb2ludCQ6IE9ic2VydmFibGU8QlJFQUtQT0lOVD47XG5cbiAgY3VzdG9tZXJMaXN0Q29uZmlnOiBSZXF1aXJlZDxBc21Db25maWc+Wydhc20nXVsnY3VzdG9tZXJMaXN0J107XG5cbiAgY3VzdG9tZXJTZWFyY2hMb2FkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICBjdXN0b21lclNlYXJjaEVycm9yJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICBwYWdlU2l6ZTogbnVtYmVyO1xuXG4gIGxpc3RzRXJyb3IgPSBmYWxzZTtcblxuICBsaXN0c0VtcHR5ID0gZmFsc2U7XG5cbiAgZW5hYmxlQXNtQjJiQ3VzdG9tZXJMaXN0ID0gZmFsc2U7XG5cbiAgY3VzdG9tZXJMaXN0Q29sdW1uQWN0aW9uVHlwZSA9IEN1c3RvbWVyTGlzdENvbHVtbkFjdGlvblR5cGU7XG5cbiAgc2VhcmNoQm94OiBVbnR5cGVkRm9ybUNvbnRyb2wgPSBuZXcgVW50eXBlZEZvcm1Db250cm9sKCk7XG5cbiAgcHJvdGVjdGVkIHRlYXJkb3duOiBTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG5cbiAgQFZpZXdDaGlsZCgnYWRkTmV3Q3VzdG9tZXJMaW5rJykgYWRkTmV3Q3VzdG9tZXJMaW5rOiBFbGVtZW50UmVmO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGxhdW5jaERpYWxvZ1NlcnZpY2U6IExhdW5jaERpYWxvZ1NlcnZpY2UsXG4gICAgYnJlYWtwb2ludFNlcnZpY2U6IEJyZWFrcG9pbnRTZXJ2aWNlLFxuICAgIGFzbUNvbmZpZzogQXNtQ29uZmlnLFxuICAgIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgYXNtQ3VzdG9tZXJMaXN0RmFjYWRlOiBBc21DdXN0b21lckxpc3RGYWNhZGUsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmlmaWVkLXNpZ25hdHVyZXNcbiAgICBmZWF0dXJlQ29uZmlnPzogRmVhdHVyZUNvbmZpZ1NlcnZpY2UsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmlmaWVkLXNpZ25hdHVyZXNcbiAgICBvY2NDb25maWc/OiBPY2NDb25maWdcbiAgKTtcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNy4wXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBsYXVuY2hEaWFsb2dTZXJ2aWNlOiBMYXVuY2hEaWFsb2dTZXJ2aWNlLFxuICAgIGJyZWFrcG9pbnRTZXJ2aWNlOiBCcmVha3BvaW50U2VydmljZSxcbiAgICBhc21Db25maWc6IEFzbUNvbmZpZyxcbiAgICB0cmFuc2xhdGlvbjogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgIGFzbUN1c3RvbWVyTGlzdEZhY2FkZTogQXNtQ3VzdG9tZXJMaXN0RmFjYWRlXG4gICk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGxhdW5jaERpYWxvZ1NlcnZpY2U6IExhdW5jaERpYWxvZ1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGJyZWFrcG9pbnRTZXJ2aWNlOiBCcmVha3BvaW50U2VydmljZSxcbiAgICBwcm90ZWN0ZWQgYXNtQ29uZmlnOiBBc21Db25maWcsXG4gICAgcHJvdGVjdGVkIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFzbUN1c3RvbWVyTGlzdEZhY2FkZTogQXNtQ3VzdG9tZXJMaXN0RmFjYWRlLFxuICAgIC8vIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWxcbiAgICBAT3B0aW9uYWwoKSBwcm90ZWN0ZWQgZmVhdHVyZUNvbmZpZz86IEZlYXR1cmVDb25maWdTZXJ2aWNlLFxuICAgIEBPcHRpb25hbCgpIHByb3RlY3RlZCBvY2NDb25maWc/OiBPY2NDb25maWdcbiAgKSB7XG4gICAgdGhpcy5icmVha3BvaW50JCA9IHRoaXMuZ2V0QnJlYWtwb2ludCgpO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5wYWdlU2l6ZSA9XG4gICAgICB0aGlzLmFzbUNvbmZpZy5hc20/LmN1c3RvbWVyTGlzdD8ucGFnZVNpemUgPz8gdGhpcy5ERUZBVUxUX1BBR0VfU0laRTtcbiAgICB0aGlzLmN1c3RvbWVyTGlzdENvbmZpZyA9IHRoaXMuYXNtQ29uZmlnPy5hc20/LmN1c3RvbWVyTGlzdDtcblxuICAgIHRoaXMuY3VzdG9tZXJMaXN0c1BhZ2UkID1cbiAgICAgIHRoaXMuYXNtQ3VzdG9tZXJMaXN0RmFjYWRlLmdldEN1c3RvbWVyTGlzdHNTdGF0ZSgpLnBpcGUoXG4gICAgICAgIHRhcCgoc3RhdGUpID0+ICh0aGlzLmxpc3RzRXJyb3IgPSAhIXN0YXRlLmVycm9yKSksXG4gICAgICAgIG1hcCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBpZiAoc3RhdGU/LmRhdGE/LnVzZXJHcm91cHM/Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5saXN0c0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgIHRhcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgLy8gc2V0IHRoZSBmaXJzdCB2YWx1ZSBvZiB0aGlzLmN1c3RvbWVyTGlzdHNQYWdlJCB0byBiZSBzZWxlY3RlZFxuICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFVzZXJHcm91cElkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlckdyb3VwSWQgPSByZXN1bHQ/LnVzZXJHcm91cHM/LlswXT8udWlkO1xuICAgICAgICAgICAgdGhpcy5zb3J0cyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZldGNoQ3VzdG9tZXJzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSA/PyBORVZFUjtcblxuICAgIHRoaXMuY3VzdG9tZXJTZWFyY2hMb2FkaW5nJCA9IHRoaXMuYXNtQ3VzdG9tZXJMaXN0RmFjYWRlXG4gICAgICAuZ2V0Q3VzdG9tZXJMaXN0Q3VzdG9tZXJzU2VhcmNoUmVzdWx0c0xvYWRpbmcoKVxuICAgICAgLnBpcGUodGFwKChsb2FkaW5nKSA9PiAodGhpcy5sb2FkZWQgPSAhbG9hZGluZykpKTtcbiAgICB0aGlzLnRlYXJkb3duLmFkZCh0aGlzLmN1c3RvbWVyU2VhcmNoTG9hZGluZyQuc3Vic2NyaWJlKCkpO1xuICAgIHRoaXMudGVhcmRvd24uYWRkKCgpID0+XG4gICAgICB0aGlzLmFzbUN1c3RvbWVyTGlzdEZhY2FkZS5jdXN0b21lckxpc3RDdXN0b21lcnNTZWFyY2hSZXNldCgpXG4gICAgKTtcblxuICAgIHRoaXMuY3VzdG9tZXJTZWFyY2hFcnJvciQgPVxuICAgICAgdGhpcy5hc21DdXN0b21lckxpc3RGYWNhZGUuZ2V0Q3VzdG9tZXJMaXN0Q3VzdG9tZXJzU2VhcmNoUmVzdWx0c0Vycm9yKCk7XG5cbiAgICB0aGlzLmN1c3RvbWVyU2VhcmNoUGFnZSQgPSB0aGlzLmFzbUN1c3RvbWVyTGlzdEZhY2FkZVxuICAgICAgLmdldEN1c3RvbWVyTGlzdEN1c3RvbWVyc1NlYXJjaFJlc3VsdHMoKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRhcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdD8uc29ydHMpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydHMgPSByZXN1bHQuc29ydHM7XG4gICAgICAgICAgICB0aGlzLnNvcnRDb2RlID0gcmVzdWx0LnBhZ2luYXRpb24/LnNvcnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHQ/LmVudHJpZXMubGVuZ3RoIDwgdGhpcy5wYWdlU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5tYXhQYWdlID0gcmVzdWx0LnBhZ2luYXRpb24/LmN1cnJlbnRQYWdlID8/IDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWF4UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLnRlYXJkb3duLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBjaGFuZ2VQYWdlKHBhZ2U6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG9wdGlvbnM6IEN1c3RvbWVyU2VhcmNoT3B0aW9ucyA9IHtcbiAgICAgIGN1c3RvbWVyTGlzdElkOiB0aGlzLnNlbGVjdGVkVXNlckdyb3VwSWQsXG4gICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcbiAgICAgIGN1cnJlbnRQYWdlOiBwYWdlLFxuICAgICAgc29ydDogdGhpcy5zb3J0Q29kZSxcbiAgICB9O1xuICAgIGlmICh0aGlzLnNlYXJjaEJveD8udmFsdWUpIHtcbiAgICAgIG9wdGlvbnMucXVlcnkgPSB0aGlzLnNlYXJjaEJveC52YWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmFzbUN1c3RvbWVyTGlzdEZhY2FkZS5jdXN0b21lckxpc3RDdXN0b21lcnNTZWFyY2gob3B0aW9ucyk7XG4gIH1cblxuICBmZXRjaEN1c3RvbWVycygpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiAoQ1hTUEEtMjcyMiBmb3IgcmVtb3ZlICkgUmVtb3ZlIEZlYXR1cmVDb25maWdTZXJ2aWNlIGZvciA3LjBcbiAgICB0aGlzLmVuYWJsZUFzbUIyYkN1c3RvbWVyTGlzdCA9XG4gICAgICAodGhpcy5mZWF0dXJlQ29uZmlnPy5pc0xldmVsKCc2LjEnKSA/PyBmYWxzZSkgJiZcbiAgICAgIHRoaXMuc2VsZWN0ZWRVc2VyR3JvdXBJZCA9PT0gJ2IyYkN1c3RvbWVyTGlzdCc7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRVc2VyR3JvdXBJZCkge1xuICAgICAgY29uc3Qgb3B0aW9uczogQ3VzdG9tZXJTZWFyY2hPcHRpb25zID0ge1xuICAgICAgICBjdXN0b21lckxpc3RJZDogdGhpcy5zZWxlY3RlZFVzZXJHcm91cElkLFxuICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuc29ydENvZGUpIHtcbiAgICAgICAgb3B0aW9ucy5zb3J0ID0gdGhpcy5zb3J0Q29kZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNlYXJjaEJveD8udmFsdWUpIHtcbiAgICAgICAgb3B0aW9ucy5xdWVyeSA9IHRoaXMuc2VhcmNoQm94LnZhbHVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFzbUN1c3RvbWVyTGlzdEZhY2FkZS5jdXN0b21lckxpc3RDdXN0b21lcnNTZWFyY2hSZXNldCgpO1xuXG4gICAgICB0aGlzLmFzbUN1c3RvbWVyTGlzdEZhY2FkZS5jdXN0b21lckxpc3RDdXN0b21lcnNTZWFyY2gob3B0aW9ucyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ3VzdG9tZXJMaXN0Q29sdW1ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDdXN0b21lckxpc3RDb2x1bW5zKCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLmN1c3RvbWVyTGlzdENvbmZpZz8uY29sdW1ucyB8fCBbXTtcblxuICAgIGZvciAoY29uc3QgY29sdW1uIG9mIGNvbHVtbnMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSA9PT1cbiAgICAgICAgICAnYXNtLmN1c3RvbWVyTGlzdC50YWJsZUhlYWRlci5hY2NvdW50JyB8fFxuICAgICAgICBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5ID09PSAnaGlkZUhlYWRlcnMnXG4gICAgICApIHtcbiAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSA9IHRoaXMuZW5hYmxlQXNtQjJiQ3VzdG9tZXJMaXN0XG4gICAgICAgICAgPyAnYXNtLmN1c3RvbWVyTGlzdC50YWJsZUhlYWRlci5hY2NvdW50J1xuICAgICAgICAgIDogJ2hpZGVIZWFkZXJzJztcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSA9PT0gJ2FzbS5jdXN0b21lckxpc3QudGFibGVIZWFkZXIuY2FydCdcbiAgICAgICkge1xuICAgICAgICBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5ID0gdGhpcy5mZWF0dXJlQ29uZmlnPy5pc0xldmVsKCc2LjEnKVxuICAgICAgICAgID8gY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleVxuICAgICAgICAgIDogJ2hpZGVIZWFkZXJzJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkNoYW5nZUN1c3RvbWVyR3JvdXAoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IDA7XG4gICAgdGhpcy5zb3J0cyA9IG51bGw7XG4gICAgdGhpcy5zb3J0Q29kZSA9ICcnO1xuICAgIHRoaXMuZmV0Y2hDdXN0b21lcnMoKTtcbiAgfVxuXG4gIGdldEdyb3VwTmFtZShcbiAgICBjdXN0b21lckxpc3RzUGFnZTogQ3VzdG9tZXJMaXN0c1BhZ2UsXG4gICAgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZFxuICApOiBzdHJpbmcge1xuICAgIHJldHVybiAoXG4gICAgICBjdXN0b21lckxpc3RzUGFnZT8udXNlckdyb3Vwcz8uZmluZCgodXNlckdyb3VwKSA9PiB1c2VyR3JvdXAudWlkID09PSBpZClcbiAgICAgICAgPy5uYW1lID8/ICcnXG4gICAgKTtcbiAgfVxuXG4gIGdldEJhZGdlVGV4dChjdXN0b21lckVudHJ5OiBVc2VyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKFxuICAgICAgKGN1c3RvbWVyRW50cnkuZmlyc3ROYW1lPy5jaGFyQXQoMCkgPz8gJycpICtcbiAgICAgIChjdXN0b21lckVudHJ5Lmxhc3ROYW1lPy5jaGFyQXQoMCkgPz8gJycpXG4gICAgKTtcbiAgfVxuXG4gIHN0YXJ0Q29sdW1uQWN0aW9uKFxuICAgIGN1c3RvbWVyRW50cnk6IFVzZXIsXG4gICAgYWN0aW9uOiBDdXN0b21lckxpc3RDb2x1bW5BY3Rpb25UeXBlXG4gICk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRDdXN0b21lciA9IGN1c3RvbWVyRW50cnk7XG4gICAgY29uc3QgY2xvc2VWYWx1ZTogQ3VzdG9tZXJMaXN0QWN0aW9uID0ge1xuICAgICAgYWN0aW9uVHlwZTogYWN0aW9uLFxuICAgICAgc2VsZWN0ZWRVc2VyOiBjdXN0b21lckVudHJ5LFxuICAgIH07XG4gICAgdGhpcy5jbG9zZU1vZGFsKGNsb3NlVmFsdWUpO1xuICB9XG5cbiAgb25LZXkoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICB0aGlzLnNlYXJjaEN1c3RvbWVycygpO1xuICAgIH1cbiAgfVxuICBzZWFyY2hDdXN0b21lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IDA7XG4gICAgdGhpcy5mZXRjaEN1c3RvbWVycygpO1xuICB9XG5cbiAgaXNSZXF1aXJlZChjdXN0b21lckVudHJ5OiBVc2VyLCB0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoXG4gICAgICB0eXBlID09PSBDdXN0b21lckxpc3RDb2x1bW5BY3Rpb25UeXBlLkFDVElWRV9DQVJUICYmXG4gICAgICAhY3VzdG9tZXJFbnRyeS5sYXN0Q2FydElkXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZSA9PT0gQ3VzdG9tZXJMaXN0Q29sdW1uQWN0aW9uVHlwZS5PUkRFUl9ISVNUT1JZICYmXG4gICAgICBjdXN0b21lckVudHJ5Lmhhc09yZGVyICE9PSB0cnVlXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2hhbmdlU29ydENvZGUoc29ydENvZGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc29ydENvZGUgPSBzb3J0Q29kZTtcbiAgICB0aGlzLmZldGNoQ3VzdG9tZXJzKCk7XG4gIH1cblxuICBnb1RvTmV4dFBhZ2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPj0gdGhpcy5tYXhQYWdlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdGhpcy5tYXhQYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5sb2FkZWQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrO1xuICAgICAgICB0aGlzLmZldGNoQ3VzdG9tZXJzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ29Ub1ByZXZpb3VzUGFnZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8PSAwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMubG9hZGVkKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UtLTtcbiAgICAgICAgdGhpcy5mZXRjaEN1c3RvbWVycygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlTW9kYWwocmVhc29uPzogYW55KTogdm9pZCB7XG4gICAgdGhpcy5sYXVuY2hEaWFsb2dTZXJ2aWNlLmNsb3NlRGlhbG9nKHJlYXNvbik7XG4gIH1cblxuICBnZXRTb3J0TGFiZWxzKCk6IE9ic2VydmFibGU8e1xuICAgIGJ5TmFtZUFzYzogc3RyaW5nO1xuICAgIGJ5TmFtZURlc2M6IHN0cmluZztcbiAgICBieU9yZGVyRGF0ZUFzYzogc3RyaW5nO1xuICAgIGJ5T3JkZXJEYXRlRGVzYzogc3RyaW5nO1xuICAgIGJ5RGF0ZUFzYzogc3RyaW5nO1xuICAgIGJ5RGF0ZURlc2M6IHN0cmluZztcbiAgfT4ge1xuICAgIHJldHVybiBjb21iaW5lTGF0ZXN0KFtcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdhc20uY3VzdG9tZXJMaXN0LnRhYmxlU29ydC5ieU5hbWUnKSxcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdhc20uY3VzdG9tZXJMaXN0LnRhYmxlU29ydC5ieU5hbWVBc2MnKSxcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdhc20uY3VzdG9tZXJMaXN0LnRhYmxlU29ydC5ieU5hbWVEZXNjJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnYXNtLmN1c3RvbWVyTGlzdC50YWJsZVNvcnQuYnlEYXRlQXNjJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnYXNtLmN1c3RvbWVyTGlzdC50YWJsZVNvcnQuYnlEYXRlRGVzYycpLFxuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ2FzbS5jdXN0b21lckxpc3QudGFibGVTb3J0LmJ5T3JkZXJEYXRlQXNjJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnYXNtLmN1c3RvbWVyTGlzdC50YWJsZVNvcnQuYnlPcmRlckRhdGVEZXNjJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnYXNtLmN1c3RvbWVyTGlzdC50YWJsZVNvcnQuYnlVbml0JyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnYXNtLmN1c3RvbWVyTGlzdC50YWJsZVNvcnQuYnlVbml0RGVzYycpLFxuICAgIF0pLnBpcGUoXG4gICAgICBtYXAoXG4gICAgICAgIChbXG4gICAgICAgICAgdGV4dEJ5TmFtZSxcbiAgICAgICAgICB0ZXh0QnlOYW1lQXNjLFxuICAgICAgICAgIHRleHRCeU5hbWVEZXNjLFxuICAgICAgICAgIHRleHRCeURhdGVBc2MsXG4gICAgICAgICAgdGV4dEJ5RGF0ZURlc2MsXG4gICAgICAgICAgdGV4dEJ5T3JkZXJEYXRlQXNjLFxuICAgICAgICAgIHRleHRCeU9yZGVyRGF0ZURlc2MsXG4gICAgICAgICAgdGV4dEJ5VW5pdCxcbiAgICAgICAgICB0ZXh0QnlVbml0RGVzYyxcbiAgICAgICAgXSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBieU5hbWU6IHRleHRCeU5hbWUsXG4gICAgICAgICAgICBieU5hbWVBc2M6IHRleHRCeU5hbWVBc2MsXG4gICAgICAgICAgICBieU5hbWVEZXNjOiB0ZXh0QnlOYW1lRGVzYyxcbiAgICAgICAgICAgIGJ5T3JkZXJEYXRlQXNjOiB0ZXh0QnlPcmRlckRhdGVBc2MsXG4gICAgICAgICAgICBieU9yZGVyRGF0ZURlc2M6IHRleHRCeU9yZGVyRGF0ZURlc2MsXG4gICAgICAgICAgICBieURhdGVBc2M6IHRleHRCeURhdGVBc2MsXG4gICAgICAgICAgICBieURhdGVEZXNjOiB0ZXh0QnlEYXRlRGVzYyxcbiAgICAgICAgICAgIGJ5VW5pdDogdGV4dEJ5VW5pdCxcbiAgICAgICAgICAgIGJ5VW5pdERlc2M6IHRleHRCeVVuaXREZXNjLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlQ3VzdG9tZXIoKTogdm9pZCB7XG4gICAgdGhpcy5sYXVuY2hEaWFsb2dTZXJ2aWNlLmNsb3NlRGlhbG9nKCdDcmVhdGUgY3VzdG9tZXIgY2xpY2snKTtcblxuICAgIHRoaXMubGF1bmNoRGlhbG9nU2VydmljZT8ub3BlbkRpYWxvZ0FuZFN1YnNjcmliZShcbiAgICAgIExBVU5DSF9DQUxMRVIuQVNNX0NSRUFURV9DVVNUT01FUl9GT1JNLFxuICAgICAgdGhpcy5hZGROZXdDdXN0b21lckxpbmtcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRCcmVha3BvaW50KCk6IE9ic2VydmFibGU8QlJFQUtQT0lOVD4ge1xuICAgIHJldHVybiB0aGlzLmJyZWFrcG9pbnRTZXJ2aWNlLmJyZWFrcG9pbnQkLnBpcGUoXG4gICAgICBtYXAoKGJyZWFrcG9pbnQpID0+IHtcbiAgICAgICAgaWYgKGJyZWFrcG9pbnQgPT09IEJSRUFLUE9JTlQubGcgfHwgYnJlYWtwb2ludCA9PT0gQlJFQUtQT0lOVC54bCkge1xuICAgICAgICAgIGJyZWFrcG9pbnQgPSBCUkVBS1BPSU5ULm1kO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBicmVha3BvaW50O1xuICAgICAgfSlcbiAgICApO1xuICB9XG59XG4iLCI8ZGl2XG4gIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLWxpc3QgY3gtbW9kYWwtY29udGFpbmVyIGN4LWFzbS1kaWFsb2dcIlxuICBbY3hGb2N1c109XCJmb2N1c0NvbmZpZ1wiXG4gIChlc2MpPVwiY2xvc2VNb2RhbCgnRXNjYXBlIGNsaWNrZWQnKVwiXG4+XG4gIDxkaXYgY2xhc3M9XCJjeC1tb2RhbC1jb250ZW50XCI+XG4gICAgPCEtLSBNb2RhbCBIZWFkZXIgLS0+XG4gICAgPG5nLWNvbnRhaW5lcj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1kaWFsb2ctaGVhZGVyIG1vZGFsLWhlYWRlclwiPlxuICAgICAgICA8aDIgaWQ9XCJhc20tY3VzdG9tZXItbGlzdC10aXRsZVwiIGNsYXNzPVwidGl0bGUgbW9kYWwtdGl0bGVcIj5cbiAgICAgICAgICB7eyAnYXNtLmN1c3RvbWVyTGlzdC50aXRsZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICA8L2gyPlxuICAgICAgICA8ZGl2IGlkPVwiYXNtLWN1c3RvbWVyLWxpc3QtZGVzY1wiIGNsYXNzPVwiY3gtdmlzdWFsbHktaGlkZGVuXCI+XG4gICAgICAgICAge3sgJ2FzbS5jdXN0b21lckxpc3QuZGVzY3JpcHRpb24nIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDwhLS0gVE9ETzooQ1hTUEEtMzA5MCkgZm9yIG5leHQgbWFqb3IgcmVsZWFzZSByZW1vdmUgZmVhdHVyZSBsZXZlbCAtLT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInITYuMSdcIj5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nVGVtcGxhdGVPdXRsZXQ9XCJjbG9zZUJ1dHRvblwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIic2LjEnXCI+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1RlbXBsYXRlT3V0bGV0PVwiY3JlYXRlQ3VzdG9tZXJCdXR0b25cIj48L25nLXRlbXBsYXRlPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cImN4LWRpYWxvZy1zdWItaGVhZGVyIG1vZGFsLWhlYWRlclwiXG4gICAgICAgIFtjbGFzcy50YWJsZXQtbW9iaWxlXT1cIihicmVha3BvaW50JCB8IGFzeW5jKSAhPT0gQlJFQUtQT0lOVC5tZFwiXG4gICAgICAgICpuZ0lmPVwiY3VzdG9tZXJMaXN0c1BhZ2UkIHwgYXN5bmMgYXMgY3VzdG9tZXJMaXN0c1BhZ2VcIlxuICAgICAgPlxuICAgICAgICA8IS0tIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWwgLS0+XG4gICAgICAgIDxuZy1jb250YWluZXIgKmN4RmVhdHVyZUxldmVsPVwiJyE2LjEnXCI+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICBncm91cFNlbGVjdG9yO1xuICAgICAgICAgICAgICBjb250ZXh0OiB7IGN1c3RvbWVyTGlzdHNQYWdlOiBjdXN0b21lckxpc3RzUGFnZSB9XG4gICAgICAgICAgICBcIlxuICAgICAgICAgID48L25nLXRlbXBsYXRlPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPCEtLSBUT0RPOihDWFNQQS0zMDkwKSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGxldmVsIC0tPlxuICAgICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIic2LjEnXCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJjeC1oZWFkZXItc2VsZWN0XCJcbiAgICAgICAgICAgIFtjbGFzcy5tb2JpbGVdPVwiKGJyZWFrcG9pbnQkIHwgYXN5bmMpID09PSBCUkVBS1BPSU5ULnhzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcbiAgICAgICAgICAgICAgICBncm91cFNlbGVjdG9yO1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHsgY3VzdG9tZXJMaXN0c1BhZ2U6IGN1c3RvbWVyTGlzdHNQYWdlIH1cbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID48L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgdG90YWw7XG4gICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgY3VzdG9tZXJTZWFyY2hQYWdlOiBjdXN0b21lclNlYXJjaFBhZ2UkIHwgYXN5bmNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJjeC1oZWFkZXItYWN0aW9uc1wiXG4gICAgICAgICAgW2NsYXNzLm1vYmlsZV09XCIoYnJlYWtwb2ludCQgfCBhc3luYykgPT09IEJSRUFLUE9JTlQueHNcIlxuICAgICAgICA+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1RlbXBsYXRlT3V0bGV0PVwic29ydFwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgPCEtLSBUT0RPOihDWFNQQS0zMDkwKSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGxldmVsIC0tPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKmN4RmVhdHVyZUxldmVsPVwiJyE2LjEnXCI+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nVGVtcGxhdGVPdXRsZXQ9XCJwYWdpbmF0aW9uXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8IS0tIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWwgLS0+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi4xJ1wiPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1RlbXBsYXRlT3V0bGV0PVwic2VhcmNoXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDwhLS0gTW9kYWwgQm9keSAtLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1kaWFsb2ctYm9keSBtb2RhbC1ib2R5XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1kaWFsb2ctcm93XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWRpYWxvZy1pdGVtXCI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibGlzdHNFbXB0eVwiIGNsYXNzPVwiY3gtZXJyb3Itc3RhdGVcIj5cbiAgICAgICAgICAgICAge3sgJ2FzbS5jdXN0b21lckxpc3Qubm9MaXN0cycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibGlzdHNFcnJvclwiIGNsYXNzPVwiY3gtZXJyb3Itc3RhdGVcIj5cbiAgICAgICAgICAgICAge3sgJ2FzbS5jdXN0b21lckxpc3QubGlzdHNFcnJvcicgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY3VzdG9tZXJTZWFyY2hFcnJvciQgfCBhc3luY1wiIGNsYXNzPVwiY3gtZXJyb3Itc3RhdGVcIj5cbiAgICAgICAgICAgICAge3sgJ2dlbmVyYWxFcnJvcnMucGFnZUZhaWx1cmUnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGN4LXNwaW5uZXIgKm5nSWY9XCJjdXN0b21lclNlYXJjaExvYWRpbmckIHwgYXN5bmNcIj48L2N4LXNwaW5uZXI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY3VzdG9tZXJTZWFyY2hQYWdlJCB8IGFzeW5jIGFzIGN1c3RvbWVyU2VhcmNoUGFnZVwiPlxuICAgICAgICAgICAgICA8dGFibGVcbiAgICAgICAgICAgICAgICBpZD1cImFzbS1jdXNvbWVyLWxpc3QtdGFibGVcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJsb2FkZWRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGNhcHRpb24gY2xhc3M9XCJjeC12aXN1YWxseS1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgICAgICAgICdhc20uY3VzdG9tZXJMaXN0LnRpdGxlJyB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIDwvY2FwdGlvbj5cbiAgICAgICAgICAgICAgICA8dGhlYWQgKm5nSWY9XCIoYnJlYWtwb2ludCQgfCBhc3luYykgPT09IEJSRUFLUE9JTlQubWRcIj5cbiAgICAgICAgICAgICAgICAgIDx0ciByb2xlPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDwhLS0gVE9ETzooQ1hTUEEtMzA5MCkgZm9yIG5leHQgbWFqb3IgcmVsZWFzZSByZW1vdmUgZmVhdHVyZSBsZXZlbCAtLT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInITYuMSdcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjeC1hdmF0YXItY2VsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cImN1c3RvbWVyTGlzdENvbmZpZz8uc2hvd0F2YXRhclwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjeC12aXN1YWxseS1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXNtLmN1c3RvbWVyTGlzdC50YWJsZUhlYWRlci5jdXN0b21lcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY3hUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgPHRoXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjdXN0b21lckxpc3RDb25maWc/LmNvbHVtbnNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi5oZWFkZXJMb2NhbGl6YXRpb25LZXkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSAhPT0gJ2hpZGVIZWFkZXJzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWwgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIichNi4xJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5IHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi4xJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVwbGFjZSB0aGUgdHJhbnNsYXRpb24gbGFibGUgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhc20uY3VzdG9tZXJMaXN0LnRhYmxlSGVhZGVyLmN1c3RvbWVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FzbS5jdXN0b21lckxpc3QudGFibGVIZWFkZXIuY3VzdG9tZXJOYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVE9ETzooQ1hTUEEtMzA5MCkgZm9yIG5leHQgbWFqb3IgcmVsZWFzZSByZXBsYWNlIHRoZSB0cmFuc2xhdGlvbiBsYWJsZSAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5ID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FzbS5jdXN0b21lckxpc3QudGFibGVIZWFkZXIuZW1haWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXNtLmN1c3RvbWVyTGlzdC50YWJsZUhlYWRlci5lbWFpbElkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FzbS5jdXN0b21lckxpc3QudGFibGVIZWFkZXIuY3VzdG9tZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5ICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXNtLmN1c3RvbWVyTGlzdC50YWJsZUhlYWRlci5lbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleSB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgIDx0clxuICAgICAgICAgICAgICAgICAgICByb2xlPVwicm93XCJcbiAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGN1c3RvbWVyRW50cnkgb2YgY3VzdG9tZXJTZWFyY2hQYWdlPy5lbnRyaWVzXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBUT0RPOihDWFNQQS0zMDkwKSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGxldmVsIC0tPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIichNi4xJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImNlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJjdXN0b21lckxpc3RDb25maWc/LnNob3dBdmF0YXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjeC1hdmF0YXItY2VsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWF2YXRhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBnZXRCYWRnZVRleHQoY3VzdG9tZXJFbnRyeSkgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICA8IS0tIG11bHRpIGNvbHVtbnMgaWYgZGVza3RvcCAtLT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiKGJyZWFrcG9pbnQkIHwgYXN5bmMpID09PSBCUkVBS1BPSU5ULm1kXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImNlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjdXN0b21lckxpc3RDb25maWc/LmNvbHVtbnNcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJFbnRyeTogY3VzdG9tZXJFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0hlYWRlcjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSB0d28gY29sdW1uIGlmIHRhYmxldCAtLT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiKGJyZWFrcG9pbnQkIHwgYXN5bmMpID09PSBCUkVBS1BPSU5ULnNtXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCByb2xlPVwiY2VsbFwiIGNsYXNzPVwiY3gtbXVsdGktY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdGb3I9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uIG9mIGN1c3RvbWVyTGlzdENvbmZpZz8uY29sdW1ucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbiA9IGV2ZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImV2ZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lckVudHJ5OiBjdXN0b21lckVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIZWFkZXI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCByb2xlPVwiY2VsbFwiIGNsYXNzPVwiY3gtbXVsdGktY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdGb3I9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uIG9mIGN1c3RvbWVyTGlzdENvbmZpZz8uY29sdW1ucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2RkID0gb2RkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJvZGRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lckVudHJ5OiBjdXN0b21lckVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dIZWFkZXI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBvbmUgY29sdW1uIGlmIG1vYmlsZSAtLT5cbiAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImNlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY3gtbXVsdGktY2VsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCIoYnJlYWtwb2ludCQgfCBhc3luYykgPT09IEJSRUFLUE9JTlQueHNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjdXN0b21lckxpc3RDb25maWc/LmNvbHVtbnNcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJFbnRyeTogY3VzdG9tZXJFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID48L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJjeC1lbXB0eS1zdGF0ZVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCIhY3VzdG9tZXJTZWFyY2hQYWdlPy5lbnRyaWVzLmxlbmd0aFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7eyAnYXNtLmN1c3RvbWVyTGlzdC5ub0N1c3RvbWVycycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPCEtLSBUT0RPOihDWFNQQS0zMDkwKSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGxldmVsIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi4xJ1wiPlxuICAgICAgICA8IS0tIE1vZGFsIEZvb3QgLS0+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImN4LWRpYWxvZy1zdWItaGVhZGVyIG1vZGFsLWhlYWRlciBjeC1kaWFsb2ctZm9vdFwiXG4gICAgICAgICAgW2NsYXNzLmFzbS1tb2JpbGUtcGFnaW5hdGlvbl09XCJcbiAgICAgICAgICAgIChicmVha3BvaW50JCB8IGFzeW5jKSAhPT0gQlJFQUtQT0lOVC5tZFxuICAgICAgICAgIFwiXG4gICAgICAgICAgKm5nSWY9XCJjdXN0b21lckxpc3RzUGFnZSQgfCBhc3luYyBhcyBjdXN0b21lckxpc3RzUGFnZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImN4LWhlYWRlci1hY3Rpb25zXCJcbiAgICAgICAgICAgIFtjbGFzcy5tb2JpbGVdPVwiKGJyZWFrcG9pbnQkIHwgYXN5bmMpID09PSBCUkVBS1BPSU5ULnhzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY3VzdG9tZXJTZWFyY2hQYWdlJCB8IGFzeW5jIGFzIGN1c3RvbWVyU2VhcmNoUGFnZVwiPlxuICAgICAgICAgICAgICA8Y3gtcGFnaW5hdGlvblxuICAgICAgICAgICAgICAgIFtwYWdpbmF0aW9uXT1cImN1c3RvbWVyU2VhcmNoUGFnZS5wYWdpbmF0aW9uXCJcbiAgICAgICAgICAgICAgICAodmlld1BhZ2VFdmVudCk9XCJjaGFuZ2VQYWdlKCRldmVudClcIlxuICAgICAgICAgICAgICA+PC9jeC1wYWdpbmF0aW9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZGlhbG9nLWZvb3RlciBtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuIGN4LWFzbS1jdXN0b21lci1saXN0LWJ0bi1jYW5jZWxcIlxuICAgICAgICAgICAgKGNsaWNrKT1cImNsb3NlTW9kYWwoJ0NhbmNlbCBjbGljaycpXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyAnYXNtLmNyZWF0ZUN1c3RvbWVyRm9ybS5jYW5jZWwnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPG5nLXRlbXBsYXRlXG4gICNjZWxsXG4gIGxldC1jdXN0b21lckVudHJ5PVwiY3VzdG9tZXJFbnRyeVwiXG4gIGxldC1jb2x1bW49XCJjb2x1bW5cIlxuICBsZXQtc2hvd0hlYWRlcj1cInNob3dIZWFkZXJcIlxuPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjeC1jZWxsLWNvbnRhaW5lclwiXG4gICAgKm5nSWY9XCJjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5ICE9PSAnaGlkZUhlYWRlcnMnXCJcbiAgPlxuICAgIDxzcGFuIGNsYXNzPVwiY3gtaGVhZGVyLXRleHRcIiAqbmdJZj1cInNob3dIZWFkZXJcIj5cbiAgICAgIHt7IGNvbHVtbi5oZWFkZXJMb2NhbGl6YXRpb25LZXkgfCBjeFRyYW5zbGF0ZSB9fVxuICAgIDwvc3Bhbj5cblxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sdW1uLmFjdGlvblR5cGVcIj5cbiAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcbiAgICAgICAgICBjZWxsQ29udGVudDtcbiAgICAgICAgICBjb250ZXh0OiB7IGNvbHVtbjogY29sdW1uLCBjdXN0b21lckVudHJ5OiBjdXN0b21lckVudHJ5IH1cbiAgICAgICAgXCJcbiAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgIDwhLS0gVE9ETzooQ1hTUEEtMzA5MCkgZm9yIG5leHQgbWFqb3IgcmVsZWFzZSByZW1vdmUgZmVhdHVyZSBsZXZlbCAtLT5cbiAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIic2LjEnXCI+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwiY3gtYXZhdGFyXCJcbiAgICAgICAgKm5nSWY9XCJcbiAgICAgICAgICBjdXN0b21lckxpc3RDb25maWc/LnNob3dBdmF0YXIgJiZcbiAgICAgICAgICBjb2x1bW4/LmFjdGlvblR5cGUgPT09IGN1c3RvbWVyTGlzdENvbHVtbkFjdGlvblR5cGU/LlNUQVJUX1NFU1NJT05cbiAgICAgICAgXCJcbiAgICAgID5cbiAgICAgICAgPGltZ1xuICAgICAgICAgICpuZ0lmPVwiY3VzdG9tZXJFbnRyeT8udXNlckF2YXRhcj8udXJsXCJcbiAgICAgICAgICBbYXR0ci5zcmNdPVwiXG4gICAgICAgICAgICBvY2NDb25maWc/LmJhY2tlbmQ/Lm9jYz8uYmFzZVVybCArIGN1c3RvbWVyRW50cnk/LnVzZXJBdmF0YXI/LnVybFxuICAgICAgICAgIFwiXG4gICAgICAgICAgYWx0PVwie3sgJ2FzbS5tYWluTG9nb0xhYmVsJyB8IGN4VHJhbnNsYXRlIH19XCJcbiAgICAgICAgLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImN4LWF2YXRhci10ZXh0XCIgKm5nSWY9XCIhY3VzdG9tZXJFbnRyeT8udXNlckF2YXRhcj8udXJsXCI+XG4gICAgICAgICAge3sgZ2V0QmFkZ2VUZXh0KGN1c3RvbWVyRW50cnkpIH19XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG5cbiAgICA8YnV0dG9uXG4gICAgICAqbmdJZj1cImNvbHVtbi5hY3Rpb25UeXBlXCJcbiAgICAgIChjbGljayk9XCJzdGFydENvbHVtbkFjdGlvbihjdXN0b21lckVudHJ5LCBjb2x1bW4uYWN0aW9uVHlwZSlcIlxuICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgY3gtYWN0aW9uLWxpbmsgY3gtYnRuLWNlbGxcIlxuICAgICAgW2NsYXNzXT1cImNvbHVtbi5hY3Rpb25UeXBlID09PSAnQUNUSVZFX0NBUlQnID8gJ2N4LWNhcnQnIDogJydcIlxuICAgICAgW2Rpc2FibGVkXT1cImlzUmVxdWlyZWQoY3VzdG9tZXJFbnRyeSwgY29sdW1uLmFjdGlvblR5cGUpXCJcbiAgICAgIFthdHRyLnRpdGxlXT1cIlxuICAgICAgICBjb2x1bW4uaWNvblxuICAgICAgICAgID8gKGNvbHVtbi5pY29uLmNhcHRpb25Mb2NhbGl6YXRpb25LZXkgPz8gY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleVxuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZSlcbiAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgIGNvbHVtbi5pY29uXG4gICAgICAgICAgPyAoY29sdW1uLmljb24uY2FwdGlvbkxvY2FsaXphdGlvbktleSA/PyBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5XG4gICAgICAgICAgICB8IGN4VHJhbnNsYXRlKVxuICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICBcIlxuICAgID5cbiAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcbiAgICAgICAgICBjZWxsQ29udGVudDtcbiAgICAgICAgICBjb250ZXh0OiB7IGNvbHVtbjogY29sdW1uLCBjdXN0b21lckVudHJ5OiBjdXN0b21lckVudHJ5IH1cbiAgICAgICAgXCJcbiAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuPG5nLXRlbXBsYXRlICNjZWxsQ29udGVudCBsZXQtY3VzdG9tZXJFbnRyeT1cImN1c3RvbWVyRW50cnlcIiBsZXQtY29sdW1uPVwiY29sdW1uXCI+XG4gIDxkaXY+XG4gICAgPHNwYW4gKm5nSWY9XCIhY29sdW1uLmljb25cIj57e1xuICAgICAgY29sdW1uLnJlbmRlcmVyPy4oY3VzdG9tZXJFbnRyeSkgfHwgJydcbiAgICB9fTwvc3Bhbj5cbiAgICA8Y3gtaWNvblxuICAgICAgKm5nSWY9XCJjb2x1bW4uaWNvblwiXG4gICAgICBbYXR0ci50aXRsZV09XCJcbiAgICAgICAgIWNvbHVtbi5hY3Rpb25UeXBlXG4gICAgICAgICAgPyAoY29sdW1uLmljb24uY2FwdGlvbkxvY2FsaXphdGlvbktleSA/PyBjb2x1bW4uaGVhZGVyTG9jYWxpemF0aW9uS2V5XG4gICAgICAgICAgICB8IGN4VHJhbnNsYXRlKVxuICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICBcIlxuICAgICAgW2NsYXNzLmN4LWFjdGlvbi1jb2xvcl09XCJcbiAgICAgICAgY29sdW1uLmFjdGlvblR5cGUgJiYgIWlzUmVxdWlyZWQoY3VzdG9tZXJFbnRyeSwgY29sdW1uLmFjdGlvblR5cGUpXG4gICAgICBcIlxuICAgICAgW3R5cGVdPVwiY29sdW1uLmljb24uc3ltYm9sXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgICFjb2x1bW4uYWN0aW9uVHlwZVxuICAgICAgICAgID8gKGNvbHVtbi5pY29uLmNhcHRpb25Mb2NhbGl6YXRpb25LZXkgPz8gY29sdW1uLmhlYWRlckxvY2FsaXphdGlvbktleVxuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZSlcbiAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgXCJcbiAgICA+PC9jeC1pY29uPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjc2VhcmNoPlxuICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBzZWFyY2gtd3JhcHBlclwiPlxuICAgIDxpbnB1dFxuICAgICAgW2Zvcm1Db250cm9sXT1cInNlYXJjaEJveFwiXG4gICAgICAoa2V5dXApPVwib25LZXkoJGV2ZW50KVwiXG4gICAgICB0eXBlPVwidGV4dFwiXG4gICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICBwbGFjZWhvbGRlcj1cInt7ICdhc20uY3VzdG9tZXJMaXN0LnNlYXJjaEJveCcgfCBjeFRyYW5zbGF0ZSB9fVwiXG4gICAgICBhdHRyLmFyaWEtbGFiZWw9XCJ7eyAnYXNtLmN1c3RvbWVyTGlzdC5lbnRlclNlYXJjaEJveCcgfCBjeFRyYW5zbGF0ZSB9fVwiXG4gICAgLz5cbiAgICA8Y3gtaWNvblxuICAgICAgW3R5cGVdPVwiaWNvblR5cGVzLlNFQVJDSFwiXG4gICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ3N0b3JlRmluZGVyLnNlYXJjaE5lYXJlc3RTdG9yZXMnIHwgY3hUcmFuc2xhdGVcIlxuICAgICAgY2xhc3M9XCJzZWFyY2hcIlxuICAgICAgKGNsaWNrKT1cInNlYXJjaEN1c3RvbWVycygpXCJcbiAgICA+PC9jeC1pY29uPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjdG90YWwgbGV0LWN1c3RvbWVyU2VhcmNoUGFnZT1cImN1c3RvbWVyU2VhcmNoUGFnZVwiPlxuICA8c3BhbiBjbGFzcz1cImN4LXRvdGFsXCIgKm5nSWY9XCJjdXN0b21lclNlYXJjaFBhZ2U/LnBhZ2luYXRpb24/LnRvdGFsUmVzdWx0c1wiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjdXN0b21lclNlYXJjaFBhZ2U/LnBhZ2luYXRpb24/LnRvdGFsUmVzdWx0cyA+IDFcIj5cbiAgICAgIHt7XG4gICAgICAgICdhc20uY3VzdG9tZXJMaXN0Lm5vT2ZDdXN0b21lcnMnXG4gICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBjb3VudDogY3VzdG9tZXJTZWFyY2hQYWdlPy5wYWdpbmF0aW9uPy50b3RhbFJlc3VsdHMgfVxuICAgICAgfX1cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY3VzdG9tZXJTZWFyY2hQYWdlPy5wYWdpbmF0aW9uPy50b3RhbFJlc3VsdHMgPT09IDFcIj5cbiAgICAgIHt7ICdhc20uY3VzdG9tZXJMaXN0Lm9uZUN1c3RvbWVyJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvc3Bhbj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjc29ydD5cbiAgPGxhYmVsPlxuICAgIDxzcGFuIGNsYXNzPVwiY3gtdmlzdWFsbHktaGlkZGVuXCI+e3tcbiAgICAgICdhc20uY3VzdG9tZXJMaXN0LnRhYmxlU29ydC5zb3J0QnknIHwgY3hUcmFuc2xhdGVcbiAgICB9fTwvc3Bhbj5cbiAgICA8Y3gtc29ydGluZ1xuICAgICAgY2xhc3M9XCJzb3J0LXNlbGVjdG9yXCJcbiAgICAgIFtzb3J0T3B0aW9uc109XCJzb3J0c1wiXG4gICAgICBbc29ydExhYmVsc109XCJnZXRTb3J0TGFiZWxzKCkgfCBhc3luY1wiXG4gICAgICAoc29ydExpc3RFdmVudCk9XCJjaGFuZ2VTb3J0Q29kZSgkZXZlbnQpXCJcbiAgICAgIFtzZWxlY3RlZE9wdGlvbl09XCJzb3J0Q29kZVwiXG4gICAgICBwbGFjZWhvbGRlcj1cInt7ICdhc20uY3VzdG9tZXJMaXN0LnRhYmxlU29ydC5zb3J0QnknIHwgY3hUcmFuc2xhdGUgfX1cIlxuICAgICAgW2N4TmdTZWxlY3RBMTF5XT1cIntcbiAgICAgICAgYXJpYUxhYmVsOiBzb3J0Q29kZSxcbiAgICAgICAgYXJpYUNvbnRyb2xzOiAnYXNtLWN1c29tZXItbGlzdC10YWJsZSdcbiAgICAgIH1cIlxuICAgID48L2N4LXNvcnRpbmc+XG4gIDwvbGFiZWw+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI3BhZ2luYXRpb24+XG4gIDxkaXYgY2xhc3M9XCJjeC1wYWdpbmF0aW9uLWJ1dHRvbnNcIj5cbiAgICA8ZGl2PlxuICAgICAge3tcbiAgICAgICAgJ2FzbS5jdXN0b21lckxpc3QucGFnZS5wYWdlJyB8IGN4VHJhbnNsYXRlOiB7IGNvdW50OiBjdXJyZW50UGFnZSArIDEgfVxuICAgICAgfX1cbiAgICA8L2Rpdj5cbiAgICA8YnV0dG9uXG4gICAgICAqbmdJZj1cIm1heFBhZ2UgPiAwXCJcbiAgICAgIChjbGljayk9XCJnb1RvUHJldmlvdXNQYWdlKClcIlxuICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgY3gtYWN0aW9uLWxpbmsgY3gtYnRuLXByZXZpb3VzXCJcbiAgICAgIFtkaXNhYmxlZF09XCJjdXJyZW50UGFnZSA9PT0gMCB8fCAhbG9hZGVkXCJcbiAgICA+XG4gICAgICA8Y3gtaWNvbiBjbGFzcz1cInByZXZpb3VzXCIgW3R5cGVdPVwiaWNvblR5cGVzLkNBUkVUX0xFRlRcIj48L2N4LWljb25cbiAgICAgID48c3Bhbj57eyAnYXNtLmN1c3RvbWVyTGlzdC5wYWdlLnByZXZpb3VzJyB8IGN4VHJhbnNsYXRlIH19PC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b25cbiAgICAgICpuZ0lmPVwibWF4UGFnZSA+IDBcIlxuICAgICAgKGNsaWNrKT1cImdvVG9OZXh0UGFnZSgpXCJcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGN4LWFjdGlvbi1saW5rIGN4LWJ0bi1uZXh0XCJcbiAgICAgIFtkaXNhYmxlZF09XCJjdXJyZW50UGFnZSA9PT0gbWF4UGFnZSB8fCAhbG9hZGVkXCJcbiAgICA+XG4gICAgICA8c3Bhbj57eyAnYXNtLmN1c3RvbWVyTGlzdC5wYWdlLm5leHQnIHwgY3hUcmFuc2xhdGUgfX08L3NwYW5cbiAgICAgID48Y3gtaWNvbiBjbGFzcz1cIm5leHRcIiBbdHlwZV09XCJpY29uVHlwZXMuQ0FSRVRfUklHSFRcIj48L2N4LWljb24+XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNncm91cFNlbGVjdG9yIGxldC1jdXN0b21lckxpc3RzUGFnZT1cImN1c3RvbWVyTGlzdHNQYWdlXCI+XG4gIDxsYWJlbD5cbiAgICA8c3BhbiBjbGFzcz1cImN4LXZpc3VhbGx5LWhpZGRlblwiPnt7XG4gICAgICAnYXNtLmN1c3RvbWVyTGlzdC50aXRsZScgfCBjeFRyYW5zbGF0ZVxuICAgIH19PC9zcGFuPlxuICAgIDxuZy1zZWxlY3RcbiAgICAgIGNsYXNzPVwiY3VzdG9tZXItbGlzdC1zZWxlY3RvclwiXG4gICAgICBbc2VhcmNoYWJsZV09XCJmYWxzZVwiXG4gICAgICBbY2xlYXJhYmxlXT1cImZhbHNlXCJcbiAgICAgIChjaGFuZ2UpPVwib25DaGFuZ2VDdXN0b21lckdyb3VwKClcIlxuICAgICAgW3RhYkluZGV4XT1cIjBcIlxuICAgICAgWyhuZ01vZGVsKV09XCJzZWxlY3RlZFVzZXJHcm91cElkXCJcbiAgICAgIFtpdGVtc109XCJjdXN0b21lckxpc3RzUGFnZT8udXNlckdyb3Vwc1wiXG4gICAgICBiaW5kTGFiZWw9XCJuYW1lXCJcbiAgICAgIGJpbmRWYWx1ZT1cInVpZFwiXG4gICAgICBbY3hOZ1NlbGVjdEExMXldPVwie1xuICAgICAgICBhcmlhTGFiZWw6IGdldEdyb3VwTmFtZShjdXN0b21lckxpc3RzUGFnZSwgc2VsZWN0ZWRVc2VyR3JvdXBJZCksXG4gICAgICAgIGFyaWFDb250cm9sczogJ2FzbS1jdXNvbWVyLWxpc3QtdGFibGUnXG4gICAgICB9XCJcbiAgICA+XG4gICAgPC9uZy1zZWxlY3Q+XG4gIDwvbGFiZWw+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2Nsb3NlQnV0dG9uPlxuICA8YnV0dG9uXG4gICAgdHlwZT1cImJ1dHRvblwiXG4gICAgY2xhc3M9XCJjbG9zZVwiXG4gICAgYXR0ci5hcmlhLWxhYmVsPVwie3sgJ2NvbW1vbi5jbG9zZScgfCBjeFRyYW5zbGF0ZSB9fVwiXG4gICAgKGNsaWNrKT1cImNsb3NlTW9kYWwoJ0Nyb3NzIGNsaWNrJylcIlxuICA+XG4gICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICA8Y3gtaWNvbiBbdHlwZV09XCJpY29uVHlwZXMuQ0xPU0VcIj48L2N4LWljb24+XG4gICAgPC9zcGFuPlxuICA8L2J1dHRvbj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjY3JlYXRlQ3VzdG9tZXJCdXR0b24+XG4gIDxidXR0b25cbiAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICBjbGFzcz1cImJ0biBjeC1hc20tY3JlYXRlLWN1c3RvbWVyLWJ0blwiXG4gICAgKGNsaWNrKT1cImNyZWF0ZUN1c3RvbWVyKClcIlxuICA+XG4gICAgPGN4LWljb24gW3R5cGVdPVwiaWNvblR5cGVzLlVTRVJfUExVU1wiPjwvY3gtaWNvbj5cbiAgICA8c3Bhbj57eyAnYXNtLmN1c3RvbWVyTGlzdC5jcmVhdGVDdXN0b21lcicgfCBjeFRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgPC9idXR0b24+XG48L25nLXRlbXBsYXRlPlxuIl19