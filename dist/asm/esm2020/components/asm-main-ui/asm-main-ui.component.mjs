/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component, HostBinding, Optional, ViewChild, } from '@angular/core';
import { CustomerListColumnActionType, } from '@spartacus/asm/root';
import { GlobalMessageType, } from '@spartacus/core';
import { ICON_TYPE, } from '@spartacus/storefront';
import { Subscription, combineLatest, of } from 'rxjs';
import { distinctUntilChanged, filter, map, switchMap, take, tap, } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/core";
import * as i2 from "@spartacus/asm/root";
import * as i3 from "../services/asm-component.service";
import * as i4 from "@spartacus/asm/core";
import * as i5 from "@spartacus/user/account/root";
import * as i6 from "@spartacus/storefront";
import * as i7 from "@angular/common";
import * as i8 from "../csagent-login-form/csagent-login-form.component";
import * as i9 from "../customer-selection/customer-selection.component";
import * as i10 from "../asm-session-timer/asm-session-timer.component";
import * as i11 from "../customer-emulation/customer-emulation.component";
import * as i12 from "../asm-toggle-ui/asm-toggle-ui.component";
export const CART_TYPE_KEY = {
    active: 'asm.activeCartAlertInfo',
    inactive: 'asm.saveInactiveCartAlertInfo',
};
export class AsmMainUiComponent {
    constructor(authService, csAgentAuthService, asmComponentService, globalMessageService, routingService, asmService, userAccountFacade, launchDialogService, featureConfig) {
        this.authService = authService;
        this.csAgentAuthService = csAgentAuthService;
        this.asmComponentService = asmComponentService;
        this.globalMessageService = globalMessageService;
        this.routingService = routingService;
        this.asmService = asmService;
        this.userAccountFacade = userAccountFacade;
        this.launchDialogService = launchDialogService;
        this.featureConfig = featureConfig;
        this.iconTypes = ICON_TYPE;
        this.showDeeplinkCartInfoAlert$ = this.asmComponentService.shouldShowDeeplinkCartInfoAlert();
        this.deeplinkCartAlertKey = '';
        this.showCreateCustomerSuccessfullyAlert = false;
        this.globalMessageType = GlobalMessageType;
        this.disabled = false;
        this.startingCustomerSession = false;
        this.showCustomerEmulationInfoAlert = true;
        this.subscription = new Subscription();
    }
    ngOnInit() {
        this.customerSupportAgentLoggedIn$ = this.csAgentAuthService
            .isCustomerSupportAgentLoggedIn()
            .pipe(distinctUntilChanged(), tap((loggedIn) => {
            if (!loggedIn) {
                this.closeModal();
            }
        }));
        this.csAgentTokenLoading$ =
            this.csAgentAuthService.getCustomerSupportAgentTokenLoading();
        this.customer$ = this.authService.isUserLoggedIn().pipe(switchMap((isLoggedIn) => {
            if (isLoggedIn) {
                this.handleCustomerSessionStartRedirection();
                return this.userAccountFacade.get();
            }
            else {
                return of(undefined);
            }
        }));
        this.isCollapsed$ = this.asmService
            .getAsmUiState()
            .pipe(map((uiState) => uiState.collapsed === undefined ? false : uiState.collapsed));
        this.subscription.add(this.launchDialogService.dialogClose
            .pipe(filter((result) => Boolean(result)))
            .subscribe((result) => {
            if (typeof result !== 'string') {
                if ('selectedUser' in result) {
                    this.startCustomerEmulationSession(result.selectedUser);
                    if (result.actionType === CustomerListColumnActionType.ORDER_HISTORY) {
                        this.routingService.go({ cxRoute: 'orders' });
                    }
                }
                else if ('customerId' in result) {
                    this.startCustomerEmulationSession({
                        customerId: result.customerId,
                    });
                    this.showCreateCustomerSuccessfullyAlert = true;
                    this.routingService.go('/');
                }
                if ('actionType' in result &&
                    result.actionType === CustomerListColumnActionType.ACTIVE_CART) {
                    this.routingService.go({ cxRoute: 'cart' });
                }
            }
        }));
        this.subscribeForDeeplink();
    }
    /**
     * When agent is logged in and deep link has customerID,
     * call logout if has customer emulated(userLoggedin) but not emulated by deep link.
     * call startSessionWithParameters
     */
    subscribeForDeeplink() {
        if (this.featureConfig?.isLevel('6.2')) {
            if (this.asmComponentService.isEmulateInURL()) {
                //Always route to home page to avoid 404
                this.routingService.go('/');
            }
            // TODO(CXSPA-3090): Use asmDeepLinkService only in 7.0.
            const parameters = this.asmComponentService.getDeepLinkUrlParams() ?? {
                customerId: this.asmComponentService.getSearchParameter('customerId'),
                orderId: this.asmComponentService.getSearchParameter('orderId'),
                ticketId: this.asmComponentService.getSearchParameter('ticketId'),
                cartId: this.asmComponentService.getSearchParameter('cartId'),
                cartType: this.asmComponentService.getSearchParameter('cartType'),
                emulated: false,
            };
            this.deeplinkCartAlertKey = CART_TYPE_KEY[parameters.cartType || ''];
            this.subscription.add(combineLatest([
                this.customerSupportAgentLoggedIn$,
                this.authService.isUserLoggedIn(),
                this.asmComponentService.isEmulatedByDeepLink(),
            ]).subscribe(([agentLoggedIn, userLoggedin, isEmulatedByDeepLink]) => {
                if (agentLoggedIn && parameters.customerId) {
                    if (!isEmulatedByDeepLink && userLoggedin) {
                        this.confirmSwitchCustomer(parameters.customerId);
                    }
                    else {
                        setTimeout(() => this.startSessionWithParameters({
                            ...parameters,
                            emulated: isEmulatedByDeepLink,
                        }));
                    }
                }
            }));
        }
    }
    confirmSwitchCustomer(switchCustomerId) {
        this.customer$
            .pipe(filter((curCustomer) => !!curCustomer), take(1))
            .subscribe((curCustomer) => {
            if (curCustomer?.customerId !== switchCustomerId) {
                this.userAccountFacade.getById(switchCustomerId).subscribe({
                    next: (switchCustomer) => {
                        this.launchDialogService.openDialogAndSubscribe("ASM_SWITCH_CUSTOMER" /* LAUNCH_CALLER.ASM_SWITCH_CUSTOMER */, this.element, { curCustomer: curCustomer, switchCustomer: switchCustomer });
                    },
                    error: (error) => {
                        this.globalMessageService.add(error.details?.[0].message ?? '', GlobalMessageType.MSG_TYPE_ERROR);
                    },
                });
            }
            else {
                this.asmComponentService.setEmulatedByDeepLink(true);
            }
        });
    }
    /**
     * If url contains customerId and we haven't emulatedFromURL, we'll change the isEmulatedByDeepLink flag and
     * start emulate customer in URL.
     */
    startSessionWithParameters(parameters) {
        if (!parameters.emulated) {
            this.asmComponentService.setEmulatedByDeepLink(true);
            this.startCustomerEmulationSession({
                customerId: parameters.customerId,
            }, parameters);
        }
    }
    handleCustomerSessionStartRedirection() {
        this.asmComponentService
            .isCustomerEmulationSessionInProgress()
            .pipe(take(1))
            .subscribe((isCustomerEmulated) => {
            if (this.startingCustomerSession && isCustomerEmulated) {
                this.startingCustomerSession = false;
                this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);
                this.routingService.go('/');
            }
        });
    }
    loginCustomerSupportAgent({ userId, password, }) {
        this.csAgentAuthService.authorizeCustomerSupportAgent(userId, password);
    }
    logout() {
        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();
    }
    startCustomerEmulationSession({ customerId }, parameters) {
        if (customerId) {
            this.csAgentAuthService.startCustomerEmulationSession(customerId);
            this.startingCustomerSession = true;
            this.showCustomerEmulationInfoAlert = true;
            this.showCreateCustomerSuccessfullyAlert = false;
            if (parameters) {
                // TODO(CXSPA-3090): Remove feature flag in 7.0
                if (this.featureConfig?.isLevel('6.3')) {
                    this.asmComponentService.handleDeepLinkNavigation({
                        customerId,
                        ...parameters,
                    });
                }
                else {
                    // TODOi(CXSPA-3090): Remove this implementation in 7.0
                    this.handleDeepLinkParamsAfterStartSession(parameters);
                }
            }
        }
        else {
            this.globalMessageService.add({ key: 'asm.error.noCustomerId' }, GlobalMessageType.MSG_TYPE_ERROR);
        }
    }
    handleDeepLinkParamsAfterStartSession(parameters) {
        if ((parameters.cartType === 'active' ||
            parameters.cartType === 'inactive') &&
            parameters.cartId) {
            return;
        }
        if (parameters.cartType === 'saved' && parameters.cartId) {
            // Navigate to saved cart
            this.routingService.go('my-account/saved-cart/' + parameters.cartId);
        }
        else if (parameters.orderId) {
            // Navigate to order details
            this.routingService.go({
                cxRoute: 'orderDetails',
                params: { code: parameters.orderId },
            });
        }
        else if (parameters.ticketId) {
            // Navigate to support ticket details
            this.routingService.go({
                cxRoute: 'supportTicketDetails',
                params: { ticketCode: parameters.ticketId },
            });
        }
    }
    hideUi() {
        this.disabled = true;
        this.asmComponentService.unload();
    }
    showCustomList() {
        this.launchDialogService.openDialogAndSubscribe("ASM_CUSTOMER_LIST" /* LAUNCH_CALLER.ASM_CUSTOMER_LIST */, this.element);
    }
    closeModal() {
        this.launchDialogService.closeDialog('logout');
    }
    createCustomer() {
        this.launchDialogService?.openDialogAndSubscribe("ASM_CREATE_CUSTOMER_FORM" /* LAUNCH_CALLER.ASM_CREATE_CUSTOMER_FORM */, this.addNewCustomerLink);
    }
    closeDialogConfirmationAlert() {
        this.showCreateCustomerSuccessfullyAlert = false;
    }
    closeDeeplinkCartInfoAlert() {
        this.asmComponentService.setShowDeeplinkCartInfoAlert(false);
    }
    closeCustomerEmulationInfoAlert() {
        this.showCustomerEmulationInfoAlert = false;
    }
    ngOnDestroy() {
        this.subscription?.unsubscribe();
    }
}
AsmMainUiComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmMainUiComponent, deps: [{ token: i1.AuthService }, { token: i2.CsAgentAuthService }, { token: i3.AsmComponentService }, { token: i1.GlobalMessageService }, { token: i1.RoutingService }, { token: i4.AsmService }, { token: i5.UserAccountFacade }, { token: i6.LaunchDialogService }, { token: i1.FeatureConfigService, optional: true }], target: i0.ɵɵFactoryTarget.Component });
AsmMainUiComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: AsmMainUiComponent, selector: "cx-asm-main-ui", host: { properties: { "class.hidden": "this.disabled" } }, viewQueries: [{ propertyName: "element", first: true, predicate: ["customerListLink"], descendants: true }, { propertyName: "addNewCustomerLink", first: true, predicate: ["addNewCustomerLink"], descendants: true }], ngImport: i0, template: "<div class=\"asm-bar\">\n  <div class=\"asm-bar-branding\">\n    <img\n      class=\"logo\"\n      src=\"data:image/png;base64,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\"\n      width=\"48\"\n      height=\"24\"\n      alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n    />\n\n    <div class=\"asm-title\">\n      {{ 'asm.mainTitle' | cxTranslate }}\n    </div>\n  </div>\n  <div class=\"asm-bar-actions\">\n    <div\n      class=\"cx-asm-customer-list\"\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n    >\n      <a\n        #customerListLink\n        tabindex=\"0\"\n        role=\"button\"\n        class=\"cx-asm-customer-list-link\"\n        (click)=\"showCustomList()\"\n      >\n        <cx-icon [type]=\"iconTypes.USER_FRIENDS\"></cx-icon>\n        <span>{{ 'asm.customers' | cxTranslate }}</span></a\n      >\n    </div>\n\n    <cx-asm-toggle-ui></cx-asm-toggle-ui>\n\n    <cx-asm-session-timer\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n    ></cx-asm-session-timer>\n\n    <button\n      class=\"close\"\n      title=\"{{ 'asm.hideUi' | cxTranslate }}\"\n      *ngIf=\"\n        !(customerSupportAgentLoggedIn$ | async) &&\n        !(csAgentTokenLoading$ | async)\n      \"\n      (click)=\"hideUi()\"\n    ></button>\n\n    <button\n      class=\"logout\"\n      title=\"{{ 'asm.logout' | cxTranslate }}\"\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n      (click)=\"logout()\"\n    ></button>\n  </div>\n</div>\n\n<ng-container *ngIf=\"!(isCollapsed$ | async) as notCollapsed\">\n  <ng-container\n    *ngIf=\"customerSupportAgentLoggedIn$ | async; else showLoginForm\"\n  >\n    <ng-container *ngIf=\"customer$ | async; else showCustomerSelection\">\n      <cx-customer-emulation *ngIf=\"notCollapsed\"></cx-customer-emulation>\n      <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n      <ng-container *cxFeatureLevel=\"'6.1'\">\n        <cx-message\n          *ngIf=\"notCollapsed && showCreateCustomerSuccessfullyAlert\"\n          [text]=\"'asm.createCustomerSuccessfullyAlert' | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_CONFIRMATION\"\n          (closeMessage)=\"closeDialogConfirmationAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.2'\">\n        <cx-message\n          *ngIf=\"showDeeplinkCartInfoAlert$ | async\"\n          [text]=\"deeplinkCartAlertKey | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_INFO\"\n          (closeMessage)=\"closeDeeplinkCartInfoAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.3'\">\n        <cx-message\n          *ngIf=\"notCollapsed && showCustomerEmulationInfoAlert\"\n          [text]=\"'asm.startCustomerEmulationAlertInfo' | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_INFO\"\n          (closeMessage)=\"closeCustomerEmulationInfoAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n    </ng-container>\n    <ng-template #showCustomerSelection>\n      <cx-customer-selection\n        *ngIf=\"notCollapsed\"\n        (submitEvent)=\"startCustomerEmulationSession($event)\"\n      ></cx-customer-selection>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #showLoginForm>\n    <cx-csagent-login-form\n      *ngIf=\"notCollapsed\"\n      (submitEvent)=\"loginCustomerSupportAgent($event)\"\n      [csAgentTokenLoading]=\"csAgentTokenLoading$ | async\"\n    ></cx-csagent-login-form>\n  </ng-template>\n</ng-container>\n", dependencies: [{ kind: "directive", type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i6.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "component", type: i6.MessageComponent, selector: "cx-message", inputs: ["text", "actionButtonText", "actionButtonMessage", "accordionText", "showBody", "isVisibleCloseButton", "type"], outputs: ["closeMessage", "buttonAction"] }, { kind: "directive", type: i1.FeatureLevelDirective, selector: "[cxFeatureLevel]", inputs: ["cxFeatureLevel"] }, { kind: "component", type: i8.CSAgentLoginFormComponent, selector: "cx-csagent-login-form", inputs: ["csAgentTokenLoading"], outputs: ["submitEvent"] }, { kind: "component", type: i9.CustomerSelectionComponent, selector: "cx-customer-selection", outputs: ["submitEvent"] }, { kind: "component", type: i10.AsmSessionTimerComponent, selector: "cx-asm-session-timer" }, { kind: "component", type: i11.CustomerEmulationComponent, selector: "cx-customer-emulation" }, { kind: "component", type: i12.AsmToggleUiComponent, selector: "cx-asm-toggle-ui" }, { kind: "pipe", type: i7.AsyncPipe, name: "async" }, { kind: "pipe", type: i1.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmMainUiComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-asm-main-ui', template: "<div class=\"asm-bar\">\n  <div class=\"asm-bar-branding\">\n    <img\n      class=\"logo\"\n      src=\"data:image/png;base64,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\"\n      width=\"48\"\n      height=\"24\"\n      alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n    />\n\n    <div class=\"asm-title\">\n      {{ 'asm.mainTitle' | cxTranslate }}\n    </div>\n  </div>\n  <div class=\"asm-bar-actions\">\n    <div\n      class=\"cx-asm-customer-list\"\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n    >\n      <a\n        #customerListLink\n        tabindex=\"0\"\n        role=\"button\"\n        class=\"cx-asm-customer-list-link\"\n        (click)=\"showCustomList()\"\n      >\n        <cx-icon [type]=\"iconTypes.USER_FRIENDS\"></cx-icon>\n        <span>{{ 'asm.customers' | cxTranslate }}</span></a\n      >\n    </div>\n\n    <cx-asm-toggle-ui></cx-asm-toggle-ui>\n\n    <cx-asm-session-timer\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n    ></cx-asm-session-timer>\n\n    <button\n      class=\"close\"\n      title=\"{{ 'asm.hideUi' | cxTranslate }}\"\n      *ngIf=\"\n        !(customerSupportAgentLoggedIn$ | async) &&\n        !(csAgentTokenLoading$ | async)\n      \"\n      (click)=\"hideUi()\"\n    ></button>\n\n    <button\n      class=\"logout\"\n      title=\"{{ 'asm.logout' | cxTranslate }}\"\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n      (click)=\"logout()\"\n    ></button>\n  </div>\n</div>\n\n<ng-container *ngIf=\"!(isCollapsed$ | async) as notCollapsed\">\n  <ng-container\n    *ngIf=\"customerSupportAgentLoggedIn$ | async; else showLoginForm\"\n  >\n    <ng-container *ngIf=\"customer$ | async; else showCustomerSelection\">\n      <cx-customer-emulation *ngIf=\"notCollapsed\"></cx-customer-emulation>\n      <!-- TODO:(CXSPA-3090) for next major release remove feature level -->\n      <ng-container *cxFeatureLevel=\"'6.1'\">\n        <cx-message\n          *ngIf=\"notCollapsed && showCreateCustomerSuccessfullyAlert\"\n          [text]=\"'asm.createCustomerSuccessfullyAlert' | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_CONFIRMATION\"\n          (closeMessage)=\"closeDialogConfirmationAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.2'\">\n        <cx-message\n          *ngIf=\"showDeeplinkCartInfoAlert$ | async\"\n          [text]=\"deeplinkCartAlertKey | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_INFO\"\n          (closeMessage)=\"closeDeeplinkCartInfoAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.3'\">\n        <cx-message\n          *ngIf=\"notCollapsed && showCustomerEmulationInfoAlert\"\n          [text]=\"'asm.startCustomerEmulationAlertInfo' | cxTranslate\"\n          [type]=\"globalMessageType.MSG_TYPE_INFO\"\n          (closeMessage)=\"closeCustomerEmulationInfoAlert()\"\n        >\n        </cx-message>\n      </ng-container>\n    </ng-container>\n    <ng-template #showCustomerSelection>\n      <cx-customer-selection\n        *ngIf=\"notCollapsed\"\n        (submitEvent)=\"startCustomerEmulationSession($event)\"\n      ></cx-customer-selection>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #showLoginForm>\n    <cx-csagent-login-form\n      *ngIf=\"notCollapsed\"\n      (submitEvent)=\"loginCustomerSupportAgent($event)\"\n      [csAgentTokenLoading]=\"csAgentTokenLoading$ | async\"\n    ></cx-csagent-login-form>\n  </ng-template>\n</ng-container>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AuthService }, { type: i2.CsAgentAuthService }, { type: i3.AsmComponentService }, { type: i1.GlobalMessageService }, { type: i1.RoutingService }, { type: i4.AsmService }, { type: i5.UserAccountFacade }, { type: i6.LaunchDialogService }, { type: i1.FeatureConfigService, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { disabled: [{
                type: HostBinding,
                args: ['class.hidden']
            }], element: [{
                type: ViewChild,
                args: ['customerListLink']
            }], addNewCustomerLink: [{
                type: ViewChild,
                args: ['addNewCustomerLink']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNtLW1haW4tdWkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL2FzbS9jb21wb25lbnRzL2FzbS1tYWluLXVpL2FzbS1tYWluLXVpLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9hc20vY29tcG9uZW50cy9hc20tbWFpbi11aS9hc20tbWFpbi11aS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUNMLFNBQVMsRUFFVCxXQUFXLEVBR1gsUUFBUSxFQUNSLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBSUwsNEJBQTRCLEdBQzdCLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUlMLGlCQUFpQixHQUlsQixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFDTCxTQUFTLEdBR1YsTUFBTSx1QkFBdUIsQ0FBQztBQUUvQixPQUFPLEVBQWMsWUFBWSxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbkUsT0FBTyxFQUNMLG9CQUFvQixFQUNwQixNQUFNLEVBQ04sR0FBRyxFQUNILFNBQVMsRUFDVCxJQUFJLEVBQ0osR0FBRyxHQUNKLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7O0FBT3hCLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBZ0I7SUFDeEMsTUFBTSxFQUFFLHlCQUF5QjtJQUNqQyxRQUFRLEVBQUUsK0JBQStCO0NBQzFDLENBQUM7QUFLRixNQUFNLE9BQU8sa0JBQWtCO0lBa0Q3QixZQUNZLFdBQXdCLEVBQ3hCLGtCQUFzQyxFQUN0QyxtQkFBd0MsRUFDeEMsb0JBQTBDLEVBQzFDLGNBQThCLEVBQzlCLFVBQXNCLEVBQ3RCLGlCQUFvQyxFQUNwQyxtQkFBd0MsRUFDNUIsYUFBb0M7UUFSaEQsZ0JBQVcsR0FBWCxX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QU0sRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFFRCxjQUFjO1FBQ1osSUFBSSxDQUFDLG1CQUFtQixDQUFDLHNCQUFzQiw0REFFN0MsSUFBSSxDQUFDLE9BQU8sQ0FDYixDQUFDO0lBQ0osQ0FBQztJQUVELFVBQVU7UUFDUixJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRCxjQUFjO1FBQ1osSUFBSSxDQUFDLG1CQUFtQixFQUFFLHNCQUFzQiwwRUFFOUMsSUFBSSxDQUFDLGtCQUFrQixDQUN4QixDQUFDO0lBQ0osQ0FBQztJQUVELDRCQUE0QjtRQUMxQixJQUFJLENBQUMsbUNBQW1DLEdBQUcsS0FBSyxDQUFDO0lBQ25ELENBQUM7SUFFRCwwQkFBMEI7UUFDeEIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLDRCQUE0QixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCwrQkFBK0I7UUFDN0IsSUFBSSxDQUFDLDhCQUE4QixHQUFHLEtBQUssQ0FBQztJQUM5QyxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxZQUFZLEVBQUUsV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FBQzs7K0dBL1VVLGtCQUFrQjttR0FBbEIsa0JBQWtCLHlVQzVEL0Isa3ZSQTJHQTsyRkQvQ2Esa0JBQWtCO2tCQUo5QixTQUFTOytCQUNFLGdCQUFnQjs7MEJBOER2QixRQUFROzRDQTVDa0IsUUFBUTtzQkFBcEMsV0FBVzt1QkFBQyxjQUFjO2dCQU9JLE9BQU87c0JBQXJDLFNBQVM7dUJBQUMsa0JBQWtCO2dCQUNJLGtCQUFrQjtzQkFBbEQsU0FBUzt1QkFBQyxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3B0aW9uYWwsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBc21TZXJ2aWNlIH0gZnJvbSAnQHNwYXJ0YWN1cy9hc20vY29yZSc7XG5pbXBvcnQge1xuICBBc21EZWVwTGlua1BhcmFtZXRlcnMsXG4gIEFzbVVpLFxuICBDc0FnZW50QXV0aFNlcnZpY2UsXG4gIEN1c3RvbWVyTGlzdENvbHVtbkFjdGlvblR5cGUsXG59IGZyb20gJ0BzcGFydGFjdXMvYXNtL3Jvb3QnO1xuaW1wb3J0IHtcbiAgQXV0aFNlcnZpY2UsXG4gIEZlYXR1cmVDb25maWdTZXJ2aWNlLFxuICBHbG9iYWxNZXNzYWdlU2VydmljZSxcbiAgR2xvYmFsTWVzc2FnZVR5cGUsXG4gIEh0dHBFcnJvck1vZGVsLFxuICBSb3V0aW5nU2VydmljZSxcbiAgVXNlcixcbn0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7XG4gIElDT05fVFlQRSxcbiAgTEFVTkNIX0NBTExFUixcbiAgTGF1bmNoRGlhbG9nU2VydmljZSxcbn0gZnJvbSAnQHNwYXJ0YWN1cy9zdG9yZWZyb250JztcbmltcG9ydCB7IFVzZXJBY2NvdW50RmFjYWRlIH0gZnJvbSAnQHNwYXJ0YWN1cy91c2VyL2FjY291bnQvcm9vdCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24sIGNvbWJpbmVMYXRlc3QsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1xuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgZmlsdGVyLFxuICBtYXAsXG4gIHN3aXRjaE1hcCxcbiAgdGFrZSxcbiAgdGFwLFxufSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBDdXN0b21lckxpc3RBY3Rpb24gfSBmcm9tICcuLi9jdXN0b21lci1saXN0L2N1c3RvbWVyLWxpc3QubW9kZWwnO1xuaW1wb3J0IHsgQXNtQ29tcG9uZW50U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2FzbS1jb21wb25lbnQuc2VydmljZSc7XG5pbnRlcmZhY2UgQ2FydFR5cGVLZXkge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBDQVJUX1RZUEVfS0VZOiBDYXJ0VHlwZUtleSA9IHtcbiAgYWN0aXZlOiAnYXNtLmFjdGl2ZUNhcnRBbGVydEluZm8nLFxuICBpbmFjdGl2ZTogJ2FzbS5zYXZlSW5hY3RpdmVDYXJ0QWxlcnRJbmZvJyxcbn07XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1hc20tbWFpbi11aScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hc20tbWFpbi11aS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEFzbU1haW5VaUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgY3VzdG9tZXJTdXBwb3J0QWdlbnRMb2dnZWRJbiQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGNzQWdlbnRUb2tlbkxvYWRpbmckOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICBjdXN0b21lciQ6IE9ic2VydmFibGU8VXNlciB8IHVuZGVmaW5lZD47XG4gIGlzQ29sbGFwc2VkJDogT2JzZXJ2YWJsZTxib29sZWFuPiB8IHVuZGVmaW5lZDtcbiAgaWNvblR5cGVzID0gSUNPTl9UWVBFO1xuXG4gIHNob3dEZWVwbGlua0NhcnRJbmZvQWxlcnQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID1cbiAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2Uuc2hvdWxkU2hvd0RlZXBsaW5rQ2FydEluZm9BbGVydCgpO1xuICBkZWVwbGlua0NhcnRBbGVydEtleTogc3RyaW5nID0gJyc7XG5cbiAgc2hvd0NyZWF0ZUN1c3RvbWVyU3VjY2Vzc2Z1bGx5QWxlcnQgPSBmYWxzZTtcblxuICBnbG9iYWxNZXNzYWdlVHlwZSA9IEdsb2JhbE1lc3NhZ2VUeXBlO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MuaGlkZGVuJykgZGlzYWJsZWQgPSBmYWxzZTtcblxuICBwcm90ZWN0ZWQgc3RhcnRpbmdDdXN0b21lclNlc3Npb24gPSBmYWxzZTtcbiAgc2hvd0N1c3RvbWVyRW11bGF0aW9uSW5mb0FsZXJ0ID0gdHJ1ZTtcblxuICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcblxuICBAVmlld0NoaWxkKCdjdXN0b21lckxpc3RMaW5rJykgZWxlbWVudDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnYWRkTmV3Q3VzdG9tZXJMaW5rJykgYWRkTmV3Q3VzdG9tZXJMaW5rOiBFbGVtZW50UmVmO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGF1dGhTZXJ2aWNlOiBBdXRoU2VydmljZSxcbiAgICBjc0FnZW50QXV0aFNlcnZpY2U6IENzQWdlbnRBdXRoU2VydmljZSxcbiAgICBhc21Db21wb25lbnRTZXJ2aWNlOiBBc21Db21wb25lbnRTZXJ2aWNlLFxuICAgIGdsb2JhbE1lc3NhZ2VTZXJ2aWNlOiBHbG9iYWxNZXNzYWdlU2VydmljZSxcbiAgICByb3V0aW5nU2VydmljZTogUm91dGluZ1NlcnZpY2UsXG4gICAgYXNtU2VydmljZTogQXNtU2VydmljZSxcbiAgICB1c2VyQWNjb3VudEZhY2FkZTogVXNlckFjY291bnRGYWNhZGUsXG4gICAgbGF1bmNoRGlhbG9nU2VydmljZTogTGF1bmNoRGlhbG9nU2VydmljZVxuICApO1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNy4wXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBhdXRoU2VydmljZTogQXV0aFNlcnZpY2UsXG4gICAgY3NBZ2VudEF1dGhTZXJ2aWNlOiBDc0FnZW50QXV0aFNlcnZpY2UsXG4gICAgYXNtQ29tcG9uZW50U2VydmljZTogQXNtQ29tcG9uZW50U2VydmljZSxcbiAgICBnbG9iYWxNZXNzYWdlU2VydmljZTogR2xvYmFsTWVzc2FnZVNlcnZpY2UsXG4gICAgcm91dGluZ1NlcnZpY2U6IFJvdXRpbmdTZXJ2aWNlLFxuICAgIGFzbVNlcnZpY2U6IEFzbVNlcnZpY2UsXG4gICAgdXNlckFjY291bnRGYWNhZGU6IFVzZXJBY2NvdW50RmFjYWRlLFxuICAgIGxhdW5jaERpYWxvZ1NlcnZpY2U6IExhdW5jaERpYWxvZ1NlcnZpY2UsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmlmaWVkLXNpZ25hdHVyZXNcbiAgICBmZWF0dXJlQ29uZmlnOiBGZWF0dXJlQ29uZmlnU2VydmljZVxuICApO1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgYXV0aFNlcnZpY2U6IEF1dGhTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjc0FnZW50QXV0aFNlcnZpY2U6IENzQWdlbnRBdXRoU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgYXNtQ29tcG9uZW50U2VydmljZTogQXNtQ29tcG9uZW50U2VydmljZSxcbiAgICBwcm90ZWN0ZWQgZ2xvYmFsTWVzc2FnZVNlcnZpY2U6IEdsb2JhbE1lc3NhZ2VTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCByb3V0aW5nU2VydmljZTogUm91dGluZ1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFzbVNlcnZpY2U6IEFzbVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHVzZXJBY2NvdW50RmFjYWRlOiBVc2VyQWNjb3VudEZhY2FkZSxcbiAgICBwcm90ZWN0ZWQgbGF1bmNoRGlhbG9nU2VydmljZTogTGF1bmNoRGlhbG9nU2VydmljZSxcbiAgICBAT3B0aW9uYWwoKSBwcm90ZWN0ZWQgZmVhdHVyZUNvbmZpZz86IEZlYXR1cmVDb25maWdTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1c3RvbWVyU3VwcG9ydEFnZW50TG9nZ2VkSW4kID0gdGhpcy5jc0FnZW50QXV0aFNlcnZpY2VcbiAgICAgIC5pc0N1c3RvbWVyU3VwcG9ydEFnZW50TG9nZ2VkSW4oKVxuICAgICAgLnBpcGUoXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgIHRhcCgobG9nZ2VkSW4pID0+IHtcbiAgICAgICAgICBpZiAoIWxvZ2dlZEluKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgdGhpcy5jc0FnZW50VG9rZW5Mb2FkaW5nJCA9XG4gICAgICB0aGlzLmNzQWdlbnRBdXRoU2VydmljZS5nZXRDdXN0b21lclN1cHBvcnRBZ2VudFRva2VuTG9hZGluZygpO1xuICAgIHRoaXMuY3VzdG9tZXIkID0gdGhpcy5hdXRoU2VydmljZS5pc1VzZXJMb2dnZWRJbigpLnBpcGUoXG4gICAgICBzd2l0Y2hNYXAoKGlzTG9nZ2VkSW4pID0+IHtcbiAgICAgICAgaWYgKGlzTG9nZ2VkSW4pIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUN1c3RvbWVyU2Vzc2lvblN0YXJ0UmVkaXJlY3Rpb24oKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy51c2VyQWNjb3VudEZhY2FkZS5nZXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gb2YodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuaXNDb2xsYXBzZWQkID0gdGhpcy5hc21TZXJ2aWNlXG4gICAgICAuZ2V0QXNtVWlTdGF0ZSgpXG4gICAgICAucGlwZShcbiAgICAgICAgbWFwKCh1aVN0YXRlOiBBc21VaSkgPT5cbiAgICAgICAgICB1aVN0YXRlLmNvbGxhcHNlZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB1aVN0YXRlLmNvbGxhcHNlZFxuICAgICAgICApXG4gICAgICApO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgIHRoaXMubGF1bmNoRGlhbG9nU2VydmljZS5kaWFsb2dDbG9zZVxuICAgICAgICAucGlwZShmaWx0ZXIoKHJlc3VsdCkgPT4gQm9vbGVhbihyZXN1bHQpKSlcbiAgICAgICAgLnN1YnNjcmliZSgocmVzdWx0OiBDdXN0b21lckxpc3RBY3Rpb24gfCBVc2VyIHwgc3RyaW5nKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoJ3NlbGVjdGVkVXNlcicgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnRDdXN0b21lckVtdWxhdGlvblNlc3Npb24ocmVzdWx0LnNlbGVjdGVkVXNlcik7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByZXN1bHQuYWN0aW9uVHlwZSA9PT0gQ3VzdG9tZXJMaXN0Q29sdW1uQWN0aW9uVHlwZS5PUkRFUl9ISVNUT1JZXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oeyBjeFJvdXRlOiAnb3JkZXJzJyB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICgnY3VzdG9tZXJJZCcgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnRDdXN0b21lckVtdWxhdGlvblNlc3Npb24oe1xuICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHJlc3VsdC5jdXN0b21lcklkLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGhpcy5zaG93Q3JlYXRlQ3VzdG9tZXJTdWNjZXNzZnVsbHlBbGVydCA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oJy8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgJ2FjdGlvblR5cGUnIGluIHJlc3VsdCAmJlxuICAgICAgICAgICAgICByZXN1bHQuYWN0aW9uVHlwZSA9PT0gQ3VzdG9tZXJMaXN0Q29sdW1uQWN0aW9uVHlwZS5BQ1RJVkVfQ0FSVFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oeyBjeFJvdXRlOiAnY2FydCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5zdWJzY3JpYmVGb3JEZWVwbGluaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gYWdlbnQgaXMgbG9nZ2VkIGluIGFuZCBkZWVwIGxpbmsgaGFzIGN1c3RvbWVySUQsXG4gICAqIGNhbGwgbG9nb3V0IGlmIGhhcyBjdXN0b21lciBlbXVsYXRlZCh1c2VyTG9nZ2VkaW4pIGJ1dCBub3QgZW11bGF0ZWQgYnkgZGVlcCBsaW5rLlxuICAgKiBjYWxsIHN0YXJ0U2Vzc2lvbldpdGhQYXJhbWV0ZXJzXG4gICAqL1xuICBwcm90ZWN0ZWQgc3Vic2NyaWJlRm9yRGVlcGxpbmsoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZUNvbmZpZz8uaXNMZXZlbCgnNi4yJykpIHtcbiAgICAgIGlmICh0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2UuaXNFbXVsYXRlSW5VUkwoKSkge1xuICAgICAgICAvL0Fsd2F5cyByb3V0ZSB0byBob21lIHBhZ2UgdG8gYXZvaWQgNDA0XG4gICAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oJy8nKTtcbiAgICAgIH1cbiAgICAgIC8vIFRPRE8oQ1hTUEEtMzA5MCk6IFVzZSBhc21EZWVwTGlua1NlcnZpY2Ugb25seSBpbiA3LjAuXG4gICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdGhpcy5hc21Db21wb25lbnRTZXJ2aWNlLmdldERlZXBMaW5rVXJsUGFyYW1zKCkgPz8ge1xuICAgICAgICBjdXN0b21lcklkOiB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2UuZ2V0U2VhcmNoUGFyYW1ldGVyKCdjdXN0b21lcklkJyksXG4gICAgICAgIG9yZGVySWQ6IHRoaXMuYXNtQ29tcG9uZW50U2VydmljZS5nZXRTZWFyY2hQYXJhbWV0ZXIoJ29yZGVySWQnKSxcbiAgICAgICAgdGlja2V0SWQ6IHRoaXMuYXNtQ29tcG9uZW50U2VydmljZS5nZXRTZWFyY2hQYXJhbWV0ZXIoJ3RpY2tldElkJyksXG4gICAgICAgIGNhcnRJZDogdGhpcy5hc21Db21wb25lbnRTZXJ2aWNlLmdldFNlYXJjaFBhcmFtZXRlcignY2FydElkJyksXG4gICAgICAgIGNhcnRUeXBlOiB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2UuZ2V0U2VhcmNoUGFyYW1ldGVyKCdjYXJ0VHlwZScpLFxuICAgICAgICBlbXVsYXRlZDogZmFsc2UsXG4gICAgICB9O1xuICAgICAgdGhpcy5kZWVwbGlua0NhcnRBbGVydEtleSA9IENBUlRfVFlQRV9LRVlbcGFyYW1ldGVycy5jYXJ0VHlwZSB8fCAnJ107XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbi5hZGQoXG4gICAgICAgIGNvbWJpbmVMYXRlc3QoW1xuICAgICAgICAgIHRoaXMuY3VzdG9tZXJTdXBwb3J0QWdlbnRMb2dnZWRJbiQsXG4gICAgICAgICAgdGhpcy5hdXRoU2VydmljZS5pc1VzZXJMb2dnZWRJbigpLFxuICAgICAgICAgIHRoaXMuYXNtQ29tcG9uZW50U2VydmljZS5pc0VtdWxhdGVkQnlEZWVwTGluaygpLFxuICAgICAgICBdKS5zdWJzY3JpYmUoKFthZ2VudExvZ2dlZEluLCB1c2VyTG9nZ2VkaW4sIGlzRW11bGF0ZWRCeURlZXBMaW5rXSkgPT4ge1xuICAgICAgICAgIGlmIChhZ2VudExvZ2dlZEluICYmIHBhcmFtZXRlcnMuY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgaWYgKCFpc0VtdWxhdGVkQnlEZWVwTGluayAmJiB1c2VyTG9nZ2VkaW4pIHtcbiAgICAgICAgICAgICAgdGhpcy5jb25maXJtU3dpdGNoQ3VzdG9tZXIocGFyYW1ldGVycy5jdXN0b21lcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U2Vzc2lvbldpdGhQYXJhbWV0ZXJzKHtcbiAgICAgICAgICAgICAgICAgIC4uLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICBlbXVsYXRlZDogaXNFbXVsYXRlZEJ5RGVlcExpbmssXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBjb25maXJtU3dpdGNoQ3VzdG9tZXIoc3dpdGNoQ3VzdG9tZXJJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jdXN0b21lciRcbiAgICAgIC5waXBlKFxuICAgICAgICBmaWx0ZXIoKGN1ckN1c3RvbWVyKSA9PiAhIWN1ckN1c3RvbWVyKSxcbiAgICAgICAgdGFrZSgxKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoY3VyQ3VzdG9tZXIpID0+IHtcbiAgICAgICAgaWYgKGN1ckN1c3RvbWVyPy5jdXN0b21lcklkICE9PSBzd2l0Y2hDdXN0b21lcklkKSB7XG4gICAgICAgICAgdGhpcy51c2VyQWNjb3VudEZhY2FkZS5nZXRCeUlkKHN3aXRjaEN1c3RvbWVySWQpLnN1YnNjcmliZSh7XG4gICAgICAgICAgICBuZXh0OiAoc3dpdGNoQ3VzdG9tZXIpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sYXVuY2hEaWFsb2dTZXJ2aWNlLm9wZW5EaWFsb2dBbmRTdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgTEFVTkNIX0NBTExFUi5BU01fU1dJVENIX0NVU1RPTUVSLFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICB7IGN1ckN1c3RvbWVyOiBjdXJDdXN0b21lciwgc3dpdGNoQ3VzdG9tZXI6IHN3aXRjaEN1c3RvbWVyIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogKGVycm9yOiBIdHRwRXJyb3JNb2RlbCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmdsb2JhbE1lc3NhZ2VTZXJ2aWNlLmFkZChcbiAgICAgICAgICAgICAgICBlcnJvci5kZXRhaWxzPy5bMF0ubWVzc2FnZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBHbG9iYWxNZXNzYWdlVHlwZS5NU0dfVFlQRV9FUlJPUlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2Uuc2V0RW11bGF0ZWRCeURlZXBMaW5rKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB1cmwgY29udGFpbnMgY3VzdG9tZXJJZCBhbmQgd2UgaGF2ZW4ndCBlbXVsYXRlZEZyb21VUkwsIHdlJ2xsIGNoYW5nZSB0aGUgaXNFbXVsYXRlZEJ5RGVlcExpbmsgZmxhZyBhbmRcbiAgICogc3RhcnQgZW11bGF0ZSBjdXN0b21lciBpbiBVUkwuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhcnRTZXNzaW9uV2l0aFBhcmFtZXRlcnMocGFyYW1ldGVyczogYW55KTogdm9pZCB7XG4gICAgaWYgKCFwYXJhbWV0ZXJzLmVtdWxhdGVkKSB7XG4gICAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2Uuc2V0RW11bGF0ZWRCeURlZXBMaW5rKHRydWUpO1xuICAgICAgdGhpcy5zdGFydEN1c3RvbWVyRW11bGF0aW9uU2Vzc2lvbihcbiAgICAgICAge1xuICAgICAgICAgIGN1c3RvbWVySWQ6IHBhcmFtZXRlcnMuY3VzdG9tZXJJZCxcbiAgICAgICAgfSxcbiAgICAgICAgcGFyYW1ldGVyc1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlQ3VzdG9tZXJTZXNzaW9uU3RhcnRSZWRpcmVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2VcbiAgICAgIC5pc0N1c3RvbWVyRW11bGF0aW9uU2Vzc2lvbkluUHJvZ3Jlc3MoKVxuICAgICAgLnBpcGUodGFrZSgxKSlcbiAgICAgIC5zdWJzY3JpYmUoKGlzQ3VzdG9tZXJFbXVsYXRlZCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGFydGluZ0N1c3RvbWVyU2Vzc2lvbiAmJiBpc0N1c3RvbWVyRW11bGF0ZWQpIHtcbiAgICAgICAgICB0aGlzLnN0YXJ0aW5nQ3VzdG9tZXJTZXNzaW9uID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5nbG9iYWxNZXNzYWdlU2VydmljZS5yZW1vdmUoR2xvYmFsTWVzc2FnZVR5cGUuTVNHX1RZUEVfRVJST1IpO1xuICAgICAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oJy8nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBsb2dpbkN1c3RvbWVyU3VwcG9ydEFnZW50KHtcbiAgICB1c2VySWQsXG4gICAgcGFzc3dvcmQsXG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZztcbiAgICBwYXNzd29yZDogc3RyaW5nO1xuICB9KTogdm9pZCB7XG4gICAgdGhpcy5jc0FnZW50QXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VzdG9tZXJTdXBwb3J0QWdlbnQodXNlcklkLCBwYXNzd29yZCk7XG4gIH1cblxuICBsb2dvdXQoKTogdm9pZCB7XG4gICAgdGhpcy5hc21Db21wb25lbnRTZXJ2aWNlLmxvZ291dEN1c3RvbWVyU3VwcG9ydEFnZW50QW5kQ3VzdG9tZXIoKTtcbiAgfVxuXG4gIHN0YXJ0Q3VzdG9tZXJFbXVsYXRpb25TZXNzaW9uKFxuICAgIHsgY3VzdG9tZXJJZCB9OiB7IGN1c3RvbWVySWQ/OiBzdHJpbmcgfSxcbiAgICBwYXJhbWV0ZXJzPzogQXNtRGVlcExpbmtQYXJhbWV0ZXJzXG4gICk6IHZvaWQge1xuICAgIGlmIChjdXN0b21lcklkKSB7XG4gICAgICB0aGlzLmNzQWdlbnRBdXRoU2VydmljZS5zdGFydEN1c3RvbWVyRW11bGF0aW9uU2Vzc2lvbihjdXN0b21lcklkKTtcbiAgICAgIHRoaXMuc3RhcnRpbmdDdXN0b21lclNlc3Npb24gPSB0cnVlO1xuICAgICAgdGhpcy5zaG93Q3VzdG9tZXJFbXVsYXRpb25JbmZvQWxlcnQgPSB0cnVlO1xuICAgICAgdGhpcy5zaG93Q3JlYXRlQ3VzdG9tZXJTdWNjZXNzZnVsbHlBbGVydCA9IGZhbHNlO1xuICAgICAgaWYgKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgLy8gVE9ETyhDWFNQQS0zMDkwKTogUmVtb3ZlIGZlYXR1cmUgZmxhZyBpbiA3LjBcbiAgICAgICAgaWYgKHRoaXMuZmVhdHVyZUNvbmZpZz8uaXNMZXZlbCgnNi4zJykpIHtcbiAgICAgICAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2UuaGFuZGxlRGVlcExpbmtOYXZpZ2F0aW9uKHtcbiAgICAgICAgICAgIGN1c3RvbWVySWQsXG4gICAgICAgICAgICAuLi5wYXJhbWV0ZXJzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRPRE9pKENYU1BBLTMwOTApOiBSZW1vdmUgdGhpcyBpbXBsZW1lbnRhdGlvbiBpbiA3LjBcbiAgICAgICAgICB0aGlzLmhhbmRsZURlZXBMaW5rUGFyYW1zQWZ0ZXJTdGFydFNlc3Npb24ocGFyYW1ldGVycyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nbG9iYWxNZXNzYWdlU2VydmljZS5hZGQoXG4gICAgICAgIHsga2V5OiAnYXNtLmVycm9yLm5vQ3VzdG9tZXJJZCcgfSxcbiAgICAgICAgR2xvYmFsTWVzc2FnZVR5cGUuTVNHX1RZUEVfRVJST1JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZURlZXBMaW5rUGFyYW1zQWZ0ZXJTdGFydFNlc3Npb24oXG4gICAgcGFyYW1ldGVyczogQXNtRGVlcExpbmtQYXJhbWV0ZXJzXG4gICkge1xuICAgIGlmIChcbiAgICAgIChwYXJhbWV0ZXJzLmNhcnRUeXBlID09PSAnYWN0aXZlJyB8fFxuICAgICAgICBwYXJhbWV0ZXJzLmNhcnRUeXBlID09PSAnaW5hY3RpdmUnKSAmJlxuICAgICAgcGFyYW1ldGVycy5jYXJ0SWRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1ldGVycy5jYXJ0VHlwZSA9PT0gJ3NhdmVkJyAmJiBwYXJhbWV0ZXJzLmNhcnRJZCkge1xuICAgICAgLy8gTmF2aWdhdGUgdG8gc2F2ZWQgY2FydFxuICAgICAgdGhpcy5yb3V0aW5nU2VydmljZS5nbygnbXktYWNjb3VudC9zYXZlZC1jYXJ0LycgKyBwYXJhbWV0ZXJzLmNhcnRJZCk7XG4gICAgfSBlbHNlIGlmIChwYXJhbWV0ZXJzLm9yZGVySWQpIHtcbiAgICAgIC8vIE5hdmlnYXRlIHRvIG9yZGVyIGRldGFpbHNcbiAgICAgIHRoaXMucm91dGluZ1NlcnZpY2UuZ28oe1xuICAgICAgICBjeFJvdXRlOiAnb3JkZXJEZXRhaWxzJyxcbiAgICAgICAgcGFyYW1zOiB7IGNvZGU6IHBhcmFtZXRlcnMub3JkZXJJZCB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwYXJhbWV0ZXJzLnRpY2tldElkKSB7XG4gICAgICAvLyBOYXZpZ2F0ZSB0byBzdXBwb3J0IHRpY2tldCBkZXRhaWxzXG4gICAgICB0aGlzLnJvdXRpbmdTZXJ2aWNlLmdvKHtcbiAgICAgICAgY3hSb3V0ZTogJ3N1cHBvcnRUaWNrZXREZXRhaWxzJyxcbiAgICAgICAgcGFyYW1zOiB7IHRpY2tldENvZGU6IHBhcmFtZXRlcnMudGlja2V0SWQgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGhpZGVVaSgpOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmFzbUNvbXBvbmVudFNlcnZpY2UudW5sb2FkKCk7XG4gIH1cblxuICBzaG93Q3VzdG9tTGlzdCgpOiB2b2lkIHtcbiAgICB0aGlzLmxhdW5jaERpYWxvZ1NlcnZpY2Uub3BlbkRpYWxvZ0FuZFN1YnNjcmliZShcbiAgICAgIExBVU5DSF9DQUxMRVIuQVNNX0NVU1RPTUVSX0xJU1QsXG4gICAgICB0aGlzLmVsZW1lbnRcbiAgICApO1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmxhdW5jaERpYWxvZ1NlcnZpY2UuY2xvc2VEaWFsb2coJ2xvZ291dCcpO1xuICB9XG5cbiAgY3JlYXRlQ3VzdG9tZXIoKTogdm9pZCB7XG4gICAgdGhpcy5sYXVuY2hEaWFsb2dTZXJ2aWNlPy5vcGVuRGlhbG9nQW5kU3Vic2NyaWJlKFxuICAgICAgTEFVTkNIX0NBTExFUi5BU01fQ1JFQVRFX0NVU1RPTUVSX0ZPUk0sXG4gICAgICB0aGlzLmFkZE5ld0N1c3RvbWVyTGlua1xuICAgICk7XG4gIH1cblxuICBjbG9zZURpYWxvZ0NvbmZpcm1hdGlvbkFsZXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd0NyZWF0ZUN1c3RvbWVyU3VjY2Vzc2Z1bGx5QWxlcnQgPSBmYWxzZTtcbiAgfVxuXG4gIGNsb3NlRGVlcGxpbmtDYXJ0SW5mb0FsZXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuYXNtQ29tcG9uZW50U2VydmljZS5zZXRTaG93RGVlcGxpbmtDYXJ0SW5mb0FsZXJ0KGZhbHNlKTtcbiAgfVxuXG4gIGNsb3NlQ3VzdG9tZXJFbXVsYXRpb25JbmZvQWxlcnQoKTogdm9pZCB7XG4gICAgdGhpcy5zaG93Q3VzdG9tZXJFbXVsYXRpb25JbmZvQWxlcnQgPSBmYWxzZTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiYXNtLWJhclwiPlxuICA8ZGl2IGNsYXNzPVwiYXNtLWJhci1icmFuZGluZ1wiPlxuICAgIDxpbWdcbiAgICAgIGNsYXNzPVwibG9nb1wiXG4gICAgICBzcmM9XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUdBQUFBQXdDQVlBQUFEdUZuL1BBQUFBQVhOU1IwSUFyczRjNlFBQUQ3UkpSRUZVZUFIdFczdHdWR2NWUDd0Nzk1VjMwcndKQkJKZUFTcTAxTkpnblphMm90VFcybkhBcXJSYWsrclVLZmdZWi94RFc1bFJSMmUwL21HdEFhZHFxNldqVUFkTmE0dWRxVlphRWR0Q0tRMkZRRWg1SlNRaDVMbnZwNy9mdDlsa2Q5bDdzd2tod01pWjNOMjc5MzdmZDg1MzN1ZmNHOVAxTC9WRTVTcE1Pd2RNbWswaW9jRHpXakFVbm5iay85Y0lUU1l4Mnh3UzlYczNXenM3Tm1xaGNPVC9taC9UdW5rdzMyU3pTY2pyMlZ5MnYzWERhNXRXaGJSSTVLb0htaTRobUd4MmlmaThtejhVbXZISTlrMlZ5dlZva2FzV01DMzhOOEh0Ukh5ZXpVZWpleDVwWGJkdTFPOXI1cXNDdUxnQ1VENGZtdS8xYnE1c2JkOXdkTk1ZODRsWU0xMFZ3TVVUQUpsdnRVblU0OTFjMFhaYytmeFVaRm8wTW40UWppSk1NRlJFY0tKRzR4eHJDLzdFVENRODU0K0pBdGJCbnk1TWFrM2QxYWIzQnNLdENyaGh1SjJLOWxOcG1VK0tZQUhwV1JBRmE0SzR4N3Q1Tm91VTVXaFM0clJJdnQwaWRvdEozTUdJRFBnajB1c05TWjh2TE1PQmlJUWhKUXVrb1prcEhHT0pjR1hMaVBEMFdCTlN0T212UThFVEFqcDdpTjBkKytSZWxCTGhCRnNBblZRZS9mWEhaazd3REV1YXJYYUpCcnhORmUybk56TGIwVnNCTVdBMEhveU84V05ERG5EeEl6T3k1T056Y3VYNk1xZFU1Vmh4TFpsWVdvVXZGSkV1ZDBpT0RRWmtiNWRYSGExOVBuRUZ3MkxEQmkwUVJxcWFjMTRCQlBuejJ5dWwwR0VaeFp0Njh2emhRWG02cFMrR2w5eExBTkw0dVVXRnNtNWhQbWlJamlQdTJFUXFTWThuSkNlSEFuSzR6eSt0T0xyZFFYWFRDbHFWTEZMd0pLRE03QlNMbU1EOGlOL2J0Q1JuM29idG0rYWR6K0NFbFRUbFcwWXVFRGUxcVI2TS8vb05KWEpEUlZiQzBQTlBxWUZaVnJQVUZOalU4YkhxSEdVRjNOeEx4NFprWi91UWRMbk9GMzRBY2FkK1RvNnNyRFJlLzdNTDgrVDVRLzNLRXBORkQ1bGlqVktuV2E0dGRweFBXSVpYZWlHTS8zUzY1WS92RDhoYm5SNmxMQmRrRWRSOERacnY5elV0eVQrd1lmdTYrWWJNSjVtalFaak1aMUgyMEhYRjhzMFZaV0tqalU0QzZJSVdneWs4UGxxVkxZMHZuaERHa01UVk5KakEzYlY1NDY0K3Q5QWhTNHZ0c3FmREJXdWlLWTBCazRkSWhxNW5iRmJ5V1hHV0puZlB6WmMxTlJUMGdEeStwMXVHL1dIbG1wSkhadkFMRzZUbVIvMmVwb09GQnpjY1RFZzFqV2FiVFhCQnBraFlnb0dRTkN5OVJyNnpzbnpTekU5RVJLWnZhemtuQVg5SXpGaGY0UUd1TUZvZk5YbWFyS2pNVGh5ZTlwd1d0cVltVjZKd2MyUjRmSTNSYi9xeUtRREdndnNXRjhvdlZsY0pTRU9QSnNhVFVUemtrZEdCUk1ac3RvckE3U3dxWExSQk1tUStTVGN6Qy9JSHduQTNUdmxHZmRrVWJDZTJ4QnNuaG1WbmE3OVlUUWkzWUI3eDhBaEEwTGZQenBOc1c3Skc2eUcrQldPTEhXWUpnd0h4TlVhL0tlVXBoUHFaT2ZLdCtuS2xKSWswaitJYjJVUHliOFFmTUQvcTh6WVY5L1J1M0w3T05LN2JTU1RaSElVWm02RkpEZGVYSXJzWm55bk1kQmg0amZidVIxQjhZbmVuaEJDSVZaWkZWNEdEdUxMaDJqNHhMeitSQnNQenlseXJzcFlBbElSckpCMVRaQUdKQkh4bVVaRmNWNVlGUlVtREx4VS9mcFA1YUM4MEZmZjFHV1k3aVRnU3p6V2EyNndDdTZ5QTlJM2c3VlBEc3UxQXIzelE3NU1BR0V3TkxuQm9VZ3RmdjJKbXJpeWJrU001U0ZjSk8xcDY1WjNUdzJKblBncXRpVU1JZ2x1R3NYVWx6dmlsakw3dm5GOGdMeDg2aDdVU2huTmRJeTNBME5lT0RjcnJId3dxbjU2THJLdjJHdEE2SzArSzRQdjF3QW9GK1NUdzdUMDVsQnk0a2liUThsaGtNZHZ4TlpVTUQwNksrVnhTQzBOTGF3dHRvOHhMd2pQeVl4K1kyYkN0VlZ3akFZcnBHdmRPQlh6bGNGU2VndVZVRjlybHpyb2l1WGxPZ2Z6bXYyZkV3Z0Z3RzRrUWhpdGFnODB4VUU4RWJnTFRac0lTT2diOVkzTWh6UEVFOE5hcElkbXl1ME1jeU5SSURqT2NtVkMyeDFaWHk2MjFCYm9rTEsvS0VaUThDUExKOUk5T3dEcG05UE9SN2Z6cVlQWHlqVEpCdHpPNkRrNFFIOE1vc1BRMWdvTkQ0RFNETkZDS0RUNGRIazk5Tzh4UlJTakthVG5SNjVGZjdqb2xYMzd1ZlRuVDc4VVlCRTFvYWZ5Z1QyVWhkOXZjd2tUOEdaM25vVmE0dFNZLzV0SVMxalFCcnhGWUlXZGtxdXJJQWtNZG9MMmp6eXZmLzF1N2RBOEhkS2RXNUZtbENIRW5Gb3pIOXFBU0FmRENZdExZejIrcWU3UDlncGhQQWhBREVCaXBUUVp3SXpUd0ozZlZTbW0yVlR5K2tBUmdOZXlpcWtERmJ6REZvb1Fpb2g3dzRQZm92WkZ4REw3VTVNcDhXMXBNckxwcFlYcXdCdGJGdUoyTUYycHRBRkV3SzRrTzBNV2tvR1BBSy9zN2huVm5NaFptdzMwbTRlSSthRVpnUHR6T3IrcHFUbXpZdmoyNXNhYTdvTUVOaURJcTNVTitneUd4VzUrNnRrUnVyTTZYSGUvMnlJc3RaNlh0ckVjSlRnT3hUT1BvbHVJVmJ5cGIrSnZLK3NsRjEramlhZS8xeXV2SCtxVng1WXkwWTY2dHpKWDV4Vm5TY3NZbHJGcFpBNUFmUmtDR2NWd0Vsam9Lb0RPTWF6NVV4WHFnSVE3QWE2bHhvMU14ajNsK09PRDczZUVGS3plMnJLdlgxeGE5aGROY3gxYWljcWpMSmIwdWZaT016eXZQczhuREg2MlNQemN1bFdjZVdBSm1WVWtOQWxzQWdkd0Z5d2hDUzBMUXN0VER6MEJmWkplYkVCLzBZTThIQTdKamY3ZXFwTk9OWVdGNHg0SkM4UVZEYXYwZzhMQ3ZZd1M4ejNHSjlORGFFWTlsZnFsK0ZjNGtnL3NKSjh3Tm0yMFM5bnUzK3NLQnIxMkl6MCtsMTB3dE9RMmZUYTNPRkJqVWJwcWRMOS85eEJ6NXkxZVh5Vk5mV0N5MEVBMGJjNlB3NG9aSmZQend3V1hkUHI5SWNyaHpIZGpWMWljSG9kMjBMRDFZWFZlczFxQ2d1Zlo0QW1ES1RPRlRRVWdEYWZQZytQd05GYklBcWFZZXVPRUtlOTBCNVhJVUhnc2VJd2E5Vy8zUllPUHhUYXQ4ZXZNbWMxMjFvK20vbS81MVFsYUJTZFZGRTBzUm5WYUxtc2U1TFowdWVlSzE0L0lTaEtrNm5iUXZDRGlMcWQzaVlsMzZ1dUFDOTUwY0ZLOC9LSzlERUF2SzBsZkpjMHV5WkhsVnJ2enp5TG1ZK3huSEF2SWc4Q3BZclFNMFppR0FWRitUSlhkRFVlNit0dFN3QzlyYTdaSitlQVNWcmFHM0E1Ky8xVkxxYm1qZmVPZjR2bHAzbCtsdlFBQW94SER2TkxLRGg3ZStKMXZXZjBobW9nY3pHVmhTbVNOYlByOUVudm5QYWZuQjM0NGlJTlA4bzNMajdBSlpEQit1QjN2YSs2VjcwS2NDK1Q5YnowbkR5cGxwbnk4d3p0eTFwRlJlUFhRMkl3RThXRDlEUGdkdE4yRWlCV0JGdk1vRVhubS9WL3h3ZGRuT0xIWTFuOU9HZlExdFA1eDY1cE1XMVBnSVJqaVlZZXcvTVNqM2Jka3Jmei9Za3dtZHVtTytXRjhsUDc1M0lWTFFxRW9kNzRMV3NjRFJnMWNQOWFwK2p4V01PZ0JMNkJqUXQvSlZDNHFrSWdmdjFKQnVyRzhFMVB5Q0xLdmtJODNPbFBrbm9ZZ3Z2dHNsRGp6RERRZThXOEg4TDdjOWNYR1lUOXFSYTJFVFBKQVoyT0V5VHZTNjVTdFB2eXNQLy82QXZIMTh3R2gvaHZmV0xxK1F0Y3ZMaFc1ZzlhSVMzYkg5Nk1mL3R3MDlJeWdBQXBMMER2bGtkeHVxWGgwb3k3UEx6YWdsbU5iR3pFQm40Q1F1TTJiODZJVWpjdFlGcnhEMGJUVTVMSTBYay9razBSeGhNRXM0R0NicGxuYnM3WkMxVDc0bFg5anl0dnpwelE0NVk2Q1ZlbnRkZjFPVnJJSExtR2tRVi9hMDk4bXBjMjR4Z2ZtS0RtajJLeTNHRm5qWDBqSUlpM3BqYkFGNmRLVzd6anJrc1IySHBmbTlQdEVpL3EzUkxHM0tBMjQ2dkJyZFJDclFXVGpnTDFrSi9nUE00RkdlNzVEbDhPVjNMQzZWVzVDTlZCU01IeWNXVnVUS04xZlhwaTZmOUpzdWg4MUF0cTBKVklBUGV0d3loRWVkZVRvVitzcmFJdlNnbk9oYW5rKzdXbVNDSDBlUmh2OFltcjhUendTUTd6eHI3cmM5ZFB6eHFjMTI5RWd5MVh6OXBhUmQ4RWVxdCtZMWxWTmp3end2UnovbDA4dG55Q05nYmhIODhZVUFVOE8yYnJkMEloWDI0emx6Q1Z6TWJHUTdGTERSMDZudmJUc29kdml0UisrdG14VDZRVTlRRHFFYWZ1R2RUbW5lZDBiNmZTYXhnL21Sd2E2SGpqLzlvSDRRbWhRMi9Vbm5XUUFMRldZYkRGcHhRZkNiK1FNclJBcWdIMDJ4SjNjZWxkT0lGNXNibCtOaFJIeWtQaUs5TzlsMlRaYk95bGVIM3BoMDE5ZkFEZTA1cWg4ck9PZU53NzJ5KzBndjZJN3RoU254T2FTWHA4OTVZR1VlbGZteFRuQTRuR0tQQnJmQ3JUVzJQLzNnbEtlYTZlaVBYOU1zOFA5eFlNcTQvaU96bEF2WTA5cXJMdHRJZkRyK1FpTHRuVU1xZmxNNDB3M0xxZ3RRTnhoM0E5NTR2MGNlYno0c3pwRTJPV25rWHBpV01zZG5DOFh1UUxhRGdCczFXeG91ZHNCTnh5TllRRXdBWlA2YzBoeDVkTzBTVlVUdGhHbHUvL2NKT1hDOFg0Yng4Sm91U0FrQ0pzQVpPWGdXOE5BZHRjb3EwaTE4c2E5bEEvL05DL1dMTytKbnp5Z2JiM0trdnMyaGFJTWd6S2h3STBnMW94YnJKV0UrNmRBczlDbUFJUHp2QTdmT1JzRVNheGZjYzJPVmZPckRWWEtzYTFnT25oeVFEclNiQjFDZTB5K1hvVkJic2FCRUZzM00vTWxXRE12VWZqb1NORHZkeXJSTTdpKyt4OFF4SmpJLzZIczJyRmt2ZXFxWmlEZjFYRmtBVTdCNTVUbnk2ZnBaU2ZlcDhYT1J5ZkM0SW9FdFdGcDRCQnNaQWI0d3B2NDVJdWgvMXV2dlk4Q2RWcDhmcHlQK3JiSDRpU0lRclY4MUIya2ZudXhQQS9BbGdKOXRmMC9LVVI4c3FpNlU4a0lueW42ckN2cE1BczZoR0R1SlZIUS9Dckw3YnF1UnVaWGp2OEtTam15MC90V1RPZlYwYm1TQWNqc2gvN09ld01DMFpqdnA2T00xamErSjFNR1ZyTDFsanQ2WUtiL2VodUQ5M0t2SFZKZlNqbmFCMDZhSk52TFdIUlhXajg2bEYrbXBGNElxUlRvNldRSHdBUVVMUEI0RUV4dHJZTDdYNldnOC91dExxL2x4cHBwWlVmclErMzd0blROcTQvRWJrL2xtb0g3OTNUT0tlVWJ6ZDJFTTM1aklCdk1aY2Z4Z3RodnhoWWZYaXpZd3FtRW5ua2p4SWYrL1c3clFxb294MEdqTmRQZG9BU3cwZVpqUnp4ZjRmRytINDVMNi9GUTZ6VlM4TTJkZDh1MG5kOHY5UC95SC9IN25FVG5kNDBvZFovaWI3Tm1IZlB1clA5MGxieDd1RVNkeWV5UFl0YjhUandiQkhBaU1McER0Y0FvaWZ2QWE3L0hkMGtOb1ZVeVVuamh1OWI0bjEwZkFOUVg4ZjNCbmRUYTJ2WHp4R210eHZCUDVObDMzcFcxS3ZVQ25laldSMmxhRWFyUU92bm5adkdLcG0xMG9sWGdVV0pockZ4czBsc0N4TGs5QXVsRzl0b0JCYjBDajZhL2QzcUNzdmExVzVsVFFaNnRsMWZqRWowRm8rWE92SEFVdU1Ia3NOaVlPU1RwblMvdE9KQWNMWnZGaGZ2bzFreVlrL05qZDBpMXZIeGxBYkFsdGMzVmxQM0M1TVora21xNTc0RS9uN1lxdWhPK0pzdVBMZ3NXSmppYURaTHlseXdrK3VJMWhNSnpwS3l0aEsxd0dHY3JmUmk2RFl5aklESGdmWXlVR0JyRG1aUDZYeldaSE8wTkN6UjZMZlgzcmIrL1Jmd29mdzNSSlByVjRnRXJFcmx3QkttRGxFM0FqREFZTUJuMUozVjh5a2srOU5QYVJDVFFML0ttWGVnMTYvNk5qMVVrR0gxaVQvNDhBWkJrTUhodkN0NVFqNFVDelczTmN0c3dudFJyNWxnbW8vRG1WQnpHZVp6SjlXc2VRK2VGZ29Oa3o1RnJmMnZ6WnkxTHo0d3hCRE01UUF2RVpsL20zMmNKVUU4eTNrZmtObHpYenlVcjFYdEJsenRPTXlWTnVKK1J2ZGc1NzF1KzdBcGcvSW9DTTkzZFpEK1M3bW5BN2YvVzRQUGRmS2N3ZkVjQ1Y3NEtVMjZIUGQzdnZ2eExjVHFJbVg0cFdmaUwrQ3o3bmY2WkVJOEcvdXQzZUs4TG5wMjU0cEFPVGV2bksrRzB5STRSRlF2dHpROXI2dmMwTkV5dmZMNU10L2c4WEliVFZoc2lnK2dBQUFBQkpSVTVFcmtKZ2dnPT1cIlxuICAgICAgd2lkdGg9XCI0OFwiXG4gICAgICBoZWlnaHQ9XCIyNFwiXG4gICAgICBhbHQ9XCJ7eyAnYXNtLm1haW5Mb2dvTGFiZWwnIHwgY3hUcmFuc2xhdGUgfX1cIlxuICAgIC8+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYXNtLXRpdGxlXCI+XG4gICAgICB7eyAnYXNtLm1haW5UaXRsZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImFzbS1iYXItYWN0aW9uc1wiPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLWxpc3RcIlxuICAgICAgKm5nSWY9XCJjdXN0b21lclN1cHBvcnRBZ2VudExvZ2dlZEluJCB8IGFzeW5jXCJcbiAgICA+XG4gICAgICA8YVxuICAgICAgICAjY3VzdG9tZXJMaXN0TGlua1xuICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItbGlzdC1saW5rXCJcbiAgICAgICAgKGNsaWNrKT1cInNob3dDdXN0b21MaXN0KClcIlxuICAgICAgPlxuICAgICAgICA8Y3gtaWNvbiBbdHlwZV09XCJpY29uVHlwZXMuVVNFUl9GUklFTkRTXCI+PC9jeC1pY29uPlxuICAgICAgICA8c3Bhbj57eyAnYXNtLmN1c3RvbWVycycgfCBjeFRyYW5zbGF0ZSB9fTwvc3Bhbj48L2FcbiAgICAgID5cbiAgICA8L2Rpdj5cblxuICAgIDxjeC1hc20tdG9nZ2xlLXVpPjwvY3gtYXNtLXRvZ2dsZS11aT5cblxuICAgIDxjeC1hc20tc2Vzc2lvbi10aW1lclxuICAgICAgKm5nSWY9XCJjdXN0b21lclN1cHBvcnRBZ2VudExvZ2dlZEluJCB8IGFzeW5jXCJcbiAgICA+PC9jeC1hc20tc2Vzc2lvbi10aW1lcj5cblxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiY2xvc2VcIlxuICAgICAgdGl0bGU9XCJ7eyAnYXNtLmhpZGVVaScgfCBjeFRyYW5zbGF0ZSB9fVwiXG4gICAgICAqbmdJZj1cIlxuICAgICAgICAhKGN1c3RvbWVyU3VwcG9ydEFnZW50TG9nZ2VkSW4kIHwgYXN5bmMpICYmXG4gICAgICAgICEoY3NBZ2VudFRva2VuTG9hZGluZyQgfCBhc3luYylcbiAgICAgIFwiXG4gICAgICAoY2xpY2spPVwiaGlkZVVpKClcIlxuICAgID48L2J1dHRvbj5cblxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwibG9nb3V0XCJcbiAgICAgIHRpdGxlPVwie3sgJ2FzbS5sb2dvdXQnIHwgY3hUcmFuc2xhdGUgfX1cIlxuICAgICAgKm5nSWY9XCJjdXN0b21lclN1cHBvcnRBZ2VudExvZ2dlZEluJCB8IGFzeW5jXCJcbiAgICAgIChjbGljayk9XCJsb2dvdXQoKVwiXG4gICAgPjwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48bmctY29udGFpbmVyICpuZ0lmPVwiIShpc0NvbGxhcHNlZCQgfCBhc3luYykgYXMgbm90Q29sbGFwc2VkXCI+XG4gIDxuZy1jb250YWluZXJcbiAgICAqbmdJZj1cImN1c3RvbWVyU3VwcG9ydEFnZW50TG9nZ2VkSW4kIHwgYXN5bmM7IGVsc2Ugc2hvd0xvZ2luRm9ybVwiXG4gID5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY3VzdG9tZXIkIHwgYXN5bmM7IGVsc2Ugc2hvd0N1c3RvbWVyU2VsZWN0aW9uXCI+XG4gICAgICA8Y3gtY3VzdG9tZXItZW11bGF0aW9uICpuZ0lmPVwibm90Q29sbGFwc2VkXCI+PC9jeC1jdXN0b21lci1lbXVsYXRpb24+XG4gICAgICA8IS0tIFRPRE86KENYU1BBLTMwOTApIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWwgLS0+XG4gICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIic2LjEnXCI+XG4gICAgICAgIDxjeC1tZXNzYWdlXG4gICAgICAgICAgKm5nSWY9XCJub3RDb2xsYXBzZWQgJiYgc2hvd0NyZWF0ZUN1c3RvbWVyU3VjY2Vzc2Z1bGx5QWxlcnRcIlxuICAgICAgICAgIFt0ZXh0XT1cIidhc20uY3JlYXRlQ3VzdG9tZXJTdWNjZXNzZnVsbHlBbGVydCcgfCBjeFRyYW5zbGF0ZVwiXG4gICAgICAgICAgW3R5cGVdPVwiZ2xvYmFsTWVzc2FnZVR5cGUuTVNHX1RZUEVfQ09ORklSTUFUSU9OXCJcbiAgICAgICAgICAoY2xvc2VNZXNzYWdlKT1cImNsb3NlRGlhbG9nQ29uZmlybWF0aW9uQWxlcnQoKVwiXG4gICAgICAgID5cbiAgICAgICAgPC9jeC1tZXNzYWdlPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIic2LjInXCI+XG4gICAgICAgIDxjeC1tZXNzYWdlXG4gICAgICAgICAgKm5nSWY9XCJzaG93RGVlcGxpbmtDYXJ0SW5mb0FsZXJ0JCB8IGFzeW5jXCJcbiAgICAgICAgICBbdGV4dF09XCJkZWVwbGlua0NhcnRBbGVydEtleSB8IGN4VHJhbnNsYXRlXCJcbiAgICAgICAgICBbdHlwZV09XCJnbG9iYWxNZXNzYWdlVHlwZS5NU0dfVFlQRV9JTkZPXCJcbiAgICAgICAgICAoY2xvc2VNZXNzYWdlKT1cImNsb3NlRGVlcGxpbmtDYXJ0SW5mb0FsZXJ0KClcIlxuICAgICAgICA+XG4gICAgICAgIDwvY3gtbWVzc2FnZT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi4zJ1wiPlxuICAgICAgICA8Y3gtbWVzc2FnZVxuICAgICAgICAgICpuZ0lmPVwibm90Q29sbGFwc2VkICYmIHNob3dDdXN0b21lckVtdWxhdGlvbkluZm9BbGVydFwiXG4gICAgICAgICAgW3RleHRdPVwiJ2FzbS5zdGFydEN1c3RvbWVyRW11bGF0aW9uQWxlcnRJbmZvJyB8IGN4VHJhbnNsYXRlXCJcbiAgICAgICAgICBbdHlwZV09XCJnbG9iYWxNZXNzYWdlVHlwZS5NU0dfVFlQRV9JTkZPXCJcbiAgICAgICAgICAoY2xvc2VNZXNzYWdlKT1cImNsb3NlQ3VzdG9tZXJFbXVsYXRpb25JbmZvQWxlcnQoKVwiXG4gICAgICAgID5cbiAgICAgICAgPC9jeC1tZXNzYWdlPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPG5nLXRlbXBsYXRlICNzaG93Q3VzdG9tZXJTZWxlY3Rpb24+XG4gICAgICA8Y3gtY3VzdG9tZXItc2VsZWN0aW9uXG4gICAgICAgICpuZ0lmPVwibm90Q29sbGFwc2VkXCJcbiAgICAgICAgKHN1Ym1pdEV2ZW50KT1cInN0YXJ0Q3VzdG9tZXJFbXVsYXRpb25TZXNzaW9uKCRldmVudClcIlxuICAgICAgPjwvY3gtY3VzdG9tZXItc2VsZWN0aW9uPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy10ZW1wbGF0ZSAjc2hvd0xvZ2luRm9ybT5cbiAgICA8Y3gtY3NhZ2VudC1sb2dpbi1mb3JtXG4gICAgICAqbmdJZj1cIm5vdENvbGxhcHNlZFwiXG4gICAgICAoc3VibWl0RXZlbnQpPVwibG9naW5DdXN0b21lclN1cHBvcnRBZ2VudCgkZXZlbnQpXCJcbiAgICAgIFtjc0FnZW50VG9rZW5Mb2FkaW5nXT1cImNzQWdlbnRUb2tlbkxvYWRpbmckIHwgYXN5bmNcIlxuICAgID48L2N4LWNzYWdlbnQtbG9naW4tZm9ybT5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctY29udGFpbmVyPlxuIl19