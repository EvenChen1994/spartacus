/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component } from '@angular/core';
import { ICON_TYPE } from '@spartacus/storefront';
import { combineLatest } from 'rxjs';
import { map } from 'rxjs/operators';
import { PaymentCardCode, } from '@spartacus/asm/customer-360/root';
import * as i0 from "@angular/core";
import * as i1 from "../asm-customer-360-section-context.model";
import * as i2 from "@spartacus/core";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@angular/common";
export class AsmCustomer360ProfileComponent {
    constructor(sectionContext, translation) {
        this.sectionContext = sectionContext;
        this.translation = translation;
        this.focusConfig = {
            trap: true,
            block: true,
            autofocus: 'customer-list-selector',
            focusOnEscape: true,
        };
        this.iconTypes = ICON_TYPE;
    }
    ngOnInit() {
        this.customerProfileData$ = this.sectionContext.data$.pipe(map((data) => {
            return data?.profile;
        }));
    }
    getCardContent({ defaultPayment, expiryMonth, expiryYear, cardNumber, cardType, }) {
        return combineLatest([
            this.translation.translate('paymentCard.expires', {
                month: expiryMonth,
                year: expiryYear,
            }),
            this.translation.translate('paymentCard.defaultPaymentMethod'),
        ]).pipe(map(([textExpires, textDefaultPaymentMethod]) => {
            const card = {
                role: 'region',
                header: defaultPayment ? textDefaultPaymentMethod : undefined,
                text: [cardNumber ?? '', textExpires],
                img: this.getCardIcon(cardType?.code ?? ''),
                label: defaultPayment
                    ? 'paymentCard.defaultPaymentLabel'
                    : 'paymentCard.additionalPaymentLabel',
            };
            return card;
        }));
    }
    getCardIcon(code) {
        let ccIcon;
        if (code === PaymentCardCode.VISA) {
            ccIcon = this.iconTypes.VISA;
        }
        else if (code === PaymentCardCode.MASTER ||
            code === PaymentCardCode.MASTERCARD_EUROCARD) {
            ccIcon = this.iconTypes.MASTER_CARD;
        }
        else if (code === PaymentCardCode.DINERS) {
            ccIcon = this.iconTypes.DINERS_CLUB;
        }
        else if (code === PaymentCardCode.AMEX) {
            ccIcon = this.iconTypes.AMEX;
        }
        else {
            ccIcon = this.iconTypes.CREDIT_CARD;
        }
        return ccIcon;
    }
}
AsmCustomer360ProfileComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360ProfileComponent, deps: [{ token: i1.AsmCustomer360SectionContext }, { token: i2.TranslationService }], target: i0.ɵɵFactoryTarget.Component });
AsmCustomer360ProfileComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: AsmCustomer360ProfileComponent, selector: "cx-asm-customer-360-profile", ngImport: i0, template: "<div class=\"cx-asm-customer-360-profile\">\n  <ng-container *ngIf=\"customerProfileData$ | async as customerProfileData\">\n    <div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <h4 class=\"mt-4 mb-3\">\n            {{ 'asmCustomer360.profile.address' | cxTranslate }}\n          </h4>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.billingAddress' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container billing-address\">\n            <ng-container\n              *ngTemplateOutlet=\"\n                address;\n                context: { address: customerProfileData?.billingAddress }\n              \"\n            ></ng-container>\n          </div>\n        </div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.deliveryAddress' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container delivery-address\">\n            <ng-container\n              *ngTemplateOutlet=\"\n                address;\n                context: { address: customerProfileData?.deliveryAddress }\n              \"\n            ></ng-container>\n          </div>\n        </div>\n        <div class=\"w-100 d-lg-none\"></div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.phone1' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container profile-phone1\">\n            {{ customerProfileData?.phone1 }}\n          </div>\n        </div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.phone2' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container profile-phone2\">\n            {{ customerProfileData?.phone2 }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <h4 class=\"mt-4 mb-4\">\n      {{ 'asmCustomer360.profile.paymentMethodHeader' | cxTranslate }}\n    </h4>\n    <div class=\"cx-asm-profile-cards\">\n      <div\n        class=\"cx-asm-profile-card\"\n        *ngFor=\"\n          let paymentInfoList of customerProfileData.paymentDetails;\n          let i = index\n        \"\n      >\n        <cx-card\n          [index]=\"i\"\n          [border]=\"true\"\n          [fitToContainer]=\"true\"\n          [content]=\"getCardContent(paymentInfoList) | async\"\n        ></cx-card>\n      </div>\n    </div>\n  </ng-container>\n  <ng-template #address let-address=\"address\">\n    <div class=\"cx-asm-profile-address-cell\">\n      <div class=\"address-line1\">\n        {{ address?.line1 }}\n      </div>\n      <div class=\"address-line2\">\n        {{ address?.line2 }}\n      </div>\n      <div>\n        <span class=\"address-town\" *ngIf=\"address?.town\"\n          >{{ address.town }},\n        </span>\n        <span class=\"address-region\" *ngIf=\"address?.region?.name\"\n          >{{ address.region.name }},\n        </span>\n        <span class=\"address-country\">{{ address?.country?.name }}</span>\n      </div>\n    </div>\n  </ng-template>\n</div>\n", dependencies: [{ kind: "component", type: i3.CardComponent, selector: "cx-card", inputs: ["border", "editMode", "isDefault", "content", "fitToContainer", "truncateText", "charactersLimit", "index"], outputs: ["deleteCard", "setDefaultCard", "sendCard", "editCard", "cancelCard"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i2.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360ProfileComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-asm-customer-360-profile', template: "<div class=\"cx-asm-customer-360-profile\">\n  <ng-container *ngIf=\"customerProfileData$ | async as customerProfileData\">\n    <div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <h4 class=\"mt-4 mb-3\">\n            {{ 'asmCustomer360.profile.address' | cxTranslate }}\n          </h4>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.billingAddress' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container billing-address\">\n            <ng-container\n              *ngTemplateOutlet=\"\n                address;\n                context: { address: customerProfileData?.billingAddress }\n              \"\n            ></ng-container>\n          </div>\n        </div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.deliveryAddress' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container delivery-address\">\n            <ng-container\n              *ngTemplateOutlet=\"\n                address;\n                context: { address: customerProfileData?.deliveryAddress }\n              \"\n            ></ng-container>\n          </div>\n        </div>\n        <div class=\"w-100 d-lg-none\"></div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.phone1' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container profile-phone1\">\n            {{ customerProfileData?.phone1 }}\n          </div>\n        </div>\n        <div class=\"col\">\n          <h5 class=\"cx-asm-profile-subheader\">\n            {{ 'asmCustomer360.profile.phone2' | cxTranslate }}\n          </h5>\n          <div class=\"cx-asm-profile-container profile-phone2\">\n            {{ customerProfileData?.phone2 }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <h4 class=\"mt-4 mb-4\">\n      {{ 'asmCustomer360.profile.paymentMethodHeader' | cxTranslate }}\n    </h4>\n    <div class=\"cx-asm-profile-cards\">\n      <div\n        class=\"cx-asm-profile-card\"\n        *ngFor=\"\n          let paymentInfoList of customerProfileData.paymentDetails;\n          let i = index\n        \"\n      >\n        <cx-card\n          [index]=\"i\"\n          [border]=\"true\"\n          [fitToContainer]=\"true\"\n          [content]=\"getCardContent(paymentInfoList) | async\"\n        ></cx-card>\n      </div>\n    </div>\n  </ng-container>\n  <ng-template #address let-address=\"address\">\n    <div class=\"cx-asm-profile-address-cell\">\n      <div class=\"address-line1\">\n        {{ address?.line1 }}\n      </div>\n      <div class=\"address-line2\">\n        {{ address?.line2 }}\n      </div>\n      <div>\n        <span class=\"address-town\" *ngIf=\"address?.town\"\n          >{{ address.town }},\n        </span>\n        <span class=\"address-region\" *ngIf=\"address?.region?.name\"\n          >{{ address.region.name }},\n        </span>\n        <span class=\"address-country\">{{ address?.country?.name }}</span>\n      </div>\n    </div>\n  </ng-template>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AsmCustomer360SectionContext }, { type: i2.TranslationService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNtLWN1c3RvbWVyLTM2MC1wcm9maWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9hc20vY3VzdG9tZXItMzYwL2NvbXBvbmVudHMvc2VjdGlvbnMvYXNtLWN1c3RvbWVyLTM2MC1wcm9maWxlL2FzbS1jdXN0b21lci0zNjAtcHJvZmlsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2N1c3RvbWVyLTM2MC9jb21wb25lbnRzL3NlY3Rpb25zL2FzbS1jdXN0b21lci0zNjAtcHJvZmlsZS9hc20tY3VzdG9tZXItMzYwLXByb2ZpbGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFFbEQsT0FBTyxFQUFxQixTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVyRSxPQUFPLEVBQUUsYUFBYSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyQyxPQUFPLEVBSUwsZUFBZSxHQUNoQixNQUFNLGtDQUFrQyxDQUFDOzs7Ozs7QUFPMUMsTUFBTSxPQUFPLDhCQUE4QjtJQVl6QyxZQUNTLGNBQTJFLEVBQ3hFLFdBQStCO1FBRGxDLG1CQUFjLEdBQWQsY0FBYyxDQUE2RDtRQUN4RSxnQkFBVyxHQUFYLFdBQVcsQ0FBb0I7UUFiM0MsZ0JBQVcsR0FBZ0I7WUFDekIsSUFBSSxFQUFFLElBQUk7WUFDVixLQUFLLEVBQUUsSUFBSTtZQUNYLFNBQVMsRUFBRSx3QkFBd0I7WUFDbkMsYUFBYSxFQUFFLElBQUk7U0FDcEIsQ0FBQztRQUVGLGNBQVMsR0FBRyxTQUFTLENBQUM7SUFPbkIsQ0FBQztJQUVKLFFBQVE7UUFDTixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUN4RCxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNYLE9BQU8sSUFBSSxFQUFFLE9BQU8sQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUNELGNBQWMsQ0FBQyxFQUNiLGNBQWMsRUFDZCxXQUFXLEVBQ1gsVUFBVSxFQUNWLFVBQVUsRUFDVixRQUFRLEdBQ29CO1FBQzVCLE9BQU8sYUFBYSxDQUFDO1lBQ25CLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLHFCQUFxQixFQUFFO2dCQUNoRCxLQUFLLEVBQUUsV0FBVztnQkFDbEIsSUFBSSxFQUFFLFVBQVU7YUFDakIsQ0FBQztZQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLGtDQUFrQyxDQUFDO1NBQy9ELENBQUMsQ0FBQyxJQUFJLENBQ0wsR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsd0JBQXdCLENBQUMsRUFBRSxFQUFFO1lBQzlDLE1BQU0sSUFBSSxHQUFTO2dCQUNqQixJQUFJLEVBQUUsUUFBUTtnQkFDZCxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDN0QsSUFBSSxFQUFFLENBQUMsVUFBVSxJQUFJLEVBQUUsRUFBRSxXQUFXLENBQUM7Z0JBQ3JDLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUMzQyxLQUFLLEVBQUUsY0FBYztvQkFDbkIsQ0FBQyxDQUFDLGlDQUFpQztvQkFDbkMsQ0FBQyxDQUFDLG9DQUFvQzthQUN6QyxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVELFdBQVcsQ0FBQyxJQUFZO1FBQ3RCLElBQUksTUFBYyxDQUFDO1FBQ25CLElBQUksSUFBSSxLQUFLLGVBQWUsQ0FBQyxJQUFJLEVBQUU7WUFDakMsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1NBQzlCO2FBQU0sSUFDTCxJQUFJLEtBQUssZUFBZSxDQUFDLE1BQU07WUFDL0IsSUFBSSxLQUFLLGVBQWUsQ0FBQyxtQkFBbUIsRUFDNUM7WUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7U0FDckM7YUFBTSxJQUFJLElBQUksS0FBSyxlQUFlLENBQUMsTUFBTSxFQUFFO1lBQzFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQztTQUNyQzthQUFNLElBQUksSUFBSSxLQUFLLGVBQWUsQ0FBQyxJQUFJLEVBQUU7WUFDeEMsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1NBQzlCO2FBQU07WUFDTCxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7U0FDckM7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzsySEF0RVUsOEJBQThCOytHQUE5Qiw4QkFBOEIsbUVDeEIzQyx5ckdBZ0dBOzJGRHhFYSw4QkFBOEI7a0JBSjFDLFNBQVM7K0JBQ0UsNkJBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBDYXJkLCBGb2N1c0NvbmZpZywgSUNPTl9UWVBFIH0gZnJvbSAnQHNwYXJ0YWN1cy9zdG9yZWZyb250JztcblxuaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgQXNtQ3VzdG9tZXIzNjBDdXN0b21lclByb2ZpbGUsXG4gIEFzbUN1c3RvbWVyMzYwUGF5bWVudERldGFpbCxcbiAgQXNtQ3VzdG9tZXIzNjBQcm9maWxlLFxuICBQYXltZW50Q2FyZENvZGUsXG59IGZyb20gJ0BzcGFydGFjdXMvYXNtL2N1c3RvbWVyLTM2MC9yb290JztcbmltcG9ydCB7IEFzbUN1c3RvbWVyMzYwU2VjdGlvbkNvbnRleHQgfSBmcm9tICcuLi9hc20tY3VzdG9tZXItMzYwLXNlY3Rpb24tY29udGV4dC5tb2RlbCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LWFzbS1jdXN0b21lci0zNjAtcHJvZmlsZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hc20tY3VzdG9tZXItMzYwLXByb2ZpbGUuY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBBc21DdXN0b21lcjM2MFByb2ZpbGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBmb2N1c0NvbmZpZzogRm9jdXNDb25maWcgPSB7XG4gICAgdHJhcDogdHJ1ZSxcbiAgICBibG9jazogdHJ1ZSxcbiAgICBhdXRvZm9jdXM6ICdjdXN0b21lci1saXN0LXNlbGVjdG9yJyxcbiAgICBmb2N1c09uRXNjYXBlOiB0cnVlLFxuICB9O1xuXG4gIGljb25UeXBlcyA9IElDT05fVFlQRTtcblxuICBjdXN0b21lclByb2ZpbGVEYXRhJDogT2JzZXJ2YWJsZTxBc21DdXN0b21lcjM2MFByb2ZpbGUgfCB1bmRlZmluZWQ+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzZWN0aW9uQ29udGV4dDogQXNtQ3VzdG9tZXIzNjBTZWN0aW9uQ29udGV4dDxBc21DdXN0b21lcjM2MEN1c3RvbWVyUHJvZmlsZT4sXG4gICAgcHJvdGVjdGVkIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2VcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY3VzdG9tZXJQcm9maWxlRGF0YSQgPSB0aGlzLnNlY3Rpb25Db250ZXh0LmRhdGEkLnBpcGUoXG4gICAgICBtYXAoKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGRhdGE/LnByb2ZpbGU7XG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgZ2V0Q2FyZENvbnRlbnQoe1xuICAgIGRlZmF1bHRQYXltZW50LFxuICAgIGV4cGlyeU1vbnRoLFxuICAgIGV4cGlyeVllYXIsXG4gICAgY2FyZE51bWJlcixcbiAgICBjYXJkVHlwZSxcbiAgfTogQXNtQ3VzdG9tZXIzNjBQYXltZW50RGV0YWlsKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QoW1xuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ3BheW1lbnRDYXJkLmV4cGlyZXMnLCB7XG4gICAgICAgIG1vbnRoOiBleHBpcnlNb250aCxcbiAgICAgICAgeWVhcjogZXhwaXJ5WWVhcixcbiAgICAgIH0pLFxuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ3BheW1lbnRDYXJkLmRlZmF1bHRQYXltZW50TWV0aG9kJyksXG4gICAgXSkucGlwZShcbiAgICAgIG1hcCgoW3RleHRFeHBpcmVzLCB0ZXh0RGVmYXVsdFBheW1lbnRNZXRob2RdKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQ6IENhcmQgPSB7XG4gICAgICAgICAgcm9sZTogJ3JlZ2lvbicsXG4gICAgICAgICAgaGVhZGVyOiBkZWZhdWx0UGF5bWVudCA/IHRleHREZWZhdWx0UGF5bWVudE1ldGhvZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0ZXh0OiBbY2FyZE51bWJlciA/PyAnJywgdGV4dEV4cGlyZXNdLFxuICAgICAgICAgIGltZzogdGhpcy5nZXRDYXJkSWNvbihjYXJkVHlwZT8uY29kZSA/PyAnJyksXG4gICAgICAgICAgbGFiZWw6IGRlZmF1bHRQYXltZW50XG4gICAgICAgICAgICA/ICdwYXltZW50Q2FyZC5kZWZhdWx0UGF5bWVudExhYmVsJ1xuICAgICAgICAgICAgOiAncGF5bWVudENhcmQuYWRkaXRpb25hbFBheW1lbnRMYWJlbCcsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjYXJkO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0Q2FyZEljb24oY29kZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgY2NJY29uOiBzdHJpbmc7XG4gICAgaWYgKGNvZGUgPT09IFBheW1lbnRDYXJkQ29kZS5WSVNBKSB7XG4gICAgICBjY0ljb24gPSB0aGlzLmljb25UeXBlcy5WSVNBO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBjb2RlID09PSBQYXltZW50Q2FyZENvZGUuTUFTVEVSIHx8XG4gICAgICBjb2RlID09PSBQYXltZW50Q2FyZENvZGUuTUFTVEVSQ0FSRF9FVVJPQ0FSRFxuICAgICkge1xuICAgICAgY2NJY29uID0gdGhpcy5pY29uVHlwZXMuTUFTVEVSX0NBUkQ7XG4gICAgfSBlbHNlIGlmIChjb2RlID09PSBQYXltZW50Q2FyZENvZGUuRElORVJTKSB7XG4gICAgICBjY0ljb24gPSB0aGlzLmljb25UeXBlcy5ESU5FUlNfQ0xVQjtcbiAgICB9IGVsc2UgaWYgKGNvZGUgPT09IFBheW1lbnRDYXJkQ29kZS5BTUVYKSB7XG4gICAgICBjY0ljb24gPSB0aGlzLmljb25UeXBlcy5BTUVYO1xuICAgIH0gZWxzZSB7XG4gICAgICBjY0ljb24gPSB0aGlzLmljb25UeXBlcy5DUkVESVRfQ0FSRDtcbiAgICB9XG4gICAgcmV0dXJuIGNjSWNvbjtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cImN4LWFzbS1jdXN0b21lci0zNjAtcHJvZmlsZVwiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiY3VzdG9tZXJQcm9maWxlRGF0YSQgfCBhc3luYyBhcyBjdXN0b21lclByb2ZpbGVEYXRhXCI+XG4gICAgPGRpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxuICAgICAgICAgIDxoNCBjbGFzcz1cIm10LTQgbWItM1wiPlxuICAgICAgICAgICAge3sgJ2FzbUN1c3RvbWVyMzYwLnByb2ZpbGUuYWRkcmVzcycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvaDQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2xcIj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJjeC1hc20tcHJvZmlsZS1zdWJoZWFkZXJcIj5cbiAgICAgICAgICAgIHt7ICdhc21DdXN0b21lcjM2MC5wcm9maWxlLmJpbGxpbmdBZGRyZXNzJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgPC9oNT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtYXNtLXByb2ZpbGUtY29udGFpbmVyIGJpbGxpbmctYWRkcmVzc1wiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICAgIGFkZHJlc3M7XG4gICAgICAgICAgICAgICAgY29udGV4dDogeyBhZGRyZXNzOiBjdXN0b21lclByb2ZpbGVEYXRhPy5iaWxsaW5nQWRkcmVzcyB9XG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICAgICAgPGg1IGNsYXNzPVwiY3gtYXNtLXByb2ZpbGUtc3ViaGVhZGVyXCI+XG4gICAgICAgICAgICB7eyAnYXNtQ3VzdG9tZXIzNjAucHJvZmlsZS5kZWxpdmVyeUFkZHJlc3MnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2g1PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1hc20tcHJvZmlsZS1jb250YWluZXIgZGVsaXZlcnktYWRkcmVzc1wiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICAgIGFkZHJlc3M7XG4gICAgICAgICAgICAgICAgY29udGV4dDogeyBhZGRyZXNzOiBjdXN0b21lclByb2ZpbGVEYXRhPy5kZWxpdmVyeUFkZHJlc3MgfVxuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInctMTAwIGQtbGctbm9uZVwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICAgICAgPGg1IGNsYXNzPVwiY3gtYXNtLXByb2ZpbGUtc3ViaGVhZGVyXCI+XG4gICAgICAgICAgICB7eyAnYXNtQ3VzdG9tZXIzNjAucHJvZmlsZS5waG9uZTEnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2g1PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1hc20tcHJvZmlsZS1jb250YWluZXIgcHJvZmlsZS1waG9uZTFcIj5cbiAgICAgICAgICAgIHt7IGN1c3RvbWVyUHJvZmlsZURhdGE/LnBob25lMSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxuICAgICAgICAgIDxoNSBjbGFzcz1cImN4LWFzbS1wcm9maWxlLXN1YmhlYWRlclwiPlxuICAgICAgICAgICAge3sgJ2FzbUN1c3RvbWVyMzYwLnByb2ZpbGUucGhvbmUyJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgPC9oNT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtYXNtLXByb2ZpbGUtY29udGFpbmVyIHByb2ZpbGUtcGhvbmUyXCI+XG4gICAgICAgICAgICB7eyBjdXN0b21lclByb2ZpbGVEYXRhPy5waG9uZTIgfX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8aDQgY2xhc3M9XCJtdC00IG1iLTRcIj5cbiAgICAgIHt7ICdhc21DdXN0b21lcjM2MC5wcm9maWxlLnBheW1lbnRNZXRob2RIZWFkZXInIHwgY3hUcmFuc2xhdGUgfX1cbiAgICA8L2g0PlxuICAgIDxkaXYgY2xhc3M9XCJjeC1hc20tcHJvZmlsZS1jYXJkc1wiPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cImN4LWFzbS1wcm9maWxlLWNhcmRcIlxuICAgICAgICAqbmdGb3I9XCJcbiAgICAgICAgICBsZXQgcGF5bWVudEluZm9MaXN0IG9mIGN1c3RvbWVyUHJvZmlsZURhdGEucGF5bWVudERldGFpbHM7XG4gICAgICAgICAgbGV0IGkgPSBpbmRleFxuICAgICAgICBcIlxuICAgICAgPlxuICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgIFtpbmRleF09XCJpXCJcbiAgICAgICAgICBbYm9yZGVyXT1cInRydWVcIlxuICAgICAgICAgIFtmaXRUb0NvbnRhaW5lcl09XCJ0cnVlXCJcbiAgICAgICAgICBbY29udGVudF09XCJnZXRDYXJkQ29udGVudChwYXltZW50SW5mb0xpc3QpIHwgYXN5bmNcIlxuICAgICAgICA+PC9jeC1jYXJkPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuICA8bmctdGVtcGxhdGUgI2FkZHJlc3MgbGV0LWFkZHJlc3M9XCJhZGRyZXNzXCI+XG4gICAgPGRpdiBjbGFzcz1cImN4LWFzbS1wcm9maWxlLWFkZHJlc3MtY2VsbFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImFkZHJlc3MtbGluZTFcIj5cbiAgICAgICAge3sgYWRkcmVzcz8ubGluZTEgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImFkZHJlc3MtbGluZTJcIj5cbiAgICAgICAge3sgYWRkcmVzcz8ubGluZTIgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJhZGRyZXNzLXRvd25cIiAqbmdJZj1cImFkZHJlc3M/LnRvd25cIlxuICAgICAgICAgID57eyBhZGRyZXNzLnRvd24gfX0sXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJhZGRyZXNzLXJlZ2lvblwiICpuZ0lmPVwiYWRkcmVzcz8ucmVnaW9uPy5uYW1lXCJcbiAgICAgICAgICA+e3sgYWRkcmVzcy5yZWdpb24ubmFtZSB9fSxcbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImFkZHJlc3MtY291bnRyeVwiPnt7IGFkZHJlc3M/LmNvdW50cnk/Lm5hbWUgfX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvZGl2PlxuIl19