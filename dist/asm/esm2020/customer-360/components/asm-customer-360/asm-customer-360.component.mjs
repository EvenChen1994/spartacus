/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, HostBinding, ViewChildren, } from '@angular/core';
import { getAsmDialogActionEvent } from '@spartacus/asm/customer-360/core';
import { AsmDialogActionType, AsmCustomer360Type, KeyBoardEventCode, } from '@spartacus/asm/customer-360/root';
import { GlobalMessageType, isNotUndefined, } from '@spartacus/core';
import { DirectionMode, ICON_TYPE, } from '@spartacus/storefront';
import { BehaviorSubject, Subscription, of } from 'rxjs';
import { catchError, distinctUntilChanged, filter, map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../config/asm-customer-360-config";
import * as i2 from "@spartacus/asm/customer-360/root";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@spartacus/asm/root";
import * as i5 from "@angular/common";
import * as i6 from "../sections/asm-customer-360-section/asm-customer-360-section.component";
import * as i7 from "@spartacus/core";
import * as i8 from "@spartacus/asm/core";
export class AsmCustomer360Component {
    constructor(asmCustomer360Config, asmCustomer360Facade, launchDialogService, csAgentAuthService, directionService) {
        this.asmCustomer360Config = asmCustomer360Config;
        this.asmCustomer360Facade = asmCustomer360Facade;
        this.launchDialogService = launchDialogService;
        this.csAgentAuthService = csAgentAuthService;
        this.directionService = directionService;
        this.role = 'dialog';
        this.modal = true;
        this.labelledby = 'asm-customer-360-title';
        this.describedby = 'asm-customer-360-desc';
        this.cartIcon = ICON_TYPE.CART;
        this.closeIcon = ICON_TYPE.CLOSE;
        this.orderIcon = ICON_TYPE.ORDER;
        this.ticketIcon = ICON_TYPE.FILE;
        this.globalMessageType = GlobalMessageType;
        this.focusConfig = {
            trap: true,
            block: true,
            autofocus: '.close',
            focusOnEscape: true,
        };
        this.activeTab = 0;
        this.subscription = new Subscription();
        this.showErrorAlert$ = new BehaviorSubject(false);
        this.showErrorTab$ = new BehaviorSubject(false);
        this.errorAlert$ = this.showErrorAlert$.asObservable();
        this.errorTab$ = this.showErrorTab$.asObservable();
        this.customerOverview$ = this.asmCustomer360Facade
            .get360Data([
            {
                requestData: { type: AsmCustomer360Type.OVERVIEW },
            },
        ])
            .pipe(map((response) => {
            const overviewItem = response?.value?.find((item) => item.type === AsmCustomer360Type.OVERVIEW);
            return overviewItem?.overview || undefined;
        }), catchError(() => {
            this.showErrorAlert$.next(true);
            return of(undefined);
        }));
        this.tabs = asmCustomer360Config?.asmCustomer360?.tabs ?? [];
        this.currentTab = this.tabs[0];
    }
    ngOnInit() {
        this.subscription.add(this.csAgentAuthService
            .isCustomerSupportAgentLoggedIn()
            .pipe(distinctUntilChanged())
            .subscribe((loggedIn) => {
            if (!loggedIn) {
                this.launchDialogService.closeDialog('logout');
            }
        }));
        this.subscription.add(this.launchDialogService.data$.subscribe((data) => {
            this.customer = data.customer;
        }));
        this.setTabData();
    }
    ngOnDestroy() {
        this.subscription.unsubscribe();
    }
    /**
     * Triggered when a tab is selected.
     * @param {number} selectedTab selected tab index
     */
    selectTab(selectedTab) {
        this.activeTab = selectedTab;
        this.currentTab = this.tabs[selectedTab];
        this.updateTabIndex(selectedTab);
        this.setTabData();
    }
    /**
     *  Update tab focus when key is pressed
     * @param {KeyboardEvent} event
     * @param {number} selectedIndex current tab index
     */
    switchTab(event, selectedIndex) {
        const maxTab = this.tabs.length - 1;
        let flag = true;
        if (this.isBackNavigation(event)) {
            selectedIndex--;
            if (selectedIndex < 0) {
                selectedIndex = maxTab;
            }
        }
        else if (this.isForwardsNavigation(event)) {
            selectedIndex++;
            if (selectedIndex > maxTab) {
                selectedIndex = 0;
            }
        }
        else if (event.code === KeyBoardEventCode.HOME) {
            selectedIndex = 0;
        }
        else if (event.code === KeyBoardEventCode.END) {
            selectedIndex = maxTab;
        }
        else {
            flag = false;
        }
        if (flag) {
            this.updateTabIndex(selectedIndex);
            event.stopPropagation();
            event.preventDefault();
        }
    }
    /**
     * If there is a link within the modal, use this method to redirect the user and close the modal.
     */
    navigateTo(route) {
        const event = getAsmDialogActionEvent(this.customer, AsmDialogActionType.NAVIGATE, route);
        this.closeModal(event);
    }
    closeErrorAlert() {
        this.showErrorAlert$.next(false);
    }
    closeModal(reason) {
        this.launchDialogService.closeDialog(reason);
    }
    getAvatarText(customer) {
        customer = customer ?? {};
        const { firstName = '', lastName = '' } = customer;
        return `${firstName.charAt(0)}${lastName.charAt(0)}`;
    }
    getAvatarImage(overview) {
        return overview?.userAvatar?.url
            ? {
                altText: overview.name,
                url: overview.userAvatar.url,
                format: overview.userAvatar.format,
            }
            : undefined;
    }
    /**
     * Update tabIndex for each tab: select tab becomes 0 and other tabs will be -1
     * this is for prevent tabbing within tabs
     * @param {number} selectedIndex - selected tab index
     */
    updateTabIndex(selectedIndex) {
        this.tabHeaderItems.toArray().forEach((tabHeaderItem, index) => {
            if (index === selectedIndex) {
                tabHeaderItem.nativeElement.tabIndex = 0;
                tabHeaderItem.nativeElement.focus();
            }
            else {
                tabHeaderItem.nativeElement.tabIndex = -1;
            }
        });
    }
    setTabData() {
        this.showErrorTab$.next(false);
        const get360Data = this.asmCustomer360Facade
            .get360Data(this.currentTab.components)
            .pipe(catchError(() => {
            this.showErrorTab$.next(true);
            this.showErrorAlert$.next(true);
            return of(undefined);
        }));
        this.asmCustomer360Tabs$ = get360Data.pipe(filter(isNotUndefined), map((response) => {
            return this.currentTab.components.map((component) => {
                const requestData = component.requestData;
                if (requestData) {
                    return response.value.find((data) => data.type === requestData.type);
                }
                else {
                    return undefined;
                }
            });
        }));
    }
    /**
     * Verifies whether the user navigates into a subgroup of the main group menu.
     *
     * @param {KeyboardEvent} event - Keyboard event
     * @returns {boolean} -'true' if the user navigates into the subgroup, otherwise 'false'.
     * @protected
     */
    isForwardsNavigation(event) {
        return ((event.code === 'ArrowRight' && this.isLTRDirection()) ||
            (event.code === 'ArrowLeft' && this.isRTLDirection()));
    }
    /**
     * Verifies whether the user navigates from a subgroup back to the main group menu.
     *
     * @param {KeyboardEvent} event - Keyboard event
     * @returns {boolean} -'true' if the user navigates back into the main group menu, otherwise 'false'.
     * @protected
     */
    isBackNavigation(event) {
        return ((event.code === KeyBoardEventCode.ARROW_LEFT && this.isLTRDirection()) ||
            (event.code === KeyBoardEventCode.ARROW_RIGHT && this.isRTLDirection()));
    }
    isLTRDirection() {
        return this.directionService.getDirection() === DirectionMode.LTR;
    }
    isRTLDirection() {
        return this.directionService.getDirection() === DirectionMode.RTL;
    }
}
AsmCustomer360Component.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360Component, deps: [{ token: i1.AsmCustomer360Config }, { token: i2.AsmCustomer360Facade }, { token: i3.LaunchDialogService }, { token: i4.CsAgentAuthService }, { token: i3.DirectionService }], target: i0.ɵɵFactoryTarget.Component });
AsmCustomer360Component.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: AsmCustomer360Component, selector: "cx-asm-customer-360", host: { properties: { "attr.role": "this.role", "attr.aria-modal": "this.modal", "attr.aria-labelledby": "this.labelledby", "attr.aria-describedby": "this.describedby" } }, viewQueries: [{ propertyName: "tabHeaderItems", predicate: ["tabHeaderItem"], descendants: true }], ngImport: i0, template: "<div\n  class=\"cx-asm-customer-360 cx-modal-container cx-asm-dialog\"\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"closeModal('Escape clicked')\"\n>\n  <!-- Modal Header -->\n  <div class=\"cx-modal-content\">\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"header-title\">\n        <h3 id=\"asm-customer-360-title\" class=\"modal-title\">\n          {{ 'asmCustomer360.header.title' | cxTranslate }}\n        </h3>\n        <div id=\"asm-customer-360-desc\" class=\"cx-visually-hidden\">\n          {{\n            'asmCustomer360.header.subTitle'\n              | cxTranslate: { name: customer.firstName }\n          }}\n        </div>\n        <ng-template *ngTemplateOutlet=\"closeButton\"></ng-template>\n      </div>\n      <cx-message\n        *ngIf=\"errorAlert$ | async\"\n        [text]=\"'asmCustomer360.alertErrorMessage' | cxTranslate\"\n        [type]=\"globalMessageType.MSG_TYPE_ERROR\"\n        (closeMessage)=\"closeErrorAlert()\"\n      >\n      </cx-message>\n      <div\n        class=\"header-content\"\n        *ngIf=\"customerOverview$ | async as customerOverview\"\n      >\n        <div class=\"header-profile-details\">\n          <div class=\"header-profile-details-info\">\n            <ng-container\n              *ngIf=\"\n                getAvatarImage | cxArgs: customerOverview as avatarImage;\n                else customerTextAvatar\n              \"\n            >\n              <div class=\"cx-avatar-image\">\n                <cx-media [container]=\"avatarImage\"></cx-media>\n              </div>\n            </ng-container>\n\n            <ng-template #customerTextAvatar>\n              <div class=\"cx-avatar\">\n                {{ getAvatarText | cxArgs: customer }}\n              </div>\n            </ng-template>\n            <div class=\"cx-asm-customer-info ml-3\">\n              <div class=\"cx-asm-customer-name\">\n                {{\n                  'asmCustomer360.header.subTitle'\n                    | cxTranslate: { name: customerOverview?.name }\n                }}\n              </div>\n              <div class=\"cx-asm-customer-email\">\n                {{ customerOverview?.email }}\n              </div>\n              <div\n                class=\"cx-asm-customer-address\"\n                *ngIf=\"customerOverview?.address?.town\"\n              >\n                {{ customerOverview.address.town }}\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"header-profile-details-log\"\n            *ngIf=\"customerOverview?.signedUpAt\"\n          >\n            {{\n              'asmCustomer360.header.signedUpAt'\n                | cxTranslate\n                  : {\n                      date:\n                        customerOverview.signedUpAt\n                        | cxDate\n                          : asmCustomer360Config?.asmCustomer360?.dateFormat\n                    }\n            }}\n          </div>\n        </div>\n        <div class=\"header-account-details\">\n          <span\n            class=\"header-account-details-active-cart\"\n            *ngIf=\"customerOverview?.cartCode\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"cartIcon\"></cx-icon>\n            {{\n              'asmCustomer360.header.activeCartLabel'\n                | cxTranslate: { cartSize: customerOverview?.cartSize }\n            }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.activeCartCode'\n                  | cxTranslate: { code: customerOverview.cartCode }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"navigateTo({ cxRoute: 'cart' })\"\n            >\n              {{ customerOverview.cartCode }}\n            </button>\n          </span>\n          <span\n            class=\"header-account-details-recent-order\"\n            *ngIf=\"customerOverview?.latestOrderCode\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"orderIcon\"></cx-icon>\n            {{\n              'asmCustomer360.header.recentOrderLabel'\n                | cxTranslate: { price: customerOverview?.latestOrderTotal }\n            }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.recentOrderCode'\n                  | cxTranslate: { code: customerOverview.latestOrderCode }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"\n                navigateTo({\n                  cxRoute: 'orderDetails',\n                  params: { code: customerOverview.latestOrderCode }\n                })\n              \"\n            >\n              {{ customerOverview.latestOrderCode }}</button\n            >,\n            {{\n              customerOverview?.latestOrderTime\n                | cxDate: asmCustomer360Config?.asmCustomer360?.dateFormat\n            }}\n          </span>\n          <span\n            class=\"header-account-details-recent-ticket\"\n            *ngIf=\"customerOverview?.latestOpenedTicketId\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"ticketIcon\"></cx-icon>\n            {{ 'asmCustomer360.header.recentTicketLabel' | cxTranslate }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.recentOrderCode'\n                  | cxTranslate: { code: customerOverview.latestOpenedTicketId }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"\n                navigateTo({\n                  cxRoute: 'supportTicketDetails',\n                  params: { ticketCode: customerOverview.latestOpenedTicketId }\n                })\n              \"\n            >\n              {{ customerOverview.latestOpenedTicketId }}</button\n            >,\n            {{\n              customerOverview?.latestOpenedTicketCreatedAt\n                | cxDate: asmCustomer360Config?.asmCustomer360?.dateFormat\n            }}\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body\">\n      <div class=\"cx-tab-headers\" role=\"tablist\">\n        <button\n          #tabHeaderItem\n          *ngFor=\"let tabHeader of tabs; let i = index\"\n          class=\"cx-tab-header\"\n          role=\"tab\"\n          [attr.aria-selected]=\"activeTab === i\"\n          attr.aria-controls=\"asm-customer-360-tab-panel\"\n          (click)=\"selectTab(i)\"\n          [class.active]=\"activeTab === i\"\n          (keydown)=\"switchTab($event, i)\"\n        >\n          {{ tabHeader.i18nNameKey | cxTranslate }}\n        </button>\n      </div>\n      <div id=\"asm-customer-360-tab-panel\" class=\"cx-tab-content modal-body\">\n        <ng-container *ngIf=\"showErrorTab$ | async; else tabContent\">\n          <div class=\"cx-tab-error\">\n            <div class=\"cx-tab-error-image\"></div>\n            <div class=\"cx-tab-error-header\">\n              {{ 'asmCustomer360.errorMessageHeader' | cxTranslate }}\n            </div>\n            <div class=\"cx-tab-error-message\">\n              {{ 'asmCustomer360.alertErrorMessage' | cxTranslate }}\n            </div>\n          </div>\n        </ng-container>\n        <ng-template #tabContent>\n          <ng-container\n            *ngIf=\"asmCustomer360Tabs$ | async as asmCustomer360Tabs\"\n          >\n            <cx-asm-customer-360-section\n              *ngFor=\"let config of currentTab?.components; let i = index\"\n              [component]=\"config.component\"\n              [config]=\"config.config\"\n              [data]=\"asmCustomer360Tabs?.[i]\"\n              (navigate)=\"navigateTo($event)\"\n            ></cx-asm-customer-360-section>\n          </ng-container>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #closeButton>\n  <button\n    type=\"button\"\n    class=\"close\"\n    attr.aria-label=\"{{ 'common.close' | cxTranslate }}\"\n    (click)=\"closeModal('Cross click')\"\n  >\n    <cx-icon [type]=\"closeIcon\"></cx-icon>\n  </button>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i5.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: i3.MediaComponent, selector: "cx-media", inputs: ["container", "format", "alt", "role", "loading"], outputs: ["loaded"] }, { kind: "component", type: i3.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "directive", type: i3.FocusDirective, selector: "[cxFocus]", inputs: ["cxFocus"] }, { kind: "component", type: i3.MessageComponent, selector: "cx-message", inputs: ["text", "actionButtonText", "actionButtonMessage", "accordionText", "showBody", "isVisibleCloseButton", "type"], outputs: ["closeMessage", "buttonAction"] }, { kind: "component", type: i6.AsmCustomer360SectionComponent, selector: "cx-asm-customer-360-section", inputs: ["component", "customer", "config", "data"], outputs: ["navigate"] }, { kind: "pipe", type: i5.AsyncPipe, name: "async" }, { kind: "pipe", type: i7.TranslatePipe, name: "cxTranslate" }, { kind: "pipe", type: i7.CxDatePipe, name: "cxDate" }, { kind: "pipe", type: i8.ArgsPipe, name: "cxArgs" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360Component, decorators: [{
            type: Component,
            args: [{ changeDetection: ChangeDetectionStrategy.OnPush, selector: 'cx-asm-customer-360', template: "<div\n  class=\"cx-asm-customer-360 cx-modal-container cx-asm-dialog\"\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"closeModal('Escape clicked')\"\n>\n  <!-- Modal Header -->\n  <div class=\"cx-modal-content\">\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"header-title\">\n        <h3 id=\"asm-customer-360-title\" class=\"modal-title\">\n          {{ 'asmCustomer360.header.title' | cxTranslate }}\n        </h3>\n        <div id=\"asm-customer-360-desc\" class=\"cx-visually-hidden\">\n          {{\n            'asmCustomer360.header.subTitle'\n              | cxTranslate: { name: customer.firstName }\n          }}\n        </div>\n        <ng-template *ngTemplateOutlet=\"closeButton\"></ng-template>\n      </div>\n      <cx-message\n        *ngIf=\"errorAlert$ | async\"\n        [text]=\"'asmCustomer360.alertErrorMessage' | cxTranslate\"\n        [type]=\"globalMessageType.MSG_TYPE_ERROR\"\n        (closeMessage)=\"closeErrorAlert()\"\n      >\n      </cx-message>\n      <div\n        class=\"header-content\"\n        *ngIf=\"customerOverview$ | async as customerOverview\"\n      >\n        <div class=\"header-profile-details\">\n          <div class=\"header-profile-details-info\">\n            <ng-container\n              *ngIf=\"\n                getAvatarImage | cxArgs: customerOverview as avatarImage;\n                else customerTextAvatar\n              \"\n            >\n              <div class=\"cx-avatar-image\">\n                <cx-media [container]=\"avatarImage\"></cx-media>\n              </div>\n            </ng-container>\n\n            <ng-template #customerTextAvatar>\n              <div class=\"cx-avatar\">\n                {{ getAvatarText | cxArgs: customer }}\n              </div>\n            </ng-template>\n            <div class=\"cx-asm-customer-info ml-3\">\n              <div class=\"cx-asm-customer-name\">\n                {{\n                  'asmCustomer360.header.subTitle'\n                    | cxTranslate: { name: customerOverview?.name }\n                }}\n              </div>\n              <div class=\"cx-asm-customer-email\">\n                {{ customerOverview?.email }}\n              </div>\n              <div\n                class=\"cx-asm-customer-address\"\n                *ngIf=\"customerOverview?.address?.town\"\n              >\n                {{ customerOverview.address.town }}\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"header-profile-details-log\"\n            *ngIf=\"customerOverview?.signedUpAt\"\n          >\n            {{\n              'asmCustomer360.header.signedUpAt'\n                | cxTranslate\n                  : {\n                      date:\n                        customerOverview.signedUpAt\n                        | cxDate\n                          : asmCustomer360Config?.asmCustomer360?.dateFormat\n                    }\n            }}\n          </div>\n        </div>\n        <div class=\"header-account-details\">\n          <span\n            class=\"header-account-details-active-cart\"\n            *ngIf=\"customerOverview?.cartCode\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"cartIcon\"></cx-icon>\n            {{\n              'asmCustomer360.header.activeCartLabel'\n                | cxTranslate: { cartSize: customerOverview?.cartSize }\n            }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.activeCartCode'\n                  | cxTranslate: { code: customerOverview.cartCode }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"navigateTo({ cxRoute: 'cart' })\"\n            >\n              {{ customerOverview.cartCode }}\n            </button>\n          </span>\n          <span\n            class=\"header-account-details-recent-order\"\n            *ngIf=\"customerOverview?.latestOrderCode\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"orderIcon\"></cx-icon>\n            {{\n              'asmCustomer360.header.recentOrderLabel'\n                | cxTranslate: { price: customerOverview?.latestOrderTotal }\n            }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.recentOrderCode'\n                  | cxTranslate: { code: customerOverview.latestOrderCode }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"\n                navigateTo({\n                  cxRoute: 'orderDetails',\n                  params: { code: customerOverview.latestOrderCode }\n                })\n              \"\n            >\n              {{ customerOverview.latestOrderCode }}</button\n            >,\n            {{\n              customerOverview?.latestOrderTime\n                | cxDate: asmCustomer360Config?.asmCustomer360?.dateFormat\n            }}\n          </span>\n          <span\n            class=\"header-account-details-recent-ticket\"\n            *ngIf=\"customerOverview?.latestOpenedTicketId\"\n          >\n            <cx-icon class=\"account-icon\" [type]=\"ticketIcon\"></cx-icon>\n            {{ 'asmCustomer360.header.recentTicketLabel' | cxTranslate }}\n            <button\n              [attr.aria-label]=\"\n                'asmCustomer360.aria.recentOrderCode'\n                  | cxTranslate: { code: customerOverview.latestOpenedTicketId }\n              \"\n              class=\"cx-overview-title-link link\"\n              (click)=\"\n                navigateTo({\n                  cxRoute: 'supportTicketDetails',\n                  params: { ticketCode: customerOverview.latestOpenedTicketId }\n                })\n              \"\n            >\n              {{ customerOverview.latestOpenedTicketId }}</button\n            >,\n            {{\n              customerOverview?.latestOpenedTicketCreatedAt\n                | cxDate: asmCustomer360Config?.asmCustomer360?.dateFormat\n            }}\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body\">\n      <div class=\"cx-tab-headers\" role=\"tablist\">\n        <button\n          #tabHeaderItem\n          *ngFor=\"let tabHeader of tabs; let i = index\"\n          class=\"cx-tab-header\"\n          role=\"tab\"\n          [attr.aria-selected]=\"activeTab === i\"\n          attr.aria-controls=\"asm-customer-360-tab-panel\"\n          (click)=\"selectTab(i)\"\n          [class.active]=\"activeTab === i\"\n          (keydown)=\"switchTab($event, i)\"\n        >\n          {{ tabHeader.i18nNameKey | cxTranslate }}\n        </button>\n      </div>\n      <div id=\"asm-customer-360-tab-panel\" class=\"cx-tab-content modal-body\">\n        <ng-container *ngIf=\"showErrorTab$ | async; else tabContent\">\n          <div class=\"cx-tab-error\">\n            <div class=\"cx-tab-error-image\"></div>\n            <div class=\"cx-tab-error-header\">\n              {{ 'asmCustomer360.errorMessageHeader' | cxTranslate }}\n            </div>\n            <div class=\"cx-tab-error-message\">\n              {{ 'asmCustomer360.alertErrorMessage' | cxTranslate }}\n            </div>\n          </div>\n        </ng-container>\n        <ng-template #tabContent>\n          <ng-container\n            *ngIf=\"asmCustomer360Tabs$ | async as asmCustomer360Tabs\"\n          >\n            <cx-asm-customer-360-section\n              *ngFor=\"let config of currentTab?.components; let i = index\"\n              [component]=\"config.component\"\n              [config]=\"config.config\"\n              [data]=\"asmCustomer360Tabs?.[i]\"\n              (navigate)=\"navigateTo($event)\"\n            ></cx-asm-customer-360-section>\n          </ng-container>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #closeButton>\n  <button\n    type=\"button\"\n    class=\"close\"\n    attr.aria-label=\"{{ 'common.close' | cxTranslate }}\"\n    (click)=\"closeModal('Cross click')\"\n  >\n    <cx-icon [type]=\"closeIcon\"></cx-icon>\n  </button>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AsmCustomer360Config }, { type: i2.AsmCustomer360Facade }, { type: i3.LaunchDialogService }, { type: i4.CsAgentAuthService }, { type: i3.DirectionService }]; }, propDecorators: { role: [{
                type: HostBinding,
                args: ['attr.role']
            }], modal: [{
                type: HostBinding,
                args: ['attr.aria-modal']
            }], labelledby: [{
                type: HostBinding,
                args: ['attr.aria-labelledby']
            }], describedby: [{
                type: HostBinding,
                args: ['attr.aria-describedby']
            }], tabHeaderItems: [{
                type: ViewChildren,
                args: ['tabHeaderItem']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNtLWN1c3RvbWVyLTM2MC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2N1c3RvbWVyLTM2MC9jb21wb25lbnRzL2FzbS1jdXN0b21lci0zNjAvYXNtLWN1c3RvbWVyLTM2MC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2N1c3RvbWVyLTM2MC9jb21wb25lbnRzL2FzbS1jdXN0b21lci0zNjAvYXNtLWN1c3RvbWVyLTM2MC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBRVQsV0FBVyxFQUlYLFlBQVksR0FDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUMzRSxPQUFPLEVBRUwsbUJBQW1CLEVBSW5CLGtCQUFrQixFQUdsQixpQkFBaUIsR0FDbEIsTUFBTSxrQ0FBa0MsQ0FBQztBQUUxQyxPQUFPLEVBQ0wsaUJBQWlCLEVBSWpCLGNBQWMsR0FDZixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFDTCxhQUFhLEVBR2IsU0FBUyxHQUVWLE1BQU0sdUJBQXVCLENBQUM7QUFDL0IsT0FBTyxFQUFFLGVBQWUsRUFBYyxZQUFZLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxVQUFVLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7O0FBUS9FLE1BQU0sT0FBTyx1QkFBdUI7SUF3Q2xDLFlBQ1ksb0JBQTBDLEVBQzFDLG9CQUEwQyxFQUMxQyxtQkFBd0MsRUFDeEMsa0JBQXNDLEVBQ3RDLGdCQUFrQztRQUpsQyx5QkFBb0IsR0FBcEIsb0JBQW9CLENB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LEtBQUssYUFBYSxDQUFDLEdBQUcsQ0FBQztJQUNwRSxDQUFDOztvSEE1UFUsdUJBQXVCO3dHQUF2Qix1QkFBdUIsNFVDcERwQyxrN1BBNE5BOzJGRHhLYSx1QkFBdUI7a0JBTG5DLFNBQVM7c0NBQ1MsdUJBQXVCLENBQUMsTUFBTSxZQUNyQyxxQkFBcUI7Z1BBSUwsSUFBSTtzQkFBN0IsV0FBVzt1QkFBQyxXQUFXO2dCQUNRLEtBQUs7c0JBQXBDLFdBQVc7dUJBQUMsaUJBQWlCO2dCQUNPLFVBQVU7c0JBQTlDLFdBQVc7dUJBQUMsc0JBQXNCO2dCQUNHLFdBQVc7c0JBQWhELFdBQVc7dUJBQUMsdUJBQXVCO2dCQUNMLGNBQWM7c0JBQTVDLFlBQVk7dUJBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q2hpbGRyZW4sXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZ2V0QXNtRGlhbG9nQWN0aW9uRXZlbnQgfSBmcm9tICdAc3BhcnRhY3VzL2FzbS9jdXN0b21lci0zNjAvY29yZSc7XG5pbXBvcnQge1xuICBBc21EaWFsb2dBY3Rpb25FdmVudCxcbiAgQXNtRGlhbG9nQWN0aW9uVHlwZSxcbiAgQXNtQ3VzdG9tZXIzNjBEYXRhLFxuICBBc21DdXN0b21lcjM2MFRhYkNvbmZpZyxcbiAgQXNtQ3VzdG9tZXIzNjBGYWNhZGUsXG4gIEFzbUN1c3RvbWVyMzYwVHlwZSxcbiAgQXNtQ3VzdG9tZXIzNjBPdmVydmlldyxcbiAgQXNtQ3VzdG9tZXJPdmVydmlldyxcbiAgS2V5Qm9hcmRFdmVudENvZGUsXG59IGZyb20gJ0BzcGFydGFjdXMvYXNtL2N1c3RvbWVyLTM2MC9yb290JztcbmltcG9ydCB7IENzQWdlbnRBdXRoU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvYXNtL3Jvb3QnO1xuaW1wb3J0IHtcbiAgR2xvYmFsTWVzc2FnZVR5cGUsXG4gIEltYWdlLFxuICBVcmxDb21tYW5kLFxuICBVc2VyLFxuICBpc05vdFVuZGVmaW5lZCxcbn0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7XG4gIERpcmVjdGlvbk1vZGUsXG4gIERpcmVjdGlvblNlcnZpY2UsXG4gIEZvY3VzQ29uZmlnLFxuICBJQ09OX1RZUEUsXG4gIExhdW5jaERpYWxvZ1NlcnZpY2UsXG59IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNhdGNoRXJyb3IsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmaWx0ZXIsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEFzbUN1c3RvbWVyMzYwQ29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2FzbS1jdXN0b21lci0zNjAtY29uZmlnJztcblxuQENvbXBvbmVudCh7XG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBzZWxlY3RvcjogJ2N4LWFzbS1jdXN0b21lci0zNjAnLFxuICB0ZW1wbGF0ZVVybDogJy4vYXNtLWN1c3RvbWVyLTM2MC5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEFzbUN1c3RvbWVyMzYwQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95LCBPbkluaXQge1xuICBASG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpIHJvbGUgPSAnZGlhbG9nJztcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtbW9kYWwnKSBtb2RhbCA9IHRydWU7XG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWxhYmVsbGVkYnknKSBsYWJlbGxlZGJ5ID0gJ2FzbS1jdXN0b21lci0zNjAtdGl0bGUnO1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1kZXNjcmliZWRieScpIGRlc2NyaWJlZGJ5ID0gJ2FzbS1jdXN0b21lci0zNjAtZGVzYyc7XG4gIEBWaWV3Q2hpbGRyZW4oJ3RhYkhlYWRlckl0ZW0nKSB0YWJIZWFkZXJJdGVtczogUXVlcnlMaXN0PFxuICAgIEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+XG4gID47XG4gIHJlYWRvbmx5IGNhcnRJY29uID0gSUNPTl9UWVBFLkNBUlQ7XG4gIHJlYWRvbmx5IGNsb3NlSWNvbiA9IElDT05fVFlQRS5DTE9TRTtcbiAgcmVhZG9ubHkgb3JkZXJJY29uID0gSUNPTl9UWVBFLk9SREVSO1xuICByZWFkb25seSB0aWNrZXRJY29uID0gSUNPTl9UWVBFLkZJTEU7XG5cbiAgZ2xvYmFsTWVzc2FnZVR5cGUgPSBHbG9iYWxNZXNzYWdlVHlwZTtcblxuICBmb2N1c0NvbmZpZzogRm9jdXNDb25maWcgPSB7XG4gICAgdHJhcDogdHJ1ZSxcbiAgICBibG9jazogdHJ1ZSxcbiAgICBhdXRvZm9jdXM6ICcuY2xvc2UnLFxuICAgIGZvY3VzT25Fc2NhcGU6IHRydWUsXG4gIH07XG5cbiAgdGFiczogQXJyYXk8QXNtQ3VzdG9tZXIzNjBUYWJDb25maWc+O1xuXG4gIGFjdGl2ZVRhYiA9IDA7XG5cbiAgY3VycmVudFRhYjogQXNtQ3VzdG9tZXIzNjBUYWJDb25maWc7XG5cbiAgY3VzdG9tZXI6IFVzZXI7XG5cbiAgYXNtQ3VzdG9tZXIzNjBUYWJzJDogT2JzZXJ2YWJsZTxBcnJheTxBc21DdXN0b21lcjM2MERhdGEgfCB1bmRlZmluZWQ+PjtcblxuICBjdXN0b21lck92ZXJ2aWV3JDogT2JzZXJ2YWJsZTxBc21DdXN0b21lck92ZXJ2aWV3IHwgdW5kZWZpbmVkPjtcblxuICBwcm90ZWN0ZWQgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuXG4gIHByb3RlY3RlZCBzaG93RXJyb3JBbGVydCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcblxuICBwcm90ZWN0ZWQgc2hvd0Vycm9yVGFiJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBhc21DdXN0b21lcjM2MENvbmZpZzogQXNtQ3VzdG9tZXIzNjBDb25maWcsXG4gICAgcHJvdGVjdGVkIGFzbUN1c3RvbWVyMzYwRmFjYWRlOiBBc21DdXN0b21lcjM2MEZhY2FkZSxcbiAgICBwcm90ZWN0ZWQgbGF1bmNoRGlhbG9nU2VydmljZTogTGF1bmNoRGlhbG9nU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY3NBZ2VudEF1dGhTZXJ2aWNlOiBDc0FnZW50QXV0aFNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGRpcmVjdGlvblNlcnZpY2U6IERpcmVjdGlvblNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5jdXN0b21lck92ZXJ2aWV3JCA9IHRoaXMuYXNtQ3VzdG9tZXIzNjBGYWNhZGVcbiAgICAgIC5nZXQzNjBEYXRhKFtcbiAgICAgICAge1xuICAgICAgICAgIHJlcXVlc3REYXRhOiB7IHR5cGU6IEFzbUN1c3RvbWVyMzYwVHlwZS5PVkVSVklFVyB9LFxuICAgICAgICB9LFxuICAgICAgXSlcbiAgICAgIC5waXBlKFxuICAgICAgICBtYXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3ZlcnZpZXdJdGVtID0gcmVzcG9uc2U/LnZhbHVlPy5maW5kKFxuICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gQXNtQ3VzdG9tZXIzNjBUeXBlLk9WRVJWSUVXXG4gICAgICAgICAgKSBhcyBBc21DdXN0b21lcjM2ME92ZXJ2aWV3IHwgdW5kZWZpbmVkO1xuICAgICAgICAgIHJldHVybiBvdmVydmlld0l0ZW0/Lm92ZXJ2aWV3IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgfSksXG4gICAgICAgIGNhdGNoRXJyb3IoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2hvd0Vycm9yQWxlcnQkLm5leHQodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuIG9mKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgdGhpcy50YWJzID0gYXNtQ3VzdG9tZXIzNjBDb25maWc/LmFzbUN1c3RvbWVyMzYwPy50YWJzID8/IFtdO1xuICAgIHRoaXMuY3VycmVudFRhYiA9IHRoaXMudGFic1swXTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgIHRoaXMuY3NBZ2VudEF1dGhTZXJ2aWNlXG4gICAgICAgIC5pc0N1c3RvbWVyU3VwcG9ydEFnZW50TG9nZ2VkSW4oKVxuICAgICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKVxuICAgICAgICAuc3Vic2NyaWJlKChsb2dnZWRJbikgPT4ge1xuICAgICAgICAgIGlmICghbG9nZ2VkSW4pIHtcbiAgICAgICAgICAgIHRoaXMubGF1bmNoRGlhbG9nU2VydmljZS5jbG9zZURpYWxvZygnbG9nb3V0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbi5hZGQoXG4gICAgICB0aGlzLmxhdW5jaERpYWxvZ1NlcnZpY2UuZGF0YSQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgIHRoaXMuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuc2V0VGFiRGF0YSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIGVycm9yQWxlcnQkID0gdGhpcy5zaG93RXJyb3JBbGVydCQuYXNPYnNlcnZhYmxlKCk7XG5cbiAgZXJyb3JUYWIkID0gdGhpcy5zaG93RXJyb3JUYWIkLmFzT2JzZXJ2YWJsZSgpO1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSB0YWIgaXMgc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWxlY3RlZFRhYiBzZWxlY3RlZCB0YWIgaW5kZXhcbiAgICovXG4gIHNlbGVjdFRhYihzZWxlY3RlZFRhYjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVUYWIgPSBzZWxlY3RlZFRhYjtcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSB0aGlzLnRhYnNbc2VsZWN0ZWRUYWJdO1xuICAgIHRoaXMudXBkYXRlVGFiSW5kZXgoc2VsZWN0ZWRUYWIpO1xuICAgIHRoaXMuc2V0VGFiRGF0YSgpO1xuICB9XG4gIC8qKlxuICAgKiAgVXBkYXRlIHRhYiBmb2N1cyB3aGVuIGtleSBpcyBwcmVzc2VkXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlbGVjdGVkSW5kZXggY3VycmVudCB0YWIgaW5kZXhcbiAgICovXG4gIHN3aXRjaFRhYihldmVudDogS2V5Ym9hcmRFdmVudCwgc2VsZWN0ZWRJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWF4VGFiID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XG4gICAgbGV0IGZsYWcgPSB0cnVlO1xuICAgIGlmICh0aGlzLmlzQmFja05hdmlnYXRpb24oZXZlbnQpKSB7XG4gICAgICBzZWxlY3RlZEluZGV4LS07XG4gICAgICBpZiAoc2VsZWN0ZWRJbmRleCA8IDApIHtcbiAgICAgICAgc2VsZWN0ZWRJbmRleCA9IG1heFRhYjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNGb3J3YXJkc05hdmlnYXRpb24oZXZlbnQpKSB7XG4gICAgICBzZWxlY3RlZEluZGV4Kys7XG4gICAgICBpZiAoc2VsZWN0ZWRJbmRleCA+IG1heFRhYikge1xuICAgICAgICBzZWxlY3RlZEluZGV4ID0gMDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IEtleUJvYXJkRXZlbnRDb2RlLkhPTUUpIHtcbiAgICAgIHNlbGVjdGVkSW5kZXggPSAwO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gS2V5Qm9hcmRFdmVudENvZGUuRU5EKSB7XG4gICAgICBzZWxlY3RlZEluZGV4ID0gbWF4VGFiO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbGFnID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRhYkluZGV4KHNlbGVjdGVkSW5kZXgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGVyZSBpcyBhIGxpbmsgd2l0aGluIHRoZSBtb2RhbCwgdXNlIHRoaXMgbWV0aG9kIHRvIHJlZGlyZWN0IHRoZSB1c2VyIGFuZCBjbG9zZSB0aGUgbW9kYWwuXG4gICAqL1xuICBuYXZpZ2F0ZVRvKHJvdXRlOiBVcmxDb21tYW5kKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQ6IEFzbURpYWxvZ0FjdGlvbkV2ZW50ID0gZ2V0QXNtRGlhbG9nQWN0aW9uRXZlbnQoXG4gICAgICB0aGlzLmN1c3RvbWVyLFxuICAgICAgQXNtRGlhbG9nQWN0aW9uVHlwZS5OQVZJR0FURSxcbiAgICAgIHJvdXRlXG4gICAgKTtcbiAgICB0aGlzLmNsb3NlTW9kYWwoZXZlbnQpO1xuICB9XG5cbiAgY2xvc2VFcnJvckFsZXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd0Vycm9yQWxlcnQkLm5leHQoZmFsc2UpO1xuICB9XG5cbiAgY2xvc2VNb2RhbChyZWFzb24/OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmxhdW5jaERpYWxvZ1NlcnZpY2UuY2xvc2VEaWFsb2cocmVhc29uKTtcbiAgfVxuXG4gIGdldEF2YXRhclRleHQoY3VzdG9tZXI/OiBVc2VyKTogc3RyaW5nIHtcbiAgICBjdXN0b21lciA9IGN1c3RvbWVyID8/IHt9O1xuICAgIGNvbnN0IHsgZmlyc3ROYW1lID0gJycsIGxhc3ROYW1lID0gJycgfSA9IGN1c3RvbWVyO1xuICAgIHJldHVybiBgJHtmaXJzdE5hbWUuY2hhckF0KDApfSR7bGFzdE5hbWUuY2hhckF0KDApfWA7XG4gIH1cblxuICBnZXRBdmF0YXJJbWFnZShvdmVydmlldz86IEFzbUN1c3RvbWVyT3ZlcnZpZXcpOiBJbWFnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIG92ZXJ2aWV3Py51c2VyQXZhdGFyPy51cmxcbiAgICAgID8ge1xuICAgICAgICAgIGFsdFRleHQ6IG92ZXJ2aWV3Lm5hbWUsXG4gICAgICAgICAgdXJsOiBvdmVydmlldy51c2VyQXZhdGFyLnVybCxcbiAgICAgICAgICBmb3JtYXQ6IG92ZXJ2aWV3LnVzZXJBdmF0YXIuZm9ybWF0LFxuICAgICAgICB9XG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGFiSW5kZXggZm9yIGVhY2ggdGFiOiBzZWxlY3QgdGFiIGJlY29tZXMgMCBhbmQgb3RoZXIgdGFicyB3aWxsIGJlIC0xXG4gICAqIHRoaXMgaXMgZm9yIHByZXZlbnQgdGFiYmluZyB3aXRoaW4gdGFic1xuICAgKiBAcGFyYW0ge251bWJlcn0gc2VsZWN0ZWRJbmRleCAtIHNlbGVjdGVkIHRhYiBpbmRleFxuICAgKi9cbiAgcHJvdGVjdGVkIHVwZGF0ZVRhYkluZGV4KHNlbGVjdGVkSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudGFiSGVhZGVySXRlbXMudG9BcnJheSgpLmZvckVhY2goKHRhYkhlYWRlckl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPT09IHNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgdGFiSGVhZGVySXRlbS5uYXRpdmVFbGVtZW50LnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGFiSGVhZGVySXRlbS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWJIZWFkZXJJdGVtLm5hdGl2ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzZXRUYWJEYXRhKCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd0Vycm9yVGFiJC5uZXh0KGZhbHNlKTtcbiAgICBjb25zdCBnZXQzNjBEYXRhID0gdGhpcy5hc21DdXN0b21lcjM2MEZhY2FkZVxuICAgICAgLmdldDM2MERhdGEodGhpcy5jdXJyZW50VGFiLmNvbXBvbmVudHMpXG4gICAgICAucGlwZShcbiAgICAgICAgY2F0Y2hFcnJvcigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3JUYWIkLm5leHQodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3JBbGVydCQubmV4dCh0cnVlKTtcbiAgICAgICAgICByZXR1cm4gb2YodW5kZWZpbmVkKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICB0aGlzLmFzbUN1c3RvbWVyMzYwVGFicyQgPSBnZXQzNjBEYXRhLnBpcGUoXG4gICAgICBmaWx0ZXIoaXNOb3RVbmRlZmluZWQpLFxuICAgICAgbWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VGFiLmNvbXBvbmVudHMubWFwKChjb21wb25lbnQpID0+IHtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGNvbXBvbmVudC5yZXF1ZXN0RGF0YTtcbiAgICAgICAgICBpZiAocmVxdWVzdERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS52YWx1ZS5maW5kKFxuICAgICAgICAgICAgICAoZGF0YSkgPT4gZGF0YS50eXBlID09PSByZXF1ZXN0RGF0YS50eXBlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFZlcmlmaWVzIHdoZXRoZXIgdGhlIHVzZXIgbmF2aWdhdGVzIGludG8gYSBzdWJncm91cCBvZiB0aGUgbWFpbiBncm91cCBtZW51LlxuICAgKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50IC0gS2V5Ym9hcmQgZXZlbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0ndHJ1ZScgaWYgdGhlIHVzZXIgbmF2aWdhdGVzIGludG8gdGhlIHN1Ymdyb3VwLCBvdGhlcndpc2UgJ2ZhbHNlJy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIGlzRm9yd2FyZHNOYXZpZ2F0aW9uKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIChldmVudC5jb2RlID09PSAnQXJyb3dSaWdodCcgJiYgdGhpcy5pc0xUUkRpcmVjdGlvbigpKSB8fFxuICAgICAgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnICYmIHRoaXMuaXNSVExEaXJlY3Rpb24oKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWVzIHdoZXRoZXIgdGhlIHVzZXIgbmF2aWdhdGVzIGZyb20gYSBzdWJncm91cCBiYWNrIHRvIHRoZSBtYWluIGdyb3VwIG1lbnUuXG4gICAqXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnQgLSBLZXlib2FyZCBldmVudFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSd0cnVlJyBpZiB0aGUgdXNlciBuYXZpZ2F0ZXMgYmFjayBpbnRvIHRoZSBtYWluIGdyb3VwIG1lbnUsIG90aGVyd2lzZSAnZmFsc2UnLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNCYWNrTmF2aWdhdGlvbihldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAoZXZlbnQuY29kZSA9PT0gS2V5Qm9hcmRFdmVudENvZGUuQVJST1dfTEVGVCAmJiB0aGlzLmlzTFRSRGlyZWN0aW9uKCkpIHx8XG4gICAgICAoZXZlbnQuY29kZSA9PT0gS2V5Qm9hcmRFdmVudENvZGUuQVJST1dfUklHSFQgJiYgdGhpcy5pc1JUTERpcmVjdGlvbigpKVxuICAgICk7XG4gIH1cbiAgcHJvdGVjdGVkIGlzTFRSRGlyZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRpcmVjdGlvblNlcnZpY2UuZ2V0RGlyZWN0aW9uKCkgPT09IERpcmVjdGlvbk1vZGUuTFRSO1xuICB9XG5cbiAgcHJvdGVjdGVkIGlzUlRMRGlyZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRpcmVjdGlvblNlcnZpY2UuZ2V0RGlyZWN0aW9uKCkgPT09IERpcmVjdGlvbk1vZGUuUlRMO1xuICB9XG59XG4iLCI8ZGl2XG4gIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MCBjeC1tb2RhbC1jb250YWluZXIgY3gtYXNtLWRpYWxvZ1wiXG4gIFtjeEZvY3VzXT1cImZvY3VzQ29uZmlnXCJcbiAgKGVzYyk9XCJjbG9zZU1vZGFsKCdFc2NhcGUgY2xpY2tlZCcpXCJcbj5cbiAgPCEtLSBNb2RhbCBIZWFkZXIgLS0+XG4gIDxkaXYgY2xhc3M9XCJjeC1tb2RhbC1jb250ZW50XCI+XG4gICAgPGRpdiBjbGFzcz1cImN4LWRpYWxvZy1oZWFkZXIgbW9kYWwtaGVhZGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLXRpdGxlXCI+XG4gICAgICAgIDxoMyBpZD1cImFzbS1jdXN0b21lci0zNjAtdGl0bGVcIiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+XG4gICAgICAgICAge3sgJ2FzbUN1c3RvbWVyMzYwLmhlYWRlci50aXRsZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICA8L2gzPlxuICAgICAgICA8ZGl2IGlkPVwiYXNtLWN1c3RvbWVyLTM2MC1kZXNjXCIgY2xhc3M9XCJjeC12aXN1YWxseS1oaWRkZW5cIj5cbiAgICAgICAgICB7e1xuICAgICAgICAgICAgJ2FzbUN1c3RvbWVyMzYwLmhlYWRlci5zdWJUaXRsZSdcbiAgICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBuYW1lOiBjdXN0b21lci5maXJzdE5hbWUgfVxuICAgICAgICAgIH19XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bmctdGVtcGxhdGUgKm5nVGVtcGxhdGVPdXRsZXQ9XCJjbG9zZUJ1dHRvblwiPjwvbmctdGVtcGxhdGU+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxjeC1tZXNzYWdlXG4gICAgICAgICpuZ0lmPVwiZXJyb3JBbGVydCQgfCBhc3luY1wiXG4gICAgICAgIFt0ZXh0XT1cIidhc21DdXN0b21lcjM2MC5hbGVydEVycm9yTWVzc2FnZScgfCBjeFRyYW5zbGF0ZVwiXG4gICAgICAgIFt0eXBlXT1cImdsb2JhbE1lc3NhZ2VUeXBlLk1TR19UWVBFX0VSUk9SXCJcbiAgICAgICAgKGNsb3NlTWVzc2FnZSk9XCJjbG9zZUVycm9yQWxlcnQoKVwiXG4gICAgICA+XG4gICAgICA8L2N4LW1lc3NhZ2U+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwiaGVhZGVyLWNvbnRlbnRcIlxuICAgICAgICAqbmdJZj1cImN1c3RvbWVyT3ZlcnZpZXckIHwgYXN5bmMgYXMgY3VzdG9tZXJPdmVydmlld1wiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItcHJvZmlsZS1kZXRhaWxzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlci1wcm9maWxlLWRldGFpbHMtaW5mb1wiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgICAgIGdldEF2YXRhckltYWdlIHwgY3hBcmdzOiBjdXN0b21lck92ZXJ2aWV3IGFzIGF2YXRhckltYWdlO1xuICAgICAgICAgICAgICAgIGVsc2UgY3VzdG9tZXJUZXh0QXZhdGFyXG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1hdmF0YXItaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICA8Y3gtbWVkaWEgW2NvbnRhaW5lcl09XCJhdmF0YXJJbWFnZVwiPjwvY3gtbWVkaWE+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY3VzdG9tZXJUZXh0QXZhdGFyPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtYXZhdGFyXCI+XG4gICAgICAgICAgICAgICAge3sgZ2V0QXZhdGFyVGV4dCB8IGN4QXJnczogY3VzdG9tZXIgfX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWFzbS1jdXN0b21lci1pbmZvIG1sLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWFzbS1jdXN0b21lci1uYW1lXCI+XG4gICAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICAgICdhc21DdXN0b21lcjM2MC5oZWFkZXIuc3ViVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgIHwgY3hUcmFuc2xhdGU6IHsgbmFtZTogY3VzdG9tZXJPdmVydmlldz8ubmFtZSB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItZW1haWxcIj5cbiAgICAgICAgICAgICAgICB7eyBjdXN0b21lck92ZXJ2aWV3Py5lbWFpbCB9fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLWFkZHJlc3NcIlxuICAgICAgICAgICAgICAgICpuZ0lmPVwiY3VzdG9tZXJPdmVydmlldz8uYWRkcmVzcz8udG93blwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7eyBjdXN0b21lck92ZXJ2aWV3LmFkZHJlc3MudG93biB9fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwiaGVhZGVyLXByb2ZpbGUtZGV0YWlscy1sb2dcIlxuICAgICAgICAgICAgKm5nSWY9XCJjdXN0b21lck92ZXJ2aWV3Py5zaWduZWRVcEF0XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAnYXNtQ3VzdG9tZXIzNjAuaGVhZGVyLnNpZ25lZFVwQXQnXG4gICAgICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyT3ZlcnZpZXcuc2lnbmVkVXBBdFxuICAgICAgICAgICAgICAgICAgICAgICAgfCBjeERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBhc21DdXN0b21lcjM2MENvbmZpZz8uYXNtQ3VzdG9tZXIzNjA/LmRhdGVGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItYWNjb3VudC1kZXRhaWxzXCI+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzPVwiaGVhZGVyLWFjY291bnQtZGV0YWlscy1hY3RpdmUtY2FydFwiXG4gICAgICAgICAgICAqbmdJZj1cImN1c3RvbWVyT3ZlcnZpZXc/LmNhcnRDb2RlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Y3gtaWNvbiBjbGFzcz1cImFjY291bnQtaWNvblwiIFt0eXBlXT1cImNhcnRJY29uXCI+PC9jeC1pY29uPlxuICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgJ2FzbUN1c3RvbWVyMzYwLmhlYWRlci5hY3RpdmVDYXJ0TGFiZWwnXG4gICAgICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBjYXJ0U2l6ZTogY3VzdG9tZXJPdmVydmlldz8uY2FydFNpemUgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICAgICAgICAnYXNtQ3VzdG9tZXIzNjAuYXJpYS5hY3RpdmVDYXJ0Q29kZSdcbiAgICAgICAgICAgICAgICAgIHwgY3hUcmFuc2xhdGU6IHsgY29kZTogY3VzdG9tZXJPdmVydmlldy5jYXJ0Q29kZSB9XG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiY3gtb3ZlcnZpZXctdGl0bGUtbGluayBsaW5rXCJcbiAgICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlVG8oeyBjeFJvdXRlOiAnY2FydCcgfSlcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7eyBjdXN0b21lck92ZXJ2aWV3LmNhcnRDb2RlIH19XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzPVwiaGVhZGVyLWFjY291bnQtZGV0YWlscy1yZWNlbnQtb3JkZXJcIlxuICAgICAgICAgICAgKm5nSWY9XCJjdXN0b21lck92ZXJ2aWV3Py5sYXRlc3RPcmRlckNvZGVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxjeC1pY29uIGNsYXNzPVwiYWNjb3VudC1pY29uXCIgW3R5cGVdPVwib3JkZXJJY29uXCI+PC9jeC1pY29uPlxuICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgJ2FzbUN1c3RvbWVyMzYwLmhlYWRlci5yZWNlbnRPcmRlckxhYmVsJ1xuICAgICAgICAgICAgICAgIHwgY3hUcmFuc2xhdGU6IHsgcHJpY2U6IGN1c3RvbWVyT3ZlcnZpZXc/LmxhdGVzdE9yZGVyVG90YWwgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICAgICAgICAnYXNtQ3VzdG9tZXIzNjAuYXJpYS5yZWNlbnRPcmRlckNvZGUnXG4gICAgICAgICAgICAgICAgICB8IGN4VHJhbnNsYXRlOiB7IGNvZGU6IGN1c3RvbWVyT3ZlcnZpZXcubGF0ZXN0T3JkZXJDb2RlIH1cbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJjeC1vdmVydmlldy10aXRsZS1saW5rIGxpbmtcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiXG4gICAgICAgICAgICAgICAgbmF2aWdhdGVUbyh7XG4gICAgICAgICAgICAgICAgICBjeFJvdXRlOiAnb3JkZXJEZXRhaWxzJyxcbiAgICAgICAgICAgICAgICAgIHBhcmFtczogeyBjb2RlOiBjdXN0b21lck92ZXJ2aWV3LmxhdGVzdE9yZGVyQ29kZSB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3sgY3VzdG9tZXJPdmVydmlldy5sYXRlc3RPcmRlckNvZGUgfX08L2J1dHRvblxuICAgICAgICAgICAgPixcbiAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgIGN1c3RvbWVyT3ZlcnZpZXc/LmxhdGVzdE9yZGVyVGltZVxuICAgICAgICAgICAgICAgIHwgY3hEYXRlOiBhc21DdXN0b21lcjM2MENvbmZpZz8uYXNtQ3VzdG9tZXIzNjA/LmRhdGVGb3JtYXRcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzcz1cImhlYWRlci1hY2NvdW50LWRldGFpbHMtcmVjZW50LXRpY2tldFwiXG4gICAgICAgICAgICAqbmdJZj1cImN1c3RvbWVyT3ZlcnZpZXc/LmxhdGVzdE9wZW5lZFRpY2tldElkXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Y3gtaWNvbiBjbGFzcz1cImFjY291bnQtaWNvblwiIFt0eXBlXT1cInRpY2tldEljb25cIj48L2N4LWljb24+XG4gICAgICAgICAgICB7eyAnYXNtQ3VzdG9tZXIzNjAuaGVhZGVyLnJlY2VudFRpY2tldExhYmVsJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgICAgICAgICAgJ2FzbUN1c3RvbWVyMzYwLmFyaWEucmVjZW50T3JkZXJDb2RlJ1xuICAgICAgICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBjb2RlOiBjdXN0b21lck92ZXJ2aWV3LmxhdGVzdE9wZW5lZFRpY2tldElkIH1cbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJjeC1vdmVydmlldy10aXRsZS1saW5rIGxpbmtcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiXG4gICAgICAgICAgICAgICAgbmF2aWdhdGVUbyh7XG4gICAgICAgICAgICAgICAgICBjeFJvdXRlOiAnc3VwcG9ydFRpY2tldERldGFpbHMnLFxuICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7IHRpY2tldENvZGU6IGN1c3RvbWVyT3ZlcnZpZXcubGF0ZXN0T3BlbmVkVGlja2V0SWQgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7IGN1c3RvbWVyT3ZlcnZpZXcubGF0ZXN0T3BlbmVkVGlja2V0SWQgfX08L2J1dHRvblxuICAgICAgICAgICAgPixcbiAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgIGN1c3RvbWVyT3ZlcnZpZXc/LmxhdGVzdE9wZW5lZFRpY2tldENyZWF0ZWRBdFxuICAgICAgICAgICAgICAgIHwgY3hEYXRlOiBhc21DdXN0b21lcjM2MENvbmZpZz8uYXNtQ3VzdG9tZXIzNjA/LmRhdGVGb3JtYXRcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBNb2RhbCBCb2R5IC0tPlxuICAgIDxkaXYgY2xhc3M9XCJjeC1kaWFsb2ctYm9keVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImN4LXRhYi1oZWFkZXJzXCIgcm9sZT1cInRhYmxpc3RcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICN0YWJIZWFkZXJJdGVtXG4gICAgICAgICAgKm5nRm9yPVwibGV0IHRhYkhlYWRlciBvZiB0YWJzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICBjbGFzcz1cImN4LXRhYi1oZWFkZXJcIlxuICAgICAgICAgIHJvbGU9XCJ0YWJcIlxuICAgICAgICAgIFthdHRyLmFyaWEtc2VsZWN0ZWRdPVwiYWN0aXZlVGFiID09PSBpXCJcbiAgICAgICAgICBhdHRyLmFyaWEtY29udHJvbHM9XCJhc20tY3VzdG9tZXItMzYwLXRhYi1wYW5lbFwiXG4gICAgICAgICAgKGNsaWNrKT1cInNlbGVjdFRhYihpKVwiXG4gICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJhY3RpdmVUYWIgPT09IGlcIlxuICAgICAgICAgIChrZXlkb3duKT1cInN3aXRjaFRhYigkZXZlbnQsIGkpXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7IHRhYkhlYWRlci5pMThuTmFtZUtleSB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGlkPVwiYXNtLWN1c3RvbWVyLTM2MC10YWItcGFuZWxcIiBjbGFzcz1cImN4LXRhYi1jb250ZW50IG1vZGFsLWJvZHlcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInNob3dFcnJvclRhYiQgfCBhc3luYzsgZWxzZSB0YWJDb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LXRhYi1lcnJvclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN4LXRhYi1lcnJvci1pbWFnZVwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN4LXRhYi1lcnJvci1oZWFkZXJcIj5cbiAgICAgICAgICAgICAge3sgJ2FzbUN1c3RvbWVyMzYwLmVycm9yTWVzc2FnZUhlYWRlcicgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtdGFiLWVycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAge3sgJ2FzbUN1c3RvbWVyMzYwLmFsZXJ0RXJyb3JNZXNzYWdlJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjdGFiQ29udGVudD5cbiAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAqbmdJZj1cImFzbUN1c3RvbWVyMzYwVGFicyQgfCBhc3luYyBhcyBhc21DdXN0b21lcjM2MFRhYnNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxjeC1hc20tY3VzdG9tZXItMzYwLXNlY3Rpb25cbiAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGNvbmZpZyBvZiBjdXJyZW50VGFiPy5jb21wb25lbnRzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICAgICAgW2NvbXBvbmVudF09XCJjb25maWcuY29tcG9uZW50XCJcbiAgICAgICAgICAgICAgW2NvbmZpZ109XCJjb25maWcuY29uZmlnXCJcbiAgICAgICAgICAgICAgW2RhdGFdPVwiYXNtQ3VzdG9tZXIzNjBUYWJzPy5baV1cIlxuICAgICAgICAgICAgICAobmF2aWdhdGUpPVwibmF2aWdhdGVUbygkZXZlbnQpXCJcbiAgICAgICAgICAgID48L2N4LWFzbS1jdXN0b21lci0zNjAtc2VjdGlvbj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48bmctdGVtcGxhdGUgI2Nsb3NlQnV0dG9uPlxuICA8YnV0dG9uXG4gICAgdHlwZT1cImJ1dHRvblwiXG4gICAgY2xhc3M9XCJjbG9zZVwiXG4gICAgYXR0ci5hcmlhLWxhYmVsPVwie3sgJ2NvbW1vbi5jbG9zZScgfCBjeFRyYW5zbGF0ZSB9fVwiXG4gICAgKGNsaWNrKT1cImNsb3NlTW9kYWwoJ0Nyb3NzIGNsaWNrJylcIlxuICA+XG4gICAgPGN4LWljb24gW3R5cGVdPVwiY2xvc2VJY29uXCI+PC9jeC1pY29uPlxuICA8L2J1dHRvbj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=