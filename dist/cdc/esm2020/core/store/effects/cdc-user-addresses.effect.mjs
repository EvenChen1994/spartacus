/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Injectable } from '@angular/core';
import { Actions, createEffect, ofType } from '@ngrx/effects';
import { CdcJsService } from '@spartacus/cdc/root';
import { GlobalMessageService, GlobalMessageType, UserActions, UserAddressConnector, UserAddressService, UserIdService, } from '@spartacus/core';
import { mergeMap, switchMap, take, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@ngrx/effects";
import * as i2 from "@spartacus/core";
import * as i3 from "@spartacus/cdc/root";
export class CdcUserAddressesEffects {
    getAddresses() {
        return this.userIdService.takeUserId().pipe(take(1), switchMap((userId) => this.userAddressConnector.getAll(userId)));
    }
    getDefaultAddress(addresses) {
        return addresses.find((address) => address?.defaultAddress === true);
    }
    getCountryName(countries, countryIsocode) {
        return countries.find((country) => country.isocode === countryIsocode)
            ?.name;
    }
    updateDefaultAddressInCDC() {
        return this.getAddresses().pipe(take(1), switchMap((addresses) => {
            const defaultAddress = this.getDefaultAddress(addresses) || {};
            return this.sendAddressToCDC(defaultAddress);
        }));
    }
    sendAddressToCDC(address) {
        //send to CDC
        const formattedAddress = address.formattedAddress || ' ';
        return this.userAddressService.getDeliveryCountries().pipe(take(1), switchMap((countries) => {
            const countryName = this.getCountryName(countries, address.country?.isocode || ' ') ||
                ' ';
            return this.cdcJsService.updateAddressWithoutScreenSet(formattedAddress, address.postalCode || ' ', address.town || ' ', countryName);
        }));
    }
    showErrorMessage(error) {
        const errorMessage = error?.errorMessage || ' ';
        this.messageService.add(errorMessage, GlobalMessageType.MSG_TYPE_ERROR);
    }
    constructor(actions$, userIdService, userAddressConnector, userAddressService, messageService, cdcJsService) {
        this.actions$ = actions$;
        this.userIdService = userIdService;
        this.userAddressConnector = userAddressConnector;
        this.userAddressService = userAddressService;
        this.messageService = messageService;
        this.cdcJsService = cdcJsService;
        this.addressFieldKeys = ['line1', 'line2', 'region.name', 'town', 'postalCode'];
        this.cdcAddUserAddress$ = createEffect(() => this.actions$.pipe(ofType(UserActions.ADD_USER_ADDRESS_SUCCESS), mergeMap(() => this.updateDefaultAddressInCDC()), tap({
            error: (error) => this.showErrorMessage(error),
        })), { dispatch: false });
        this.cdcUpdateUserAddress$ = createEffect(() => this.actions$.pipe(ofType(UserActions.UPDATE_USER_ADDRESS_SUCCESS), mergeMap(() => this.updateDefaultAddressInCDC()), tap({
            error: (error) => this.showErrorMessage(error),
        })), { dispatch: false });
        this.cdcDeleteUserAddress$ = createEffect(() => this.actions$.pipe(ofType(UserActions.DELETE_USER_ADDRESS_SUCCESS), mergeMap(() => this.updateDefaultAddressInCDC()), tap({
            error: (error) => this.showErrorMessage(error),
        })), { dispatch: false });
    }
}
CdcUserAddressesEffects.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CdcUserAddressesEffects, deps: [{ token: i1.Actions }, { token: i2.UserIdService }, { token: i2.UserAddressConnector }, { token: i2.UserAddressService }, { token: i2.GlobalMessageService }, { token: i3.CdcJsService }], target: i0.ɵɵFactoryTarget.Injectable });
CdcUserAddressesEffects.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CdcUserAddressesEffects });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CdcUserAddressesEffects, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.Actions }, { type: i2.UserIdService }, { type: i2.UserAddressConnector }, { type: i2.UserAddressService }, { type: i2.GlobalMessageService }, { type: i3.CdcJsService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RjLXVzZXItYWRkcmVzc2VzLmVmZmVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2ludGVncmF0aW9uLWxpYnMvY2RjL2NvcmUvc3RvcmUvZWZmZWN0cy9jZGMtdXNlci1hZGRyZXNzZXMuZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbkQsT0FBTyxFQUdMLG9CQUFvQixFQUNwQixpQkFBaUIsRUFDakIsV0FBVyxFQUNYLG9CQUFvQixFQUNwQixrQkFBa0IsRUFDbEIsYUFBYSxHQUNkLE1BQU0saUJBQWlCLENBQUM7QUFFekIsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7OztBQUdoRSxNQUFNLE9BQU8sdUJBQXVCO0lBdUNsQyxZQUFZO1FBQ1YsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FDekMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNQLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUNoRSxDQUFDO0lBQ0osQ0FBQztJQUVELGlCQUFpQixDQUFDLFNBQW9CO1FBQ3BDLE9BQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLGNBQWMsS0FBSyxJQUFJLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsY0FBYyxDQUFDLFNBQW9CLEVBQUUs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QUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDLEVBQ2hELEdBQUcsQ0FBQztZQUNGLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQztTQUMvQyxDQUFDLENBQ0gsRUFDSCxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FDcEIsQ0FBQztRQUVGLDBCQUFxQixHQUFHLFlBQVksQ0FDbEMsR0FBRyxFQUFFLENBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQ2hCLE1BQU0sQ0FBQyxXQUFXLENBQUMsMkJBQTJCLENBQUMsRUFDL0MsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDLEVBQ2hELEdBQUcsQ0FBQztZQUNGLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQztTQUMvQyxDQUFDLENBQ0gsRUFDSCxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FDcEIsQ0FBQztJQTJEQyxDQUFDOztvSEFoR08sdUJBQXVCO3dIQUF2Qix1QkFBdUI7MkZBQXZCLHVCQUF1QjtrQkFEbkMsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGlvbnMsIGNyZWF0ZUVmZmVjdCwgb2ZUeXBlIH0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XG5pbXBvcnQgeyBDZGNKc1NlcnZpY2UgfSBmcm9tICdAc3BhcnRhY3VzL2NkYy9yb290JztcbmltcG9ydCB7XG4gIEFkZHJlc3MsXG4gIENvdW50cnksXG4gIEdsb2JhbE1lc3NhZ2VTZXJ2aWNlLFxuICBHbG9iYWxNZXNzYWdlVHlwZSxcbiAgVXNlckFjdGlvbnMsXG4gIFVzZXJBZGRyZXNzQ29ubmVjdG9yLFxuICBVc2VyQWRkcmVzc1NlcnZpY2UsXG4gIFVzZXJJZFNlcnZpY2UsXG59IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtZXJnZU1hcCwgc3dpdGNoTWFwLCB0YWtlLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBDZGNVc2VyQWRkcmVzc2VzRWZmZWN0cyB7XG4gIGFkZHJlc3NGaWVsZEtleXMgPSBbJ2xpbmUxJywgJ2xpbmUyJywgJ3JlZ2lvbi5uYW1lJywgJ3Rvd24nLCAncG9zdGFsQ29kZSddO1xuXG4gIGNkY0FkZFVzZXJBZGRyZXNzJCA9IGNyZWF0ZUVmZmVjdChcbiAgICAoKSA9PlxuICAgICAgdGhpcy5hY3Rpb25zJC5waXBlKFxuICAgICAgICBvZlR5cGUoVXNlckFjdGlvbnMuQUREX1VTRVJfQUREUkVTU19TVUNDRVNTKSxcbiAgICAgICAgbWVyZ2VNYXAoKCkgPT4gdGhpcy51cGRhdGVEZWZhdWx0QWRkcmVzc0luQ0RDKCkpLFxuICAgICAgICB0YXAoe1xuICAgICAgICAgIGVycm9yOiAoZXJyb3IpID0+IHRoaXMuc2hvd0Vycm9yTWVzc2FnZShlcnJvciksXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgIHsgZGlzcGF0Y2g6IGZhbHNlIH1cbiAgKTtcblxuICBjZGNVcGRhdGVVc2VyQWRkcmVzcyQgPSBjcmVhdGVFZmZlY3QoXG4gICAgKCkgPT5cbiAgICAgIHRoaXMuYWN0aW9ucyQucGlwZShcbiAgICAgICAgb2ZUeXBlKFVzZXJBY3Rpb25zLlVQREFURV9VU0VSX0FERFJFU1NfU1VDQ0VTUyksXG4gICAgICAgIG1lcmdlTWFwKCgpID0+IHRoaXMudXBkYXRlRGVmYXVsdEFkZHJlc3NJbkNEQygpKSxcbiAgICAgICAgdGFwKHtcbiAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiB0aGlzLnNob3dFcnJvck1lc3NhZ2UoZXJyb3IpLFxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICB7IGRpc3BhdGNoOiBmYWxzZSB9XG4gICk7XG5cbiAgY2RjRGVsZXRlVXNlckFkZHJlc3MkID0gY3JlYXRlRWZmZWN0KFxuICAgICgpID0+XG4gICAgICB0aGlzLmFjdGlvbnMkLnBpcGUoXG4gICAgICAgIG9mVHlwZShVc2VyQWN0aW9ucy5ERUxFVEVfVVNFUl9BRERSRVNTX1NVQ0NFU1MpLFxuICAgICAgICBtZXJnZU1hcCgoKSA9PiB0aGlzLnVwZGF0ZURlZmF1bHRBZGRyZXNzSW5DREMoKSksXG4gICAgICAgIHRhcCh7XG4gICAgICAgICAgZXJyb3I6IChlcnJvcikgPT4gdGhpcy5zaG93RXJyb3JNZXNzYWdlKGVycm9yKSxcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgeyBkaXNwYXRjaDogZmFsc2UgfVxuICApO1xuXG4gIGdldEFkZHJlc3NlcygpOiBPYnNlcnZhYmxlPEFkZHJlc3NbXT4ge1xuICAgIHJldHVybiB0aGlzLnVzZXJJZFNlcnZpY2UudGFrZVVzZXJJZCgpLnBpcGUoXG4gICAgICB0YWtlKDEpLFxuICAgICAgc3dpdGNoTWFwKCh1c2VySWQpID0+IHRoaXMudXNlckFkZHJlc3NDb25uZWN0b3IuZ2V0QWxsKHVzZXJJZCkpXG4gICAgKTtcbiAgfVxuXG4gIGdldERlZmF1bHRBZGRyZXNzKGFkZHJlc3NlczogQWRkcmVzc1tdKSB7XG4gICAgcmV0dXJuIGFkZHJlc3Nlcy5maW5kKChhZGRyZXNzKSA9PiBhZGRyZXNzPy5kZWZhdWx0QWRkcmVzcyA9PT0gdHJ1ZSk7XG4gIH1cblxuICBnZXRDb3VudHJ5TmFtZShjb3VudHJpZXM6IENvdW50cnlbXSwgY291bnRyeUlzb2NvZGU6IHN0cmluZykge1xuICAgIHJldHVybiBjb3VudHJpZXMuZmluZCgoY291bnRyeSkgPT4gY291bnRyeS5pc29jb2RlID09PSBjb3VudHJ5SXNvY29kZSlcbiAgICAgID8ubmFtZTtcbiAgfVxuXG4gIHVwZGF0ZURlZmF1bHRBZGRyZXNzSW5DREMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzc2VzKCkucGlwZShcbiAgICAgIHRha2UoMSksXG4gICAgICBzd2l0Y2hNYXAoKGFkZHJlc3NlczogQWRkcmVzc1tdKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRBZGRyZXNzID0gdGhpcy5nZXREZWZhdWx0QWRkcmVzcyhhZGRyZXNzZXMpIHx8IHt9O1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kQWRkcmVzc1RvQ0RDKGRlZmF1bHRBZGRyZXNzKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHNlbmRBZGRyZXNzVG9DREMoYWRkcmVzczogQWRkcmVzcyk6IE9ic2VydmFibGU8eyBzdGF0dXM6IHN0cmluZyB9PiB7XG4gICAgLy9zZW5kIHRvIENEQ1xuICAgIGNvbnN0IGZvcm1hdHRlZEFkZHJlc3MgPSBhZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MgfHwgJyAnO1xuICAgIHJldHVybiB0aGlzLnVzZXJBZGRyZXNzU2VydmljZS5nZXREZWxpdmVyeUNvdW50cmllcygpLnBpcGUoXG4gICAgICB0YWtlKDEpLFxuICAgICAgc3dpdGNoTWFwKChjb3VudHJpZXM6IENvdW50cnlbXSkgPT4ge1xuICAgICAgICBjb25zdCBjb3VudHJ5TmFtZSA9XG4gICAgICAgICAgdGhpcy5nZXRDb3VudHJ5TmFtZShjb3VudHJpZXMsIGFkZHJlc3MuY291bnRyeT8uaXNvY29kZSB8fCAnICcpIHx8XG4gICAgICAgICAgJyAnO1xuICAgICAgICByZXR1cm4gdGhpcy5jZGNKc1NlcnZpY2UudXBkYXRlQWRkcmVzc1dpdGhvdXRTY3JlZW5TZXQoXG4gICAgICAgICAgZm9ybWF0dGVkQWRkcmVzcyxcbiAgICAgICAgICBhZGRyZXNzLnBvc3RhbENvZGUgfHwgJyAnLFxuICAgICAgICAgIGFkZHJlc3MudG93biB8fCAnICcsXG4gICAgICAgICAgY291bnRyeU5hbWVcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHNob3dFcnJvck1lc3NhZ2UoZXJyb3I6IGFueSkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yPy5lcnJvck1lc3NhZ2UgfHwgJyAnO1xuICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuYWRkKGVycm9yTWVzc2FnZSwgR2xvYmFsTWVzc2FnZVR5cGUuTVNHX1RZUEVfRVJST1IpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGFjdGlvbnMkOiBBY3Rpb25zLFxuICAgIHByb3RlY3RlZCB1c2VySWRTZXJ2aWNlOiBVc2VySWRTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCB1c2VyQWRkcmVzc0Nvbm5lY3RvcjogVXNlckFkZHJlc3NDb25uZWN0b3IsXG4gICAgcHJvdGVjdGVkIHVzZXJBZGRyZXNzU2VydmljZTogVXNlckFkZHJlc3NTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBtZXNzYWdlU2VydmljZTogR2xvYmFsTWVzc2FnZVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNkY0pzU2VydmljZTogQ2RjSnNTZXJ2aWNlXG4gICkge31cbn1cbiJdfQ==