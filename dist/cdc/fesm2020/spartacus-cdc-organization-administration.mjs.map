{"version":3,"file":"spartacus-cdc-organization-administration.mjs","sources":["../../../integration-libs/cdc/organization/administration/cdc-b2b-user.service.ts","../../../integration-libs/cdc/organization/administration/cdc-user-list.service.ts","../../../integration-libs/cdc/organization/administration/cdc-org-unit.service.ts","../../../integration-libs/cdc/organization/administration/cdc-administration.module.ts","../../../integration-libs/cdc/organization/administration/public_api.ts","../../../integration-libs/cdc/organization/administration/spartacus-cdc-organization-administration.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { B2BUserService } from '@spartacus/organization/administration/core';\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdcB2BUserService extends B2BUserService {\n  isUpdatingUserAllowed(): boolean {\n    return false;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { CdcJsService } from '@spartacus/cdc/root';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  Translatable,\n  WindowRef,\n} from '@spartacus/core';\nimport {\n  CreateButtonType,\n  UserListService,\n} from '@spartacus/organization/administration/components';\nimport { B2BUserService } from '@spartacus/organization/administration/core';\nimport { TableService } from '@spartacus/storefront';\nimport { Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdcUserListService extends UserListService implements OnDestroy {\n  constructor(\n    protected tableService: TableService,\n    protected userService: B2BUserService,\n    protected globalMessageService: GlobalMessageService,\n    protected winRef: WindowRef,\n    protected cdcJsService: CdcJsService\n  ) {\n    super(tableService, userService);\n  }\n  protected subscription: Subscription = new Subscription();\n\n  onCreateButtonClick(): void {\n    // get current organization ID using CDC Gigya SDK\n    const sub = this.cdcJsService\n      .getOrganizationContext()\n      .pipe(\n        tap({\n          next: (response) => {\n            if (response.orgId) {\n              // open new screen to create/edit users using CDC Gigya SDK\n              this.cdcJsService.openDelegatedAdminLogin(response.orgId);\n            } else {\n              this.globalMessageService.add(\n                {\n                  key: 'generalErrors.pageFailure',\n                },\n                GlobalMessageType.MSG_TYPE_ERROR\n              );\n            }\n          },\n          error: () =>\n            this.globalMessageService.add(\n              {\n                key: 'generalErrors.pageFailure',\n              },\n              GlobalMessageType.MSG_TYPE_ERROR\n            ),\n        })\n      )\n      .subscribe();\n    this.subscription.add(sub);\n  }\n  getCreateButtonType(): CreateButtonType {\n    return CreateButtonType.BUTTON;\n  }\n  getCreateButtonLabel(): Translatable {\n    return { key: 'organization.manageUsers' };\n  }\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { OrgUnitService } from '@spartacus/organization/administration/core';\n@Injectable({\n  providedIn: 'root',\n})\nexport class CdcOrgUnitService extends OrgUnitService {\n  isUpdatingUnitAllowed(): boolean {\n    return false;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\n\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport {\n  unitsCmsConfig,\n  userCmsConfig,\n  UserListService,\n} from '@spartacus/organization/administration/components';\nimport {\n  B2BUserService,\n  OrgUnitService,\n} from '@spartacus/organization/administration/core';\nimport { CdcB2BUserService } from './cdc-b2b-user.service';\nimport { CdcOrgUnitService } from './cdc-org-unit.service';\nimport { CdcUserListService } from './cdc-user-list.service';\n\n@NgModule({\n  providers: [\n    //to override UserListService in ListComponent\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ManageUsersListComponent: {\n          providers: [\n            {\n              provide: UserListService,\n              useExisting: CdcUserListService,\n            },\n            userCmsConfig.cmsComponents?.ManageUsersListComponent?.providers ||\n              [],\n          ],\n        },\n      },\n    }),\n    //to override B2BUserService in UserDetailsComponent, UnitUserListComponent\n    { provide: B2BUserService, useClass: CdcB2BUserService },\n    //to override B2BUserService in UnitUserRolesCellComponent\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ManageUnitsListComponent: {\n          providers: [\n            {\n              provide: B2BUserService,\n              useExisting: CdcB2BUserService,\n            },\n            unitsCmsConfig.cmsComponents?.ManageUnitsListComponent?.providers ||\n              [],\n          ],\n        },\n      },\n    }),\n    { provide: OrgUnitService, useClass: CdcOrgUnitService },\n  ],\n})\nexport class CdcAdministrationModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './cdc-b2b-user.service';\nexport * from './cdc-user-list.service';\nexport * from './cdc-org-unit.service';\nexport * from './cdc-administration.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}