{"version":3,"file":"spartacus-pdf-invoices-root.mjs","sources":["../../../feature-libs/pdf-invoices/root/feature-name.ts","../../../feature-libs/pdf-invoices/root/facade/pdf-invoices.facade.ts","../../../feature-libs/pdf-invoices/root/facade/index.ts","../../../feature-libs/pdf-invoices/root/model/pdf-invoices.model.ts","../../../feature-libs/pdf-invoices/root/model/index.ts","../../../feature-libs/pdf-invoices/root/pdf-invoices-root.module.ts","../../../feature-libs/pdf-invoices/root/public_api.ts","../../../feature-libs/pdf-invoices/root/spartacus-pdf-invoices-root.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const PDF_INVOICES_FEATURE = 'pdfInvoices';\nexport const PDF_INVOICES_CORE_FEATURE = 'pdfInvoicesCore';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { facadeFactory } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { PDF_INVOICES_FEATURE } from '../feature-name';\nimport {\n  InvoiceQueryParams,\n  OrderInvoiceList,\n} from '../model/pdf-invoices.model';\n\nexport function pdfInvoicesFacadeFactory() {\n  return facadeFactory({\n    facade: PDFInvoicesFacade,\n    feature: PDF_INVOICES_FEATURE,\n    methods: ['getInvoicesForOrder', 'getInvoicePDF'],\n  });\n}\n\n@Injectable({\n  providedIn: 'root',\n  useFactory: pdfInvoicesFacadeFactory,\n})\nexport abstract class PDFInvoicesFacade {\n  /**\n   * Abstract method used to get the PDF invoices for an order\n   * @param userId Logged in user id\n   * @param orderId If provided, it will be used, otherwise it will use orderId from router state.\n   * @param queryParams Additional query parameters used in the API request\n   */\n  abstract getInvoicesForOrder(\n    queryParams: InvoiceQueryParams,\n    userId?: string,\n    orderId?: string\n  ): Observable<OrderInvoiceList>;\n\n  /**\n   * Returns the document blob for given invoiceId, orderId and externalSystemId\n   * @param userId Logged in user id\n   * @param orderId If provided, it will be used, otherwise it will use orderId from router state.\n   * @param invoiceId The id of the invoice to be downloaded\n   * @param externalSystemId External system that provides the invoice PDF\n   */\n  abstract getInvoicePDF(\n    invoiceId: string,\n    externalSystemId?: string,\n    userId?: string,\n    orderId?: string\n  ): Observable<Blob>;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './pdf-invoices.facade';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\ninterface Amount {\n  currencyIso?: string;\n  value?: number;\n  formattedValue?: string;\n}\n\nexport enum InvoicesFields {\n  BASIC = 'BASIC',\n  DEFAULT = 'DEFAULT',\n  FULL = 'FULL',\n}\n\nexport interface OrderInvoice {\n  invoiceId: string;\n  externalSystemId?: string;\n  createdAt: Date;\n  netAmount: Amount;\n  totalAmount: Amount;\n}\n\nexport interface OrderInvoiceList {\n  invoices?: OrderInvoice[];\n  pagination?: Pagination;\n  sorts?: Sort[];\n}\n\nexport interface InvoiceQueryParams {\n  currentPage?: number;\n  pageSize?: number;\n  sort?: string;\n  fields?: InvoicesFields;\n}\n\ninterface Sort {\n  asc?: boolean;\n  code?: string;\n}\n\ninterface Pagination {\n  count?: number;\n  page?: number;\n  totalCount?: number;\n  totalPages?: number;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './pdf-invoices.model';\n","/*\n * SPDX-FileCopyrightText: 2022 SAP Spartacus team <spartacus-team@sap.com>\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport {\n  PDF_INVOICES_CORE_FEATURE,\n  PDF_INVOICES_FEATURE,\n} from './feature-name';\n\nexport function defaultRequestedDeliveryDateComponentsConfig(): CmsConfig {\n  const config: CmsConfig = {\n    featureModules: {\n      [PDF_INVOICES_FEATURE]: {\n        cmsComponents: ['AccountOrderDetailsPDFInvoicesComponent'],\n      },\n      // by default core is bundled together with components\n      [PDF_INVOICES_CORE_FEATURE]: PDF_INVOICES_FEATURE,\n    },\n  };\n\n  return config;\n}\n\n@NgModule({\n  providers: [\n    provideDefaultConfigFactory(defaultRequestedDeliveryDateComponentsConfig),\n  ],\n})\nexport class PDFInvoicesRootModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './facade/index';\nexport * from './feature-name';\nexport * from './model/index';\nexport * from './pdf-invoices-root.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;AAAA;;;;AAIG;AAEI,MAAM,oBAAoB,GAAG,cAAc;AAC3C,MAAM,yBAAyB,GAAG;;ACPzC;;;;AAIG;SAWa,wBAAwB,GAAA;AACtC,IAAA,OAAO,aAAa,CAAC;AACnB,QAAA,MAAM,EAAE,iBAAiB;AACzB,QAAA,OAAO,EAAE,oBAAoB;AAC7B,QAAA,OAAO,EAAE,CAAC,qBAAqB,EAAE,eAAe,CAAC;AAClD,KAAA,CAAC,CAAC;AACL,CAAC;MAMqB,iBAAiB,CAAA;;8GAAjB,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;kHAAjB,iBAAiB,EAAA,UAAA,EAHzB,MAAM,EAAA,UAAA,EACN,wBAAwB,EAAA,CAAA,CAAA;2FAEhB,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAJtC,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AAClB,oBAAA,UAAU,EAAE,wBAAwB;iBACrC,CAAA;;;AC1BD;;;;AAIG;;ACJH;;;;AAIG;AAQS,IAAA,eAIX;AAJD,CAAA,UAAY,cAAc,EAAA;AACxB,IAAA,cAAA,CAAA,OAAA,CAAA,GAAA,OAAe,CAAA;AACf,IAAA,cAAA,CAAA,SAAA,CAAA,GAAA,SAAmB,CAAA;AACnB,IAAA,cAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AACf,CAAC,EAJW,cAAc,KAAd,cAAc,GAIzB,EAAA,CAAA,CAAA;;AChBD;;;;AAIG;;ACJH;;;;;AAKG;SASa,4CAA4C,GAAA;AAC1D,IAAA,MAAM,MAAM,GAAc;AACxB,QAAA,cAAc,EAAE;YACd,CAAC,oBAAoB,GAAG;gBACtB,aAAa,EAAE,CAAC,yCAAyC,CAAC;AAC3D,aAAA;;YAED,CAAC,yBAAyB,GAAG,oBAAoB;AAClD,SAAA;KACF,CAAC;AAEF,IAAA,OAAO,MAAM,CAAC;AAChB,CAAC;MAOY,qBAAqB,CAAA;;kHAArB,qBAAqB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;mHAArB,qBAAqB,EAAA,CAAA,CAAA;AAArB,qBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,qBAAqB,EAJrB,SAAA,EAAA;QACT,2BAA2B,CAAC,4CAA4C,CAAC;AAC1E,KAAA,EAAA,CAAA,CAAA;2FAEU,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBALjC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,SAAS,EAAE;wBACT,2BAA2B,CAAC,4CAA4C,CAAC;AAC1E,qBAAA;iBACF,CAAA;;;AChCD;;;;AAIG;;ACJH;;AAEG;;;;"}