/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { deepMerge, isObject } from '../../config/utils/deep-merge';
/**
 * Merge occ fields parameters
 *
 * @param fields Fields definition as string or object
 */
export function mergeFields(fields) {
    const parsedFields = fields.map((f) => typeof f === 'string' ? parseFields(f) : f);
    const mergedFields = optimizeFields(deepMerge({}, ...parsedFields));
    return stringifyFields(mergedFields);
}
/**
 * Optimize fields definition by removing not needed groups
 *
 * @param fields
 */
export function optimizeFields(fields = {}) {
    const keys = Object.keys(fields);
    if (keys.includes('FULL')) {
        delete fields['DEFAULT'];
        delete fields['BASIC'];
    }
    else if (keys.includes('DEFAULT')) {
        delete fields['BASIC'];
    }
    Object.keys(fields).forEach((key) => {
        fields[key] = optimizeFields(fields[key]);
    });
    return fields;
}
/**
 * Parse string field definition to an AST object
 *
 * @param fields Fields string definition
 * @param startIndex Used for recurrence
 */
export function parseFields(fields, startIndex = 0) {
    const parsedFields = {};
    let i = startIndex;
    while (i < fields.length) {
        if (fields[i] === ',') {
            if (i > startIndex) {
                parsedFields[fields.substring(startIndex, i)] = {};
            }
            startIndex = i + 1;
        }
        else if (fields[i] === '(') {
            const subFields = parseFields(fields, i + 1);
            if (!Array.isArray(subFields)) {
                return parsedFields;
            }
            parsedFields[fields.substring(startIndex, i)] = subFields[0];
            startIndex = subFields[1];
            i = startIndex - 1;
        }
        else if (fields[i] === ')') {
            if (i > startIndex) {
                parsedFields[fields.substring(startIndex, i)] = {};
            }
            return [parsedFields, i + 1];
        }
        i++;
    }
    if (startIndex < fields.length) {
        parsedFields[fields.substring(startIndex, i)] = {};
    }
    return parsedFields;
}
/**
 * Convert AST object fields definition to string representation
 *
 * @param fields
 */
export function stringifyFields(fields) {
    return Object.keys(fields)
        .map((key) => {
        const subFields = stringifyFields(fields[key]);
        return subFields ? `${key}(${subFields})` : key;
    })
        .join(',');
}
/**
 * Extract part of the object described by fields definition
 *
 * @param data
 * @param fields
 */
export function extractFields(data, fields) {
    const parsedFields = typeof fields === 'string' ? parseFields(fields) : fields;
    return getObjectPart(data, parsedFields);
}
function getObjectPart(data, fields) {
    if (!isObject(data)) {
        return data;
    }
    const keys = Object.keys(fields);
    if (keys.length === 0 ||
        // we should not extract parts of the object with ambiguous fields definitions
        keys.find((el) => el === 'BASIC' || el === 'DEFAULT' || el === 'FULL')) {
        return data;
    }
    const result = {};
    keys.forEach((key) => {
        if (data.hasOwnProperty(key)) {
            result[key] = getObjectPart(data[key], fields[key]);
        }
    });
    return result;
}
// CHECK SONAR
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2NjLWZpZWxkcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvcmUvc3JjL29jYy91dGlscy9vY2MtZmllbGRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRXBFOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsV0FBVyxDQUFDLE1BQTJCO0lBQ3JELE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNwQyxPQUFPLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUMzQyxDQUFDO0lBQ0YsTUFBTSxZQUFZLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLE9BQU8sZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLGNBQWMsQ0FBQyxTQUFpQixFQUFFO0lBQ2hELE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3pCLE9BQU8sTUFBTSxDQUFDLFNBQXlCLENBQUMsQ0FBQztRQUN6QyxPQUFPLE1BQU0sQ0FBQyxPQUF1QixDQUFDLENBQUM7S0FDeEM7U0FBTSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDbkMsT0FBTyxNQUFNLENBQUMsT0FBdUIsQ0FBQyxDQUFDO0tBQ3hDO0lBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENB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LENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBSSxJQUFPLEVBQUUsTUFBYztJQUMvQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ25CLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWpDLElBQ0UsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQ2pCLDhFQUE4RTtRQUM5RSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssT0FBTyxJQUFJLEVBQUUsS0FBSyxTQUFTLElBQUksRUFBRSxLQUFLLE1BQU0sQ0FBQyxFQUN0RTtRQUNBLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxNQUFNLE1BQU0sR0FBRyxFQUFPLENBQUM7SUFFdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ25CLElBQUssSUFBMEIsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDbkQsTUFBTSxDQUFDLEdBQWMsQ0FBQyxHQUFHLGFBQWEsQ0FDcEMsSUFBSSxDQUFDLEdBQW1CLENBQUMsRUFDekIsTUFBTSxDQUFDLEdBQW1CLENBQUMsQ0FDNUIsQ0FBQztTQUNIO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQsY0FBYyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IGRlZXBNZXJnZSwgaXNPYmplY3QgfSBmcm9tICcuLi8uLi9jb25maWcvdXRpbHMvZGVlcC1tZXJnZSc7XG5cbi8qKlxuICogTWVyZ2Ugb2NjIGZpZWxkcyBwYXJhbWV0ZXJzXG4gKlxuICogQHBhcmFtIGZpZWxkcyBGaWVsZHMgZGVmaW5pdGlvbiBhcyBzdHJpbmcgb3Igb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUZpZWxkcyhmaWVsZHM6IChzdHJpbmcgfCBvYmplY3QpW10pOiBzdHJpbmcge1xuICBjb25zdCBwYXJzZWRGaWVsZHMgPSBmaWVsZHMubWFwKChmKSA9PlxuICAgIHR5cGVvZiBmID09PSAnc3RyaW5nJyA/IHBhcnNlRmllbGRzKGYpIDogZlxuICApO1xuICBjb25zdCBtZXJnZWRGaWVsZHMgPSBvcHRpbWl6ZUZpZWxkcyhkZWVwTWVyZ2Uoe30sIC4uLnBhcnNlZEZpZWxkcykpO1xuICByZXR1cm4gc3RyaW5naWZ5RmllbGRzKG1lcmdlZEZpZWxkcyk7XG59XG5cbi8qKlxuICogT3B0aW1pemUgZmllbGRzIGRlZmluaXRpb24gYnkgcmVtb3Zpbmcgbm90IG5lZWRlZCBncm91cHNcbiAqXG4gKiBAcGFyYW0gZmllbGRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcHRpbWl6ZUZpZWxkcyhmaWVsZHM6IG9iamVjdCA9IHt9KTogb2JqZWN0IHtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkcyk7XG4gIGlmIChrZXlzLmluY2x1ZGVzKCdGVUxMJykpIHtcbiAgICBkZWxldGUgZmllbGRzWydERUZBVUxUJyBhcyBrZXlvZiBvYmplY3RdO1xuICAgIGRlbGV0ZSBmaWVsZHNbJ0JBU0lDJyBhcyBrZXlvZiBvYmplY3RdO1xuICB9IGVsc2UgaWYgKGtleXMuaW5jbHVkZXMoJ0RFRkFVTFQnKSkge1xuICAgIGRlbGV0ZSBmaWVsZHNbJ0JBU0lDJyBhcyBrZXlvZiBvYmplY3RdO1xuICB9XG4gIE9iamVjdC5rZXlzKGZpZWxkcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgKGZpZWxkc1trZXkgYXMga2V5b2Ygb2JqZWN0XSBhcyBvYmplY3QpID0gb3B0aW1pemVGaWVsZHMoXG4gICAgICBmaWVsZHNba2V5IGFzIGtleW9mIG9iamVjdF1cbiAgICApO1xuICB9KTtcbiAgcmV0dXJuIGZpZWxkcztcbn1cblxuLyoqXG4gKiBQYXJzZSBzdHJpbmcgZmllbGQgZGVmaW5pdGlvbiB0byBhbiBBU1Qgb2JqZWN0XG4gKlxuICogQHBhcmFtIGZpZWxkcyBGaWVsZHMgc3RyaW5nIGRlZmluaXRpb25cbiAqIEBwYXJhbSBzdGFydEluZGV4IFVzZWQgZm9yIHJlY3VycmVuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmllbGRzKFxuICBmaWVsZHM6IHN0cmluZyxcbiAgc3RhcnRJbmRleCA9IDBcbik6IFtvYmplY3QsIG51bWJlcl0gfCBvYmplY3Qge1xuICBjb25zdCBwYXJzZWRGaWVsZHM6IFJlY29yZDxzdHJpbmcsIG9iamVjdD4gPSB7fTtcblxuICBsZXQgaSA9IHN0YXJ0SW5kZXg7XG4gIHdoaWxlIChpIDwgZmllbGRzLmxlbmd0aCkge1xuICAgIGlmIChmaWVsZHNbaV0gPT09ICcsJykge1xuICAgICAgaWYgKGkgPiBzdGFydEluZGV4KSB7XG4gICAgICAgIHBhcnNlZEZpZWxkc1tmaWVsZHMuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGkpXSA9IHt9O1xuICAgICAgfVxuICAgICAgc3RhcnRJbmRleCA9IGkgKyAxO1xuICAgIH0gZWxzZSBpZiAoZmllbGRzW2ldID09PSAnKCcpIHtcbiAgICAgIGNvbnN0IHN1YkZpZWxkcyA9IHBhcnNlRmllbGRzKGZpZWxkcywgaSArIDEpO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YkZpZWxkcykpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlZEZpZWxkcztcbiAgICAgIH1cbiAgICAgIHBhcnNlZEZpZWxkc1tmaWVsZHMuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGkpXSA9IHN1YkZpZWxkc1swXTtcbiAgICAgIHN0YXJ0SW5kZXggPSBzdWJGaWVsZHNbMV07XG4gICAgICBpID0gc3RhcnRJbmRleCAtIDE7XG4gICAgfSBlbHNlIGlmIChmaWVsZHNbaV0gPT09ICcpJykge1xuICAgICAgaWYgKGkgPiBzdGFydEluZGV4KSB7XG4gICAgICAgIHBhcnNlZEZpZWxkc1tmaWVsZHMuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGkpXSA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtwYXJzZWRGaWVsZHMsIGkgKyAxXTtcbiAgICB9XG4gICAgaSsrO1xuICB9XG5cbiAgaWYgKHN0YXJ0SW5kZXggPCBmaWVsZHMubGVuZ3RoKSB7XG4gICAgcGFyc2VkRmllbGRzW2ZpZWxkcy5zdWJzdHJpbmcoc3RhcnRJbmRleCwgaSldID0ge307XG4gIH1cblxuICByZXR1cm4gcGFyc2VkRmllbGRzO1xufVxuXG4vKipcbiAqIENvbnZlcnQgQVNUIG9iamVjdCBmaWVsZHMgZGVmaW5pdGlvbiB0byBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAqXG4gKiBAcGFyYW0gZmllbGRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlGaWVsZHMoZmllbGRzOiBvYmplY3QpOiBzdHJpbmcge1xuICByZXR1cm4gT2JqZWN0LmtleXMoZmllbGRzKVxuICAgIC5tYXAoKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc3ViRmllbGRzID0gc3RyaW5naWZ5RmllbGRzKGZpZWxkc1trZXkgYXMga2V5b2Ygb2JqZWN0XSk7XG4gICAgICByZXR1cm4gc3ViRmllbGRzID8gYCR7a2V5fSgke3N1YkZpZWxkc30pYCA6IGtleTtcbiAgICB9KVxuICAgIC5qb2luKCcsJyk7XG59XG5cbi8qKlxuICogRXh0cmFjdCBwYXJ0IG9mIHRoZSBvYmplY3QgZGVzY3JpYmVkIGJ5IGZpZWxkcyBkZWZpbml0aW9uXG4gKlxuICogQHBhcmFtIGRhdGFcbiAqIEBwYXJhbSBmaWVsZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RGaWVsZHM8VD4oZGF0YTogVCwgZmllbGRzOiBzdHJpbmcgfCBvYmplY3QpOiBUIHtcbiAgY29uc3QgcGFyc2VkRmllbGRzID1cbiAgICB0eXBlb2YgZmllbGRzID09PSAnc3RyaW5nJyA/IHBhcnNlRmllbGRzKGZpZWxkcykgOiBmaWVsZHM7XG4gIHJldHVybiBnZXRPYmplY3RQYXJ0PFQ+KGRhdGEsIHBhcnNlZEZpZWxkcyk7XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdFBhcnQ8VD4oZGF0YTogVCwgZmllbGRzOiBvYmplY3QpOiBUIHtcbiAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkcyk7XG5cbiAgaWYgKFxuICAgIGtleXMubGVuZ3RoID09PSAwIHx8XG4gICAgLy8gd2Ugc2hvdWxkIG5vdCBleHRyYWN0IHBhcnRzIG9mIHRoZSBvYmplY3Qgd2l0aCBhbWJpZ3VvdXMgZmllbGRzIGRlZmluaXRpb25zXG4gICAga2V5cy5maW5kKChlbCkgPT4gZWwgPT09ICdCQVNJQycgfHwgZWwgPT09ICdERUZBVUxUJyB8fCBlbCA9PT0gJ0ZVTEwnKVxuICApIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IHt9IGFzIFQ7XG5cbiAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoKGRhdGEgYXMgdW5rbm93biBhcyBvYmplY3QpLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJlc3VsdFtrZXkgYXMga2V5b2YgVF0gPSBnZXRPYmplY3RQYXJ0KFxuICAgICAgICBkYXRhW2tleSBhcyBrZXlvZiBvYmplY3RdLFxuICAgICAgICBmaWVsZHNba2V5IGFzIGtleW9mIG9iamVjdF1cbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBDSEVDSyBTT05BUlxuIl19