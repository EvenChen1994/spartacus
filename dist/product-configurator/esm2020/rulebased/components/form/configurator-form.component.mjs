/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, Optional, } from '@angular/core';
import { ConfiguratorRouter, } from '@spartacus/product-configurator/common';
import { Subscription } from 'rxjs';
import { delay, distinctUntilChanged, filter, skip, switchMap, take, } from 'rxjs/operators';
import { GlobalMessageType, } from '@spartacus/core';
import * as i0 from "@angular/core";
import * as i1 from "../../core/facade/configurator-commons.service";
import * as i2 from "../../core/facade/configurator-groups.service";
import * as i3 from "@spartacus/product-configurator/common";
import * as i4 from "../../core/services/configurator-expert-mode.service";
import * as i5 from "@spartacus/storefront";
import * as i6 from "@spartacus/core";
import * as i7 from "@angular/common";
import * as i8 from "../group/configurator-group.component";
export class ConfiguratorFormComponent {
    constructor(configuratorCommonsService, configuratorGroupsService, configRouterExtractorService, configExpertModeService, launchDialogService, 
    // TODO:(CXSPA-3392) for next major release remove feature config service
    featureConfigservice, globalMessageService) {
        this.configuratorCommonsService = configuratorCommonsService;
        this.configuratorGroupsService = configuratorGroupsService;
        this.configRouterExtractorService = configRouterExtractorService;
        this.configExpertModeService = configExpertModeService;
        this.launchDialogService = launchDialogService;
        this.featureConfigservice = featureConfigservice;
        this.globalMessageService = globalMessageService;
        this.subscription = new Subscription();
        this.routerData$ = this.configRouterExtractorService.extractRouterData();
        this.configuration$ = this.routerData$.pipe(filter((routerData) => routerData.pageType === ConfiguratorRouter.PageType.CONFIGURATION), switchMap((routerData) => {
            return this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner, routerData.configIdTemplate);
        }));
        this.currentGroup$ = this.routerData$.pipe(switchMap((routerData) => this.configuratorGroupsService.getCurrentGroup(routerData.owner)));
    }
    ngOnDestroy() {
        this.subscription.unsubscribe();
    }
    listenForConflictResolution() {
        this.subscription.add(this.routerData$
            .pipe(switchMap((routerData) => this.configuratorCommonsService.hasConflicts(routerData.owner)), distinctUntilChanged(), // we are interested only in status changes
        skip(1), // we skip the very first emission to avoid the change fron undefined -> no conflicts
        filter((hasConflicts) => !hasConflicts))
            .subscribe(() => this.displayConflictResolvedMessage()));
    }
    displayConflictResolvedMessage() {
        if (this.globalMessageService &&
            (this.featureConfigservice?.isLevel('6.1') ?? false)) {
            this.globalMessageService.add({ key: 'configurator.header.conflictsResolved' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);
        }
    }
    ngOnInit() {
        this.listenForConflictResolution();
        this.routerData$
            .pipe(switchMap((routerData) => {
            return this.configuratorCommonsService.getConfiguration(routerData.owner);
        }), take(1))
            .subscribe((configuration) => {
            this.configuratorCommonsService.checkConflictSolverDialog(configuration.owner);
        });
        this.routerData$
            .pipe(filter((routingData) => routingData.displayRestartDialog === true), switchMap((routerData) => {
            return this.configuratorCommonsService.getConfiguration(routerData.owner);
        }), take(1), filter((configuration) => configuration.interactionState.newConfiguration === false), delay(0) // Delay because we first want the form to react on data changes
        )
            .subscribe((configuration) => {
            this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_RESTART_DIALOG" /* LAUNCH_CALLER.CONFIGURATOR_RESTART_DIALOG */, undefined, { owner: configuration.owner });
        });
        this.routerData$.pipe(take(1)).subscribe((routingData) => {
            //In case of resolving issues (if no conflict solver dialog is present!), check if the configuration contains conflicts,
            //if not, check if the configuration contains missing mandatory fields and show the group
            if (routingData.resolveIssues) {
                this.configuratorCommonsService
                    .hasConflicts(routingData.owner)
                    .pipe(take(1))
                    .subscribe((hasConflicts) => {
                    if (hasConflicts && !routingData.skipConflicts) {
                        this.configuratorGroupsService.navigateToConflictSolver(routingData.owner);
                        //Only check for Incomplete group when there are no conflicts or conflicts should be skipped
                    }
                    else {
                        this.configuratorGroupsService.navigateToFirstIncompleteGroup(routingData.owner);
                    }
                });
            }
            if (routingData.expMode) {
                this.configExpertModeService?.setExpModeRequested(routingData.expMode);
            }
        });
    }
    /**
     * Verifies whether the navigation to a conflict group is enabled.
     * @param configuration Current configuration
     * @returns {boolean} Returns 'true' if the navigation to a conflict group is enabled, otherwise 'false'.
     */
    isNavigationToGroupEnabled(configuration) {
        return !configuration.immediateConflictResolution;
    }
    /**
     * Checks if conflict solver dialog is active
     * @param configuration
     * @returns Conflict solver dialog active?
     */
    isDialogActive(configuration) {
        return configuration.interactionState.showConflictSolverDialog ?? false;
    }
}
ConfiguratorFormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorFormComponent, deps: [{ token: i1.ConfiguratorCommonsService }, { token: i2.ConfiguratorGroupsService }, { token: i3.ConfiguratorRouterExtractorService }, { token: i4.ConfiguratorExpertModeService }, { token: i5.LaunchDialogService }, { token: i6.FeatureConfigService, optional: true }, { token: i6.GlobalMessageService, optional: true }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorFormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: ConfiguratorFormComponent, selector: "cx-configurator-form", ngImport: i0, template: "<ng-container *ngIf=\"configuration$ | async as configuration; else ghostForm\">\n  <ng-container *ngIf=\"!isDialogActive(configuration); else ghostForm\">\n    <ng-container *ngIf=\"currentGroup$ | async as group\">\n      <cx-configurator-group\n        [group]=\"group\"\n        [owner]=\"configuration.owner\"\n        [isNavigationToGroupEnabled]=\"isNavigationToGroupEnabled(configuration)\"\n      >\n      </cx-configurator-group>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #ghostForm>\n  <ng-container *ngFor=\"let number of [0, 1, 2]\">\n    <div class=\"cx-ghost-attribute\">\n      <div class=\"cx-ghost-header\">\n        <div class=\"cx-ghost-title ghost\"></div>\n        <div class=\"cx-ghost-icon ghost\"></div>\n      </div>\n      <div class=\"cx-ghost-body\">\n        <div class=\"cx-ghost-text ghost\"></div>\n        <div class=\"cx-ghost-price ghost\"></div>\n      </div>\n    </div>\n\n    <div class=\"cx-ghost-attribute\">\n      <div class=\"cx-ghost-header\">\n        <div class=\"cx-ghost-title ghost\"></div>\n        <div class=\"cx-ghost-icon ghost\"></div>\n        <div class=\"cx-ghost-description-box\">\n          <div class=\"cx-ghost-description ghost\"></div>\n        </div>\n      </div>\n      <div class=\"cx-ghost-body\">\n        <div\n          *ngFor=\"let number of [0, 1, 2]; let i = index\"\n          class=\"cx-ghost-radiobutton-value\"\n        >\n          <div class=\"cx-ghost-value-label-pair\">\n            <div class=\"cx-ghost-value-icon ghost\"></div>\n            <div class=\"cx-ghost-label ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-value-price ghost\">\n            <ng-container *ngIf=\"i !== 0\">\n              <div class=\"cx-ghost-price\"></div>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i7.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i8.ConfiguratorGroupComponent, selector: "cx-configurator-group", inputs: ["group", "owner", "isNavigationToGroupEnabled"] }, { kind: "pipe", type: i7.AsyncPipe, name: "async" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorFormComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-form', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-container *ngIf=\"configuration$ | async as configuration; else ghostForm\">\n  <ng-container *ngIf=\"!isDialogActive(configuration); else ghostForm\">\n    <ng-container *ngIf=\"currentGroup$ | async as group\">\n      <cx-configurator-group\n        [group]=\"group\"\n        [owner]=\"configuration.owner\"\n        [isNavigationToGroupEnabled]=\"isNavigationToGroupEnabled(configuration)\"\n      >\n      </cx-configurator-group>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #ghostForm>\n  <ng-container *ngFor=\"let number of [0, 1, 2]\">\n    <div class=\"cx-ghost-attribute\">\n      <div class=\"cx-ghost-header\">\n        <div class=\"cx-ghost-title ghost\"></div>\n        <div class=\"cx-ghost-icon ghost\"></div>\n      </div>\n      <div class=\"cx-ghost-body\">\n        <div class=\"cx-ghost-text ghost\"></div>\n        <div class=\"cx-ghost-price ghost\"></div>\n      </div>\n    </div>\n\n    <div class=\"cx-ghost-attribute\">\n      <div class=\"cx-ghost-header\">\n        <div class=\"cx-ghost-title ghost\"></div>\n        <div class=\"cx-ghost-icon ghost\"></div>\n        <div class=\"cx-ghost-description-box\">\n          <div class=\"cx-ghost-description ghost\"></div>\n        </div>\n      </div>\n      <div class=\"cx-ghost-body\">\n        <div\n          *ngFor=\"let number of [0, 1, 2]; let i = index\"\n          class=\"cx-ghost-radiobutton-value\"\n        >\n          <div class=\"cx-ghost-value-label-pair\">\n            <div class=\"cx-ghost-value-icon ghost\"></div>\n            <div class=\"cx-ghost-label ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-value-price ghost\">\n            <ng-container *ngIf=\"i !== 0\">\n              <div class=\"cx-ghost-price\"></div>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ConfiguratorCommonsService }, { type: i2.ConfiguratorGroupsService }, { type: i3.ConfiguratorRouterExtractorService }, { type: i4.ConfiguratorExpertModeService }, { type: i5.LaunchDialogService }, { type: i6.FeatureConfigService, decorators: [{
                    type: Optional
                }] }, { type: i6.GlobalMessageService, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLWZvcm0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL2Zvcm0vY29uZmlndXJhdG9yLWZvcm0uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL2Zvcm0vY29uZmlndXJhdG9yLWZvcm0uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUdULFFBQVEsR0FDVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQ0wsa0JBQWtCLEdBRW5CLE1BQU0sd0NBQXdDLENBQUM7QUFFaEQsT0FBTyxFQUFjLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNoRCxPQUFPLEVBQ0wsS0FBSyxFQUNMLG9CQUFvQixFQUNwQixNQUFNLEVBQ04sSUFBSSxFQUNKLFNBQVMsRUFDVCxJQUFJLEdBQ0wsTUFBTSxnQkFBZ0IsQ0FBQztBQUt4QixPQUFPLEVBR0wsaUJBQWlCLEdBQ2xCLE1BQU0saUJBQWlCLENBQUM7Ozs7Ozs7Ozs7QUFPekIsTUFBTSxPQUFPLHlCQUF5QjtJQWlEcEMsWUFDWSwwQkFBc0QsRUFDdEQseUJBQW9ELEVBQ3BELDRCQUFnRSxFQUNoRSx1QkFBc0QsRUFDdEQsbUJBQXdDO0lBQ2xELHlFQUF5RTtJQUNuRCxvQkFBMkMsRUFDM0Msb0JBQTJDO1FBUHZELCtCQUEwQixHQUExQiwwQkFBMEIsQ0FBNEI7UUFDdEQsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUEyQjtRQUNwRCxpQ0FBNEIsR0FBNUIsNEJBQTRCLENBQW9DO1FBQ2hFLDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FB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SDtnQkFDSCxDQUFDLENBQUMsQ0FBQzthQUNOO1lBRUQsSUFBSSxXQUFXLENBQUMsT0FBTyxFQUFFO2dCQUN2QixJQUFJLENBQUMsdUJBQXVCLEVBQUUsbUJBQW1CLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ3hFO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILDBCQUEwQixDQUN4QixhQUF5QztRQUV6QyxPQUFPLENBQUMsYUFBYSxDQUFDLDJCQUEyQixDQUFDO0lBQ3BELENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsY0FBYyxDQUFDLGFBQXlDO1FBQ3RELE9BQU8sYUFBYSxDQUFDLGdCQUFnQixDQUFDLHdCQUF3QixJQUFJLEtBQUssQ0FBQztJQUMxRSxDQUFDOztzSEFsTFUseUJBQXlCOzBHQUF6Qix5QkFBeUIsNERDMUN0Qyw4MkRBcURBOzJGRFhhLHlCQUF5QjtrQkFMckMsU0FBUzsrQkFDRSxzQkFBc0IsbUJBRWYsdUJBQXVCLENBQUMsTUFBTTs7MEJBMEQ1QyxRQUFROzswQkFDUixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE9wdGlvbmFsLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIENvbmZpZ3VyYXRvclJvdXRlcixcbiAgQ29uZmlndXJhdG9yUm91dGVyRXh0cmFjdG9yU2VydmljZSxcbn0gZnJvbSAnQHNwYXJ0YWN1cy9wcm9kdWN0LWNvbmZpZ3VyYXRvci9jb21tb24nO1xuaW1wb3J0IHsgTGF1bmNoRGlhbG9nU2VydmljZSwgTEFVTkNIX0NBTExFUiB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIGRlbGF5LFxuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgZmlsdGVyLFxuICBza2lwLFxuICBzd2l0Y2hNYXAsXG4gIHRha2UsXG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29yZS9mYWNhZGUvY29uZmlndXJhdG9yLWNvbW1vbnMuc2VydmljZSc7XG5pbXBvcnQgeyBDb25maWd1cmF0b3JHcm91cHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29yZS9mYWNhZGUvY29uZmlndXJhdG9yLWdyb3Vwcy5zZXJ2aWNlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvciB9IGZyb20gJy4uLy4uL2NvcmUvbW9kZWwvY29uZmlndXJhdG9yLm1vZGVsJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvckV4cGVydE1vZGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29yZS9zZXJ2aWNlcy9jb25maWd1cmF0b3ItZXhwZXJ0LW1vZGUuc2VydmljZSc7XG5pbXBvcnQge1xuICBGZWF0dXJlQ29uZmlnU2VydmljZSxcbiAgR2xvYmFsTWVzc2FnZVNlcnZpY2UsXG4gIEdsb2JhbE1lc3NhZ2VUeXBlLFxufSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1jb25maWd1cmF0b3ItZm9ybScsXG4gIHRlbXBsYXRlVXJsOiAnLi9jb25maWd1cmF0b3ItZm9ybS5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0b3JGb3JtQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBwcm90ZWN0ZWQgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuXG4gIHJvdXRlckRhdGEkOiBPYnNlcnZhYmxlPENvbmZpZ3VyYXRvclJvdXRlci5EYXRhPiA9XG4gICAgdGhpcy5jb25maWdSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlLmV4dHJhY3RSb3V0ZXJEYXRhKCk7XG5cbiAgY29uZmlndXJhdGlvbiQ6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb24+ID1cbiAgICB0aGlzLnJvdXRlckRhdGEkLnBpcGUoXG4gICAgICBmaWx0ZXIoXG4gICAgICAgIChyb3V0ZXJEYXRhKSA9PlxuICAgICAgICAgIHJvdXRlckRhdGEucGFnZVR5cGUgPT09IENvbmZpZ3VyYXRvclJvdXRlci5QYWdlVHlwZS5DT05GSUdVUkFUSU9OXG4gICAgICApLFxuICAgICAgc3dpdGNoTWFwKChyb3V0ZXJEYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLmdldE9yQ3JlYXRlQ29uZmlndXJhdGlvbihcbiAgICAgICAgICByb3V0ZXJEYXRhLm93bmVyLFxuICAgICAgICAgIHJvdXRlckRhdGEuY29uZmlnSWRUZW1wbGF0ZVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuXG4gIGN1cnJlbnRHcm91cCQ6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLkdyb3VwPiA9IHRoaXMucm91dGVyRGF0YSQucGlwZShcbiAgICBzd2l0Y2hNYXAoKHJvdXRlckRhdGEpID0+XG4gICAgICB0aGlzLmNvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2UuZ2V0Q3VycmVudEdyb3VwKHJvdXRlckRhdGEub3duZXIpXG4gICAgKVxuICApO1xuICAvLyBUT0RPKENYU1BBLTMzOTIpOiBtYWtlIGdsb2JhbE1lc3NhZ2VTZXJ2aWNlIGEgcmVxdWlyZWQgZGVwZW5kZW5jeVxuICBjb25zdHJ1Y3RvcihcbiAgICBjb25maWd1cmF0b3JDb21tb25zU2VydmljZTogQ29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UsXG4gICAgY29uZmlndXJhdG9yR3JvdXBzU2VydmljZTogQ29uZmlndXJhdG9yR3JvdXBzU2VydmljZSxcbiAgICBjb25maWdSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlOiBDb25maWd1cmF0b3JSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlLFxuICAgIGNvbmZpZ0V4cGVydE1vZGVTZXJ2aWNlOiBDb25maWd1cmF0b3JFeHBlcnRNb2RlU2VydmljZSxcbiAgICBsYXVuY2hEaWFsb2dTZXJ2aWNlOiBMYXVuY2hEaWFsb2dTZXJ2aWNlLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5pZmllZC1zaWduYXR1cmVzXG4gICAgZmVhdHVyZUNvbmZpZ1NlcnZpY2U6IEZlYXR1cmVDb25maWdTZXJ2aWNlLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5pZmllZC1zaWduYXR1cmVzXG4gICAgZ2xvYmFsTWVzc2FnZVNlcnZpY2U6IEdsb2JhbE1lc3NhZ2VTZXJ2aWNlXG4gICk7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHNpbmNlIDYuMVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2U6IENvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLFxuICAgIGNvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2U6IENvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2UsXG4gICAgY29uZmlnUm91dGVyRXh0cmFjdG9yU2VydmljZTogQ29uZmlndXJhdG9yUm91dGVyRXh0cmFjdG9yU2VydmljZSxcbiAgICBjb25maWdFeHBlcnRNb2RlU2VydmljZTogQ29uZmlndXJhdG9yRXhwZXJ0TW9kZVNlcnZpY2UsXG4gICAgbGF1bmNoRGlhbG9nU2VydmljZTogTGF1bmNoRGlhbG9nU2VydmljZVxuICApO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBjb25maWd1cmF0b3JDb21tb25zU2VydmljZTogQ29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2U6IENvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNvbmZpZ1JvdXRlckV4dHJhY3RvclNlcnZpY2U6IENvbmZpZ3VyYXRvclJvdXRlckV4dHJhY3RvclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNvbmZpZ0V4cGVydE1vZGVTZXJ2aWNlOiBDb25maWd1cmF0b3JFeHBlcnRNb2RlU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgbGF1bmNoRGlhbG9nU2VydmljZTogTGF1bmNoRGlhbG9nU2VydmljZSxcbiAgICAvLyBUT0RPOihDWFNQQS0zMzkyKSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGNvbmZpZyBzZXJ2aWNlXG4gICAgQE9wdGlvbmFsKCkgcHJvdGVjdGVkIGZlYXR1cmVDb25maWdzZXJ2aWNlPzogRmVhdHVyZUNvbmZpZ1NlcnZpY2UsXG4gICAgQE9wdGlvbmFsKCkgcHJvdGVjdGVkIGdsb2JhbE1lc3NhZ2VTZXJ2aWNlPzogR2xvYmFsTWVzc2FnZVNlcnZpY2VcbiAgKSB7fVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbGlzdGVuRm9yQ29uZmxpY3RSZXNvbHV0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgIHRoaXMucm91dGVyRGF0YSRcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgc3dpdGNoTWFwKChyb3V0ZXJEYXRhKSA9PlxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0b3JDb21tb25zU2VydmljZS5oYXNDb25mbGljdHMocm91dGVyRGF0YS5vd25lcilcbiAgICAgICAgICApLFxuICAgICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksIC8vIHdlIGFyZSBpbnRlcmVzdGVkIG9ubHkgaW4gc3RhdHVzIGNoYW5nZXNcbiAgICAgICAgICBza2lwKDEpLCAvLyB3ZSBza2lwIHRoZSB2ZXJ5IGZpcnN0IGVtaXNzaW9uIHRvIGF2b2lkIHRoZSBjaGFuZ2UgZnJvbiB1bmRlZmluZWQgLT4gbm8gY29uZmxpY3RzXG4gICAgICAgICAgZmlsdGVyKChoYXNDb25mbGljdHMpID0+ICFoYXNDb25mbGljdHMpXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmRpc3BsYXlDb25mbGljdFJlc29sdmVkTWVzc2FnZSgpKVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZGlzcGxheUNvbmZsaWN0UmVzb2x2ZWRNZXNzYWdlKCk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ2xvYmFsTWVzc2FnZVNlcnZpY2UgJiZcbiAgICAgICh0aGlzLmZlYXR1cmVDb25maWdzZXJ2aWNlPy5pc0xldmVsKCc2LjEnKSA/PyBmYWxzZSlcbiAgICApIHtcbiAgICAgIHRoaXMuZ2xvYmFsTWVzc2FnZVNlcnZpY2UuYWRkKFxuICAgICAgICB7IGtleTogJ2NvbmZpZ3VyYXRvci5oZWFkZXIuY29uZmxpY3RzUmVzb2x2ZWQnIH0sXG4gICAgICAgIEdsb2JhbE1lc3NhZ2VUeXBlLk1TR19UWVBFX0NPTkZJUk1BVElPTlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmxpc3RlbkZvckNvbmZsaWN0UmVzb2x1dGlvbigpO1xuXG4gICAgdGhpcy5yb3V0ZXJEYXRhJFxuICAgICAgLnBpcGUoXG4gICAgICAgIHN3aXRjaE1hcCgocm91dGVyRGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLmdldENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICByb3V0ZXJEYXRhLm93bmVyXG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICAgIHRha2UoMSlcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKGNvbmZpZ3VyYXRpb24pID0+IHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0b3JDb21tb25zU2VydmljZS5jaGVja0NvbmZsaWN0U29sdmVyRGlhbG9nKFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24ub3duZXJcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5yb3V0ZXJEYXRhJFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcigocm91dGluZ0RhdGEpID0+IHJvdXRpbmdEYXRhLmRpc3BsYXlSZXN0YXJ0RGlhbG9nID09PSB0cnVlKSxcbiAgICAgICAgc3dpdGNoTWFwKChyb3V0ZXJEYXRhKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UuZ2V0Q29uZmlndXJhdGlvbihcbiAgICAgICAgICAgIHJvdXRlckRhdGEub3duZXJcbiAgICAgICAgICApO1xuICAgICAgICB9KSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgZmlsdGVyKFxuICAgICAgICAgIChjb25maWd1cmF0aW9uKSA9PlxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pbnRlcmFjdGlvblN0YXRlLm5ld0NvbmZpZ3VyYXRpb24gPT09IGZhbHNlXG4gICAgICAgICksXG4gICAgICAgIGRlbGF5KDApIC8vIERlbGF5IGJlY2F1c2Ugd2UgZmlyc3Qgd2FudCB0aGUgZm9ybSB0byByZWFjdCBvbiBkYXRhIGNoYW5nZXNcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKGNvbmZpZ3VyYXRpb24pID0+IHtcbiAgICAgICAgdGhpcy5sYXVuY2hEaWFsb2dTZXJ2aWNlLm9wZW5EaWFsb2dBbmRTdWJzY3JpYmUoXG4gICAgICAgICAgTEFVTkNIX0NBTExFUi5DT05GSUdVUkFUT1JfUkVTVEFSVF9ESUFMT0csXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHsgb3duZXI6IGNvbmZpZ3VyYXRpb24ub3duZXIgfVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLnJvdXRlckRhdGEkLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKChyb3V0aW5nRGF0YSkgPT4ge1xuICAgICAgLy9JbiBjYXNlIG9mIHJlc29sdmluZyBpc3N1ZXMgKGlmIG5vIGNvbmZsaWN0IHNvbHZlciBkaWFsb2cgaXMgcHJlc2VudCEpLCBjaGVjayBpZiB0aGUgY29uZmlndXJhdGlvbiBjb250YWlucyBjb25mbGljdHMsXG4gICAgICAvL2lmIG5vdCwgY2hlY2sgaWYgdGhlIGNvbmZpZ3VyYXRpb24gY29udGFpbnMgbWlzc2luZyBtYW5kYXRvcnkgZmllbGRzIGFuZCBzaG93IHRoZSBncm91cFxuICAgICAgaWYgKHJvdXRpbmdEYXRhLnJlc29sdmVJc3N1ZXMpIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0b3JDb21tb25zU2VydmljZVxuICAgICAgICAgIC5oYXNDb25mbGljdHMocm91dGluZ0RhdGEub3duZXIpXG4gICAgICAgICAgLnBpcGUodGFrZSgxKSlcbiAgICAgICAgICAuc3Vic2NyaWJlKChoYXNDb25mbGljdHMpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNDb25mbGljdHMgJiYgIXJvdXRpbmdEYXRhLnNraXBDb25mbGljdHMpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0b3JHcm91cHNTZXJ2aWNlLm5hdmlnYXRlVG9Db25mbGljdFNvbHZlcihcbiAgICAgICAgICAgICAgICByb3V0aW5nRGF0YS5vd25lclxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIC8vT25seSBjaGVjayBmb3IgSW5jb21wbGV0ZSBncm91cCB3aGVuIHRoZXJlIGFyZSBubyBjb25mbGljdHMgb3IgY29uZmxpY3RzIHNob3VsZCBiZSBza2lwcGVkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRvckdyb3Vwc1NlcnZpY2UubmF2aWdhdGVUb0ZpcnN0SW5jb21wbGV0ZUdyb3VwKFxuICAgICAgICAgICAgICAgIHJvdXRpbmdEYXRhLm93bmVyXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyb3V0aW5nRGF0YS5leHBNb2RlKSB7XG4gICAgICAgIHRoaXMuY29uZmlnRXhwZXJ0TW9kZVNlcnZpY2U/LnNldEV4cE1vZGVSZXF1ZXN0ZWQocm91dGluZ0RhdGEuZXhwTW9kZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpZXMgd2hldGhlciB0aGUgbmF2aWdhdGlvbiB0byBhIGNvbmZsaWN0IGdyb3VwIGlzIGVuYWJsZWQuXG4gICAqIEBwYXJhbSBjb25maWd1cmF0aW9uIEN1cnJlbnQgY29uZmlndXJhdGlvblxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyAndHJ1ZScgaWYgdGhlIG5hdmlnYXRpb24gdG8gYSBjb25mbGljdCBncm91cCBpcyBlbmFibGVkLCBvdGhlcndpc2UgJ2ZhbHNlJy5cbiAgICovXG4gIGlzTmF2aWdhdGlvblRvR3JvdXBFbmFibGVkKFxuICAgIGNvbmZpZ3VyYXRpb246IENvbmZpZ3VyYXRvci5Db25maWd1cmF0aW9uXG4gICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhY29uZmlndXJhdGlvbi5pbW1lZGlhdGVDb25mbGljdFJlc29sdXRpb247XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGNvbmZsaWN0IHNvbHZlciBkaWFsb2cgaXMgYWN0aXZlXG4gICAqIEBwYXJhbSBjb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIENvbmZsaWN0IHNvbHZlciBkaWFsb2cgYWN0aXZlP1xuICAgKi9cbiAgaXNEaWFsb2dBY3RpdmUoY29uZmlndXJhdGlvbjogQ29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gY29uZmlndXJhdGlvbi5pbnRlcmFjdGlvblN0YXRlLnNob3dDb25mbGljdFNvbHZlckRpYWxvZyA/PyBmYWxzZTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbmZpZ3VyYXRpb24kIHwgYXN5bmMgYXMgY29uZmlndXJhdGlvbjsgZWxzZSBnaG9zdEZvcm1cIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFpc0RpYWxvZ0FjdGl2ZShjb25maWd1cmF0aW9uKTsgZWxzZSBnaG9zdEZvcm1cIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY3VycmVudEdyb3VwJCB8IGFzeW5jIGFzIGdyb3VwXCI+XG4gICAgICA8Y3gtY29uZmlndXJhdG9yLWdyb3VwXG4gICAgICAgIFtncm91cF09XCJncm91cFwiXG4gICAgICAgIFtvd25lcl09XCJjb25maWd1cmF0aW9uLm93bmVyXCJcbiAgICAgICAgW2lzTmF2aWdhdGlvblRvR3JvdXBFbmFibGVkXT1cImlzTmF2aWdhdGlvblRvR3JvdXBFbmFibGVkKGNvbmZpZ3VyYXRpb24pXCJcbiAgICAgID5cbiAgICAgIDwvY3gtY29uZmlndXJhdG9yLWdyb3VwPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI2dob3N0Rm9ybT5cbiAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgbnVtYmVyIG9mIFswLCAxLCAyXVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1hdHRyaWJ1dGVcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1oZWFkZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImN4LWdob3N0LXRpdGxlIGdob3N0XCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1pY29uIGdob3N0XCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1ib2R5XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC10ZXh0IGdob3N0XCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1wcmljZSBnaG9zdFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtYXR0cmlidXRlXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtaGVhZGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC10aXRsZSBnaG9zdFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtaWNvbiBnaG9zdFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtZGVzY3JpcHRpb24tYm94XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWdob3N0LWRlc2NyaXB0aW9uIGdob3N0XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtYm9keVwiPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgKm5nRm9yPVwibGV0IG51bWJlciBvZiBbMCwgMSwgMl07IGxldCBpID0gaW5kZXhcIlxuICAgICAgICAgIGNsYXNzPVwiY3gtZ2hvc3QtcmFkaW9idXR0b24tdmFsdWVcIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LWdob3N0LXZhbHVlLWxhYmVsLXBhaXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC12YWx1ZS1pY29uIGdob3N0XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtbGFiZWwgZ2hvc3RcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtdmFsdWUtcHJpY2UgZ2hvc3RcIj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpICE9PSAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1wcmljZVwiPjwvZGl2PlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==