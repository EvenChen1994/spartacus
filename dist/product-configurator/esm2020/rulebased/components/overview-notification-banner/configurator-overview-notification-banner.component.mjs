/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { CommonConfigurator, } from '@spartacus/product-configurator/common';
import { ICON_TYPE } from '@spartacus/storefront';
import { filter, map, switchMap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../core/facade/configurator-commons.service";
import * as i2 from "@spartacus/product-configurator/common";
import * as i3 from "@angular/common";
import * as i4 from "@spartacus/storefront";
import * as i5 from "@angular/router";
import * as i6 from "@spartacus/core";
export class ConfiguratorOverviewNotificationBannerComponent {
    constructor(configuratorCommonsService, configRouterExtractorService, commonConfigUtilsService) {
        this.configuratorCommonsService = configuratorCommonsService;
        this.configRouterExtractorService = configRouterExtractorService;
        this.commonConfigUtilsService = commonConfigUtilsService;
        this.routerData$ = this.configRouterExtractorService.extractRouterData();
        this.configuration$ = this.routerData$.pipe(filter((routerData) => routerData.owner.type === CommonConfigurator.OwnerType.PRODUCT ||
            routerData.owner.type === CommonConfigurator.OwnerType.CART_ENTRY), switchMap((routerData) => this.configuratorCommonsService.getConfiguration(routerData.owner)));
        this.configurationOverview$ = this.configuration$.pipe(map((configuration) => configuration.overview));
        this.numberOfIssues$ = this.configuration$.pipe(map((configuration) => {
            //In case overview carries number of issues: We take it from there.
            //otherwise configuration's number will be accurate
            const configOv = configuration.overview;
            if (configOv?.totalNumberOfIssues) {
                return configOv.numberOfIncompleteCharacteristics !== undefined
                    ? configOv.numberOfIncompleteCharacteristics
                    : configOv.totalNumberOfIssues;
            }
            else {
                return configuration.totalNumberOfIssues
                    ? configuration.totalNumberOfIssues
                    : 0;
            }
        }));
        this.numberOfConflicts$ = this.configuration$.pipe(map((configuration) => {
            return configuration.overview?.numberOfConflicts ?? 0;
        }));
        this.skipConflictsOnIssueNavigation$ = this.configuration$.pipe(map((configuration) => {
            return (configuration.overview?.numberOfConflicts ?? 0) > 0;
        }));
        this.iconTypes = ICON_TYPE;
    }
}
ConfiguratorOverviewNotificationBannerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorOverviewNotificationBannerComponent, deps: [{ token: i1.ConfiguratorCommonsService }, { token: i2.ConfiguratorRouterExtractorService }, { token: i2.CommonConfiguratorUtilsService }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorOverviewNotificationBannerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: ConfiguratorOverviewNotificationBannerComponent, selector: "cx-configurator-overview-notification-banner", ngImport: i0, template: "<ng-container *ngIf=\"routerData$ | async as routerData\">\n  <ng-container *ngIf=\"configurationOverview$ | async\">\n    <div\n      class=\"cx-error-notification-banner\"\n      *ngIf=\"numberOfIssues$ | async as numberOfIssues\"\n    >\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n      <div class=\"cx-error-msg\" id=\"cx-configurator-overview-error-msg\">\n        {{\n          'configurator.notificationBanner.numberOfIssues'\n            | cxTranslate: { count: numberOfIssues }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-error-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{\n            resolveIssues: true,\n            skipConflicts: skipConflictsOnIssueNavigation$ | async\n          }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveIssues' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"cx-conflict-notification-banner\"\n      *ngIf=\"numberOfConflicts$ | async as numberOfConflicts\"\n    >\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n      <div class=\"cx-conflict-msg\" id=\"cx-configurator-overview-conflict-msg\">\n        {{\n          'configurator.notificationBanner.numberOfConflicts'\n            | cxTranslate: { count: numberOfConflicts }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-conflict-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{ resolveIssues: true }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveConflicts' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n", dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i4.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "directive", type: i5.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "pipe", type: i6.TranslatePipe, name: "cxTranslate" }, { kind: "pipe", type: i6.UrlPipe, name: "cxUrl" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorOverviewNotificationBannerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-overview-notification-banner', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-container *ngIf=\"routerData$ | async as routerData\">\n  <ng-container *ngIf=\"configurationOverview$ | async\">\n    <div\n      class=\"cx-error-notification-banner\"\n      *ngIf=\"numberOfIssues$ | async as numberOfIssues\"\n    >\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n      <div class=\"cx-error-msg\" id=\"cx-configurator-overview-error-msg\">\n        {{\n          'configurator.notificationBanner.numberOfIssues'\n            | cxTranslate: { count: numberOfIssues }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-error-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{\n            resolveIssues: true,\n            skipConflicts: skipConflictsOnIssueNavigation$ | async\n          }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveIssues' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"cx-conflict-notification-banner\"\n      *ngIf=\"numberOfConflicts$ | async as numberOfConflicts\"\n    >\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n      <div class=\"cx-conflict-msg\" id=\"cx-configurator-overview-conflict-msg\">\n        {{\n          'configurator.notificationBanner.numberOfConflicts'\n            | cxTranslate: { count: numberOfConflicts }\n        }}\n        <button\n          class=\"link cx-action-link\"\n          aria-describedby=\"cx-configurator-overview-conflict-msg\"\n          [routerLink]=\"\n            {\n              cxRoute: 'configure' + routerData.owner.configuratorType,\n              params: {\n                entityKey: routerData.owner.id,\n                ownerType: routerData.owner.type\n              }\n            } | cxUrl\n          \"\n          [queryParams]=\"{ resolveIssues: true }\"\n          cxAutoFocus\n        >\n          {{ 'configurator.header.resolveConflicts' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ConfiguratorCommonsService }, { type: i2.ConfiguratorRouterExtractorService }, { type: i2.CommonConfiguratorUtilsService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIvY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIvY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkUsT0FBTyxFQUNMLGtCQUFrQixHQUluQixNQUFNLHdDQUF3QyxDQUFDO0FBQ2hELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7QUFTeEQsTUFBTSxPQUFPLCtDQUErQztJQW1EMUQsWUFDWSwwQkFBc0QsRUFDdEQsNEJBQWdFLEVBQ2hFLHdCQUF3RDtRQUZ4RCwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBQ3RELGlDQUE0QixHQUE1Qiw0QkFBNEIsQ0FBb0M7UUFDaEUsNkJBQXdCLEdBQXhCLHdCQUF3QixDQUFnQztRQXJEcEUsZ0JBQVcsR0FDVCxJQUFJLENBQUMsNEJBQTRCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV4RCxtQkFBYyxHQUNaLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUNuQixNQUFNLENBQ0osQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUNiLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxPQUFPO1lBQzlELFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQ3BFLEVBQ0QsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FDdkIsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FDbkUsQ0FDRixDQUFDO1FBRUosMkJBQXNCLEdBQ3BCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFFM0Usb0JBQWUsR0FBdUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQzVELEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQ3BCLG1FQUFtRTtZQUNuRSxtREFBbUQ7WUFDbkQsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQztZQUN4QyxJQUFJLFFBQVEsRUFBRSxtQkFBbUIsRUFBRTtnQkFDakMsT0FBTyxRQUFRLENBQUMsaUNBQWlDLEtBQUssU0FBUztvQkFDN0QsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxpQ0FBaUM7b0JBQzVDLENBQUMsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7YUFDbEM7aUJBQU07Z0JBQ0wsT0FBTyxhQUFhLENBQUMsbUJBQW1CO29CQUN0QyxDQUFDLENBQUMsYUFBYSxDQUFDLG1CQUFtQjtvQkFDbkMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNQO1FBQ0gsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQUVGLHVCQUFrQixHQUF1QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FDL0QsR0FBRyxDQUFDLENBQUMsYUFBYSxFQUFFLEVBQUU7WUFDcEIsT0FBTyxhQUFhLENBQUMsUUFBUSxFQUFFLGlCQUFpQixJQUFJLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FDSCxDQUFDO1FBRUYsb0NBQStCLEdBQzdCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUN0QixHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsRUFBRTtZQUNwQixPQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQUVKLGNBQVMsR0FBRyxTQUFTLENBQUM7SUFNbkIsQ0FBQzs7NElBdkRPLCtDQUErQztnSUFBL0MsK0NBQStDLG9GQ3hCNUQseXZFQWlFQTsyRkR6Q2EsK0NBQStDO2tCQUwzRCxTQUFTOytCQUNFLDhDQUE4QyxtQkFFdkMsdUJBQXVCLENBQUMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIENvbW1vbkNvbmZpZ3VyYXRvcixcbiAgQ29tbW9uQ29uZmlndXJhdG9yVXRpbHNTZXJ2aWNlLFxuICBDb25maWd1cmF0b3JSb3V0ZXIsXG4gIENvbmZpZ3VyYXRvclJvdXRlckV4dHJhY3RvclNlcnZpY2UsXG59IGZyb20gJ0BzcGFydGFjdXMvcHJvZHVjdC1jb25maWd1cmF0b3IvY29tbW9uJztcbmltcG9ydCB7IElDT05fVFlQRSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCwgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9jb3JlL2ZhY2FkZS9jb25maWd1cmF0b3ItY29tbW9ucy5zZXJ2aWNlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvciB9IGZyb20gJy4uLy4uL2NvcmUvbW9kZWwvY29uZmlndXJhdG9yLm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vY29uZmlndXJhdG9yLW92ZXJ2aWV3LW5vdGlmaWNhdGlvbi1iYW5uZXIuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdG9yT3ZlcnZpZXdOb3RpZmljYXRpb25CYW5uZXJDb21wb25lbnQge1xuICByb3V0ZXJEYXRhJDogT2JzZXJ2YWJsZTxDb25maWd1cmF0b3JSb3V0ZXIuRGF0YT4gPVxuICAgIHRoaXMuY29uZmlnUm91dGVyRXh0cmFjdG9yU2VydmljZS5leHRyYWN0Um91dGVyRGF0YSgpO1xuXG4gIGNvbmZpZ3VyYXRpb24kOiBPYnNlcnZhYmxlPENvbmZpZ3VyYXRvci5Db25maWd1cmF0aW9uPiA9XG4gICAgdGhpcy5yb3V0ZXJEYXRhJC5waXBlKFxuICAgICAgZmlsdGVyKFxuICAgICAgICAocm91dGVyRGF0YSkgPT5cbiAgICAgICAgICByb3V0ZXJEYXRhLm93bmVyLnR5cGUgPT09IENvbW1vbkNvbmZpZ3VyYXRvci5Pd25lclR5cGUuUFJPRFVDVCB8fFxuICAgICAgICAgIHJvdXRlckRhdGEub3duZXIudHlwZSA9PT0gQ29tbW9uQ29uZmlndXJhdG9yLk93bmVyVHlwZS5DQVJUX0VOVFJZXG4gICAgICApLFxuICAgICAgc3dpdGNoTWFwKChyb3V0ZXJEYXRhKSA9PlxuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLmdldENvbmZpZ3VyYXRpb24ocm91dGVyRGF0YS5vd25lcilcbiAgICAgIClcbiAgICApO1xuXG4gIGNvbmZpZ3VyYXRpb25PdmVydmlldyQ6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLk92ZXJ2aWV3IHwgdW5kZWZpbmVkPiA9XG4gICAgdGhpcy5jb25maWd1cmF0aW9uJC5waXBlKG1hcCgoY29uZmlndXJhdGlvbikgPT4gY29uZmlndXJhdGlvbi5vdmVydmlldykpO1xuXG4gIG51bWJlck9mSXNzdWVzJDogT2JzZXJ2YWJsZTxudW1iZXI+ID0gdGhpcy5jb25maWd1cmF0aW9uJC5waXBlKFxuICAgIG1hcCgoY29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgLy9JbiBjYXNlIG92ZXJ2aWV3IGNhcnJpZXMgbnVtYmVyIG9mIGlzc3VlczogV2UgdGFrZSBpdCBmcm9tIHRoZXJlLlxuICAgICAgLy9vdGhlcndpc2UgY29uZmlndXJhdGlvbidzIG51bWJlciB3aWxsIGJlIGFjY3VyYXRlXG4gICAgICBjb25zdCBjb25maWdPdiA9IGNvbmZpZ3VyYXRpb24ub3ZlcnZpZXc7XG4gICAgICBpZiAoY29uZmlnT3Y/LnRvdGFsTnVtYmVyT2ZJc3N1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ092Lm51bWJlck9mSW5jb21wbGV0ZUNoYXJhY3RlcmlzdGljcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBjb25maWdPdi5udW1iZXJPZkluY29tcGxldGVDaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgICA6IGNvbmZpZ092LnRvdGFsTnVtYmVyT2ZJc3N1ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29uZmlndXJhdGlvbi50b3RhbE51bWJlck9mSXNzdWVzXG4gICAgICAgICAgPyBjb25maWd1cmF0aW9uLnRvdGFsTnVtYmVyT2ZJc3N1ZXNcbiAgICAgICAgICA6IDA7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcblxuICBudW1iZXJPZkNvbmZsaWN0cyQ6IE9ic2VydmFibGU8bnVtYmVyPiA9IHRoaXMuY29uZmlndXJhdGlvbiQucGlwZShcbiAgICBtYXAoKGNvbmZpZ3VyYXRpb24pID0+IHtcbiAgICAgIHJldHVybiBjb25maWd1cmF0aW9uLm92ZXJ2aWV3Py5udW1iZXJPZkNvbmZsaWN0cyA/PyAwO1xuICAgIH0pXG4gICk7XG5cbiAgc2tpcENvbmZsaWN0c09uSXNzdWVOYXZpZ2F0aW9uJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9XG4gICAgdGhpcy5jb25maWd1cmF0aW9uJC5waXBlKFxuICAgICAgbWFwKChjb25maWd1cmF0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiAoY29uZmlndXJhdGlvbi5vdmVydmlldz8ubnVtYmVyT2ZDb25mbGljdHMgPz8gMCkgPiAwO1xuICAgICAgfSlcbiAgICApO1xuXG4gIGljb25UeXBlcyA9IElDT05fVFlQRTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2U6IENvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjb25maWdSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlOiBDb25maWd1cmF0b3JSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjb21tb25Db25maWdVdGlsc1NlcnZpY2U6IENvbW1vbkNvbmZpZ3VyYXRvclV0aWxzU2VydmljZVxuICApIHt9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwicm91dGVyRGF0YSQgfCBhc3luYyBhcyByb3V0ZXJEYXRhXCI+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb25maWd1cmF0aW9uT3ZlcnZpZXckIHwgYXN5bmNcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImN4LWVycm9yLW5vdGlmaWNhdGlvbi1iYW5uZXJcIlxuICAgICAgKm5nSWY9XCJudW1iZXJPZklzc3VlcyQgfCBhc3luYyBhcyBudW1iZXJPZklzc3Vlc1wiXG4gICAgPlxuICAgICAgPGN4LWljb24gW3R5cGVdPVwiaWNvblR5cGVzLkVSUk9SXCI+PC9jeC1pY29uPlxuICAgICAgPGRpdiBjbGFzcz1cImN4LWVycm9yLW1zZ1wiIGlkPVwiY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWVycm9yLW1zZ1wiPlxuICAgICAgICB7e1xuICAgICAgICAgICdjb25maWd1cmF0b3Iubm90aWZpY2F0aW9uQmFubmVyLm51bWJlck9mSXNzdWVzJ1xuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBjb3VudDogbnVtYmVyT2ZJc3N1ZXMgfVxuICAgICAgICB9fVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJsaW5rIGN4LWFjdGlvbi1saW5rXCJcbiAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWVycm9yLW1zZ1wiXG4gICAgICAgICAgW3JvdXRlckxpbmtdPVwiXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGN4Um91dGU6ICdjb25maWd1cmUnICsgcm91dGVyRGF0YS5vd25lci5jb25maWd1cmF0b3JUeXBlLFxuICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBlbnRpdHlLZXk6IHJvdXRlckRhdGEub3duZXIuaWQsXG4gICAgICAgICAgICAgICAgb3duZXJUeXBlOiByb3V0ZXJEYXRhLm93bmVyLnR5cGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB8IGN4VXJsXG4gICAgICAgICAgXCJcbiAgICAgICAgICBbcXVlcnlQYXJhbXNdPVwie1xuICAgICAgICAgICAgcmVzb2x2ZUlzc3VlczogdHJ1ZSxcbiAgICAgICAgICAgIHNraXBDb25mbGljdHM6IHNraXBDb25mbGljdHNPbklzc3VlTmF2aWdhdGlvbiQgfCBhc3luY1xuICAgICAgICAgIH1cIlxuICAgICAgICAgIGN4QXV0b0ZvY3VzXG4gICAgICAgID5cbiAgICAgICAgICB7eyAnY29uZmlndXJhdG9yLmhlYWRlci5yZXNvbHZlSXNzdWVzJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJjeC1jb25mbGljdC1ub3RpZmljYXRpb24tYmFubmVyXCJcbiAgICAgICpuZ0lmPVwibnVtYmVyT2ZDb25mbGljdHMkIHwgYXN5bmMgYXMgbnVtYmVyT2ZDb25mbGljdHNcIlxuICAgID5cbiAgICAgIDxjeC1pY29uIFt0eXBlXT1cImljb25UeXBlcy5XQVJOSU5HXCI+PC9jeC1pY29uPlxuICAgICAgPGRpdiBjbGFzcz1cImN4LWNvbmZsaWN0LW1zZ1wiIGlkPVwiY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWNvbmZsaWN0LW1zZ1wiPlxuICAgICAgICB7e1xuICAgICAgICAgICdjb25maWd1cmF0b3Iubm90aWZpY2F0aW9uQmFubmVyLm51bWJlck9mQ29uZmxpY3RzJ1xuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBjb3VudDogbnVtYmVyT2ZDb25mbGljdHMgfVxuICAgICAgICB9fVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJsaW5rIGN4LWFjdGlvbi1saW5rXCJcbiAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWNvbmZsaWN0LW1zZ1wiXG4gICAgICAgICAgW3JvdXRlckxpbmtdPVwiXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGN4Um91dGU6ICdjb25maWd1cmUnICsgcm91dGVyRGF0YS5vd25lci5jb25maWd1cmF0b3JUeXBlLFxuICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBlbnRpdHlLZXk6IHJvdXRlckRhdGEub3duZXIuaWQsXG4gICAgICAgICAgICAgICAgb3duZXJUeXBlOiByb3V0ZXJEYXRhLm93bmVyLnR5cGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB8IGN4VXJsXG4gICAgICAgICAgXCJcbiAgICAgICAgICBbcXVlcnlQYXJhbXNdPVwieyByZXNvbHZlSXNzdWVzOiB0cnVlIH1cIlxuICAgICAgICAgIGN4QXV0b0ZvY3VzXG4gICAgICAgID5cbiAgICAgICAgICB7eyAnY29uZmlndXJhdG9yLmhlYWRlci5yZXNvbHZlQ29uZmxpY3RzJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG4iXX0=