/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';
import { distinctUntilKeyChanged, filter, switchMap, tap, } from 'rxjs/operators';
import { Configurator } from '../../core/model/configurator.model';
import * as i0 from "@angular/core";
import * as i1 from "../../core/facade/configurator-commons.service";
import * as i2 from "@spartacus/product-configurator/common";
import * as i3 from "../service/configurator-storefront-utils.service";
import * as i4 from "@angular/common";
import * as i5 from "../overview-attribute/configurator-overview-attribute.component";
import * as i6 from "../overview-bundle-attribute/configurator-overview-bundle-attribute.component";
import * as i7 from "@spartacus/core";
export class ConfiguratorOverviewFormComponent {
    constructor(configuratorCommonsService, configRouterExtractorService, configuratorStorefrontUtilsService) {
        this.configuratorCommonsService = configuratorCommonsService;
        this.configRouterExtractorService = configRouterExtractorService;
        this.configuratorStorefrontUtilsService = configuratorStorefrontUtilsService;
        this.ghostStyle = true;
        this.attributeOverviewType = Configurator.AttributeOverviewType;
        this.configuration$ = this.configRouterExtractorService.extractRouterData().pipe(switchMap((routerData) => this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner)), distinctUntilKeyChanged('configId'), switchMap((configuration) => this.configuratorCommonsService.getConfigurationWithOverview(configuration)), filter((configuration) => configuration.overview != null), tap(() => {
            this.ghostStyle = false;
        }));
    }
    /**
     * Does the configuration contain any selected attribute values?
     * @param {Configurator.Configuration} configuration - Current configuration
     * @returns {boolean} - Any attributes available
     */
    hasAttributes(configuration) {
        return this.hasGroupWithAttributes(configuration.overview?.groups);
    }
    hasGroupWithAttributes(groups) {
        if (groups) {
            let hasAttributes = groups.find((group) => (group.attributes ? group.attributes.length : 0) > 0) !== undefined;
            if (!hasAttributes) {
                hasAttributes =
                    groups.find((group) => this.hasGroupWithAttributes(group.subGroups)) !== undefined;
            }
            return hasAttributes;
        }
        else {
            return false;
        }
    }
    /**
     * Verifies whether the next or the previous attributes are same.
     *
     * @param {Configurator.AttributeOverview[]} attributes - Attribute array
     * @param {number} index - Index of the attribute in the array
     * @return {boolean} - 'True' if it is the same attribute, otherwise 'false'
     */
    isSameAttribute(attributes, index) {
        if (attributes.length > 1) {
            if (index === 0) {
                return (attributes[index]?.attribute === attributes[index + 1]?.attribute);
            }
            else {
                return (attributes[index]?.attribute === attributes[index - 1]?.attribute);
            }
        }
        return false;
    }
    /**
     * Retrieves the styling for the corresponding element.
     *
     * @param {Configurator.AttributeOverview[]} attributes - Attribute array
     * @param {number} index - Index of the attribute in the array
     * @return {string} - corresponding style class
     */
    getStyleClasses(attributes, index) {
        let styleClass = '';
        switch (attributes[index]?.type) {
            case this.attributeOverviewType.BUNDLE:
                styleClass += 'bundle';
                break;
            case this.attributeOverviewType.GENERAL:
                styleClass += 'general';
                break;
        }
        if (index === 0 || !this.isSameAttribute(attributes, index)) {
            styleClass += ' margin';
        }
        if (!this.isSameAttribute(attributes, index + 1) &&
            !styleClass.includes('bundle')) {
            styleClass += ' last-value-pair';
        }
        return styleClass;
    }
    /**
     * Retrieves the styling for the group levels.
     *
     * @param {number} level - Group level. 1 is top level.
     * @param {Configurator.GroupOverview[]} subGroups - subgroups array
     * @return {string} - corresponding style classes
     */
    getGroupLevelStyleClasses(level, subGroups) {
        let styleClass = 'cx-group';
        if (level === 1) {
            styleClass += ' topLevel';
            if (subGroups && subGroups.length > 0) {
                styleClass += ' subgroupTopLevel';
            }
        }
        else {
            styleClass += ' subgroup';
            styleClass += ' subgroupLevel' + level;
        }
        return styleClass;
    }
    /**
     * Retrieves a unique prefix ID.
     *
     * @param {string | undefined} prefix - prefix that we need to make the ID unique
     * @param {string} groupId - group ID
     * @returns {string} - prefix ID
     */
    getPrefixId(idPrefix, groupId) {
        return this.configuratorStorefrontUtilsService.getPrefixId(idPrefix, groupId);
    }
    /**
     * Retrieves the ids for the overview group headers
     *
     * @param {string} idPrefix - Prefix (reflects the parent groups in the hierarchy)
     * @param {string} groupId - local group id
     * @return {string} - unique group id
     */
    getGroupId(idPrefix, groupId) {
        return this.configuratorStorefrontUtilsService.createOvGroupId(idPrefix, groupId);
    }
}
ConfiguratorOverviewFormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorOverviewFormComponent, deps: [{ token: i1.ConfiguratorCommonsService }, { token: i2.ConfiguratorRouterExtractorService }, { token: i3.ConfiguratorStorefrontUtilsService }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorOverviewFormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: ConfiguratorOverviewFormComponent, selector: "cx-configurator-overview-form", host: { properties: { "class.ghost": "this.ghostStyle" } }, ngImport: i0, template: "<ng-container *ngIf=\"configuration$ | async as configuration; else ghostForm\">\n  <ng-container *ngIf=\"hasAttributes(configuration); else noAttributes\">\n    <ng-container\n      *ngTemplateOutlet=\"\n        groups;\n        context: {\n          overviewGroups: configuration.overview?.groups,\n          level: 1,\n          idPrefix: ''\n        }\n      \"\n    ></ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #noAttributes>\n  <div class=\"cx-no-attribute-value-pairs\">\n    <h2>{{ 'configurator.overviewForm.noAttributeHeader' | cxTranslate }}</h2>\n    <p>{{ 'configurator.overviewForm.noAttributeText' | cxTranslate }}</p>\n  </div>\n</ng-template>\n\n<ng-template\n  #groups\n  let-overviewGroups=\"overviewGroups\"\n  let-level=\"level\"\n  let-idPrefix=\"idPrefix\"\n>\n  <span class=\"cx-visually-hidden\">\n    {{ 'configurator.a11y.listOfAttributesAndValues' | cxTranslate }}\n  </span>\n\n  <ng-container *ngFor=\"let group of overviewGroups\">\n    <div\n      id=\"{{ getGroupId(idPrefix, group.id) }}\"\n      [ngClass]=\"getGroupLevelStyleClasses(level, group.subGroups)\"\n    >\n      <span class=\"cx-visually-hidden\">\n        {{\n          'configurator.a11y.group'\n            | cxTranslate\n              : {\n                  group: group.groupDescription\n                }\n        }}\n      </span>\n      <h2 aria-hidden=\"true\">\n        <span>{{ group.groupDescription }}</span>\n      </h2>\n\n      <div\n        *ngFor=\"let attributeOverview of group.attributes; let i = index\"\n        class=\"cx-attribute-value-pair\"\n        [ngClass]=\"getStyleClasses(group.attributes, i)\"\n      >\n        <ng-container [ngSwitch]=\"attributeOverview?.type\">\n          <ng-container *ngSwitchCase=\"attributeOverviewType.GENERAL\">\n            <cx-configurator-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-overview-attribute>\n          </ng-container>\n\n          <ng-container *ngSwitchCase=\"attributeOverviewType.BUNDLE\">\n            <cx-configurator-cpq-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-cpq-overview-attribute>\n          </ng-container>\n\n          <ng-container *ngSwitchDefault>\n            <cx-configurator-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-overview-attribute>\n          </ng-container>\n        </ng-container>\n      </div>\n      <ng-container *ngIf=\"group.subGroups?.length > 0\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            groups;\n            context: {\n              overviewGroups: group.subGroups,\n              level: level + 1,\n              idPrefix: getPrefixId(idPrefix, group.id)\n            }\n          \"\n        ></ng-container>\n      </ng-container>\n    </div>\n  </ng-container>\n</ng-template>\n\n<ng-template #ghostForm>\n  <ng-container *ngFor=\"let number of [0, 1, 2]\">\n    <div class=\"cx-ghost-group\">\n      <div class=\"cx-ghost-header ghost\"></div>\n      <div class=\"cx-ghost-body\">\n        <ng-container *ngFor=\"let number of [0, 1, 2, 3, 4, 5]\">\n          <div class=\"cx-ghost-attribute-value\">\n            <div class=\"cx-ghost-value ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-attribute-label\">\n            <div class=\"cx-ghost-label ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-attribute-price ghost\"></div>\n        </ng-container>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i4.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i4.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: i4.NgSwitchDefault, selector: "[ngSwitchDefault]" }, { kind: "component", type: i5.ConfiguratorOverviewAttributeComponent, selector: "cx-configurator-overview-attribute", inputs: ["attributeOverview"] }, { kind: "component", type: i6.ConfiguratorOverviewBundleAttributeComponent, selector: "cx-configurator-cpq-overview-attribute", inputs: ["attributeOverview"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i7.TranslatePipe, name: "cxTranslate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorOverviewFormComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-overview-form', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-container *ngIf=\"configuration$ | async as configuration; else ghostForm\">\n  <ng-container *ngIf=\"hasAttributes(configuration); else noAttributes\">\n    <ng-container\n      *ngTemplateOutlet=\"\n        groups;\n        context: {\n          overviewGroups: configuration.overview?.groups,\n          level: 1,\n          idPrefix: ''\n        }\n      \"\n    ></ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #noAttributes>\n  <div class=\"cx-no-attribute-value-pairs\">\n    <h2>{{ 'configurator.overviewForm.noAttributeHeader' | cxTranslate }}</h2>\n    <p>{{ 'configurator.overviewForm.noAttributeText' | cxTranslate }}</p>\n  </div>\n</ng-template>\n\n<ng-template\n  #groups\n  let-overviewGroups=\"overviewGroups\"\n  let-level=\"level\"\n  let-idPrefix=\"idPrefix\"\n>\n  <span class=\"cx-visually-hidden\">\n    {{ 'configurator.a11y.listOfAttributesAndValues' | cxTranslate }}\n  </span>\n\n  <ng-container *ngFor=\"let group of overviewGroups\">\n    <div\n      id=\"{{ getGroupId(idPrefix, group.id) }}\"\n      [ngClass]=\"getGroupLevelStyleClasses(level, group.subGroups)\"\n    >\n      <span class=\"cx-visually-hidden\">\n        {{\n          'configurator.a11y.group'\n            | cxTranslate\n              : {\n                  group: group.groupDescription\n                }\n        }}\n      </span>\n      <h2 aria-hidden=\"true\">\n        <span>{{ group.groupDescription }}</span>\n      </h2>\n\n      <div\n        *ngFor=\"let attributeOverview of group.attributes; let i = index\"\n        class=\"cx-attribute-value-pair\"\n        [ngClass]=\"getStyleClasses(group.attributes, i)\"\n      >\n        <ng-container [ngSwitch]=\"attributeOverview?.type\">\n          <ng-container *ngSwitchCase=\"attributeOverviewType.GENERAL\">\n            <cx-configurator-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-overview-attribute>\n          </ng-container>\n\n          <ng-container *ngSwitchCase=\"attributeOverviewType.BUNDLE\">\n            <cx-configurator-cpq-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-cpq-overview-attribute>\n          </ng-container>\n\n          <ng-container *ngSwitchDefault>\n            <cx-configurator-overview-attribute\n              [attributeOverview]=\"attributeOverview\"\n            >\n            </cx-configurator-overview-attribute>\n          </ng-container>\n        </ng-container>\n      </div>\n      <ng-container *ngIf=\"group.subGroups?.length > 0\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            groups;\n            context: {\n              overviewGroups: group.subGroups,\n              level: level + 1,\n              idPrefix: getPrefixId(idPrefix, group.id)\n            }\n          \"\n        ></ng-container>\n      </ng-container>\n    </div>\n  </ng-container>\n</ng-template>\n\n<ng-template #ghostForm>\n  <ng-container *ngFor=\"let number of [0, 1, 2]\">\n    <div class=\"cx-ghost-group\">\n      <div class=\"cx-ghost-header ghost\"></div>\n      <div class=\"cx-ghost-body\">\n        <ng-container *ngFor=\"let number of [0, 1, 2, 3, 4, 5]\">\n          <div class=\"cx-ghost-attribute-value\">\n            <div class=\"cx-ghost-value ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-attribute-label\">\n            <div class=\"cx-ghost-label ghost\"></div>\n          </div>\n          <div class=\"cx-ghost-attribute-price ghost\"></div>\n        </ng-container>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ConfiguratorCommonsService }, { type: i2.ConfiguratorRouterExtractorService }, { type: i3.ConfiguratorStorefrontUtilsService }]; }, propDecorators: { ghostStyle: [{
                type: HostBinding,
                args: ['class.ghost']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLW92ZXJ2aWV3LWZvcm0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LWZvcm0vY29uZmlndXJhdG9yLW92ZXJ2aWV3LWZvcm0uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL292ZXJ2aWV3LWZvcm0vY29uZmlndXJhdG9yLW92ZXJ2aWV3LWZvcm0uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR2hGLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsTUFBTSxFQUNOLFNBQVMsRUFDVCxHQUFHLEdBQ0osTUFBTSxnQkFBZ0IsQ0FBQztBQUd4QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0scUNBQXFDLENBQUM7Ozs7Ozs7OztBQVFuRSxNQUFNLE9BQU8saUNBQWlDO0lBd0I1QyxZQUNZLDBCQUFzRCxFQUN0RCw0QkFBZ0UsRUFDaEUsa0NBQXNFO1FBRnRFLCtCQUEwQixHQUExQiwwQkFBMEIsQ0FBNEI7UUFDdEQsaUNBQTRCLEdBQTVCLDRCQUE0QixDQUFvQztRQUNoRSx1Q0FBa0MsR0FBbEMsa0NBQWtDLENBQW9DO1FBMUJ0RCxlQUFVLEdBQUcsSUFBSSxDQUFDO1FBRTlDLDBCQUFxQixHQUFHLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQztRQUUzRCxtQkFBYyxHQUNaLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLElBQUksQ0FDeEQsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLEVB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Q0EsVUFBVSxJQUFJLGtCQUFrQixDQUFDO1NBQ2xDO1FBRUQsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILHlCQUF5QixDQUN2QixLQUFhLEVBQ2IsU0FBbUQ7UUFFbkQsSUFBSSxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzVCLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtZQUNmLFVBQVUsSUFBSSxXQUFXLENBQUM7WUFDMUIsSUFBSSxTQUFTLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3JDLFVBQVUsSUFBSSxtQkFBbUIsQ0FBQzthQUNuQztTQUNGO2FBQU07WUFDTCxVQUFVLElBQUksV0FBVyxDQUFDO1lBQzFCLFVBQVUsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7U0FDeEM7UUFDRCxPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsV0FBVyxDQUFDLFFBQTRCLEVBQUUsT0FBZTtRQUN2RCxPQUFPLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxXQUFXLENBQ3hELFFBQVEsRUFDUixPQUFPLENBQ1IsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxVQUFVLENBQUMsUUFBZ0IsRUFBRSxPQUFlO1FBQzFDLE9BQU8sSUFBSSxDQUFDLGtDQUFrQyxDQUFDLGVBQWUsQ0FDNUQsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDO0lBQ0osQ0FBQzs7OEhBMUtVLGlDQUFpQztrSEFBakMsaUNBQWlDLGlJQ3pCOUMsNmtIQWdIQTsyRkR2RmEsaUNBQWlDO2tCQUw3QyxTQUFTOytCQUNFLCtCQUErQixtQkFFeEIsdUJBQXVCLENBQUMsTUFBTTttTkFHbkIsVUFBVTtzQkFBckMsV0FBVzt1QkFBQyxhQUFhIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgSG9zdEJpbmRpbmcgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRvclJvdXRlckV4dHJhY3RvclNlcnZpY2UgfSBmcm9tICdAc3BhcnRhY3VzL3Byb2R1Y3QtY29uZmlndXJhdG9yL2NvbW1vbic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1xuICBkaXN0aW5jdFVudGlsS2V5Q2hhbmdlZCxcbiAgZmlsdGVyLFxuICBzd2l0Y2hNYXAsXG4gIHRhcCxcbn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBDb25maWd1cmF0b3JDb21tb25zU2VydmljZSB9IGZyb20gJy4uLy4uL2NvcmUvZmFjYWRlL2NvbmZpZ3VyYXRvci1jb21tb25zLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9tb2RlbC9jb25maWd1cmF0b3IubW9kZWwnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yU3RvcmVmcm9udFV0aWxzU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2UvY29uZmlndXJhdG9yLXN0b3JlZnJvbnQtdXRpbHMuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1mb3JtJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbmZpZ3VyYXRvci1vdmVydmlldy1mb3JtLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRvck92ZXJ2aWV3Rm9ybUNvbXBvbmVudCB7XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZ2hvc3QnKSBnaG9zdFN0eWxlID0gdHJ1ZTtcblxuICBhdHRyaWJ1dGVPdmVydmlld1R5cGUgPSBDb25maWd1cmF0b3IuQXR0cmlidXRlT3ZlcnZpZXdUeXBlO1xuXG4gIGNvbmZpZ3VyYXRpb24kOiBPYnNlcnZhYmxlPENvbmZpZ3VyYXRvci5Db25maWd1cmF0aW9uPiA9XG4gICAgdGhpcy5jb25maWdSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlLmV4dHJhY3RSb3V0ZXJEYXRhKCkucGlwZShcbiAgICAgIHN3aXRjaE1hcCgocm91dGVyRGF0YSkgPT5cbiAgICAgICAgdGhpcy5jb25maWd1cmF0b3JDb21tb25zU2VydmljZS5nZXRPckNyZWF0ZUNvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgcm91dGVyRGF0YS5vd25lclxuICAgICAgICApXG4gICAgICApLFxuICAgICAgZGlzdGluY3RVbnRpbEtleUNoYW5nZWQoJ2NvbmZpZ0lkJyksXG4gICAgICBzd2l0Y2hNYXAoKGNvbmZpZ3VyYXRpb24pID0+XG4gICAgICAgIHRoaXMuY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2UuZ2V0Q29uZmlndXJhdGlvbldpdGhPdmVydmlldyhcbiAgICAgICAgICBjb25maWd1cmF0aW9uXG4gICAgICAgIClcbiAgICAgICksXG4gICAgICBmaWx0ZXIoKGNvbmZpZ3VyYXRpb24pID0+IGNvbmZpZ3VyYXRpb24ub3ZlcnZpZXcgIT0gbnVsbCksXG4gICAgICB0YXAoKCkgPT4ge1xuICAgICAgICB0aGlzLmdob3N0U3R5bGUgPSBmYWxzZTtcbiAgICAgIH0pXG4gICAgKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2U6IENvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjb25maWdSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlOiBDb25maWd1cmF0b3JSb3V0ZXJFeHRyYWN0b3JTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjb25maWd1cmF0b3JTdG9yZWZyb250VXRpbHNTZXJ2aWNlOiBDb25maWd1cmF0b3JTdG9yZWZyb250VXRpbHNTZXJ2aWNlXG4gICkge31cblxuICAvKipcbiAgICogRG9lcyB0aGUgY29uZmlndXJhdGlvbiBjb250YWluIGFueSBzZWxlY3RlZCBhdHRyaWJ1dGUgdmFsdWVzP1xuICAgKiBAcGFyYW0ge0NvbmZpZ3VyYXRvci5Db25maWd1cmF0aW9ufSBjb25maWd1cmF0aW9uIC0gQ3VycmVudCBjb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIEFueSBhdHRyaWJ1dGVzIGF2YWlsYWJsZVxuICAgKi9cbiAgaGFzQXR0cmlidXRlcyhjb25maWd1cmF0aW9uOiBDb25maWd1cmF0b3IuQ29uZmlndXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhhc0dyb3VwV2l0aEF0dHJpYnV0ZXMoY29uZmlndXJhdGlvbi5vdmVydmlldz8uZ3JvdXBzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYXNHcm91cFdpdGhBdHRyaWJ1dGVzKFxuICAgIGdyb3Vwcz86IENvbmZpZ3VyYXRvci5Hcm91cE92ZXJ2aWV3W11cbiAgKTogYm9vbGVhbiB7XG4gICAgaWYgKGdyb3Vwcykge1xuICAgICAgbGV0IGhhc0F0dHJpYnV0ZXMgPVxuICAgICAgICBncm91cHMuZmluZChcbiAgICAgICAgICAoZ3JvdXApID0+IChncm91cC5hdHRyaWJ1dGVzID8gZ3JvdXAuYXR0cmlidXRlcy5sZW5ndGggOiAwKSA+IDBcbiAgICAgICAgKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgaWYgKCFoYXNBdHRyaWJ1dGVzKSB7XG4gICAgICAgIGhhc0F0dHJpYnV0ZXMgPVxuICAgICAgICAgIGdyb3Vwcy5maW5kKChncm91cCkgPT5cbiAgICAgICAgICAgIHRoaXMuaGFzR3JvdXBXaXRoQXR0cmlidXRlcyhncm91cC5zdWJHcm91cHMpXG4gICAgICAgICAgKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0F0dHJpYnV0ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpZXMgd2hldGhlciB0aGUgbmV4dCBvciB0aGUgcHJldmlvdXMgYXR0cmlidXRlcyBhcmUgc2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHtDb25maWd1cmF0b3IuQXR0cmlidXRlT3ZlcnZpZXdbXX0gYXR0cmlidXRlcyAtIEF0dHJpYnV0ZSBhcnJheVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBJbmRleCBvZiB0aGUgYXR0cmlidXRlIGluIHRoZSBhcnJheVxuICAgKiBAcmV0dXJuIHtib29sZWFufSAtICdUcnVlJyBpZiBpdCBpcyB0aGUgc2FtZSBhdHRyaWJ1dGUsIG90aGVyd2lzZSAnZmFsc2UnXG4gICAqL1xuICBpc1NhbWVBdHRyaWJ1dGUoXG4gICAgYXR0cmlidXRlczogQ29uZmlndXJhdG9yLkF0dHJpYnV0ZU92ZXJ2aWV3W10sXG4gICAgaW5kZXg6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBhdHRyaWJ1dGVzW2luZGV4XT8uYXR0cmlidXRlID09PSBhdHRyaWJ1dGVzW2luZGV4ICsgMV0/LmF0dHJpYnV0ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBhdHRyaWJ1dGVzW2luZGV4XT8uYXR0cmlidXRlID09PSBhdHRyaWJ1dGVzW2luZGV4IC0gMV0/LmF0dHJpYnV0ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBzdHlsaW5nIGZvciB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbmZpZ3VyYXRvci5BdHRyaWJ1dGVPdmVydmlld1tdfSBhdHRyaWJ1dGVzIC0gQXR0cmlidXRlIGFycmF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIEluZGV4IG9mIHRoZSBhdHRyaWJ1dGUgaW4gdGhlIGFycmF5XG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBjb3JyZXNwb25kaW5nIHN0eWxlIGNsYXNzXG4gICAqL1xuICBnZXRTdHlsZUNsYXNzZXMoXG4gICAgYXR0cmlidXRlczogQ29uZmlndXJhdG9yLkF0dHJpYnV0ZU92ZXJ2aWV3W10sXG4gICAgaW5kZXg6IG51bWJlclxuICApOiBzdHJpbmcge1xuICAgIGxldCBzdHlsZUNsYXNzID0gJyc7XG5cbiAgICBzd2l0Y2ggKGF0dHJpYnV0ZXNbaW5kZXhdPy50eXBlKSB7XG4gICAgICBjYXNlIHRoaXMuYXR0cmlidXRlT3ZlcnZpZXdUeXBlLkJVTkRMRTpcbiAgICAgICAgc3R5bGVDbGFzcyArPSAnYnVuZGxlJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRoaXMuYXR0cmlidXRlT3ZlcnZpZXdUeXBlLkdFTkVSQUw6XG4gICAgICAgIHN0eWxlQ2xhc3MgKz0gJ2dlbmVyYWwnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDAgfHwgIXRoaXMuaXNTYW1lQXR0cmlidXRlKGF0dHJpYnV0ZXMsIGluZGV4KSkge1xuICAgICAgc3R5bGVDbGFzcyArPSAnIG1hcmdpbic7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgIXRoaXMuaXNTYW1lQXR0cmlidXRlKGF0dHJpYnV0ZXMsIGluZGV4ICsgMSkgJiZcbiAgICAgICFzdHlsZUNsYXNzLmluY2x1ZGVzKCdidW5kbGUnKVxuICAgICkge1xuICAgICAgc3R5bGVDbGFzcyArPSAnIGxhc3QtdmFsdWUtcGFpcic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0eWxlQ2xhc3M7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBzdHlsaW5nIGZvciB0aGUgZ3JvdXAgbGV2ZWxzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBHcm91cCBsZXZlbC4gMSBpcyB0b3AgbGV2ZWwuXG4gICAqIEBwYXJhbSB7Q29uZmlndXJhdG9yLkdyb3VwT3ZlcnZpZXdbXX0gc3ViR3JvdXBzIC0gc3ViZ3JvdXBzIGFycmF5XG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBjb3JyZXNwb25kaW5nIHN0eWxlIGNsYXNzZXNcbiAgICovXG4gIGdldEdyb3VwTGV2ZWxTdHlsZUNsYXNzZXMoXG4gICAgbGV2ZWw6IG51bWJlcixcbiAgICBzdWJHcm91cHM6IENvbmZpZ3VyYXRvci5Hcm91cE92ZXJ2aWV3W10gfCB1bmRlZmluZWRcbiAgKTogc3RyaW5nIHtcbiAgICBsZXQgc3R5bGVDbGFzcyA9ICdjeC1ncm91cCc7XG4gICAgaWYgKGxldmVsID09PSAxKSB7XG4gICAgICBzdHlsZUNsYXNzICs9ICcgdG9wTGV2ZWwnO1xuICAgICAgaWYgKHN1Ykdyb3VwcyAmJiBzdWJHcm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgICBzdHlsZUNsYXNzICs9ICcgc3ViZ3JvdXBUb3BMZXZlbCc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlQ2xhc3MgKz0gJyBzdWJncm91cCc7XG4gICAgICBzdHlsZUNsYXNzICs9ICcgc3ViZ3JvdXBMZXZlbCcgKyBsZXZlbDtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlQ2xhc3M7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGEgdW5pcXVlIHByZWZpeCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IHByZWZpeCAtIHByZWZpeCB0aGF0IHdlIG5lZWQgdG8gbWFrZSB0aGUgSUQgdW5pcXVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gZ3JvdXAgSURcbiAgICogQHJldHVybnMge3N0cmluZ30gLSBwcmVmaXggSURcbiAgICovXG4gIGdldFByZWZpeElkKGlkUHJlZml4OiBzdHJpbmcgfCB1bmRlZmluZWQsIGdyb3VwSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdG9yU3RvcmVmcm9udFV0aWxzU2VydmljZS5nZXRQcmVmaXhJZChcbiAgICAgIGlkUHJlZml4LFxuICAgICAgZ3JvdXBJZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBpZHMgZm9yIHRoZSBvdmVydmlldyBncm91cCBoZWFkZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFByZWZpeCAtIFByZWZpeCAocmVmbGVjdHMgdGhlIHBhcmVudCBncm91cHMgaW4gdGhlIGhpZXJhcmNoeSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWQgLSBsb2NhbCBncm91cCBpZFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gdW5pcXVlIGdyb3VwIGlkXG4gICAqL1xuICBnZXRHcm91cElkKGlkUHJlZml4OiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdG9yU3RvcmVmcm9udFV0aWxzU2VydmljZS5jcmVhdGVPdkdyb3VwSWQoXG4gICAgICBpZFByZWZpeCxcbiAgICAgIGdyb3VwSWRcbiAgICApO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiY29uZmlndXJhdGlvbiQgfCBhc3luYyBhcyBjb25maWd1cmF0aW9uOyBlbHNlIGdob3N0Rm9ybVwiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiaGFzQXR0cmlidXRlcyhjb25maWd1cmF0aW9uKTsgZWxzZSBub0F0dHJpYnV0ZXNcIj5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICBncm91cHM7XG4gICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICBvdmVydmlld0dyb3VwczogY29uZmlndXJhdGlvbi5vdmVydmlldz8uZ3JvdXBzLFxuICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgIGlkUHJlZml4OiAnJ1xuICAgICAgICB9XG4gICAgICBcIlxuICAgID48L25nLWNvbnRhaW5lcj5cbiAgPC9uZy1jb250YWluZXI+XG48L25nLWNvbnRhaW5lcj5cblxuPG5nLXRlbXBsYXRlICNub0F0dHJpYnV0ZXM+XG4gIDxkaXYgY2xhc3M9XCJjeC1uby1hdHRyaWJ1dGUtdmFsdWUtcGFpcnNcIj5cbiAgICA8aDI+e3sgJ2NvbmZpZ3VyYXRvci5vdmVydmlld0Zvcm0ubm9BdHRyaWJ1dGVIZWFkZXInIHwgY3hUcmFuc2xhdGUgfX08L2gyPlxuICAgIDxwPnt7ICdjb25maWd1cmF0b3Iub3ZlcnZpZXdGb3JtLm5vQXR0cmlidXRlVGV4dCcgfCBjeFRyYW5zbGF0ZSB9fTwvcD5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGVcbiAgI2dyb3Vwc1xuICBsZXQtb3ZlcnZpZXdHcm91cHM9XCJvdmVydmlld0dyb3Vwc1wiXG4gIGxldC1sZXZlbD1cImxldmVsXCJcbiAgbGV0LWlkUHJlZml4PVwiaWRQcmVmaXhcIlxuPlxuICA8c3BhbiBjbGFzcz1cImN4LXZpc3VhbGx5LWhpZGRlblwiPlxuICAgIHt7ICdjb25maWd1cmF0b3IuYTExeS5saXN0T2ZBdHRyaWJ1dGVzQW5kVmFsdWVzJyB8IGN4VHJhbnNsYXRlIH19XG4gIDwvc3Bhbj5cblxuICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBncm91cCBvZiBvdmVydmlld0dyb3Vwc1wiPlxuICAgIDxkaXZcbiAgICAgIGlkPVwie3sgZ2V0R3JvdXBJZChpZFByZWZpeCwgZ3JvdXAuaWQpIH19XCJcbiAgICAgIFtuZ0NsYXNzXT1cImdldEdyb3VwTGV2ZWxTdHlsZUNsYXNzZXMobGV2ZWwsIGdyb3VwLnN1Ykdyb3VwcylcIlxuICAgID5cbiAgICAgIDxzcGFuIGNsYXNzPVwiY3gtdmlzdWFsbHktaGlkZGVuXCI+XG4gICAgICAgIHt7XG4gICAgICAgICAgJ2NvbmZpZ3VyYXRvci5hMTF5Lmdyb3VwJ1xuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cC5ncm91cERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgPC9zcGFuPlxuICAgICAgPGgyIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICA8c3Bhbj57eyBncm91cC5ncm91cERlc2NyaXB0aW9uIH19PC9zcGFuPlxuICAgICAgPC9oMj5cblxuICAgICAgPGRpdlxuICAgICAgICAqbmdGb3I9XCJsZXQgYXR0cmlidXRlT3ZlcnZpZXcgb2YgZ3JvdXAuYXR0cmlidXRlczsgbGV0IGkgPSBpbmRleFwiXG4gICAgICAgIGNsYXNzPVwiY3gtYXR0cmlidXRlLXZhbHVlLXBhaXJcIlxuICAgICAgICBbbmdDbGFzc109XCJnZXRTdHlsZUNsYXNzZXMoZ3JvdXAuYXR0cmlidXRlcywgaSlcIlxuICAgICAgPlxuICAgICAgICA8bmctY29udGFpbmVyIFtuZ1N3aXRjaF09XCJhdHRyaWJ1dGVPdmVydmlldz8udHlwZVwiPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImF0dHJpYnV0ZU92ZXJ2aWV3VHlwZS5HRU5FUkFMXCI+XG4gICAgICAgICAgICA8Y3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWF0dHJpYnV0ZVxuICAgICAgICAgICAgICBbYXR0cmlidXRlT3ZlcnZpZXddPVwiYXR0cmlidXRlT3ZlcnZpZXdcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9jeC1jb25maWd1cmF0b3Itb3ZlcnZpZXctYXR0cmlidXRlPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiYXR0cmlidXRlT3ZlcnZpZXdUeXBlLkJVTkRMRVwiPlxuICAgICAgICAgICAgPGN4LWNvbmZpZ3VyYXRvci1jcHEtb3ZlcnZpZXctYXR0cmlidXRlXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVPdmVydmlld109XCJhdHRyaWJ1dGVPdmVydmlld1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2N4LWNvbmZpZ3VyYXRvci1jcHEtb3ZlcnZpZXctYXR0cmlidXRlPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hEZWZhdWx0PlxuICAgICAgICAgICAgPGN4LWNvbmZpZ3VyYXRvci1vdmVydmlldy1hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZU92ZXJ2aWV3XT1cImF0dHJpYnV0ZU92ZXJ2aWV3XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvY3gtY29uZmlndXJhdG9yLW92ZXJ2aWV3LWF0dHJpYnV0ZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJncm91cC5zdWJHcm91cHM/Lmxlbmd0aCA+IDBcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICBncm91cHM7XG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIG92ZXJ2aWV3R3JvdXBzOiBncm91cC5zdWJHcm91cHMsXG4gICAgICAgICAgICAgIGxldmVsOiBsZXZlbCArIDEsXG4gICAgICAgICAgICAgIGlkUHJlZml4OiBnZXRQcmVmaXhJZChpZFByZWZpeCwgZ3JvdXAuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNnaG9zdEZvcm0+XG4gIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IG51bWJlciBvZiBbMCwgMSwgMl1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtZ3JvdXBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1oZWFkZXIgZ2hvc3RcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1naG9zdC1ib2R5XCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IG51bWJlciBvZiBbMCwgMSwgMiwgMywgNCwgNV1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtYXR0cmlidXRlLXZhbHVlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtdmFsdWUgZ2hvc3RcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtYXR0cmlidXRlLWxhYmVsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtbGFiZWwgZ2hvc3RcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtZ2hvc3QtYXR0cmlidXRlLXByaWNlIGdob3N0XCI+PC9kaXY+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==