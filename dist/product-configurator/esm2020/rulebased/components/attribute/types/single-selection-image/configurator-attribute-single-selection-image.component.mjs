/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { UntypedFormControl } from '@angular/forms';
import { Configurator } from '../../../../core/model/configurator.model';
import { ConfiguratorAttributeBaseComponent } from '../base/configurator-attribute-base.component';
import * as i0 from "@angular/core";
import * as i1 from "../../composition/configurator-attribute-composition.model";
import * as i2 from "../../../../core/facade/configurator-commons.service";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/common";
import * as i6 from "../../../price/configurator-price.component";
import * as i7 from "@spartacus/core";
export class ConfiguratorAttributeSingleSelectionImageComponent extends ConfiguratorAttributeBaseComponent {
    constructor(attributeComponentContext, configuratorCommonsService) {
        super();
        this.attributeComponentContext = attributeComponentContext;
        this.configuratorCommonsService = configuratorCommonsService;
        this.attributeRadioButtonForm = new UntypedFormControl('');
        this.attribute = attributeComponentContext.attribute;
        this.ownerKey = attributeComponentContext.owner.key;
        this.expMode = attributeComponentContext.expMode;
    }
    ngOnInit() {
        this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue);
    }
    /**
     * Submits a value.
     *
     * @param {string} value - Selected value
     */
    onClick(value) {
        this.configuratorCommonsService.updateConfiguration(this.ownerKey, {
            ...this.attribute,
            selectedSingleValue: value,
        }, Configurator.UpdateType.ATTRIBUTE);
    }
    extractValuePriceFormulaParameters(value) {
        return {
            price: value?.valuePrice,
            isLightedUp: value ? value.selected : false,
        };
    }
}
ConfiguratorAttributeSingleSelectionImageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorAttributeSingleSelectionImageComponent, deps: [{ token: i1.ConfiguratorAttributeCompositionContext }, { token: i2.ConfiguratorCommonsService }], target: i0.ɵɵFactoryTarget.Component });
ConfiguratorAttributeSingleSelectionImageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: ConfiguratorAttributeSingleSelectionImageComponent, selector: "cx-configurator-attribute-single-selection-image", usesInheritance: true, ngImport: i0, template: "<div\n  id=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n  class=\"cx-row\"\n  role=\"radiogroup\"\n>\n  <div\n    *ngFor=\"let value of attribute.values\"\n    id=\"{{ createAttributeValueIdForConfigurator(attribute, value.valueCode) }}\"\n    class=\"cx-configurator-select\"\n  >\n    <input\n      id=\"{{\n        createAttributeValueIdForConfigurator(attribute, value.valueCode) +\n          '-input'\n      }}\"\n      type=\"radio\"\n      class=\"form-input\"\n      [value]=\"value.valueCode\"\n      formcontrolname=\"attributeRadioButtonForm\"\n      [formControl]=\"attributeRadioButtonForm\"\n      [value]=\"value.valueCode\"\n      name=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n      attr.name=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n      [attr.required]=\"attribute.required\"\n      [attr.checked]=\"\n        attributeRadioButtonForm.value === value.valueCode ? 'checked' : null\n      \"\n      [attr.aria-checked]=\"\n        attributeRadioButtonForm.value === value.valueCode ? 'true' : 'false'\n      \"\n      [attr.aria-label]=\"\n        value.valuePrice && value.valuePrice?.value !== 0\n          ? ('configurator.a11y.valueOfAttributeFullWithPrice'\n            | cxTranslate\n              : {\n                  value: value.valueDisplay,\n                  attribute: attribute.label,\n                  price: value.valuePrice.formattedValue\n                })\n          : ('configurator.a11y.valueOfAttributeFull'\n            | cxTranslate\n              : { value: value.valueDisplay, attribute: attribute.label })\n      \"\n      [attr.aria-describedby]=\"createAttributeUiKey('label', attribute.name)\"\n      (click)=\"onClick(value.valueCode)\"\n      [cxFocus]=\"{ key: attribute.name + '-' + value.name }\"\n      role=\"radio\"\n    />\n    <div class=\"cx-label-container\">\n      <label\n        id=\"{{ createValueUiKey('label', attribute.name, value.valueCode) }}\"\n        for=\"{{\n          createAttributeValueIdForConfigurator(attribute, value.valueCode) +\n            '-input'\n        }}\"\n        aria-hidden=\"true\"\n        class=\"form-check-label form-radio-label\"\n      >\n        <img\n          *ngIf=\"getImage(value)\"\n          class=\"cx-img\"\n          src=\"{{ getImage(value)?.url }}\"\n          alt=\"{{ getImage(value)?.altText }}\"\n        />\n        <div *ngIf=\"!getImage(value)\" class=\"cx-img-dummy\"></div>\n        {{ getLabel(expMode, value.valueDisplay, value.valueCode) }}\n        <cx-configurator-price\n          [formula]=\"extractValuePriceFormulaParameters(value)\"\n        ></cx-configurator-price>\n      </label>\n    </div>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i3.FocusDirective, selector: "[cxFocus]", inputs: ["cxFocus"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.RadioControlValueAccessor, selector: "input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]", inputs: ["name", "formControlName", "value"] }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { kind: "directive", type: i4.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "directive", type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i6.ConfiguratorPriceComponent, selector: "cx-configurator-price", inputs: ["formula"] }, { kind: "pipe", type: i7.TranslatePipe, name: "cxTranslate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: ConfiguratorAttributeSingleSelectionImageComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-configurator-attribute-single-selection-image', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div\n  id=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n  class=\"cx-row\"\n  role=\"radiogroup\"\n>\n  <div\n    *ngFor=\"let value of attribute.values\"\n    id=\"{{ createAttributeValueIdForConfigurator(attribute, value.valueCode) }}\"\n    class=\"cx-configurator-select\"\n  >\n    <input\n      id=\"{{\n        createAttributeValueIdForConfigurator(attribute, value.valueCode) +\n          '-input'\n      }}\"\n      type=\"radio\"\n      class=\"form-input\"\n      [value]=\"value.valueCode\"\n      formcontrolname=\"attributeRadioButtonForm\"\n      [formControl]=\"attributeRadioButtonForm\"\n      [value]=\"value.valueCode\"\n      name=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n      attr.name=\"{{ createAttributeIdForConfigurator(attribute) }}\"\n      [attr.required]=\"attribute.required\"\n      [attr.checked]=\"\n        attributeRadioButtonForm.value === value.valueCode ? 'checked' : null\n      \"\n      [attr.aria-checked]=\"\n        attributeRadioButtonForm.value === value.valueCode ? 'true' : 'false'\n      \"\n      [attr.aria-label]=\"\n        value.valuePrice && value.valuePrice?.value !== 0\n          ? ('configurator.a11y.valueOfAttributeFullWithPrice'\n            | cxTranslate\n              : {\n                  value: value.valueDisplay,\n                  attribute: attribute.label,\n                  price: value.valuePrice.formattedValue\n                })\n          : ('configurator.a11y.valueOfAttributeFull'\n            | cxTranslate\n              : { value: value.valueDisplay, attribute: attribute.label })\n      \"\n      [attr.aria-describedby]=\"createAttributeUiKey('label', attribute.name)\"\n      (click)=\"onClick(value.valueCode)\"\n      [cxFocus]=\"{ key: attribute.name + '-' + value.name }\"\n      role=\"radio\"\n    />\n    <div class=\"cx-label-container\">\n      <label\n        id=\"{{ createValueUiKey('label', attribute.name, value.valueCode) }}\"\n        for=\"{{\n          createAttributeValueIdForConfigurator(attribute, value.valueCode) +\n            '-input'\n        }}\"\n        aria-hidden=\"true\"\n        class=\"form-check-label form-radio-label\"\n      >\n        <img\n          *ngIf=\"getImage(value)\"\n          class=\"cx-img\"\n          src=\"{{ getImage(value)?.url }}\"\n          alt=\"{{ getImage(value)?.altText }}\"\n        />\n        <div *ngIf=\"!getImage(value)\" class=\"cx-img-dummy\"></div>\n        {{ getLabel(expMode, value.valueDisplay, value.valueCode) }}\n        <cx-configurator-price\n          [formula]=\"extractValuePriceFormulaParameters(value)\"\n        ></cx-configurator-price>\n      </label>\n    </div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.ConfiguratorAttributeCompositionContext }, { type: i2.ConfiguratorCommonsService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdG9yLWF0dHJpYnV0ZS1zaW5nbGUtc2VsZWN0aW9uLWltYWdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9wcm9kdWN0LWNvbmZpZ3VyYXRvci9ydWxlYmFzZWQvY29tcG9uZW50cy9hdHRyaWJ1dGUvdHlwZXMvc2luZ2xlLXNlbGVjdGlvbi1pbWFnZS9jb25maWd1cmF0b3ItYXR0cmlidXRlLXNpbmdsZS1zZWxlY3Rpb24taW1hZ2UuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QtY29uZmlndXJhdG9yL3J1bGViYXNlZC9jb21wb25lbnRzL2F0dHJpYnV0ZS90eXBlcy9zaW5nbGUtc2VsZWN0aW9uLWltYWdlL2NvbmZpZ3VyYXRvci1hdHRyaWJ1dGUtc2luZ2xlLXNlbGVjdGlvbi1pbWFnZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUMzRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFJekUsT0FBTyxFQUFFLGtDQUFrQyxFQUFFLE1BQU0sK0NBQStDLENBQUM7Ozs7Ozs7OztBQU9uRyxNQUFNLE9BQU8sa0RBQ1gsU0FBUSxrQ0FBa0M7SUFTMUMsWUFDWSx5QkFBa0UsRUFDbEUsMEJBQXNEO1FBRWhFLEtBQUssRUFBRSxDQUFDO1FBSEUsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUF5QztRQUNsRSwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBUmxFLDZCQUF3QixHQUFHLElBQUksa0JBQWtCLENBQUMsRUFBRSxDQUFDLENBQUM7UUFXcEQsSUFBSSxDQUFDLFNBQVMsR0FBRyx5QkFBeUIsQ0FBQyxTQUFTLENBQUM7UUFDckQsSUFBSSxDQUFDLFFBQVEsR0FBRyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQ3BELElBQUksQ0FBQyxPQUFPLEdBQUcseUJBQXlCLENBQUMsT0FBTyxDQUFDO0lBQ25ELENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxPQUFPLENBQUMsS0FBYTtRQUNuQixJQUFJLENBQUMsMEJBQTBCLENBQUMsbUJBQW1CLENBQ2pELElBQUksQ0FBQyxRQUFRLEVBQ2I7WUFDRSxHQUFHLElBQUksQ0FBQyxTQUFTO1lBQ2pCLG1CQUFtQixFQUFFLEtBQUs7U0FDM0IsRUFDRCxZQUFZLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FDbEMsQ0FBQztJQUNKLENBQUM7SUFFRCxrQ0FBa0MsQ0FDaEMsS0FBMEI7UUFFMUIsT0FBTztZQUNMLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVTtZQUN4QixXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLO1NBQzVDLENBQUM7SUFDSixDQUFDOzsrSUEvQ1Usa0RBQWtEO21JQUFsRCxrREFBa0QsK0dDbkIvRCxvb0ZBeUVBOzJGRHREYSxrREFBa0Q7a0JBTDlELFNBQVM7K0JBQ0Usa0RBQWtELG1CQUUzQyx1QkFBdUIsQ0FBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBVbnR5cGVkRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0b3IgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL21vZGVsL2NvbmZpZ3VyYXRvci5tb2RlbCc7XG5pbXBvcnQgeyBDb25maWd1cmF0b3JDb21tb25zU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvZmFjYWRlL2NvbmZpZ3VyYXRvci1jb21tb25zLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uZmlndXJhdG9yQXR0cmlidXRlQ29tcG9zaXRpb25Db250ZXh0IH0gZnJvbSAnLi4vLi4vY29tcG9zaXRpb24vY29uZmlndXJhdG9yLWF0dHJpYnV0ZS1jb21wb3NpdGlvbi5tb2RlbCc7XG5pbXBvcnQgeyBDb25maWd1cmF0b3JQcmljZUNvbXBvbmVudE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9wcmljZS9jb25maWd1cmF0b3ItcHJpY2UuY29tcG9uZW50JztcbmltcG9ydCB7IENvbmZpZ3VyYXRvckF0dHJpYnV0ZUJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2NvbmZpZ3VyYXRvci1hdHRyaWJ1dGUtYmFzZS5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1jb25maWd1cmF0b3ItYXR0cmlidXRlLXNpbmdsZS1zZWxlY3Rpb24taW1hZ2UnLFxuICB0ZW1wbGF0ZVVybDogJy4vY29uZmlndXJhdG9yLWF0dHJpYnV0ZS1zaW5nbGUtc2VsZWN0aW9uLWltYWdlLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRvckF0dHJpYnV0ZVNpbmdsZVNlbGVjdGlvbkltYWdlQ29tcG9uZW50XG4gIGV4dGVuZHMgQ29uZmlndXJhdG9yQXR0cmlidXRlQmFzZUNvbXBvbmVudFxuICBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICBhdHRyaWJ1dGVSYWRpb0J1dHRvbkZvcm0gPSBuZXcgVW50eXBlZEZvcm1Db250cm9sKCcnKTtcblxuICBhdHRyaWJ1dGU6IENvbmZpZ3VyYXRvci5BdHRyaWJ1dGU7XG4gIG93bmVyS2V5OiBzdHJpbmc7XG4gIGV4cE1vZGU6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGF0dHJpYnV0ZUNvbXBvbmVudENvbnRleHQ6IENvbmZpZ3VyYXRvckF0dHJpYnV0ZUNvbXBvc2l0aW9uQ29udGV4dCxcbiAgICBwcm90ZWN0ZWQgY29uZmlndXJhdG9yQ29tbW9uc1NlcnZpY2U6IENvbmZpZ3VyYXRvckNvbW1vbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGVDb21wb25lbnRDb250ZXh0LmF0dHJpYnV0ZTtcbiAgICB0aGlzLm93bmVyS2V5ID0gYXR0cmlidXRlQ29tcG9uZW50Q29udGV4dC5vd25lci5rZXk7XG4gICAgdGhpcy5leHBNb2RlID0gYXR0cmlidXRlQ29tcG9uZW50Q29udGV4dC5leHBNb2RlO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5hdHRyaWJ1dGVSYWRpb0J1dHRvbkZvcm0uc2V0VmFsdWUodGhpcy5hdHRyaWJ1dGUuc2VsZWN0ZWRTaW5nbGVWYWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU3VibWl0cyBhIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBTZWxlY3RlZCB2YWx1ZVxuICAgKi9cbiAgb25DbGljayh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jb25maWd1cmF0b3JDb21tb25zU2VydmljZS51cGRhdGVDb25maWd1cmF0aW9uKFxuICAgICAgdGhpcy5vd25lcktleSxcbiAgICAgIHtcbiAgICAgICAgLi4udGhpcy5hdHRyaWJ1dGUsXG4gICAgICAgIHNlbGVjdGVkU2luZ2xlVmFsdWU6IHZhbHVlLFxuICAgICAgfSxcbiAgICAgIENvbmZpZ3VyYXRvci5VcGRhdGVUeXBlLkFUVFJJQlVURVxuICAgICk7XG4gIH1cblxuICBleHRyYWN0VmFsdWVQcmljZUZvcm11bGFQYXJhbWV0ZXJzKFxuICAgIHZhbHVlPzogQ29uZmlndXJhdG9yLlZhbHVlXG4gICk6IENvbmZpZ3VyYXRvclByaWNlQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByaWNlOiB2YWx1ZT8udmFsdWVQcmljZSxcbiAgICAgIGlzTGlnaHRlZFVwOiB2YWx1ZSA/IHZhbHVlLnNlbGVjdGVkIDogZmFsc2UsXG4gICAgfTtcbiAgfVxufVxuIiwiPGRpdlxuICBpZD1cInt7IGNyZWF0ZUF0dHJpYnV0ZUlkRm9yQ29uZmlndXJhdG9yKGF0dHJpYnV0ZSkgfX1cIlxuICBjbGFzcz1cImN4LXJvd1wiXG4gIHJvbGU9XCJyYWRpb2dyb3VwXCJcbj5cbiAgPGRpdlxuICAgICpuZ0Zvcj1cImxldCB2YWx1ZSBvZiBhdHRyaWJ1dGUudmFsdWVzXCJcbiAgICBpZD1cInt7IGNyZWF0ZUF0dHJpYnV0ZVZhbHVlSWRGb3JDb25maWd1cmF0b3IoYXR0cmlidXRlLCB2YWx1ZS52YWx1ZUNvZGUpIH19XCJcbiAgICBjbGFzcz1cImN4LWNvbmZpZ3VyYXRvci1zZWxlY3RcIlxuICA+XG4gICAgPGlucHV0XG4gICAgICBpZD1cInt7XG4gICAgICAgIGNyZWF0ZUF0dHJpYnV0ZVZhbHVlSWRGb3JDb25maWd1cmF0b3IoYXR0cmlidXRlLCB2YWx1ZS52YWx1ZUNvZGUpICtcbiAgICAgICAgICAnLWlucHV0J1xuICAgICAgfX1cIlxuICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgIGNsYXNzPVwiZm9ybS1pbnB1dFwiXG4gICAgICBbdmFsdWVdPVwidmFsdWUudmFsdWVDb2RlXCJcbiAgICAgIGZvcm1jb250cm9sbmFtZT1cImF0dHJpYnV0ZVJhZGlvQnV0dG9uRm9ybVwiXG4gICAgICBbZm9ybUNvbnRyb2xdPVwiYXR0cmlidXRlUmFkaW9CdXR0b25Gb3JtXCJcbiAgICAgIFt2YWx1ZV09XCJ2YWx1ZS52YWx1ZUNvZGVcIlxuICAgICAgbmFtZT1cInt7IGNyZWF0ZUF0dHJpYnV0ZUlkRm9yQ29uZmlndXJhdG9yKGF0dHJpYnV0ZSkgfX1cIlxuICAgICAgYXR0ci5uYW1lPVwie3sgY3JlYXRlQXR0cmlidXRlSWRGb3JDb25maWd1cmF0b3IoYXR0cmlidXRlKSB9fVwiXG4gICAgICBbYXR0ci5yZXF1aXJlZF09XCJhdHRyaWJ1dGUucmVxdWlyZWRcIlxuICAgICAgW2F0dHIuY2hlY2tlZF09XCJcbiAgICAgICAgYXR0cmlidXRlUmFkaW9CdXR0b25Gb3JtLnZhbHVlID09PSB2YWx1ZS52YWx1ZUNvZGUgPyAnY2hlY2tlZCcgOiBudWxsXG4gICAgICBcIlxuICAgICAgW2F0dHIuYXJpYS1jaGVja2VkXT1cIlxuICAgICAgICBhdHRyaWJ1dGVSYWRpb0J1dHRvbkZvcm0udmFsdWUgPT09IHZhbHVlLnZhbHVlQ29kZSA/ICd0cnVlJyA6ICdmYWxzZSdcbiAgICAgIFwiXG4gICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIlxuICAgICAgICB2YWx1ZS52YWx1ZVByaWNlICYmIHZhbHVlLnZhbHVlUHJpY2U/LnZhbHVlICE9PSAwXG4gICAgICAgICAgPyAoJ2NvbmZpZ3VyYXRvci5hMTF5LnZhbHVlT2ZBdHRyaWJ1dGVGdWxsV2l0aFByaWNlJ1xuICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZURpc3BsYXksXG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6IGF0dHJpYnV0ZS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHByaWNlOiB2YWx1ZS52YWx1ZVByaWNlLmZvcm1hdHRlZFZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICA6ICgnY29uZmlndXJhdG9yLmExMXkudmFsdWVPZkF0dHJpYnV0ZUZ1bGwnXG4gICAgICAgICAgICB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgIDogeyB2YWx1ZTogdmFsdWUudmFsdWVEaXNwbGF5LCBhdHRyaWJ1dGU6IGF0dHJpYnV0ZS5sYWJlbCB9KVxuICAgICAgXCJcbiAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiY3JlYXRlQXR0cmlidXRlVWlLZXkoJ2xhYmVsJywgYXR0cmlidXRlLm5hbWUpXCJcbiAgICAgIChjbGljayk9XCJvbkNsaWNrKHZhbHVlLnZhbHVlQ29kZSlcIlxuICAgICAgW2N4Rm9jdXNdPVwieyBrZXk6IGF0dHJpYnV0ZS5uYW1lICsgJy0nICsgdmFsdWUubmFtZSB9XCJcbiAgICAgIHJvbGU9XCJyYWRpb1wiXG4gICAgLz5cbiAgICA8ZGl2IGNsYXNzPVwiY3gtbGFiZWwtY29udGFpbmVyXCI+XG4gICAgICA8bGFiZWxcbiAgICAgICAgaWQ9XCJ7eyBjcmVhdGVWYWx1ZVVpS2V5KCdsYWJlbCcsIGF0dHJpYnV0ZS5uYW1lLCB2YWx1ZS52YWx1ZUNvZGUpIH19XCJcbiAgICAgICAgZm9yPVwie3tcbiAgICAgICAgICBjcmVhdGVBdHRyaWJ1dGVWYWx1ZUlkRm9yQ29uZmlndXJhdG9yKGF0dHJpYnV0ZSwgdmFsdWUudmFsdWVDb2RlKSArXG4gICAgICAgICAgICAnLWlucHV0J1xuICAgICAgICB9fVwiXG4gICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbCBmb3JtLXJhZGlvLWxhYmVsXCJcbiAgICAgID5cbiAgICAgICAgPGltZ1xuICAgICAgICAgICpuZ0lmPVwiZ2V0SW1hZ2UodmFsdWUpXCJcbiAgICAgICAgICBjbGFzcz1cImN4LWltZ1wiXG4gICAgICAgICAgc3JjPVwie3sgZ2V0SW1hZ2UodmFsdWUpPy51cmwgfX1cIlxuICAgICAgICAgIGFsdD1cInt7IGdldEltYWdlKHZhbHVlKT8uYWx0VGV4dCB9fVwiXG4gICAgICAgIC8+XG4gICAgICAgIDxkaXYgKm5nSWY9XCIhZ2V0SW1hZ2UodmFsdWUpXCIgY2xhc3M9XCJjeC1pbWctZHVtbXlcIj48L2Rpdj5cbiAgICAgICAge3sgZ2V0TGFiZWwoZXhwTW9kZSwgdmFsdWUudmFsdWVEaXNwbGF5LCB2YWx1ZS52YWx1ZUNvZGUpIH19XG4gICAgICAgIDxjeC1jb25maWd1cmF0b3ItcHJpY2VcbiAgICAgICAgICBbZm9ybXVsYV09XCJleHRyYWN0VmFsdWVQcmljZUZvcm11bGFQYXJhbWV0ZXJzKHZhbHVlKVwiXG4gICAgICAgID48L2N4LWNvbmZpZ3VyYXRvci1wcmljZT5cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=