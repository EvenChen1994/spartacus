/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Injectable } from '@angular/core';
import { Configurator, } from '@spartacus/product-configurator/rulebased';
import { of } from 'rxjs';
import { map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "./cpq-configurator-occ.service";
export class CpqConfiguratorOccAdapter {
    constructor(cpqOccService) {
        this.cpqOccService = cpqOccService;
    }
    getConfiguratorType() {
        return "CLOUDCPQCONFIGURATOR" /* ConfiguratorType.CPQ */;
    }
    supportsCpqOverOcc() {
        return true;
    }
    createConfiguration(owner) {
        // no error handling for missing owner id needed, as it's a
        // mandatory attribute in owner
        return this.cpqOccService.createConfiguration(owner.id).pipe(map((configResponse) => {
            configResponse.owner = owner;
            return configResponse;
        }));
    }
    readConfiguration(configId, groupId, owner) {
        return this.cpqOccService.readConfiguration(configId, groupId).pipe(map((configResponse) => {
            configResponse.owner = owner;
            return configResponse;
        }));
    }
    updateConfiguration(configuration) {
        const updateMethod = configuration.updateType === Configurator.UpdateType.VALUE_QUANTITY
            ? this.cpqOccService.updateValueQuantity
            : this.cpqOccService.updateAttribute;
        return updateMethod.call(this.cpqOccService, configuration).pipe(map((configResponse) => {
            configResponse.owner = configuration.owner;
            return configResponse;
        }));
    }
    updateConfigurationOverview() {
        throw new Error('Update the configuration overview is not supported for the CPQ configurator');
    }
    addToCart(parameters) {
        return this.cpqOccService.addToCart(parameters);
    }
    readConfigurationForCartEntry(parameters) {
        return this.cpqOccService.readConfigurationForCartEntry(parameters).pipe(map((configResponse) => {
            configResponse.owner = parameters.owner;
            return configResponse;
        }));
    }
    updateConfigurationForCartEntry(parameters) {
        return this.cpqOccService.updateCartEntry(parameters);
    }
    readConfigurationForOrderEntry(parameters) {
        return this.cpqOccService.readConfigurationForOrderEntry(parameters).pipe(map((configResponse) => {
            configResponse.owner = parameters.owner;
            return configResponse;
        }));
    }
    readPriceSummary(configuration) {
        return of(configuration); // so that UI does not run into exception
    }
    getConfigurationOverview(configId) {
        return this.cpqOccService.readConfigurationOverview(configId);
    }
    searchVariants() {
        throw new Error('searchVariants is not supported for the CPQ configurator');
    }
}
CpqConfiguratorOccAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CpqConfiguratorOccAdapter, deps: [{ token: i1.CpqConfiguratorOccService }], target: i0.ɵɵFactoryTarget.Injectable });
CpqConfiguratorOccAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CpqConfiguratorOccAdapter });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CpqConfiguratorOccAdapter, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.CpqConfiguratorOccService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3BxLWNvbmZpZ3VyYXRvci1vY2MuYWRhcHRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9wcm9kdWN0LWNvbmZpZ3VyYXRvci9ydWxlYmFzZWQvY3BxL29jYy9jcHEtY29uZmlndXJhdG9yLW9jYy5hZGFwdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBTTNDLE9BQU8sRUFDTCxZQUFZLEdBRWIsTUFBTSwyQ0FBMkMsQ0FBQztBQUNuRCxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7O0FBSXJDLE1BQU0sT0FBTyx5QkFBeUI7SUFDcEMsWUFBc0IsYUFBd0M7UUFBeEMsa0JBQWEsR0FBYixhQUFhLENBQTJCO0lBQUcsQ0FBQztJQUVsRSxtQkFBbUI7UUFDakIseURBQTRCO0lBQzlCLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsbUJBQW1CLENBQ2pCLEtBQStCO1FBRS9CLDJEQUEyRDtRQUMzRCwrQkFBK0I7UUFDL0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQzFELEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFO1lBQ3JCLGNBQWMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQzdCLE9BQU8sY0FBYyxDQUFDO1FBQ3hCLENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRUQsaUJBQWlCLENBQ2YsUUFBZ0IsRUFDaEIsT0FBZSxFQUNmLEtBQStCO1FBRS9CLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUNqRSxHQUFHLENBQUMsQ0FBQyxjQUFjLEVBQUUsRUFBRTtZQUNyQixjQUFjLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUM3QixPQUFPLGNBQWMsQ0FBQztRQUN4QixDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVELG1CQUFtQixDQUNqQixhQUF5QztRQUV6QyxNQUFNLFlBQVksR0FDaEIsYUFBYSxDQUFDLFVBQVUsS0FBSyxZQUFZLENBQUMsVUFBVSxDQUFDLGNBQWM7WUFDakUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsbUJBQW1CO1lBQ3hDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQztRQUN6QyxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQzlELEdBQUcsQ0FBQyxDQUFDLGNBQTBDLEVBQUUsRUFBRTtZQUNqRCxjQUFjLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUM7WUFDM0MsT0FBTyxjQUFjLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7SUFFRCwyQkFBMkI7UUFDekIsTUFBTSxJQUFJLEtBQUssQ0FDYiw2RUFBNkUsQ0FDOUUsQ0FBQztJQUNKLENBQUM7SUFFRCxTQUFTLENBQ1AsVUFBNEM7UUFFNUMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRUQsNkJBQTZCLENBQzNCLFVBQXVFO1FBRXZFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyw2QkFBNkIsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQ3RFLEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFO1lBQ3JCLGNBQWMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUN4QyxPQUFPLGNBQWMsQ0FBQztRQUN4QixDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVELCtCQUErQixDQUM3QixVQUFrRTtRQUVsRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCw4QkFBOEIsQ0FDNUIsVUFBd0U7UUFFeEUsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLDhCQUE4QixDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FDdkUsR0FBRyxDQUFDLENBQUMsY0FBYyxFQUFFLEVBQUU7WUFDckIsY0FBYyxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDO1lBQ3hDLE9BQU8sY0FBYyxDQUFDO1FBQ3hCLENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRUQsZ0JBQWdCLENBQ2QsYUFBeUM7UUFFekMsT0FBTyxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyx5Q0FBeUM7SUFDckUsQ0FBQztJQUVELHdCQUF3QixDQUN0QixRQUFnQjtRQUVoQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMseUJBQXlCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELGNBQWM7UUFDWixNQUFNLElBQUksS0FBSyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7SUFDOUUsQ0FBQzs7c0hBMUdVLHlCQUF5QjswSEFBekIseUJBQXlCOzJGQUF6Qix5QkFBeUI7a0JBRHJDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDYXJ0TW9kaWZpY2F0aW9uIH0gZnJvbSAnQHNwYXJ0YWN1cy9jYXJ0L2Jhc2Uvcm9vdCc7XG5pbXBvcnQge1xuICBDb21tb25Db25maWd1cmF0b3IsXG4gIENvbmZpZ3VyYXRvclR5cGUsXG59IGZyb20gJ0BzcGFydGFjdXMvcHJvZHVjdC1jb25maWd1cmF0b3IvY29tbW9uJztcbmltcG9ydCB7XG4gIENvbmZpZ3VyYXRvcixcbiAgUnVsZWJhc2VkQ29uZmlndXJhdG9yQWRhcHRlcixcbn0gZnJvbSAnQHNwYXJ0YWN1cy9wcm9kdWN0LWNvbmZpZ3VyYXRvci9ydWxlYmFzZWQnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENwcUNvbmZpZ3VyYXRvck9jY1NlcnZpY2UgfSBmcm9tICcuL2NwcS1jb25maWd1cmF0b3Itb2NjLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ3BxQ29uZmlndXJhdG9yT2NjQWRhcHRlciBpbXBsZW1lbnRzIFJ1bGViYXNlZENvbmZpZ3VyYXRvckFkYXB0ZXIge1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY3BxT2NjU2VydmljZTogQ3BxQ29uZmlndXJhdG9yT2NjU2VydmljZSkge31cblxuICBnZXRDb25maWd1cmF0b3JUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIENvbmZpZ3VyYXRvclR5cGUuQ1BRO1xuICB9XG5cbiAgc3VwcG9ydHNDcHFPdmVyT2NjKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY3JlYXRlQ29uZmlndXJhdGlvbihcbiAgICBvd25lcjogQ29tbW9uQ29uZmlndXJhdG9yLk93bmVyXG4gICk6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb24+IHtcbiAgICAvLyBubyBlcnJvciBoYW5kbGluZyBmb3IgbWlzc2luZyBvd25lciBpZCBuZWVkZWQsIGFzIGl0J3MgYVxuICAgIC8vIG1hbmRhdG9yeSBhdHRyaWJ1dGUgaW4gb3duZXJcbiAgICByZXR1cm4gdGhpcy5jcHFPY2NTZXJ2aWNlLmNyZWF0ZUNvbmZpZ3VyYXRpb24ob3duZXIuaWQpLnBpcGUoXG4gICAgICBtYXAoKGNvbmZpZ1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbmZpZ1Jlc3BvbnNlLm93bmVyID0gb3duZXI7XG4gICAgICAgIHJldHVybiBjb25maWdSZXNwb25zZTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJlYWRDb25maWd1cmF0aW9uKFxuICAgIGNvbmZpZ0lkOiBzdHJpbmcsXG4gICAgZ3JvdXBJZDogc3RyaW5nLFxuICAgIG93bmVyOiBDb21tb25Db25maWd1cmF0b3IuT3duZXJcbiAgKTogT2JzZXJ2YWJsZTxDb25maWd1cmF0b3IuQ29uZmlndXJhdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLmNwcU9jY1NlcnZpY2UucmVhZENvbmZpZ3VyYXRpb24oY29uZmlnSWQsIGdyb3VwSWQpLnBpcGUoXG4gICAgICBtYXAoKGNvbmZpZ1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbmZpZ1Jlc3BvbnNlLm93bmVyID0gb3duZXI7XG4gICAgICAgIHJldHVybiBjb25maWdSZXNwb25zZTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb24oXG4gICAgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb25cbiAgKTogT2JzZXJ2YWJsZTxDb25maWd1cmF0b3IuQ29uZmlndXJhdGlvbj4ge1xuICAgIGNvbnN0IHVwZGF0ZU1ldGhvZCA9XG4gICAgICBjb25maWd1cmF0aW9uLnVwZGF0ZVR5cGUgPT09IENvbmZpZ3VyYXRvci5VcGRhdGVUeXBlLlZBTFVFX1FVQU5USVRZXG4gICAgICAgID8gdGhpcy5jcHFPY2NTZXJ2aWNlLnVwZGF0ZVZhbHVlUXVhbnRpdHlcbiAgICAgICAgOiB0aGlzLmNwcU9jY1NlcnZpY2UudXBkYXRlQXR0cmlidXRlO1xuICAgIHJldHVybiB1cGRhdGVNZXRob2QuY2FsbCh0aGlzLmNwcU9jY1NlcnZpY2UsIGNvbmZpZ3VyYXRpb24pLnBpcGUoXG4gICAgICBtYXAoKGNvbmZpZ1Jlc3BvbnNlOiBDb25maWd1cmF0b3IuQ29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgICBjb25maWdSZXNwb25zZS5vd25lciA9IGNvbmZpZ3VyYXRpb24ub3duZXI7XG4gICAgICAgIHJldHVybiBjb25maWdSZXNwb25zZTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb25PdmVydmlldygpOiBPYnNlcnZhYmxlPENvbmZpZ3VyYXRvci5PdmVydmlldz4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdVcGRhdGUgdGhlIGNvbmZpZ3VyYXRpb24gb3ZlcnZpZXcgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIENQUSBjb25maWd1cmF0b3InXG4gICAgKTtcbiAgfVxuXG4gIGFkZFRvQ2FydChcbiAgICBwYXJhbWV0ZXJzOiBDb25maWd1cmF0b3IuQWRkVG9DYXJ0UGFyYW1ldGVyc1xuICApOiBPYnNlcnZhYmxlPENhcnRNb2RpZmljYXRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5jcHFPY2NTZXJ2aWNlLmFkZFRvQ2FydChwYXJhbWV0ZXJzKTtcbiAgfVxuXG4gIHJlYWRDb25maWd1cmF0aW9uRm9yQ2FydEVudHJ5KFxuICAgIHBhcmFtZXRlcnM6IENvbW1vbkNvbmZpZ3VyYXRvci5SZWFkQ29uZmlndXJhdGlvbkZyb21DYXJ0RW50cnlQYXJhbWV0ZXJzXG4gICk6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5jcHFPY2NTZXJ2aWNlLnJlYWRDb25maWd1cmF0aW9uRm9yQ2FydEVudHJ5KHBhcmFtZXRlcnMpLnBpcGUoXG4gICAgICBtYXAoKGNvbmZpZ1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbmZpZ1Jlc3BvbnNlLm93bmVyID0gcGFyYW1ldGVycy5vd25lcjtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ1Jlc3BvbnNlO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlQ29uZmlndXJhdGlvbkZvckNhcnRFbnRyeShcbiAgICBwYXJhbWV0ZXJzOiBDb25maWd1cmF0b3IuVXBkYXRlQ29uZmlndXJhdGlvbkZvckNhcnRFbnRyeVBhcmFtZXRlcnNcbiAgKTogT2JzZXJ2YWJsZTxDYXJ0TW9kaWZpY2F0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMuY3BxT2NjU2VydmljZS51cGRhdGVDYXJ0RW50cnkocGFyYW1ldGVycyk7XG4gIH1cblxuICByZWFkQ29uZmlndXJhdGlvbkZvck9yZGVyRW50cnkoXG4gICAgcGFyYW1ldGVyczogQ29tbW9uQ29uZmlndXJhdG9yLlJlYWRDb25maWd1cmF0aW9uRnJvbU9yZGVyRW50cnlQYXJhbWV0ZXJzXG4gICk6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5jcHFPY2NTZXJ2aWNlLnJlYWRDb25maWd1cmF0aW9uRm9yT3JkZXJFbnRyeShwYXJhbWV0ZXJzKS5waXBlKFxuICAgICAgbWFwKChjb25maWdSZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25maWdSZXNwb25zZS5vd25lciA9IHBhcmFtZXRlcnMub3duZXI7XG4gICAgICAgIHJldHVybiBjb25maWdSZXNwb25zZTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJlYWRQcmljZVN1bW1hcnkoXG4gICAgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdG9yLkNvbmZpZ3VyYXRpb25cbiAgKTogT2JzZXJ2YWJsZTxDb25maWd1cmF0b3IuQ29uZmlndXJhdGlvbj4ge1xuICAgIHJldHVybiBvZihjb25maWd1cmF0aW9uKTsgLy8gc28gdGhhdCBVSSBkb2VzIG5vdCBydW4gaW50byBleGNlcHRpb25cbiAgfVxuXG4gIGdldENvbmZpZ3VyYXRpb25PdmVydmlldyhcbiAgICBjb25maWdJZDogc3RyaW5nXG4gICk6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLk92ZXJ2aWV3PiB7XG4gICAgcmV0dXJuIHRoaXMuY3BxT2NjU2VydmljZS5yZWFkQ29uZmlndXJhdGlvbk92ZXJ2aWV3KGNvbmZpZ0lkKTtcbiAgfVxuXG4gIHNlYXJjaFZhcmlhbnRzKCk6IE9ic2VydmFibGU8Q29uZmlndXJhdG9yLlZhcmlhbnRbXT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignc2VhcmNoVmFyaWFudHMgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIENQUSBjb25maWd1cmF0b3InKTtcbiAgfVxufVxuIl19