"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=386,exports.ids=[386],exports.modules={51386:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomerTicketingModule:()=>CustomerTicketingModule});var core=__webpack_require__(40305),fesm2020_forms=__webpack_require__(43070),spartacus_core=__webpack_require__(46167),spartacus_storefront=__webpack_require__(25907),Subscription=__webpack_require__(31765),BehaviorSubject=__webpack_require__(60403),of=__webpack_require__(95202),combineLatest=__webpack_require__(20085),map=__webpack_require__(86466),take=__webpack_require__(95426),catchError=__webpack_require__(2155),first=__webpack_require__(54473),tap=__webpack_require__(85171),filter=__webpack_require__(2026),spartacus_customer_ticketing_root=__webpack_require__(5703),common=__webpack_require__(89318),router=__webpack_require__(9664);const _c0=["element"];function CustomerTicketingCloseComponent_div_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",1)(1,"button",2,3),core.NdJ("click",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.openDialog())},"CustomerTicketingCloseComponent_div_0_Template_button_click_1_listener")),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()()}2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,1,"customerTicketingDetails.closeRequest")," "))}function CustomerTicketingCloseDialogComponent_cx_spinner_28_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",17)}__name(CustomerTicketingCloseComponent_div_0_Template,"CustomerTicketingCloseComponent_div_0_Template"),__name(CustomerTicketingCloseDialogComponent_cx_spinner_28_Template,"CustomerTicketingCloseDialogComponent_cx_spinner_28_Template");const _c1=__name(function(a0){return{count:a0}},"_c1");function CustomerTicketingCreateDialogComponent_label_21_option_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",24),core._uU(1),core.qZA()),2&rf){const category_r5=ctx.$implicit,ctx_r4=core.oxw(2);core.Q6J("ngValue",category_r5)("selected",category_r5.id===(null==ctx_r4.selectedCategory?null:ctx_r4.selectedCategory.id)),core.xp6(1),core.hij(" ",category_r5.name," ")}}function CustomerTicketingCreateDialogComponent_label_21_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label")(1,"span",9),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"select",21)(5,"option",22),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA(),core.YNc(8,CustomerTicketingCreateDialogComponent_label_21_option_8_Template,2,3,"option",23),core.qZA(),core._UZ(9,"cx-form-errors",11),core.qZA()),2&rf){const ticketCategories_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(2),core.hij(" ",core.lcZ(3,4,"createCustomerTicket.category")," "),core.xp6(4),core.hij(" ",core.lcZ(7,6,"createCustomerTicket.selectCategory")," "),core.xp6(2),core.Q6J("ngForOf",ticketCategories_r3),core.xp6(1),core.Q6J("control",ctx_r0.form.get("ticketCategory"))}}function CustomerTicketingCreateDialogComponent_ng_container_23_label_1_option_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",24),core._uU(1),core.qZA()),2&rf){const associatedObject_r9=ctx.$implicit,ctx_r8=core.oxw(3);core.Q6J("ngValue",associatedObject_r9)("selected",associatedObject_r9.code===(null==ctx_r8.selectedAssociatedObject?null:ctx_r8.selectedAssociatedObject.code)),core.xp6(1),core.AsE(" ",associatedObject_r9.type," ",associatedObject_r9.code," ")}}function CustomerTicketingCreateDialogComponent_ng_container_23_label_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label")(1,"span",9),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"select",25)(5,"option",22),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA(),core.YNc(8,CustomerTicketingCreateDialogComponent_ng_container_23_label_1_option_8_Template,2,4,"option",23),core.qZA()()),2&rf){const ticketAssociatedObjects_r6=core.oxw().ngIf;core.xp6(2),core.hij(" ",core.lcZ(3,3,"createCustomerTicket.associateTo")," "),core.xp6(4),core.hij(" ",core.lcZ(7,5,"createCustomerTicket.optionallySelectAssociatedObject")," "),core.xp6(2),core.Q6J("ngForOf",ticketAssociatedObjects_r6)}}function CustomerTicketingCreateDialogComponent_ng_container_23_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerTicketingCreateDialogComponent_ng_container_23_label_1_Template,9,7,"label",13),core.BQk()),2&rf){const ticketAssociatedObjects_r6=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",ticketAssociatedObjects_r6.length>0)}}function CustomerTicketingCreateDialogComponent_ng_template_36_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-icon",6),core.TgZ(1,"span",26),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw();core.Q6J("type",ctx_r2.iconTypes.UPLOAD),core.xp6(2),core.Oqu(core.lcZ(3,2,"customerTicketing.uploadFile"))}}function CustomerTicketingReopenDialogComponent_ng_template_23_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-icon",6),core.TgZ(1,"span",20),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r0=core.oxw();core.Q6J("type",ctx_r0.iconTypes.UPLOAD),core.xp6(2),core.Oqu(core.lcZ(3,2,"customerTicketing.uploadFile"))}}function CustomerTicketingReopenDialogComponent_cx_spinner_38_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",21)}__name(CustomerTicketingCreateDialogComponent_label_21_option_8_Template,"CustomerTicketingCreateDialogComponent_label_21_option_8_Template"),__name(CustomerTicketingCreateDialogComponent_label_21_Template,"CustomerTicketingCreateDialogComponent_label_21_Template"),__name(CustomerTicketingCreateDialogComponent_ng_container_23_label_1_option_8_Template,"CustomerTicketingCreateDialogComponent_ng_container_23_label_1_option_8_Template"),__name(CustomerTicketingCreateDialogComponent_ng_container_23_label_1_Template,"CustomerTicketingCreateDialogComponent_ng_container_23_label_1_Template"),__name(CustomerTicketingCreateDialogComponent_ng_container_23_Template,"CustomerTicketingCreateDialogComponent_ng_container_23_Template"),__name(CustomerTicketingCreateDialogComponent_ng_template_36_Template,"CustomerTicketingCreateDialogComponent_ng_template_36_Template"),__name(CustomerTicketingReopenDialogComponent_ng_template_23_Template,"CustomerTicketingReopenDialogComponent_ng_template_23_Template"),__name(CustomerTicketingReopenDialogComponent_cx_spinner_38_Template,"CustomerTicketingReopenDialogComponent_cx_spinner_38_Template");const _c2=__name(function(a0){return{ticketCode:a0}},"_c2"),_c3=__name(function(a1){return{cxRoute:"supportTicketDetails",params:a1}},"_c3");function CustomerTicketingListComponent_ng_container_0_ng_container_5_tr_33_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"tr",14),core.NdJ("click",__name(function(){const ticket_r9=core.CHM(_r11).$implicit,ctx_r10=core.oxw(3);return core.KtG(ctx_r10.goToTicketDetail(ticket_r9.id))},"CustomerTicketingListComponent_ng_container_0_ng_container_5_tr_33_Template_tr_click_0_listener")),core.TgZ(1,"td",15)(2,"div",16),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"a",17),core.ALo(6,"cxUrl"),core._uU(7),core.qZA()(),core.TgZ(8,"td",18)(9,"div",16),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA(),core.TgZ(12,"a",17),core.ALo(13,"cxUrl"),core._uU(14),core.qZA()(),core.TgZ(15,"td",18)(16,"div",16),core._uU(17),core.ALo(18,"cxTranslate"),core.qZA(),core.TgZ(19,"a",17),core.ALo(20,"cxUrl"),core._uU(21),core.qZA()(),core.TgZ(22,"td",18)(23,"div",16),core._uU(24),core.ALo(25,"cxTranslate"),core.qZA(),core.TgZ(26,"a",17),core.ALo(27,"cxUrl"),core._uU(28),core.ALo(29,"cxDate"),core.qZA()(),core.TgZ(30,"td",18)(31,"div",16),core._uU(32),core.ALo(33,"cxTranslate"),core.qZA(),core.TgZ(34,"a",17),core.ALo(35,"cxUrl"),core._uU(36),core.ALo(37,"cxDate"),core.qZA()(),core.TgZ(38,"td",18)(39,"div",16),core._uU(40),core.ALo(41,"cxTranslate"),core.qZA(),core.TgZ(42,"a",19),core.ALo(43,"cxUrl"),core._uU(44),core.qZA()()()}if(2&rf){const ticket_r9=ctx.$implicit,ctx_r7=core.oxw(3);core.xp6(3),core.hij(" ",core.lcZ(4,19,"customerTicketingList.mobile.ticketIdFull")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(6,21,core.VKq(49,_c3,core.VKq(47,_c2,ticket_r9.id)))),core.xp6(2),core.hij(" ",ticket_r9.id," "),core.xp6(3),core.hij(" ",core.lcZ(11,23,"customerTicketingList.subject")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(13,25,core.VKq(53,_c3,core.VKq(51,_c2,ticket_r9.id)))),core.xp6(2),core.hij(" ",ticket_r9.subject," "),core.xp6(3),core.hij(" ",core.lcZ(18,27,"customerTicketingList.ticketCategory")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(20,29,core.VKq(57,_c3,core.VKq(55,_c2,ticket_r9.id)))),core.xp6(2),core.hij(" ",null==ticket_r9.ticketCategory?null:ticket_r9.ticketCategory.name," "),core.xp6(3),core.hij(" ",core.lcZ(25,31,"customerTicketing.createdOn")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(27,33,core.VKq(61,_c3,core.VKq(59,_c2,ticket_r9.id)))),core.xp6(2),core.hij(" ",core.lcZ(29,35,ticket_r9.createdAt)," "),core.xp6(4),core.hij(" ",core.lcZ(33,37,"customerTicketing.changedOn")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(35,39,core.VKq(65,_c3,core.VKq(63,_c2,ticket_r9.id)))),core.xp6(2),core.hij(" ",core.lcZ(37,41,ticket_r9.modifiedAt)," "),core.xp6(4),core.hij(" ",core.lcZ(41,43,"customerTicketing.status")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(43,45,core.VKq(69,_c3,core.VKq(67,_c2,ticket_r9.id))))("ngClass",ctx_r7.getStatusClass(ticket_r9.status.id)),core.xp6(2),core.hij(" ",null==ticket_r9.status?null:ticket_r9.status.name," ")}}function CustomerTicketingListComponent_ng_container_0_ng_container_5_div_35_Template(rf,ctx){if(1&rf){const _r13=core.EpF();core.TgZ(0,"div",20)(1,"cx-pagination",21),core.NdJ("viewPageEvent",__name(function($event){core.CHM(_r13);const ctx_r12=core.oxw(3);return core.KtG(ctx_r12.pageChange($event))},"CustomerTicketingListComponent_ng_container_0_ng_container_5_div_35_Template_cx_pagination_viewPageEvent_1_listener")),core.qZA()()}if(2&rf){const ticketList_r3=core.oxw(2).ngIf;core.xp6(1),core.Q6J("pagination",ticketList_r3.pagination)}}function CustomerTicketingListComponent_ng_container_0_ng_container_5_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.ynx(0),core.TgZ(1,"div",5)(2,"label",6)(3,"span"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"cx-sorting",7),core.NdJ("sortListEvent",__name(function($event){core.CHM(_r16);const ctx_r15=core.oxw(2);return core.KtG(ctx_r15.changeSortCode($event))},"CustomerTicketingListComponent_ng_container_0_ng_container_5_Template_cx_sorting_sortListEvent_6_listener")),core.ALo(7,"async"),core.ALo(8,"cxTranslate"),core.ALo(9,"cxTranslate"),core.qZA()(),core._UZ(10,"cx-customer-ticketing-create"),core.qZA(),core.TgZ(11,"table",8)(12,"thead",9)(13,"tr")(14,"th",10),core._uU(15),core.ALo(16,"cxTranslate"),core.qZA(),core.TgZ(17,"th",10),core._uU(18),core.ALo(19,"cxTranslate"),core.qZA(),core.TgZ(20,"th",10),core._uU(21),core.ALo(22,"cxTranslate"),core.qZA(),core.TgZ(23,"th",10),core._uU(24),core.ALo(25,"cxTranslate"),core.qZA(),core.TgZ(26,"th",10),core._uU(27),core.ALo(28,"cxTranslate"),core.qZA(),core.TgZ(29,"th",10),core._uU(30),core.ALo(31,"cxTranslate"),core.qZA()()(),core.TgZ(32,"tbody"),core.YNc(33,CustomerTicketingListComponent_ng_container_0_ng_container_5_tr_33_Template,45,71,"tr",11),core.qZA()(),core.TgZ(34,"div",12),core.YNc(35,CustomerTicketingListComponent_ng_container_0_ng_container_5_div_35_Template,2,1,"div",13),core.qZA(),core.BQk()}if(2&rf){const ticketList_r3=core.oxw().ngIf,ctx_r4=core.oxw();core.xp6(4),core.hij(" ",core.lcZ(5,14,"customerTicketingList.sortSubtitle")," "),core.xp6(2),core.s9C("placeholder",core.lcZ(8,18,"customerTicketingList.sortSubtitle")),core.Q6J("sortOptions",ticketList_r3.sorts)("sortLabels",core.lcZ(7,16,ctx_r4.getSortLabels()))("selectedOption",null==ticketList_r3.pagination?null:ticketList_r3.pagination.sort)("ariaLabel",core.lcZ(9,20,"customerTicketingList.sortOrders")),core.xp6(9),core.Oqu(core.lcZ(16,22,"customerTicketing.ticketId")),core.xp6(3),core.hij(" ",core.lcZ(19,24,"customerTicketingList.subject")," "),core.xp6(3),core.hij(" ",core.lcZ(22,26,"customerTicketingList.ticketCategory")," "),core.xp6(3),core.Oqu(core.lcZ(25,28,"customerTicketing.createdOn")),core.xp6(3),core.Oqu(core.lcZ(28,30,"customerTicketing.changedOn")),core.xp6(3),core.Oqu(core.lcZ(31,32,"customerTicketing.status")),core.xp6(3),core.Q6J("ngForOf",ticketList_r3.tickets),core.xp6(2),core.Q6J("ngIf",(null==ticketList_r3.pagination?null:ticketList_r3.pagination.totalPages)>1)}}function CustomerTicketingListComponent_ng_container_0_ng_template_6_Template(rf,ctx){1&rf&&(core._UZ(0,"cx-customer-ticketing-create"),core.ynx(1),core.TgZ(2,"div",22)(3,"h3"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA()(),core.BQk()),2&rf&&(core.xp6(4),core.Oqu(core.lcZ(5,1,"customerTicketingList.noTickets")))}function CustomerTicketingListComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"span",2)(2,"h2",3),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()(),core.YNc(5,CustomerTicketingListComponent_ng_container_0_ng_container_5_Template,36,34,"ng-container",0),core.YNc(6,CustomerTicketingListComponent_ng_container_0_ng_template_6_Template,6,3,"ng-template",null,4,core.W1O),core.BQk()),2&rf){const ticketList_r3=ctx.ngIf,_r5=core.MAs(7);core.xp6(3),core.AsE(" ",core.lcZ(4,4,"customerTicketingList.requestTitle")," (",(null==ticketList_r3.pagination?null:ticketList_r3.pagination.totalResults)||0,") "),core.xp6(2),core.Q6J("ngIf",ticketList_r3.tickets.length>0)("ngIfElse",_r5)}}function CustomerTicketingListComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner")}function CustomerTicketingDetailsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2)(2,"div",3)(3,"div",4),core._UZ(4,"cx-card",5),core.ALo(5,"async"),core.qZA(),core.TgZ(6,"div",4),core._UZ(7,"cx-card",5),core.ALo(8,"async"),core.ALo(9,"cxDate"),core.qZA(),core.TgZ(10,"div",4),core._UZ(11,"cx-card",5),core.ALo(12,"async"),core.ALo(13,"cxDate"),core.qZA(),core.TgZ(14,"div",4),core._UZ(15,"cx-card",5),core.ALo(16,"async"),core.qZA()()(),core.BQk()),2&rf){const ticket_r3=ctx.ngIf,ctx_r0=core.oxw();let tmp_1_0,tmp_2_0;core.xp6(4),core.Q6J("content",core.lcZ(5,4,ctx_r0.prepareCardContent(ticket_r3.id,"customerTicketing.ticketId"))),core.xp6(3),core.Q6J("content",core.lcZ(8,6,ctx_r0.prepareCardContent(null!==(tmp_1_0=core.xi3(9,8,ticket_r3.createdAt,ctx_r0.dateFormat))&&void 0!==tmp_1_0?tmp_1_0:ctx_r0.dateFormat,"customerTicketing.createdOn"))),core.xp6(4),core.Q6J("content",core.lcZ(12,11,ctx_r0.prepareCardContent(null!==(tmp_2_0=core.xi3(13,13,ticket_r3.modifiedAt,ctx_r0.dateFormat))&&void 0!==tmp_2_0?tmp_2_0:ctx_r0.dateFormat,"customerTicketing.changedOn"))),core.xp6(4),core.Q6J("content",core.lcZ(16,16,ctx_r0.prepareCardContent(ticket_r3.status?ticket_r3.status.name:void 0,"customerTicketing.status",ticket_r3.status?ticket_r3.status.id:void 0)))}}function CustomerTicketingDetailsComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner")}function CustomerTicketingReopenComponent_div_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",1)(1,"button",2,3),core.NdJ("click",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.openDialog())},"CustomerTicketingReopenComponent_div_0_Template_button_click_1_listener")),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()()}2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,1,"customerTicketingDetails.reopenRequest")," "))}__name(CustomerTicketingListComponent_ng_container_0_ng_container_5_tr_33_Template,"CustomerTicketingListComponent_ng_container_0_ng_container_5_tr_33_Template"),__name(CustomerTicketingListComponent_ng_container_0_ng_container_5_div_35_Template,"CustomerTicketingListComponent_ng_container_0_ng_container_5_div_35_Template"),__name(CustomerTicketingListComponent_ng_container_0_ng_container_5_Template,"CustomerTicketingListComponent_ng_container_0_ng_container_5_Template"),__name(CustomerTicketingListComponent_ng_container_0_ng_template_6_Template,"CustomerTicketingListComponent_ng_container_0_ng_template_6_Template"),__name(CustomerTicketingListComponent_ng_container_0_Template,"CustomerTicketingListComponent_ng_container_0_Template"),__name(CustomerTicketingListComponent_ng_template_2_Template,"CustomerTicketingListComponent_ng_template_2_Template"),__name(CustomerTicketingDetailsComponent_ng_container_0_Template,"CustomerTicketingDetailsComponent_ng_container_0_Template"),__name(CustomerTicketingDetailsComponent_ng_template_2_Template,"CustomerTicketingDetailsComponent_ng_template_2_Template"),__name(CustomerTicketingReopenComponent_div_0_Template,"CustomerTicketingReopenComponent_div_0_Template");const _c4=__name(function(a0){return{value:a0}},"_c4");function MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",9)(2,"span",10),core.ALo(3,"cxTranslate"),core._uU(4),core.qZA(),core.TgZ(5,"span",11),core._uU(6),core.qZA(),core.TgZ(7,"span",11),core.ALo(8,"cxTranslate"),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA()(),core.TgZ(11,"div",11),core._uU(12),core.ALo(13,"cxTranslate"),core.ALo(14,"cxDate"),core.qZA(),core.BQk()),2&rf){const ticket_r8=ctx.$implicit;core.xp6(2),core.uIk("aria-label",core.lcZ(3,6,"myAccountV2CustomerTicketing.subjectLabel")),core.xp6(2),core.hij(" ",ticket_r8.subject," "),core.xp6(2),core.hij(" | ",null==ticket_r8.ticketCategory?null:ticket_r8.ticketCategory.name," "),core.xp6(1),core.uIk("aria-label",core.lcZ(8,8,"myAccountV2CustomerTicketing.idLabel")),core.xp6(2),core.hij(" | ",core.xi3(10,10,"myAccountV2CustomerTicketing.ticketId",core.VKq(19,_c4,ticket_r8.id))," "),core.xp6(3),core.hij(" ",core.xi3(13,13,"myAccountV2CustomerTicketing.changedOn",core.VKq(21,_c4,core.xi3(14,16,ticket_r8.modifiedAt,"d, MMMM, yyyy")))," ")}}function MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",7),core.YNc(2,MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_ng_container_2_Template,15,23,"ng-container",8),core.qZA(),core.BQk()),2&rf){const ticketList_r5=core.oxw().ngIf;core.xp6(2),core.Q6J("ngForOf",ticketList_r5.tickets)}}function MyAccountV2CustomerTicketingComponent_ng_container_12_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_Template,3,1,"ng-container",4),core.BQk()),2&rf){const ticketList_r5=ctx.ngIf;core.oxw();const _r1=core.MAs(15);core.xp6(1),core.Q6J("ngIf",ticketList_r5.tickets.length>0)("ngIfElse",_r1)}}function MyAccountV2CustomerTicketingComponent_ng_template_14_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",12),core.ALo(1,"cxTranslate"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf&&(core.uIk("aria-label",core.lcZ(1,2,"customerTicketingList.noTickets")),core.xp6(2),core.hij(" ",core.lcZ(3,4,"customerTicketingList.noTickets")," "))}function MyAccountV2CustomerTicketingComponent_ng_template_16_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner")}__name(MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_ng_container_2_Template,"MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_ng_container_2_Template"),__name(MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_Template,"MyAccountV2CustomerTicketingComponent_ng_container_12_ng_container_1_Template"),__name(MyAccountV2CustomerTicketingComponent_ng_container_12_Template,"MyAccountV2CustomerTicketingComponent_ng_container_12_Template"),__name(MyAccountV2CustomerTicketingComponent_ng_template_14_Template,"MyAccountV2CustomerTicketingComponent_ng_template_14_Template"),__name(MyAccountV2CustomerTicketingComponent_ng_template_16_Template,"MyAccountV2CustomerTicketingComponent_ng_template_16_Template");const _c5=__name(function(){return{cxRoute:"supportTickets"}},"_c5");class CustomerTicketingCloseComponent{constructor(customerTicketingFacade,launchDialogService,vcr){this.customerTicketingFacade=customerTicketingFacade,this.launchDialogService=launchDialogService,this.vcr=vcr,this.subscription=new Subscription.w,this.enableCloseButton$=this.customerTicketingFacade.getTicket().pipe((0,map.U)(ticket=>("OPEN"===ticket?.status?.id||"INPROCESS"===ticket?.status?.id)&&ticket.availableStatusTransitions?.some(status=>"CLOSED"===status.id.toUpperCase())))}openDialog(){const dialog=this.launchDialogService.openDialog("CUSTOMER_TICKETING_CLOSE",this.element,this.vcr);dialog&&this.subscription.add(dialog.pipe((0,take.q)(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(CustomerTicketingCloseComponent,"CustomerTicketingCloseComponent"),CustomerTicketingCloseComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingCloseComponent)(core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_storefront.Q3W),core.Y36(core.s_b))},"CustomerTicketingCloseComponent_Factory"),CustomerTicketingCloseComponent.\u0275cmp=core.Xpm({type:CustomerTicketingCloseComponent,selectors:[["cx-customer-ticketing-close"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.element=_t.first)}},"CustomerTicketingCloseComponent_Query"),decls:2,vars:3,consts:[["class","col-xs-12 col-md-5 col-lg-4",4,"ngIf"],[1,"col-xs-12","col-md-5","col-lg-4"],[1,"btn","btn-block","btn-secondary",3,"click"],["element",""]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CustomerTicketingCloseComponent_div_0_Template,5,3,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.enableCloseButton$))},"CustomerTicketingCloseComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2});class CustomerTicketingDialogComponent{get messagesCharacterLeft(){return this.inputCharactersLimit-(this.form.get("message")?.value?.length||0)}get subjectCharacterLeft(){return this.inputCharactersForSubject-(this.form.get("subject")?.value?.length||0)}get allowedTypes(){return this.customerTicketingConfig.customerTicketing?.attachmentRestrictions?.allowedTypes}get getInputCharactersLimit(){return this.customerTicketingConfig.customerTicketing?.inputCharactersLimit??spartacus_customer_ticketing_root.P7}get getInputCharactersForSubject(){return this.customerTicketingConfig.customerTicketing?.inputCharactersLimitForSubject??spartacus_customer_ticketing_root.PW}get maxSize(){return this.customerTicketingConfig.customerTicketing?.attachmentRestrictions?.maxSize??spartacus_customer_ticketing_root.hx}handleClick(event){event.target.tagName===this.el.nativeElement.tagName&&this.close("Click outside of the window")}constructor(launchDialogService,el,customerTicketingConfig,filesFormValidators,customerTicketingFacade,routingService){this.launchDialogService=launchDialogService,this.el=el,this.customerTicketingConfig=customerTicketingConfig,this.filesFormValidators=filesFormValidators,this.customerTicketingFacade=customerTicketingFacade,this.routingService=routingService,this.iconTypes=spartacus_storefront.e1G,this.inputCharactersLimit=this.getInputCharactersLimit,this.inputCharactersForSubject=this.getInputCharactersForSubject,this.isDataLoading$=new BehaviorSubject.X(!1),this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}buildForm(){const form=new fesm2020_forms.cw({});form.setControl("message",new fesm2020_forms.NI("",[fesm2020_forms.kI.required,fesm2020_forms.kI.maxLength(this.inputCharactersLimit)])),form.setControl("file",new fesm2020_forms.NI("",[this.filesFormValidators.maxSize(this.maxSize),this.filesFormValidators.maxEntries(spartacus_customer_ticketing_root.Bl),this.filesFormValidators.allowedTypes(this.allowedTypes)])),this.form=form}close(reason){this.launchDialogService.closeDialog(reason)}}__name(CustomerTicketingDialogComponent,"CustomerTicketingDialogComponent"),CustomerTicketingDialogComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingDialogComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(core.SBq),core.Y36(spartacus_customer_ticketing_root.Yw),core.Y36(spartacus_storefront.Lt1),core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_core.Znh))},"CustomerTicketingDialogComponent_Factory"),CustomerTicketingDialogComponent.\u0275dir=core.lG2({type:CustomerTicketingDialogComponent,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx.handleClick($event)},"CustomerTicketingDialogComponent_click_HostBindingHandler"))},"CustomerTicketingDialogComponent_HostBindings")});class CustomerTicketingCloseDialogComponent extends CustomerTicketingDialogComponent{ngOnInit(){this.buildForm()}closeRequest(){this.form.invalid?(this.form.markAllAsTouched(),spartacus_storefront.hfq.deepUpdateValueAndValidity(this.form)):(this.isDataLoading$.next(!0),this.subscription=this.customerTicketingFacade.createTicketEvent(this.prepareTicketEvent()).subscribe({complete:()=>{this.onComplete()},error:()=>{this.onError()}}))}prepareTicketEvent(){return{message:this.form?.get("message")?.value,toStatus:{id:"CLOSED",name:"Closed"}}}onComplete(){this.isDataLoading$.next(!1),this.close("Ticket closed successfully"),this.routingService.go({cxRoute:"supportTickets"})}onError(){this.close("Something went wrong while closing the ticket"),this.isDataLoading$.next(!1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}__name(CustomerTicketingCloseDialogComponent,"CustomerTicketingCloseDialogComponent"),CustomerTicketingCloseDialogComponent.\u0275fac=function(){let \u0275CustomerTicketingCloseDialogComponent_BaseFactory;return __name(function(t){return(\u0275CustomerTicketingCloseDialogComponent_BaseFactory||(\u0275CustomerTicketingCloseDialogComponent_BaseFactory=core.n5z(CustomerTicketingCloseDialogComponent)))(t||CustomerTicketingCloseDialogComponent)},"CustomerTicketingCloseDialogComponent_Factory")}(),CustomerTicketingCloseDialogComponent.\u0275cmp=core.Xpm({type:CustomerTicketingCloseDialogComponent,selectors:[["cx-customer-ticketing-close-dialog"]],features:[core.qOj],decls:30,vars:29,consts:[[1,"cx-customer-ticket-form-dialog",3,"cxFocus","esc"],[1,"cx-customer-ticket-form-container",3,"formGroup"],[1,"modal-header","cx-customer-ticket-form-header"],[1,"cx-customer-ticket-form-title","modal-title"],[1,"cx-customer-ticket-form-close","close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-customer-ticket-form-body"],[1,"cx-customer-ticket-form-row"],[1,"cx-customer-ticket-label","label-content"],["formControlName","message","rows","5",1,"form-control",3,"maxLength"],[3,"control"],[1,"cx-customer-ticket-input-hint"],[1,"cx-customer-ticket-form-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],["class","overlay",4,"ngIf"],[1,"overlay"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("esc",__name(function(){return ctx.close("Escape clicked")},"CustomerTicketingCloseDialogComponent_Template_div_esc_0_listener")),core.TgZ(1,"form",1)(2,"div",2)(3,"div",3),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",4),core.NdJ("click",__name(function(){return ctx.close("Close Request Dialog")},"CustomerTicketingCloseDialogComponent_Template_button_click_6_listener")),core.ALo(7,"cxTranslate"),core.TgZ(8,"span",5),core._UZ(9,"cx-icon",6),core.qZA()()(),core.TgZ(10,"div",7)(11,"div",8)(12,"label")(13,"span",9),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA(),core._UZ(16,"textarea",10)(17,"cx-form-errors",11),core.TgZ(18,"p",12),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA()()(),core.TgZ(21,"div",13)(22,"button",14),core.NdJ("click",__name(function(){return ctx.close("Close Request Dialog")},"CustomerTicketingCloseDialogComponent_Template_button_click_22_listener")),core._uU(23),core.ALo(24,"cxTranslate"),core.qZA(),core.TgZ(25,"button",15),core.NdJ("click",__name(function(){return ctx.closeRequest()},"CustomerTicketingCloseDialogComponent_Template_button_click_25_listener")),core._uU(26),core.ALo(27,"cxTranslate"),core.qZA()()(),core.YNc(28,CustomerTicketingCloseDialogComponent_cx_spinner_28_Template,1,0,"cx-spinner",16),core.ALo(29,"async"),core.qZA()()),2&rf&&(core.Q6J("cxFocus",ctx.focusConfig),core.xp6(1),core.Q6J("formGroup",ctx.form),core.xp6(3),core.hij(" ",core.lcZ(5,12,"customerTicketingDetails.closeRequest")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(7,14,"common.close")),core.xp6(3),core.Q6J("type",ctx.iconTypes.CLOSE),core.xp6(5),core.hij(" ",core.lcZ(15,16,"customerTicketing.message")," "),core.xp6(2),core.Q6J("maxLength",ctx.inputCharactersLimit),core.xp6(1),core.Q6J("control",ctx.form.get("message")),core.xp6(2),core.hij(" ",core.xi3(20,18,"customerTicketing.charactersLeft",core.VKq(27,_c1,ctx.messagesCharacterLeft))," "),core.xp6(4),core.hij(" ",core.lcZ(24,21,"customerTicketing.cancel")," "),core.xp6(3),core.hij(" ",core.lcZ(27,23,"customerTicketing.submit")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(29,25,ctx.isDataLoading$)))},"CustomerTicketingCloseDialogComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u,spartacus_storefront.Ahv,spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2});class CustomerTicketingCloseModule{}__name(CustomerTicketingCloseModule,"CustomerTicketingCloseModule"),CustomerTicketingCloseModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingCloseModule)},"CustomerTicketingCloseModule_Factory"),CustomerTicketingCloseModule.\u0275mod=core.oAB({type:CustomerTicketingCloseModule}),CustomerTicketingCloseModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{SupportTicketCloseComponent:{component:CustomerTicketingCloseComponent,guards:[spartacus_core.a1M]}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH,fesm2020_forms.UX,spartacus_storefront.Fym,spartacus_storefront.Obx,spartacus_storefront.Fme]});class CustomerTicketingCreateDialogComponent extends CustomerTicketingDialogComponent{constructor(){super(...arguments),this.ticketCategories$=this.customerTicketingFacade.getTicketCategories(),this.ticketAssociatedObjects$=this.customerTicketingFacade.getTicketAssociatedObjects().pipe((0,catchError.K)(error=>(this.handleError(error),(0,of.of)([])))),this.globalMessage=(0,core.f3M)(spartacus_core.IWp),this.translationService=(0,core.f3M)(spartacus_core.D7D)}getCreateTicketPayload(form){return{message:form?.get("message")?.value,subject:form?.get("subject")?.value,associatedTo:form?.get("associatedTo")?.value||void 0,ticketCategory:form?.get("ticketCategory")?.value}}ngOnInit(){this.buildForm()}buildForm(){const form=new fesm2020_forms.cw({});form.setControl("subject",new fesm2020_forms.NI("",[fesm2020_forms.kI.required,fesm2020_forms.kI.maxLength(this.inputCharactersForSubject)])),form.setControl("ticketCategory",new fesm2020_forms.NI("",[fesm2020_forms.kI.required])),form.setControl("associatedTo",new fesm2020_forms.NI("")),form.setControl("message",new fesm2020_forms.NI("",[fesm2020_forms.kI.required,fesm2020_forms.kI.maxLength(this.inputCharactersLimit)])),form.setControl("file",new fesm2020_forms.NI("",[this.filesFormValidators.maxSize(this.maxSize),this.filesFormValidators.maxEntries(spartacus_customer_ticketing_root.Bl),this.filesFormValidators.allowedTypes(this.allowedTypes)])),this.form=form}createTicketRequest(){this.attachment=this.form.get("file")?.value?.[0],this.form.invalid?(this.form.markAllAsTouched(),spartacus_storefront.hfq.deepUpdateValueAndValidity(this.form)):this.subscription=this.customerTicketingFacade.createTicket(this.getCreateTicketPayload(this.form)).subscribe({next:response=>{response.id&&this.attachment&&response.ticketEvents?.[0].code&&this.customerTicketingFacade.uploadAttachment(this.attachment,response.ticketEvents?.[0].code,response.id)},complete:()=>{this.onComplete()},error:error=>{this.handleError(error)}})}handleError(error){error instanceof spartacus_core.YPQ?(error.details??[]).forEach(err=>{err.message&&this.globalMessage.add({raw:err.message},spartacus_core.xUg.MSG_TYPE_ERROR)}):this.translationService.translate("httpHandlers.unknownError").pipe((0,first.P)()).subscribe(text=>{this.globalMessage.add({raw:text},spartacus_core.xUg.MSG_TYPE_ERROR)}),this.onError()}onComplete(){this.close("Ticket created successfully")}onError(){this.close("Something went wrong")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}__name(CustomerTicketingCreateDialogComponent,"CustomerTicketingCreateDialogComponent"),CustomerTicketingCreateDialogComponent.\u0275fac=function(){let \u0275CustomerTicketingCreateDialogComponent_BaseFactory;return __name(function(t){return(\u0275CustomerTicketingCreateDialogComponent_BaseFactory||(\u0275CustomerTicketingCreateDialogComponent_BaseFactory=core.n5z(CustomerTicketingCreateDialogComponent)))(t||CustomerTicketingCreateDialogComponent)},"CustomerTicketingCreateDialogComponent_Factory")}(),CustomerTicketingCreateDialogComponent.\u0275cmp=core.Xpm({type:CustomerTicketingCreateDialogComponent,selectors:[["cx-customer-ticketing-create-dialog"]],inputs:{selectedCategory:"selectedCategory",selectedAssociatedObject:"selectedAssociatedObject"},features:[core.qOj],decls:51,vars:55,consts:[[1,"cx-customer-ticket-form-dialog",3,"cxFocus","esc"],[1,"cx-customer-ticket-form-container",3,"formGroup"],[1,"modal-header","cx-customer-ticket-form-header"],[1,"cx-customer-ticket-form-title","modal-title"],["type","button",1,"cx-customer-ticket-form-close","close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-customer-ticket-form-body"],[1,"cx-customer-ticket-form-row"],[1,"cx-customer-ticket-label","label-content"],["formControlName","subject","rows","1",1,"form-control",3,"maxLength"],[3,"control"],[1,"cx-customer-ticket-input-hint"],[4,"ngIf"],["formControlName","message","rows","5",1,"form-control",3,"maxLength"],[3,"formControl","accept"],[1,"cx-customer-ticket-file-upload-hint"],["prefix","formErrors.file",3,"control"],[1,"cx-customer-ticket-form-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["formControlName","ticketCategory",1,"form-control"],["value","","disabled","","selected",""],[3,"ngValue","selected",4,"ngFor","ngForOf"],[3,"ngValue","selected"],["formControlName","associatedTo",1,"form-control"],[1,"cx-message-footer-text"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("esc",__name(function(){return ctx.close("Escape clicked")},"CustomerTicketingCreateDialogComponent_Template_div_esc_0_listener")),core.TgZ(1,"form",1)(2,"div",2)(3,"div",3),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",4),core.NdJ("click",__name(function(){return ctx.close("Close Create Request Dialog")},"CustomerTicketingCreateDialogComponent_Template_button_click_6_listener")),core.ALo(7,"cxTranslate"),core.TgZ(8,"span",5),core._UZ(9,"cx-icon",6),core.qZA()()(),core.TgZ(10,"div",7)(11,"div",8)(12,"label")(13,"span",9),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA(),core._UZ(16,"textarea",10)(17,"cx-form-errors",11),core.TgZ(18,"p",12),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA()(),core.YNc(21,CustomerTicketingCreateDialogComponent_label_21_Template,10,8,"label",13),core.ALo(22,"async"),core.YNc(23,CustomerTicketingCreateDialogComponent_ng_container_23_Template,2,1,"ng-container",13),core.ALo(24,"async"),core.TgZ(25,"label")(26,"span",9),core._uU(27),core.ALo(28,"cxTranslate"),core.qZA(),core._UZ(29,"textarea",14)(30,"cx-form-errors",11),core.TgZ(31,"p",12),core._uU(32),core.ALo(33,"cxTranslate"),core.qZA()(),core.TgZ(34,"div")(35,"cx-file-upload",15),core.YNc(36,CustomerTicketingCreateDialogComponent_ng_template_36_Template,4,4,"ng-template"),core.qZA(),core.TgZ(37,"p",16),core._uU(38),core.ALo(39,"cxTranslate"),core.qZA(),core.TgZ(40,"p",16),core._uU(41),core.ALo(42,"cxTranslate"),core.qZA(),core._UZ(43,"cx-form-errors",17),core.qZA()(),core.TgZ(44,"div",18)(45,"button",19),core.NdJ("click",__name(function(){return ctx.close("Close Create Request Dialog")},"CustomerTicketingCreateDialogComponent_Template_button_click_45_listener")),core._uU(46),core.ALo(47,"cxTranslate"),core.qZA(),core.TgZ(48,"button",20),core.NdJ("click",__name(function(){return ctx.createTicketRequest()},"CustomerTicketingCreateDialogComponent_Template_button_click_48_listener")),core._uU(49),core.ALo(50,"cxTranslate"),core.qZA()()()()()),2&rf&&(core.Q6J("cxFocus",ctx.focusConfig),core.xp6(1),core.Q6J("formGroup",ctx.form),core.xp6(3),core.hij(" ",core.lcZ(5,22,"createCustomerTicket.addNewRequest")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(7,24,"common.close")),core.xp6(3),core.Q6J("type",ctx.iconTypes.CLOSE),core.xp6(5),core.hij(" ",core.lcZ(15,26,"createCustomerTicket.subject")," "),core.xp6(2),core.Q6J("maxLength",ctx.inputCharactersForSubject),core.xp6(1),core.Q6J("control",ctx.form.get("subject")),core.xp6(2),core.hij(" ",core.xi3(20,28,"customerTicketing.charactersLeft",core.VKq(49,_c1,ctx.subjectCharacterLeft))," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(22,31,ctx.ticketCategories$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(24,33,ctx.ticketAssociatedObjects$)),core.xp6(4),core.hij(" ",core.lcZ(28,35,"customerTicketing.message")," "),core.xp6(2),core.Q6J("maxLength",ctx.inputCharactersLimit),core.xp6(1),core.Q6J("control",ctx.form.get("message")),core.xp6(2),core.hij(" ",core.xi3(33,37,"customerTicketing.charactersLeft",core.VKq(51,_c1,ctx.messagesCharacterLeft))," "),core.xp6(3),core.Q6J("formControl",ctx.form.get("file"))("accept",ctx.allowedTypes),core.xp6(3),core.hij(" ",core.xi3(39,40,"customerTicketing.fileSizeLimit",core.VKq(53,_c1,ctx.maxSize))," "),core.xp6(3),core.hij(" ",core.lcZ(42,43,"customerTicketing.maximumAttachment")," "),core.xp6(2),core.Q6J("control",ctx.form.get("file")),core.xp6(3),core.hij(" ",core.lcZ(47,45,"customerTicketing.cancel")," "),core.xp6(3),core.hij(" ",core.lcZ(50,47,"customerTicketing.submit")," "))},"CustomerTicketingCreateDialogComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,fesm2020_forms._Y,fesm2020_forms.YN,fesm2020_forms.Kr,fesm2020_forms.Fj,fesm2020_forms.EJ,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.oH,fesm2020_forms.sg,fesm2020_forms.u,spartacus_storefront.Ahv,spartacus_storefront.Yre,common.Ov,spartacus_core.X$D],encapsulation:2});class CustomerTicketingCreateComponent{constructor(launchDialogService,vcr){this.launchDialogService=launchDialogService,this.vcr=vcr,this.subscription=new Subscription.w}openCreateNewTicketDialog(){const dialog=this.launchDialogService.openDialog("CUSTOMER_TICKETING_CREATE",this.element,this.vcr);dialog&&this.subscription.add(dialog.pipe((0,take.q)(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(CustomerTicketingCreateComponent,"CustomerTicketingCreateComponent"),CustomerTicketingCreateComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingCreateComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(core.s_b))},"CustomerTicketingCreateComponent_Factory"),CustomerTicketingCreateComponent.\u0275cmp=core.Xpm({type:CustomerTicketingCreateComponent,selectors:[["cx-customer-ticketing-create"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.element=_t.first)}},"CustomerTicketingCreateComponent_Query"),decls:4,vars:3,consts:[[1,"btn","btn-primary","cx-customer-ticketing-create",3,"click"],["element",""]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"button",0,1),core.NdJ("click",__name(function(){return ctx.openCreateNewTicketDialog()},"CustomerTicketingCreateComponent_Template_button_click_0_listener")),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"createCustomerTicket.addRequest"),"\n"))},"CustomerTicketingCreateComponent_Template"),dependencies:[spartacus_core.X$D],encapsulation:2});class CustomerTicketingCreateModule{}__name(CustomerTicketingCreateModule,"CustomerTicketingCreateModule"),CustomerTicketingCreateModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingCreateModule)},"CustomerTicketingCreateModule_Factory"),CustomerTicketingCreateModule.\u0275mod=core.oAB({type:CustomerTicketingCreateModule}),CustomerTicketingCreateModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH,fesm2020_forms.UX,spartacus_storefront.Fym,spartacus_storefront.Obx]});class CustomerTicketingReopenDialogComponent extends CustomerTicketingDialogComponent{ngOnInit(){this.buildForm()}reopenRequest(){if(this.form.invalid)this.form.markAllAsTouched(),spartacus_storefront.hfq.deepUpdateValueAndValidity(this.form);else{const mustWaitForAttachment=this.form.get("file")?.value?.length>0;this.isDataLoading$.next(!0),this.subscription=this.customerTicketingFacade.createTicketEvent(this.prepareTicketEvent(),mustWaitForAttachment).subscribe({next:createdEvent=>{this.form.get("file")?.value?.length&&createdEvent.code&&this.customerTicketingFacade.uploadAttachment(this.form.get("file")?.value?.item(0),createdEvent.code)},complete:()=>{this.onComplete()},error:()=>{this.onError()}})}}onComplete(){this.isDataLoading$.next(!1),this.close("Ticket reopened successfully")}onError(){this.isDataLoading$.next(!1),this.close("Something went wrong while reopening ticket")}prepareTicketEvent(){return{message:this.form?.get("message")?.value,toStatus:{id:"INPROCESS",name:"INPROCESS"}}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}__name(CustomerTicketingReopenDialogComponent,"CustomerTicketingReopenDialogComponent"),CustomerTicketingReopenDialogComponent.\u0275fac=function(){let \u0275CustomerTicketingReopenDialogComponent_BaseFactory;return __name(function(t){return(\u0275CustomerTicketingReopenDialogComponent_BaseFactory||(\u0275CustomerTicketingReopenDialogComponent_BaseFactory=core.n5z(CustomerTicketingReopenDialogComponent)))(t||CustomerTicketingReopenDialogComponent)},"CustomerTicketingReopenDialogComponent_Factory")}(),CustomerTicketingReopenDialogComponent.\u0275cmp=core.Xpm({type:CustomerTicketingReopenDialogComponent,selectors:[["cx-customer-ticketing-reopen-dialog"]],features:[core.qOj],decls:40,vars:41,consts:[[1,"cx-customer-ticket-form-dialog",3,"cxFocus","esc"],[1,"cx-customer-ticket-form-container",3,"formGroup"],[1,"modal-header","cx-customer-ticket-form-header"],[1,"cx-customer-ticket-form-title","modal-title"],["type","button",1,"cx-customer-ticket-form-close","close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-customer-ticket-form-body"],[1,"cx-customer-ticket-form-row"],[1,"cx-customer-ticket-label","label-content"],["formControlName","message","rows","5",1,"form-control",3,"maxLength"],[3,"control"],[1,"cx-customer-ticket-input-hint"],[3,"formControl","accept"],[1,"cx-customer-ticket-file-upload-hint"],["prefix","formErrors.file",3,"control"],[1,"cx-customer-ticket-form-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","overlay",4,"ngIf"],[1,"cx-message-footer-text"],[1,"overlay"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("esc",__name(function(){return ctx.close("Escape clicked")},"CustomerTicketingReopenDialogComponent_Template_div_esc_0_listener")),core.TgZ(1,"form",1)(2,"div",2)(3,"div",3),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",4),core.NdJ("click",__name(function(){return ctx.close("Close Reopen Request Dialog")},"CustomerTicketingReopenDialogComponent_Template_button_click_6_listener")),core.ALo(7,"cxTranslate"),core.TgZ(8,"span",5),core._UZ(9,"cx-icon",6),core.qZA()()(),core.TgZ(10,"div",7)(11,"div",8)(12,"label")(13,"span",9),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA(),core._UZ(16,"textarea",10)(17,"cx-form-errors",11),core.TgZ(18,"p",12),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA()()(),core.TgZ(21,"div")(22,"cx-file-upload",13),core.YNc(23,CustomerTicketingReopenDialogComponent_ng_template_23_Template,4,4,"ng-template"),core.qZA(),core.TgZ(24,"p",14),core._uU(25),core.ALo(26,"cxTranslate"),core.qZA(),core.TgZ(27,"p",14),core._uU(28),core.ALo(29,"cxTranslate"),core.qZA(),core._UZ(30,"cx-form-errors",15),core.qZA(),core.TgZ(31,"div",16)(32,"button",17),core.NdJ("click",__name(function(){return ctx.close("Close Reopen Request Dialog")},"CustomerTicketingReopenDialogComponent_Template_button_click_32_listener")),core._uU(33),core.ALo(34,"cxTranslate"),core.qZA(),core.TgZ(35,"button",18),core.NdJ("click",__name(function(){return ctx.reopenRequest()},"CustomerTicketingReopenDialogComponent_Template_button_click_35_listener")),core._uU(36),core.ALo(37,"cxTranslate"),core.qZA()()(),core.YNc(38,CustomerTicketingReopenDialogComponent_cx_spinner_38_Template,1,0,"cx-spinner",19),core.ALo(39,"async"),core.qZA()()),2&rf&&(core.Q6J("cxFocus",ctx.focusConfig),core.xp6(1),core.Q6J("formGroup",ctx.form),core.xp6(3),core.hij(" ",core.lcZ(5,17,"customerTicketingDetails.reopenRequest")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(7,19,"common.close")),core.xp6(3),core.Q6J("type",ctx.iconTypes.CLOSE),core.xp6(5),core.hij(" ",core.lcZ(15,21,"customerTicketing.message")," "),core.xp6(2),core.Q6J("maxLength",ctx.inputCharactersLimit),core.xp6(1),core.Q6J("control",ctx.form.get("message")),core.xp6(2),core.hij(" ",core.xi3(20,23,"customerTicketing.charactersLeft",core.VKq(37,_c1,ctx.messagesCharacterLeft))," "),core.xp6(3),core.Q6J("formControl",ctx.form.get("file"))("accept",ctx.allowedTypes),core.xp6(3),core.hij(" ",core.xi3(26,26,"customerTicketing.fileSizeLimit",core.VKq(39,_c1,ctx.maxSize))," "),core.xp6(3),core.hij(" ",core.lcZ(29,29,"customerTicketing.maximumAttachment")," "),core.xp6(2),core.Q6J("control",ctx.form.get("file")),core.xp6(3),core.hij(" ",core.lcZ(34,31,"customerTicketing.cancel")," "),core.xp6(3),core.hij(" ",core.lcZ(37,33,"customerTicketing.submit")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(39,35,ctx.isDataLoading$)))},"CustomerTicketingReopenDialogComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.oH,fesm2020_forms.sg,fesm2020_forms.u,spartacus_storefront.Ahv,spartacus_storefront.Yre,spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2});const defaultCustomerTicketingFormLayoutConfig={launch:{CUSTOMER_TICKETING_REOPEN:{inline:!0,component:CustomerTicketingReopenDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG},CUSTOMER_TICKETING_CLOSE:{inline:!0,component:CustomerTicketingCloseDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG},CUSTOMER_TICKETING_CREATE:{inline:!0,component:CustomerTicketingCreateDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class CustomerTicketingListComponent{constructor(customerTicketingFacade,routingService,translationService,customerTicketingConfig){this.customerTicketingFacade=customerTicketingFacade,this.routingService=routingService,this.translationService=translationService,this.customerTicketingConfig=customerTicketingConfig,this.PAGE_SIZE=this.customerTicketingConfig.customerTicketing?.listViewPageSize||5,this.iconTypes=spartacus_storefront.e1G,this.tickets$=this.customerTicketingFacade.getTickets(this.PAGE_SIZE).pipe((0,tap.b)(tickets=>this.sortType=tickets?.pagination?.sort||"")),this.getStatusClass=status=>{switch(status){case"OPEN":case"INPROCESS":return"cx-text-green";case"CLOSED":return"cx-text-grey";default:return""}}}goToTicketDetail(ticketId){this.routingService.go({cxRoute:"supportTicketDetails",params:{ticketCode:ticketId}})}getSortLabels(){return(0,combineLatest.aj)([this.translationService.translate("customerTicketing.ticketId"),this.translationService.translate("customerTicketing.changedOn")]).pipe((0,map.U)(([textByTicketId,textByDate])=>({byTicketId:textByTicketId,byDate:textByDate})))}changeSortCode(sortCode){this.sortType=sortCode,this.pageChange(0)}pageChange(page){const ticketListParams=this.createTicketListEvent(this.sortType,page);this.fetchTicketList(ticketListParams)}createTicketListEvent(sortCode,currentPage){return{currentPage,sortCode}}fetchTicketList(ticketListParams){this.tickets$=this.customerTicketingFacade.getTickets(this.PAGE_SIZE,ticketListParams.currentPage,ticketListParams.sortCode)}}__name(CustomerTicketingListComponent,"CustomerTicketingListComponent"),CustomerTicketingListComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingListComponent)(core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_core.Znh),core.Y36(spartacus_core.D7D),core.Y36(spartacus_customer_ticketing_root.Yw))},"CustomerTicketingListComponent_Factory"),CustomerTicketingListComponent.\u0275cmp=core.Xpm({type:CustomerTicketingListComponent,selectors:[["cx-customer-ticketing-list"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["spinner",""],[1,"cx-ticketing-list-title"],[1,"cx-ticketing-list-title-text"],["noCustomerTickets",""],[1,"cx-ticketing-list-sort","top"],[1,"cx-ticketing-list-form-group","form-group"],["ariaControls","ticketing-list-table",3,"sortOptions","sortLabels","selectedOption","placeholder","ariaLabel","sortListEvent"],["id","ticketing-list-table","aria-hidden","true",1,"table","cx-ticketing-list-table"],[1,"cx-ticketing-list-thead-mobile"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[1,"cx-ticketing-list-sort","bottom"],["class","cx-ticketing-list-pagination",4,"ngIf"],[3,"click"],[1,"cx-ticketing-list-data","cx-ticketing-list-id"],[1,"cx-ticketing-list-label"],[1,"cx-ticketing-list-value",3,"routerLink"],[1,"cx-ticketing-list-data"],[1,"cx-ticketing-list-value",3,"routerLink","ngClass"],[1,"cx-ticketing-list-pagination"],[3,"pagination","viewPageEvent"],[1,"text-center"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,CustomerTicketingListComponent_ng_container_0_Template,8,6,"ng-container",0),core.ALo(1,"async"),core.YNc(2,CustomerTicketingListComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.tickets$))("ngIfElse",_r1)}},"CustomerTicketingListComponent_Template"),dependencies:[CustomerTicketingCreateComponent,common.mk,common.sg,common.O5,spartacus_storefront.iNG,spartacus_storefront.QtL,router.rH,spartacus_storefront.ORR,common.Ov,spartacus_core.X$D,spartacus_core.dgE,spartacus_core.l2T],encapsulation:2});class CustomerTicketingListModule{}__name(CustomerTicketingListModule,"CustomerTicketingListModule"),CustomerTicketingListModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingListModule)},"CustomerTicketingListModule_Factory"),CustomerTicketingListModule.\u0275mod=core.oAB({type:CustomerTicketingListModule}),CustomerTicketingListModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{SupportTicketHistoryComponent:{component:CustomerTicketingListComponent,guards:[spartacus_core.a1M]}}})],imports:[CustomerTicketingCreateModule,common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.dTQ,spartacus_storefront.QX1,spartacus_storefront.xuE,router.Bz,spartacus_storefront.Fme]});class CustomerTicketingDetailsComponent{constructor(translation,customerTicketingFacade,routingService,eventService){this.translation=translation,this.customerTicketingFacade=customerTicketingFacade,this.routingService=routingService,this.eventService=eventService,this.dateFormat=spartacus_customer_ticketing_root.zT,this.subscription=new Subscription.w,this.ticketDetails$=this.customerTicketingFacade.getTicket(),this.reloadOnRedirection()}prepareCardContent(entity,titleTranslation,id){return this.translation.translate(titleTranslation).pipe((0,filter.h)(()=>Boolean(entity)),(0,map.U)(textTitle=>({title:textTitle,text:[entity||""],customClass:this.getStatusClass(id?.toUpperCase())})))}getStatusClass(id){return"OPEN"===id||"INPROCESS"===id?"cx-text-green":"CLOSED"===id?"cx-text-grey":""}reloadOnRedirection(){this.subscription=(0,combineLatest.aj)([this.ticketDetails$,this.routingService.getParams().pipe((0,map.U)(params=>params.ticketCode))]).pipe((0,take.q)(1),(0,tap.b)(([ticket,ticketCode])=>{ticket&&ticketCode!==ticket?.id&&this.eventService.dispatch({},spartacus_customer_ticketing_root.KP)})).subscribe()}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(CustomerTicketingDetailsComponent,"CustomerTicketingDetailsComponent"),CustomerTicketingDetailsComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingDetailsComponent)(core.Y36(spartacus_core.D7D),core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_core.Znh),core.Y36(spartacus_core.POd))},"CustomerTicketingDetailsComponent_Factory"),CustomerTicketingDetailsComponent.\u0275cmp=core.Xpm({type:CustomerTicketingDetailsComponent,selectors:[["cx-customer-ticketing-details"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["spinner",""],[1,"cx-ticket-details"],[1,"container"],[1,"cx-details-card"],[3,"content"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,CustomerTicketingDetailsComponent_ng_container_0_Template,17,18,"ng-container",0),core.ALo(1,"async"),core.YNc(2,CustomerTicketingDetailsComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.ticketDetails$))("ngIfElse",_r1)}},"CustomerTicketingDetailsComponent_Template"),dependencies:[common.O5,spartacus_storefront.AkF,spartacus_storefront.ORR,common.Ov,spartacus_core.dgE],encapsulation:2,changeDetection:0});class CustomerTicketingDetailsModule{}__name(CustomerTicketingDetailsModule,"CustomerTicketingDetailsModule"),CustomerTicketingDetailsModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingDetailsModule)},"CustomerTicketingDetailsModule_Factory"),CustomerTicketingDetailsModule.\u0275mod=core.oAB({type:CustomerTicketingDetailsModule}),CustomerTicketingDetailsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{SupportTicketDetailsComponent:{component:CustomerTicketingDetailsComponent,guards:[spartacus_core.a1M]}}})],imports:[common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.dTQ,spartacus_storefront.Fme]});class CustomerTicketingReopenComponent{constructor(customerTicketingFacade,launchDialogService,vcr){this.customerTicketingFacade=customerTicketingFacade,this.launchDialogService=launchDialogService,this.vcr=vcr,this.subscription=new Subscription.w,this.enableReopenButton$=this.customerTicketingFacade.getTicket().pipe((0,map.U)(ticket=>"CLOSED"===ticket?.status?.id&&ticket.availableStatusTransitions?.some(status=>"INPROCESS"===status.id.toUpperCase()||"OPEN"===status.id.toUpperCase())))}openDialog(){const dialog=this.launchDialogService.openDialog("CUSTOMER_TICKETING_REOPEN",this.element,this.vcr);dialog&&this.subscription.add(dialog.pipe((0,take.q)(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(CustomerTicketingReopenComponent,"CustomerTicketingReopenComponent"),CustomerTicketingReopenComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingReopenComponent)(core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_storefront.Q3W),core.Y36(core.s_b))},"CustomerTicketingReopenComponent_Factory"),CustomerTicketingReopenComponent.\u0275cmp=core.Xpm({type:CustomerTicketingReopenComponent,selectors:[["cx-customer-ticketing-reopen"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.element=_t.first)}},"CustomerTicketingReopenComponent_Query"),decls:2,vars:3,consts:[["class","col-xs-12 col-md-5 col-lg-4",4,"ngIf"],[1,"col-xs-12","col-md-5","col-lg-4"],[1,"btn","btn-block","btn-secondary",3,"click"],["element",""]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CustomerTicketingReopenComponent_div_0_Template,5,3,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.enableReopenButton$))},"CustomerTicketingReopenComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2});class CustomerTicketingReopenModule{}__name(CustomerTicketingReopenModule,"CustomerTicketingReopenModule"),CustomerTicketingReopenModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingReopenModule)},"CustomerTicketingReopenModule_Factory"),CustomerTicketingReopenModule.\u0275mod=core.oAB({type:CustomerTicketingReopenModule}),CustomerTicketingReopenModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{SupportTicketReopenComponent:{component:CustomerTicketingReopenComponent,guards:[spartacus_core.a1M]}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH,fesm2020_forms.UX,spartacus_storefront.Fym,spartacus_storefront.Obx,spartacus_storefront.Fme]});class CustomerTicketingMessagesComponent{constructor(customerTicketingConfig,customerTicketingFacade,eventService){this.customerTicketingConfig=customerTicketingConfig,this.customerTicketingFacade=customerTicketingFacade,this.eventService=eventService,this.ticketDetails$=this.customerTicketingFacade.getTicket(),this.subscription=new Subscription.w,this.messageEvents$=this.prepareMessageEvents(),this.messagingConfigs=this.prepareMessagingConfigs()}onSend(event){const mustWaitForAttachment=(event.files instanceof FileList&&event.files?.length>0)??!1;this.subscription.add(this.customerTicketingFacade.createTicketEvent(this.prepareTicketEvent(event.message),mustWaitForAttachment).subscribe(createdEvent=>{event.files&&event.files?.length&&createdEvent.code&&this.customerTicketingFacade.uploadAttachment(event.files.item(0),createdEvent.code),this.messagingComponent?.resetForm()}))}downloadAttachment(event){this.subscription.add(this.customerTicketingFacade.downloadAttachment(event.messageCode,event.attachmentId).subscribe(data=>{const downloadURL=window.URL.createObjectURL(data),link=document.createElement("a");link.href=downloadURL,link.download=event.fileName??"",link.click()}))}prepareMessageEvents(){return this.ticketDetails$.pipe((0,map.U)(ticket=>ticket?.ticketEvents?.map(event=>({...event,text:event.message??"",rightAlign:event.addedByAgent||!1,attachments:event.ticketEventAttachments??[]}))??[]))}prepareMessagingConfigs(){return{attachmentRestrictions:this.customerTicketingConfig.customerTicketing?.attachmentRestrictions,charactersLimit:this.customerTicketingConfig.customerTicketing?.inputCharactersLimit,enableFileUploadOption:!0,displayAddMessageSection:this.ticketDetails$.pipe((0,map.U)(ticket=>"CLOSED"!==ticket?.status?.id))}}prepareTicketEvent(messageText){return{message:messageText}}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(CustomerTicketingMessagesComponent,"CustomerTicketingMessagesComponent"),CustomerTicketingMessagesComponent.\u0275fac=__name(function(t){return new(t||CustomerTicketingMessagesComponent)(core.Y36(spartacus_customer_ticketing_root.Yw),core.Y36(spartacus_customer_ticketing_root.kr),core.Y36(spartacus_core.POd))},"CustomerTicketingMessagesComponent_Factory"),CustomerTicketingMessagesComponent.\u0275cmp=core.Xpm({type:CustomerTicketingMessagesComponent,selectors:[["cx-customer-ticketing-messages"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(spartacus_storefront.bHT,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.messagingComponent=_t.first)}},"CustomerTicketingMessagesComponent_Query"),decls:1,vars:2,consts:[[3,"messageEvents$","messagingConfigs","send","downloadAttachment"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"cx-messaging",0),core.NdJ("send",__name(function($event){return ctx.onSend($event)},"CustomerTicketingMessagesComponent_Template_cx_messaging_send_0_listener"))("downloadAttachment",__name(function($event){return ctx.downloadAttachment($event)},"CustomerTicketingMessagesComponent_Template_cx_messaging_downloadAttachment_0_listener")),core.qZA()),2&rf&&core.Q6J("messageEvents$",ctx.messageEvents$)("messagingConfigs",ctx.messagingConfigs)},"CustomerTicketingMessagesComponent_Template"),dependencies:[spartacus_storefront.bHT],encapsulation:2});class CustomerTicketingMessagesModule{}__name(CustomerTicketingMessagesModule,"CustomerTicketingMessagesModule"),CustomerTicketingMessagesModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingMessagesModule)},"CustomerTicketingMessagesModule_Factory"),CustomerTicketingMessagesModule.\u0275mod=core.oAB({type:CustomerTicketingMessagesModule}),CustomerTicketingMessagesModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{SupportTicketUpdateComponent:{component:CustomerTicketingMessagesComponent,guards:[spartacus_core.a1M]}}})],imports:[common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.A9I,fesm2020_forms.UX,fesm2020_forms.u5]});class MyAccountV2CustomerTicketingComponent{constructor(){this.PAGE_SIZE=1,this.customerTicketingFacade=(0,core.f3M)(spartacus_customer_ticketing_root.kr),this.tickets$=this.customerTicketingFacade.getTickets(this.PAGE_SIZE)}}__name(MyAccountV2CustomerTicketingComponent,"MyAccountV2CustomerTicketingComponent"),MyAccountV2CustomerTicketingComponent.\u0275fac=__name(function(t){return new(t||MyAccountV2CustomerTicketingComponent)},"MyAccountV2CustomerTicketingComponent_Factory"),MyAccountV2CustomerTicketingComponent.\u0275cmp=core.Xpm({type:MyAccountV2CustomerTicketingComponent,selectors:[["cx-my-account-v2-customer-ticketing"]],decls:18,vars:20,consts:[[1,"cx-my-account-customer-ticket-header"],[1,"cx-my-account-customer-ticket-heading"],[1,"cx-my-account-customer-ticket-show-more"],["id","show-more-requests",1,"btn-link","cx-action-link",3,"routerLink"],[4,"ngIf","ngIfElse"],["noCustomerTickets",""],["spinner",""],[1,"cx-my-account-customer-ticket-body"],[4,"ngFor","ngForOf"],[1,"cx-my-account-customer-ticket-details"],[1,"cx-my-account-customer-ticket-subject"],[1,"cx-my-account-customer-ticket-details-light"],[1,"cx-my-account-no-ticket"]],template:__name(function(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",0)(2,"div",1),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"div",2)(7,"a",3),core.ALo(8,"cxTranslate"),core.ALo(9,"cxUrl"),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA()()(),core.YNc(12,MyAccountV2CustomerTicketingComponent_ng_container_12_Template,2,2,"ng-container",4),core.ALo(13,"async"),core.BQk(),core.YNc(14,MyAccountV2CustomerTicketingComponent_ng_template_14_Template,4,6,"ng-template",null,5,core.W1O),core.YNc(16,MyAccountV2CustomerTicketingComponent_ng_template_16_Template,1,0,"ng-template",null,6,core.W1O)),2&rf){const _r3=core.MAs(17);core.xp6(2),core.uIk("aria-label",core.lcZ(3,7,"myAccountV2CustomerTicketing.heading")),core.xp6(2),core.hij(" ",core.lcZ(5,9,"myAccountV2CustomerTicketing.heading")," "),core.xp6(3),core.Q6J("routerLink",core.lcZ(9,13,core.DdM(19,_c5))),core.uIk("aria-label",core.lcZ(8,11,"myAccountV2CustomerTicketing.showMore")),core.xp6(3),core.hij(" ",core.lcZ(11,15,"myAccountV2CustomerTicketing.showMore")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(13,17,ctx.tickets$))("ngIfElse",_r3)}},"MyAccountV2CustomerTicketingComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.ORR,router.rH,common.Ov,spartacus_core.X$D,spartacus_core.dgE,spartacus_core.l2T],encapsulation:2});class MyAccountV2CustomerTicketingModule{}__name(MyAccountV2CustomerTicketingModule,"MyAccountV2CustomerTicketingModule"),MyAccountV2CustomerTicketingModule.\u0275fac=__name(function(t){return new(t||MyAccountV2CustomerTicketingModule)},"MyAccountV2CustomerTicketingModule_Factory"),MyAccountV2CustomerTicketingModule.\u0275mod=core.oAB({type:MyAccountV2CustomerTicketingModule}),MyAccountV2CustomerTicketingModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{MyAccountViewRequestsComponent:{component:MyAccountV2CustomerTicketingComponent,guards:[spartacus_core.a1M]}}})],imports:[common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.Fme,router.Bz]});class CustomerTicketingComponentsModule{}__name(CustomerTicketingComponentsModule,"CustomerTicketingComponentsModule"),CustomerTicketingComponentsModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingComponentsModule)},"CustomerTicketingComponentsModule_Factory"),CustomerTicketingComponentsModule.\u0275mod=core.oAB({type:CustomerTicketingComponentsModule}),CustomerTicketingComponentsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultCustomerTicketingFormLayoutConfig)],imports:[fesm2020_forms.UX,spartacus_storefront.Fym,CustomerTicketingDetailsModule,CustomerTicketingCloseModule,CustomerTicketingReopenModule,CustomerTicketingListModule,CustomerTicketingMessagesModule,CustomerTicketingCreateModule,MyAccountV2CustomerTicketingModule]});var throwError=__webpack_require__(84724),switchMap=__webpack_require__(63714),distinctUntilChanged=__webpack_require__(33029),concatMap=__webpack_require__(26942),spartacus_cart_base_root=__webpack_require__(638);class CustomerTicketingAdapter{}__name(CustomerTicketingAdapter,"CustomerTicketingAdapter");class CustomerTicketingConnector{constructor(adapter){this.adapter=adapter}getTicket(customerId,ticketId){return this.adapter.getTicket(customerId,ticketId)}getTickets(customerId,pageSize,currentPage,sort){return this.adapter.getTickets(customerId,pageSize,currentPage,sort)}getTicketCategories(){return this.adapter.getTicketCategories()}getTicketAssociatedObjects(customerId){return this.adapter.getTicketAssociatedObjects(customerId)}createTicket(customerId,ticket){return this.adapter.createTicket(customerId,ticket)}createTicketEvent(customerId,ticketId,ticketEvent){return this.adapter.createTicketEvent(customerId,ticketId,ticketEvent)}uploadAttachment(customerId,ticketId,eventCode,file){return this.adapter.uploadAttachment(customerId,ticketId,eventCode,file)}downloadAttachment(customerId,ticketId,eventCode,attachmentId){return this.adapter.downloadAttachment(customerId,ticketId,eventCode,attachmentId)}}__name(CustomerTicketingConnector,"CustomerTicketingConnector"),CustomerTicketingConnector.\u0275fac=__name(function(t){return new(t||CustomerTicketingConnector)(core.LFG(CustomerTicketingAdapter))},"CustomerTicketingConnector_Factory"),CustomerTicketingConnector.\u0275prov=core.Yz7({token:CustomerTicketingConnector,factory:CustomerTicketingConnector.\u0275fac});const CUSTOMER_TICKETING_DETAILS_NORMALIZER=new core.OlP("CustomerTicketingDetailsNormalizer"),CUSTOMER_TICKETING_EVENT_NORMALIZER=new core.OlP("CustomerTicketingEventNormalizer"),CUSTOMER_TICKETING_FILE_NORMALIZER=new core.OlP("CustomerTicketingFileNormalizer"),CUSTOMER_TICKETING_LIST_NORMALIZER=new core.OlP("CustomerTicketingListNormalizer"),CUSTOMER_TICKETING_CATEGORY_NORMALIZER=new core.OlP("CustomerTicketingCategoryNormalizer"),CUSTOMER_TICKETING_ASSOCIATED_OBJECTS_NORMALIZER=new core.OlP("CustomerTicketingAssociatedObjectsNormalizer"),CUSTOMER_TICKETING_CREATE_NORMALIZER=new core.OlP("CustomerTicketingCreateNormalizer");class CustomerTicketingService{getTicketCategoriesQueryReloadEvents(){return[spartacus_customer_ticketing_root.Te]}getTicketCategoriesQueryResetEvents(){return[spartacus_customer_ticketing_root.a]}getTicketAssociatedObjectsQueryReloadEvents(){return[spartacus_customer_ticketing_root.SY]}getTicketAssociatedObjectsQueryResetEvents(){return[spartacus_customer_ticketing_root.XE]}getTicketQueryReloadEvents(){return[spartacus_customer_ticketing_root.KP]}getTicketQueryResetEvents(){return[spartacus_customer_ticketing_root.iS]}getTicketsQueryReloadEvents(){return[spartacus_customer_ticketing_root.zS]}getTicketsQueryResetEvents(){return[spartacus_customer_ticketing_root.QB]}getTicketsQuery$(pageSize,currentPage,sort){return this.queryService.create(()=>this.customerTicketingListPreConditions().pipe((0,switchMap.w)(customerId=>this.customerTicketingConnector.getTickets(customerId,pageSize,currentPage,sort))),{reloadOn:this.getTicketsQueryReloadEvents(),resetOn:this.getTicketsQueryResetEvents()})}customerTicketingPreConditions(){return(0,combineLatest.aj)([this.userIdService.getUserId(),this.routingService.getParams().pipe((0,map.U)(params=>params.ticketCode),(0,distinctUntilChanged.x)())]).pipe((0,take.q)(1),(0,map.U)(([userId,ticketId])=>{if(!userId)throw new Error("Customer ticketing pre conditions not met");return[userId,ticketId]}))}customerTicketingListPreConditions(){return this.userIdService.getUserId().pipe((0,take.q)(1),(0,map.U)(userId=>{if(!userId)throw new Error("Customer ticketing list pre conditions not met");return userId}))}constructor(queryService,commandService,userIdService,customerTicketingConnector,routingService,eventService){this.queryService=queryService,this.commandService=commandService,this.userIdService=userIdService,this.customerTicketingConnector=customerTicketingConnector,this.routingService=routingService,this.eventService=eventService,this.createTicketCommand=this.commandService.create(ticketStarted=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId])=>this.customerTicketingConnector.createTicket(customerId,ticketStarted)),(0,tap.b)(()=>{this.eventService.dispatch({},spartacus_customer_ticketing_root.h5)})),{strategy:spartacus_core.flE.Queue}),this.createTicketEventCommand=this.commandService.create(payload=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId,ticketId])=>this.customerTicketingConnector.createTicketEvent(customerId,ticketId,payload.ticketEvent).pipe((0,tap.b)(()=>{"CLOSED"===payload.ticketEvent.toStatus?.id?this.eventService.dispatch({},spartacus_customer_ticketing_root.xi):payload.containsAttachment||("OPEN"===payload.ticketEvent.toStatus?.id||"INPROCESS"===payload.ticketEvent.toStatus?.id?this.eventService.dispatch({},spartacus_customer_ticketing_root.EW):this.eventService.dispatch({},spartacus_customer_ticketing_root.vl))})))),{strategy:spartacus_core.flE.Queue}),this.uploadAttachmentCommand=this.commandService.create(payload=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId,ticketId])=>this.customerTicketingConnector.uploadAttachment(customerId,payload.ticketId??ticketId,payload.eventCode,payload.file).pipe((0,tap.b)(()=>this.eventService.dispatch({},spartacus_customer_ticketing_root.bZ))))),{strategy:spartacus_core.flE.Queue}),this.downloadAttachmentCommand=this.commandService.create(payload=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId,ticketId])=>this.customerTicketingConnector.downloadAttachment(customerId,ticketId,payload.eventCode,payload.attachmentId))),{strategy:spartacus_core.flE.Queue}),this.getTicketQuery$=this.queryService.create(()=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId,ticketId])=>this.customerTicketingConnector.getTicket(customerId,ticketId))),{reloadOn:this.getTicketQueryReloadEvents(),resetOn:this.getTicketQueryResetEvents()}),this.getTicketCategoriesQuery=this.queryService.create(()=>this.customerTicketingConnector.getTicketCategories(),{reloadOn:this.getTicketCategoriesQueryReloadEvents(),resetOn:this.getTicketCategoriesQueryResetEvents()}),this.getTicketAssociatedObjectsQuery=this.queryService.create(()=>this.customerTicketingPreConditions().pipe((0,switchMap.w)(([customerId])=>this.customerTicketingConnector.getTicketAssociatedObjects(customerId))),{reloadOn:this.getTicketAssociatedObjectsQueryReloadEvents(),resetOn:this.getTicketAssociatedObjectsQueryResetEvents()})}getTicketAssociatedObjectsState(){return this.getTicketAssociatedObjectsQuery.getState()}getTicketAssociatedObjects(){return this.getTicketAssociatedObjectsState().pipe((0,concatMap.b)(state=>state?.error?(0,throwError._)(state.error):(0,of.of)(state)),(0,map.U)(state=>state.data??[]))}getTicketCategoriesState(){return this.getTicketCategoriesQuery.getState()}getTicketCategories(){return this.getTicketCategoriesState().pipe((0,map.U)(state=>state.data??[]))}getTicketState(){return this.getTicketQuery$.getState()}getTicket(){return this.getTicketState().pipe((0,map.U)(state=>state.data))}createTicket(ticketStarted){return this.createTicketCommand.execute(ticketStarted)}getTicketsState(pageSize,currentPage,sort){return this.getTicketsQuery$(pageSize,currentPage,sort).getState()}getTickets(pageSize,currentPage,sort){return this.getTicketsState(pageSize,currentPage,sort).pipe((0,map.U)(state=>state.data))}createTicketEvent(ticketEvent,containsAttachment=!1){return this.createTicketEventCommand.execute({ticketEvent,containsAttachment})}uploadAttachment(file,eventCode,ticketId){return this.uploadAttachmentCommand.execute({file,eventCode,ticketId})}downloadAttachment(eventCode,attachmentId){return this.downloadAttachmentCommand.execute({eventCode,attachmentId})}}__name(CustomerTicketingService,"CustomerTicketingService"),CustomerTicketingService.\u0275fac=__name(function(t){return new(t||CustomerTicketingService)(core.LFG(spartacus_core._7J),core.LFG(spartacus_core.VDr),core.LFG(spartacus_core.XBV),core.LFG(CustomerTicketingConnector),core.LFG(spartacus_core.Znh),core.LFG(spartacus_core.POd))},"CustomerTicketingService_Factory"),CustomerTicketingService.\u0275prov=core.Yz7({token:CustomerTicketingService,factory:CustomerTicketingService.\u0275fac});const facadeProviders=[CustomerTicketingService,{provide:spartacus_customer_ticketing_root.kr,useExisting:CustomerTicketingService}];function isNotFoundError(error){return"notFound"===error.reason&&"NotFoundError"===error.type}__name(isNotFoundError,"isNotFoundError");class NotFoundTicketRequestHandler extends spartacus_core.kck{constructor(globalMessageService,routingService,platformId){super(globalMessageService,platformId),this.globalMessageService=globalMessageService,this.routingService=routingService,this.platformId=platformId,this.responseStatus=spartacus_core.sdw.NOT_FOUND}getPriority(){return 0}hasMatch(errorResponse){return super.hasMatch(errorResponse)&&this.isCustomerTicketingDetailsRoute()&&this.getErrors(errorResponse).some(isNotFoundError)}handleError(request,response){this.handleTicketNotFoundError(request,response)}isCustomerTicketingDetailsRoute(){return"supportTicketDetails"===(0,spartacus_core.P51)(this.routingService.getRouterState())?.state?.semanticRoute}handleTicketNotFoundError(_request,response){this.getErrors(response).filter(e=>isNotFoundError(e)).forEach(()=>{this.routingService.go({cxRoute:"supportTickets"}),this.globalMessageService.add({key:"customerTicketingDetails.ticketNotFound"},spartacus_core.xUg.MSG_TYPE_ERROR)})}getErrors(response){return response.error?.errors||[]}}__name(NotFoundTicketRequestHandler,"NotFoundTicketRequestHandler"),NotFoundTicketRequestHandler.\u0275fac=__name(function(t){return new(t||NotFoundTicketRequestHandler)(core.LFG(spartacus_core.IWp),core.LFG(spartacus_core.Znh),core.LFG(core.Lbi))},"NotFoundTicketRequestHandler_Factory"),NotFoundTicketRequestHandler.\u0275prov=core.Yz7({token:NotFoundTicketRequestHandler,factory:NotFoundTicketRequestHandler.\u0275fac,providedIn:"root"});class CustomerTicketingPageMetaResolver extends spartacus_core.FRf{constructor(translationService,activeCartFacade,basePageMetaResolver,customerTicketingFacade,translation,semanticPath){super(),this.translationService=translationService,this.activeCartFacade=activeCartFacade,this.basePageMetaResolver=basePageMetaResolver,this.customerTicketingFacade=customerTicketingFacade,this.translation=translation,this.semanticPath=semanticPath,this.CUSTOMER_SERVICE_TRANSLATION_KEY="customerTicketing.customerService",this.CUSTOMER_SERVICE_SEMANTIC_ROUTE="supportTickets",this.customerServiceBreadCrumb$=this.translation.translate(this.CUSTOMER_SERVICE_TRANSLATION_KEY).pipe((0,map.U)(label=>[{label,link:this.semanticPath.get(this.CUSTOMER_SERVICE_SEMANTIC_ROUTE)}])),this.pageType=spartacus_core.GV4.CONTENT_PAGE,this.pageUid="support-ticket-details"}resolveTitle(){return this.basePageMetaResolver.resolveTitle()}resolveHeading(){return this.customerTicketingFacade.getTicket().pipe((0,map.U)(ticket=>ticket?.subject||""))}resolveDescription(){return this.basePageMetaResolver.resolveDescription()}resolveRobots(){return this.basePageMetaResolver.resolveRobots()}resolveBreadcrumbs(){return(0,combineLatest.aj)([this.customerServiceBreadCrumb$,this.basePageMetaResolver.resolveBreadcrumbs()]).pipe((0,map.U)(([customerServiceBreadCrumb,breadcrumbs=[]])=>{const[home,...restBreadcrumbs]=breadcrumbs;return[home,...customerServiceBreadCrumb,...restBreadcrumbs]}))}}__name(CustomerTicketingPageMetaResolver,"CustomerTicketingPageMetaResolver"),CustomerTicketingPageMetaResolver.\u0275fac=__name(function(t){return new(t||CustomerTicketingPageMetaResolver)(core.LFG(spartacus_core.D7D),core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_core.MkU),core.LFG(spartacus_customer_ticketing_root.kr),core.LFG(spartacus_core.D7D),core.LFG(spartacus_core.hCH))},"CustomerTicketingPageMetaResolver_Factory"),CustomerTicketingPageMetaResolver.\u0275prov=core.Yz7({token:CustomerTicketingPageMetaResolver,factory:CustomerTicketingPageMetaResolver.\u0275fac,providedIn:"root"});class CustomerTicketingCoreModule{}__name(CustomerTicketingCoreModule,"CustomerTicketingCoreModule"),CustomerTicketingCoreModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingCoreModule)},"CustomerTicketingCoreModule_Factory"),CustomerTicketingCoreModule.\u0275mod=core.oAB({type:CustomerTicketingCoreModule}),CustomerTicketingCoreModule.\u0275inj=core.cJS({providers:[...facadeProviders,CustomerTicketingConnector,CustomerTicketingPageMetaResolver,{provide:spartacus_core.kck,useExisting:NotFoundTicketRequestHandler,multi:!0},{provide:spartacus_core.FRf,useExisting:CustomerTicketingPageMetaResolver,multi:!0}]});var http=__webpack_require__(48664);class OccCustomerTicketingAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter,this.logger=(0,core.f3M)(spartacus_core.mQy)}getTicketAssociatedObjects(customerId){return this.http.get(this.getTicketAssociatedObjectsEndpoint(customerId)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),(0,map.U)(associatedObjectList=>associatedObjectList.ticketAssociatedObjects??[]),this.converter.pipeableMany(CUSTOMER_TICKETING_ASSOCIATED_OBJECTS_NORMALIZER))}getTicketAssociatedObjectsEndpoint(customerId){return this.occEndpoints.buildUrl("getTicketAssociatedObjects",{urlParams:{customerId}})}getTicketCategories(){return this.http.get(this.getTicketCategoriesEndpoint()).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),(0,map.U)(categoryList=>categoryList.ticketCategories??[]),this.converter.pipeableMany(CUSTOMER_TICKETING_CATEGORY_NORMALIZER))}getTicketCategoriesEndpoint(){return this.occEndpoints.buildUrl("getTicketCategories")}getTicket(customerId,ticketId){return this.http.get(this.getTicketEndpoint(customerId,ticketId)).pipe((0,catchError.K)(errorResponse=>(0,throwError._)((0,spartacus_core.cxH)(errorResponse,this.logger))),(0,tap.b)(ticket=>ticket.ticketEvents?.reverse()),this.converter.pipeable(CUSTOMER_TICKETING_DETAILS_NORMALIZER))}getTicketEndpoint(customerId,ticketId){return this.occEndpoints.buildUrl("getTicket",{urlParams:{customerId,ticketId}})}createTicket(customerId,ticket){return this.http.post(this.getCreateTicketEndpoint(customerId),ticket,{headers:(new http.WM).set("Content-Type","application/json")}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),this.converter.pipeable(CUSTOMER_TICKETING_CREATE_NORMALIZER))}getCreateTicketEndpoint(customerId){return this.occEndpoints.buildUrl("createTicket",{urlParams:{customerId}})}getTickets(customerId,pageSize,currentPage,sort){return this.http.get(this.getTicketsEndpoint(customerId,pageSize,currentPage,sort)).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),this.converter.pipeable(CUSTOMER_TICKETING_LIST_NORMALIZER))}getTicketsEndpoint(customerId,pageSize,currentPage,sort){return this.occEndpoints.buildUrl("getTickets",{urlParams:{customerId},queryParams:{pageSize,currentPage,sort}})}createTicketEvent(customerId,ticketId,ticketEvent){return this.http.post(this.getCreateTicketEventEndpoint(customerId,ticketId),ticketEvent,{headers:(new http.WM).set("Content-Type","application/json")}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),this.converter.pipeable(CUSTOMER_TICKETING_EVENT_NORMALIZER))}getCreateTicketEventEndpoint(customerId,ticketId){return this.occEndpoints.buildUrl("createTicketEvent",{urlParams:{customerId,ticketId}})}uploadAttachment(customerId,ticketId,eventCode,file){const formData=new FormData;return formData.append("ticketEventAttachment",file),this.http.post(this.getUploadAttachmentEndpoint(customerId,ticketId,eventCode),formData).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),this.converter.pipeable(CUSTOMER_TICKETING_FILE_NORMALIZER))}getUploadAttachmentEndpoint(customerId,ticketId,eventCode){return this.occEndpoints.buildUrl("uploadAttachment",{urlParams:{customerId,ticketId,eventCode}})}downloadAttachment(customerId,ticketId,eventCode,attachmentId){return this.http.get(this.getDownloadAttachmentEndpoint(customerId,ticketId,eventCode,attachmentId),{responseType:"blob"}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))),this.converter.pipeable(CUSTOMER_TICKETING_FILE_NORMALIZER))}getDownloadAttachmentEndpoint(customerId,ticketId,eventCode,attachmentId){return this.occEndpoints.buildUrl("downloadAttachment",{urlParams:{customerId,ticketId,eventCode,attachmentId}})}}__name(OccCustomerTicketingAdapter,"OccCustomerTicketingAdapter"),OccCustomerTicketingAdapter.\u0275fac=__name(function(t){return new(t||OccCustomerTicketingAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccCustomerTicketingAdapter_Factory"),OccCustomerTicketingAdapter.\u0275prov=core.Yz7({token:OccCustomerTicketingAdapter,factory:OccCustomerTicketingAdapter.\u0275fac});class CustomerTicketingOccModule{}__name(CustomerTicketingOccModule,"CustomerTicketingOccModule"),CustomerTicketingOccModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingOccModule)},"CustomerTicketingOccModule_Factory"),CustomerTicketingOccModule.\u0275mod=core.oAB({type:CustomerTicketingOccModule}),CustomerTicketingOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{getTicket:"users/${customerId}/tickets/${ticketId}",getTickets:"users/${customerId}/tickets",createTicketEvent:"users/${customerId}/tickets/${ticketId}/events",getTicketCategories:"/ticketCategories",getTicketAssociatedObjects:"users/${customerId}/ticketAssociatedObjects",createTicket:"users/${customerId}/tickets",uploadAttachment:"/users/${customerId}/tickets/${ticketId}/events/${eventCode}/attachments",downloadAttachment:"/users/${customerId}/tickets/${ticketId}/events/${eventCode}/attachments/${attachmentId}"}}}}),{provide:CustomerTicketingAdapter,useClass:OccCustomerTicketingAdapter}],imports:[common.ez]});class CustomerTicketingModule{}__name(CustomerTicketingModule,"CustomerTicketingModule"),CustomerTicketingModule.\u0275fac=__name(function(t){return new(t||CustomerTicketingModule)},"CustomerTicketingModule_Factory"),CustomerTicketingModule.\u0275mod=core.oAB({type:CustomerTicketingModule}),CustomerTicketingModule.\u0275inj=core.cJS({imports:[CustomerTicketingComponentsModule,CustomerTicketingCoreModule,CustomerTicketingOccModule]})}};