/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { CartOutlets, } from '@spartacus/cart/base/root';
import { combineLatest, of } from 'rxjs';
import { filter, map } from 'rxjs/operators';
import { paymentMethodCard } from '@spartacus/order/root';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/core";
import * as i2 from "../order-details.service";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@angular/common";
import * as i5 from "../order-detail-billing/order-detail-billing.component";
export class OrderOverviewComponent {
    constructor(translation, orderDetailsService, component) {
        this.translation = translation;
        this.orderDetailsService = orderDetailsService;
        this.component = component;
        this.cartOutlets = CartOutlets;
        this.order$ = this.orderDetailsService.getOrderDetails();
        this.isOrderLoading$ = typeof this.orderDetailsService.isOrderDetailsLoading === 'function'
            ? this.orderDetailsService.isOrderDetailsLoading()
            : of(false);
        this.simple$ = this.component.data$.pipe(map((data) => data.simple));
    }
    getReplenishmentCodeCardContent(orderCode) {
        return this.translation.translate('orderDetails.replenishmentId').pipe(filter(() => Boolean(orderCode)), map((textTitle) => ({
            title: textTitle,
            text: [orderCode],
        })));
    }
    getReplenishmentActiveCardContent(active) {
        return combineLatest([
            this.translation.translate('orderDetails.status'),
            this.translation.translate('orderDetails.active'),
            this.translation.translate('orderDetails.cancelled'),
        ]).pipe(map(([textTitle, textActive, textCancelled]) => ({
            title: textTitle,
            text: [active ? textActive : textCancelled],
        })));
    }
    getReplenishmentStartOnCardContent(isoDate) {
        return this.translation.translate('orderDetails.startOn').pipe(filter(() => Boolean(isoDate)), map((textTitle) => {
            return {
                title: textTitle,
                text: [isoDate],
            };
        }));
    }
    getReplenishmentFrequencyCardContent(frequency) {
        return this.translation.translate('orderDetails.frequency').pipe(filter(() => Boolean(frequency)), map((textTitle) => ({
            title: textTitle,
            text: [frequency],
        })));
    }
    getReplenishmentNextDateCardContent(isoDate) {
        return this.translation.translate('orderDetails.nextOrderDate').pipe(filter(() => Boolean(isoDate)), map((textTitle) => {
            return {
                title: textTitle,
                text: [isoDate],
            };
        }));
    }
    getOrderCodeCardContent(orderCode) {
        return this.translation.translate('orderDetails.orderNumber').pipe(filter(() => Boolean(orderCode)), map((textTitle) => ({
            title: textTitle,
            text: [orderCode],
        })));
    }
    getOrderCurrentDateCardContent(isoDate) {
        return this.translation.translate('orderDetails.placedOn').pipe(filter(() => Boolean(isoDate)), map((textTitle) => {
            return {
                title: textTitle,
                text: [isoDate],
            };
        }));
    }
    getOrderStatusCardContent(status) {
        return combineLatest([
            this.translation.translate('orderDetails.status'),
            this.translation.translate('orderDetails.statusDisplay_' + status),
        ]).pipe(map(([textTitle, textStatus]) => ({
            title: textTitle,
            text: [textStatus],
        })));
    }
    getPurchaseOrderNumber(poNumber) {
        return combineLatest([
            this.translation.translate('orderDetails.purchaseOrderNumber'),
            this.translation.translate('orderDetails.emptyPurchaseOrderId'),
        ]).pipe(map(([textTitle, noneTextTitle]) => ({
            title: textTitle,
            text: [poNumber ? poNumber : noneTextTitle],
        })));
    }
    getMethodOfPaymentCardContent(hasPaymentInfo) {
        return combineLatest([
            this.translation.translate('orderDetails.methodOfPayment'),
            this.translation.translate('paymentTypes.paymentType_ACCOUNT'),
            this.translation.translate('paymentTypes.paymentType_CARD'),
        ]).pipe(map(([textTitle, textAccount, textCard]) => ({
            title: textTitle,
            text: [Boolean(hasPaymentInfo) ? textCard : textAccount],
        })));
    }
    getCostCenterCardContent(costCenter) {
        return this.translation.translate('orderDetails.costCenter').pipe(filter(() => Boolean(costCenter)), map((textTitle) => ({
            title: textTitle,
            textBold: costCenter?.name,
            text: ['(' + costCenter?.unit?.name + ')'],
        })));
    }
    getAddressCardContent(deliveryAddress) {
        return this.translation.translate('addressCard.shipTo').pipe(filter(() => Boolean(deliveryAddress)), map((textTitle) => {
            const formattedAddress = this.normalizeFormattedAddress(deliveryAddress.formattedAddress ?? '');
            return {
                title: textTitle,
                textBold: `${deliveryAddress.firstName} ${deliveryAddress.lastName}`,
                text: [formattedAddress, deliveryAddress.country?.name],
            };
        }));
    }
    getDeliveryModeCardContent(deliveryMode) {
        return this.translation.translate('orderDetails.shippingMethod').pipe(filter(() => Boolean(deliveryMode)), map((textTitle) => ({
            title: textTitle,
            textBold: deliveryMode.name,
            text: [
                deliveryMode.description,
                deliveryMode.deliveryCost?.formattedValue
                    ? deliveryMode.deliveryCost?.formattedValue
                    : '',
            ],
        })));
    }
    getPaymentInfoCardContent(payment) {
        return combineLatest([
            this.translation.translate('paymentForm.payment'),
            this.translation.translate('paymentCard.expires', {
                month: Boolean(payment) ? payment.expiryMonth : '',
                year: Boolean(payment) ? payment.expiryYear : '',
            }),
        ]).pipe(filter(() => Boolean(payment)), map(([textTitle, textExpires]) => paymentMethodCard(textTitle, textExpires, payment)));
    }
    isPaymentInfoCardFull(payment) {
        return (!!payment?.cardNumber && !!payment?.expiryMonth && !!payment?.expiryYear);
    }
    getBillingAddressCardContent(billingAddress) {
        return this.translation.translate('paymentForm.billingAddress').pipe(filter(() => Boolean(billingAddress)), map((textTitle) => ({
            title: textTitle,
            textBold: `${billingAddress.firstName} ${billingAddress.lastName}`,
            text: [
                billingAddress.formattedAddress,
                billingAddress.country?.name,
            ],
        })));
    }
    normalizeFormattedAddress(formattedAddress) {
        const addresses = formattedAddress
            .split(',')
            .map((address) => address.trim());
        return addresses.filter(Boolean).join(', ');
    }
}
OrderOverviewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: OrderOverviewComponent, deps: [{ token: i1.TranslationService }, { token: i2.OrderDetailsService }, { token: i3.CmsComponentData }], target: i0.ɵɵFactoryTarget.Component });
OrderOverviewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: OrderOverviewComponent, selector: "cx-order-overview", ngImport: i0, template: "<div class=\"cx-order-summary\" *ngIf=\"order$ | async as order\">\n  <ng-container *ngIf=\"!(isOrderLoading$ | async)\">\n    <div *ngIf=\"!(simple$ | async)\" class=\"container\">\n      <ng-container *ngIf=\"order.replenishmentOrderCode; else otherOrder\">\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getReplenishmentCodeCardContent(order?.replenishmentOrderCode)\n                | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getReplenishmentActiveCardContent(order?.active) | async\"\n          ></cx-card>\n        </div>\n\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getReplenishmentStartOnCardContent(order?.firstDate | cxDate)\n                | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getReplenishmentFrequencyCardContent(\n                order?.trigger?.displayTimeTable\n              ) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getReplenishmentNextDateCardContent(\n                order?.trigger?.activationTime | cxDate\n              ) | async\n            \"\n          ></cx-card>\n\n          <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.4'\">\n            <ng-template\n              [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n              [cxOutletContext]=\"{ item: order, readonly: true }\"\n            >\n            </ng-template>\n          </ng-container>\n        </div>\n      </ng-container>\n\n      <ng-template #otherOrder>\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"getOrderCodeCardContent(order?.code) | async\"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getOrderCurrentDateCardContent(order?.created | cxDate) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getOrderStatusCardContent(order.statusDisplay) | async\"\n          ></cx-card>\n\n          <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.4'\">\n            <ng-template\n              [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n              [cxOutletContext]=\"{ item: order, readonly: true }\"\n            >\n            </ng-template>\n          </ng-container>\n        </div>\n      </ng-template>\n\n      <ng-container\n        *ngIf=\"order.purchaseOrderNumber || order.purchaseOrderNumber === ''\"\n      >\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getPurchaseOrderNumber(order?.purchaseOrderNumber) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getMethodOfPaymentCardContent(order.paymentInfo) | async\"\n          ></cx-card>\n\n          <ng-container *ngIf=\"order.costCenter\">\n            <cx-card\n              [content]=\"getCostCenterCardContent(order?.costCenter) | async\"\n            ></cx-card>\n          </ng-container>\n        </div>\n      </ng-container>\n\n      <div class=\"cx-summary-card\">\n        <ng-container *ngIf=\"order.deliveryAddress\">\n          <cx-card\n            [content]=\"getAddressCardContent(order?.deliveryAddress) | async\"\n          ></cx-card>\n        </ng-container>\n\n        <ng-container *ngIf=\"order.deliveryMode\">\n          <cx-card\n            [content]=\"getDeliveryModeCardContent(order?.deliveryMode) | async\"\n          ></cx-card>\n        </ng-container>\n      </div>\n\n      <ng-container *ngIf=\"order.paymentInfo\">\n        <ng-container *cxFeatureLevel=\"'6.3'\">\n          <div\n            class=\"cx-summary-card\"\n            *ngIf=\"\n              order?.paymentInfo?.billingAddress ||\n              isPaymentInfoCardFull(order?.paymentInfo)\n            \"\n          >\n            <ng-container *ngIf=\"isPaymentInfoCardFull(order?.paymentInfo)\">\n              <cx-card\n                [content]=\"\n                  getPaymentInfoCardContent(order?.paymentInfo) | async\n                \"\n              ></cx-card>\n            </ng-container>\n\n            <cx-card\n              [content]=\"\n                getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n                  | async\n              \"\n            ></cx-card>\n          </div>\n        </ng-container>\n\n        <ng-container *cxFeatureLevel=\"'!6.3'\">\n          <div class=\"cx-summary-card\">\n            <cx-card\n              [content]=\"getPaymentInfoCardContent(order?.paymentInfo) | async\"\n            ></cx-card>\n\n            <cx-card\n              [content]=\"\n                getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n                  | async\n              \"\n            ></cx-card>\n          </div>\n        </ng-container>\n      </ng-container>\n    </div>\n\n    <div *ngIf=\"simple$ | async\" class=\"container\">\n      <div class=\"cx-order-details-cards\">\n        <cx-card\n          [content]=\"getOrderCodeCardContent(order?.code) | async\"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getOrderCurrentDateCardContent(order?.created | cxDate) | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"getOrderStatusCardContent(order.statusDisplay) | async\"\n        ></cx-card>\n\n        <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'6.4'\">\n          <ng-template\n            [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n            [cxOutletContext]=\"{ item: order, readonly: true }\"\n          >\n          </ng-template>\n        </ng-container>\n      </div>\n      <ng-container *cxFeatureLevel=\"'!6.6'\">\n        <cx-order-detail-billing></cx-order-detail-billing>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.6'\">\n        <cx-order-detail-billing\n          *ngIf=\"\n            isPaymentInfoCardFull(order?.paymentInfo) ||\n            order?.paymentInfo?.billingAddress\n          \"\n        ></cx-order-detail-billing>\n      </ng-container>\n    </div>\n  </ng-container>\n</div>\n", dependencies: [{ kind: "component", type: i3.CardComponent, selector: "cx-card", inputs: ["border", "editMode", "isDefault", "content", "fitToContainer", "truncateText", "charactersLimit", "index"], outputs: ["deleteCard", "setDefaultCard", "sendCard", "editCard", "cancelCard"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.FeatureLevelDirective, selector: "[cxFeatureLevel]", inputs: ["cxFeatureLevel"] }, { kind: "directive", type: i3.OutletDirective, selector: "[cxOutlet]", inputs: ["cxOutlet", "cxOutletContext", "cxOutletDefer", "cxComponentRef"], outputs: ["loaded", "cxComponentRefChange"] }, { kind: "component", type: i5.OrderDetailBillingComponent, selector: "cx-order-detail-billing" }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i1.CxDatePipe, name: "cxDate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: OrderOverviewComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-order-overview', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"cx-order-summary\" *ngIf=\"order$ | async as order\">\n  <ng-container *ngIf=\"!(isOrderLoading$ | async)\">\n    <div *ngIf=\"!(simple$ | async)\" class=\"container\">\n      <ng-container *ngIf=\"order.replenishmentOrderCode; else otherOrder\">\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getReplenishmentCodeCardContent(order?.replenishmentOrderCode)\n                | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getReplenishmentActiveCardContent(order?.active) | async\"\n          ></cx-card>\n        </div>\n\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getReplenishmentStartOnCardContent(order?.firstDate | cxDate)\n                | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getReplenishmentFrequencyCardContent(\n                order?.trigger?.displayTimeTable\n              ) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getReplenishmentNextDateCardContent(\n                order?.trigger?.activationTime | cxDate\n              ) | async\n            \"\n          ></cx-card>\n\n          <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.4'\">\n            <ng-template\n              [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n              [cxOutletContext]=\"{ item: order, readonly: true }\"\n            >\n            </ng-template>\n          </ng-container>\n        </div>\n      </ng-container>\n\n      <ng-template #otherOrder>\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"getOrderCodeCardContent(order?.code) | async\"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"\n              getOrderCurrentDateCardContent(order?.created | cxDate) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getOrderStatusCardContent(order.statusDisplay) | async\"\n          ></cx-card>\n\n          <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n          <ng-container *cxFeatureLevel=\"'6.4'\">\n            <ng-template\n              [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n              [cxOutletContext]=\"{ item: order, readonly: true }\"\n            >\n            </ng-template>\n          </ng-container>\n        </div>\n      </ng-template>\n\n      <ng-container\n        *ngIf=\"order.purchaseOrderNumber || order.purchaseOrderNumber === ''\"\n      >\n        <div class=\"cx-summary-card\">\n          <cx-card\n            [content]=\"\n              getPurchaseOrderNumber(order?.purchaseOrderNumber) | async\n            \"\n          ></cx-card>\n\n          <cx-card\n            [content]=\"getMethodOfPaymentCardContent(order.paymentInfo) | async\"\n          ></cx-card>\n\n          <ng-container *ngIf=\"order.costCenter\">\n            <cx-card\n              [content]=\"getCostCenterCardContent(order?.costCenter) | async\"\n            ></cx-card>\n          </ng-container>\n        </div>\n      </ng-container>\n\n      <div class=\"cx-summary-card\">\n        <ng-container *ngIf=\"order.deliveryAddress\">\n          <cx-card\n            [content]=\"getAddressCardContent(order?.deliveryAddress) | async\"\n          ></cx-card>\n        </ng-container>\n\n        <ng-container *ngIf=\"order.deliveryMode\">\n          <cx-card\n            [content]=\"getDeliveryModeCardContent(order?.deliveryMode) | async\"\n          ></cx-card>\n        </ng-container>\n      </div>\n\n      <ng-container *ngIf=\"order.paymentInfo\">\n        <ng-container *cxFeatureLevel=\"'6.3'\">\n          <div\n            class=\"cx-summary-card\"\n            *ngIf=\"\n              order?.paymentInfo?.billingAddress ||\n              isPaymentInfoCardFull(order?.paymentInfo)\n            \"\n          >\n            <ng-container *ngIf=\"isPaymentInfoCardFull(order?.paymentInfo)\">\n              <cx-card\n                [content]=\"\n                  getPaymentInfoCardContent(order?.paymentInfo) | async\n                \"\n              ></cx-card>\n            </ng-container>\n\n            <cx-card\n              [content]=\"\n                getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n                  | async\n              \"\n            ></cx-card>\n          </div>\n        </ng-container>\n\n        <ng-container *cxFeatureLevel=\"'!6.3'\">\n          <div class=\"cx-summary-card\">\n            <cx-card\n              [content]=\"getPaymentInfoCardContent(order?.paymentInfo) | async\"\n            ></cx-card>\n\n            <cx-card\n              [content]=\"\n                getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n                  | async\n              \"\n            ></cx-card>\n          </div>\n        </ng-container>\n      </ng-container>\n    </div>\n\n    <div *ngIf=\"simple$ | async\" class=\"container\">\n      <div class=\"cx-order-details-cards\">\n        <cx-card\n          [content]=\"getOrderCodeCardContent(order?.code) | async\"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getOrderCurrentDateCardContent(order?.created | cxDate) | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"getOrderStatusCardContent(order.statusDisplay) | async\"\n        ></cx-card>\n\n        <!-- TODO:(CXINT-2309) for next major release remove feature level -->\n        <ng-container *cxFeatureLevel=\"'6.4'\">\n          <ng-template\n            [cxOutlet]=\"cartOutlets.ORDER_OVERVIEW\"\n            [cxOutletContext]=\"{ item: order, readonly: true }\"\n          >\n          </ng-template>\n        </ng-container>\n      </div>\n      <ng-container *cxFeatureLevel=\"'!6.6'\">\n        <cx-order-detail-billing></cx-order-detail-billing>\n      </ng-container>\n      <ng-container *cxFeatureLevel=\"'6.6'\">\n        <cx-order-detail-billing\n          *ngIf=\"\n            isPaymentInfoCardFull(order?.paymentInfo) ||\n            order?.paymentInfo?.billingAddress\n          \"\n        ></cx-order-detail-billing>\n      </ng-container>\n    </div>\n  </ng-container>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.TranslationService }, { type: i2.OrderDetailsService }, { type: i3.CmsComponentData }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItb3ZlcnZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZGVyL2NvbXBvbmVudHMvb3JkZXItZGV0YWlscy9vcmRlci1vdmVydmlldy9vcmRlci1vdmVydmlldy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JkZXIvY29tcG9uZW50cy9vcmRlci1kZXRhaWxzL29yZGVyLW92ZXJ2aWV3L29yZGVyLW92ZXJ2aWV3LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25FLE9BQU8sRUFDTCxXQUFXLEdBR1osTUFBTSwyQkFBMkIsQ0FBQztBQVFuQyxPQUFPLEVBQWMsYUFBYSxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNyRCxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTdDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7O0FBTzFELE1BQU0sT0FBTyxzQkFBc0I7SUFhakMsWUFDWSxXQUErQixFQUMvQixtQkFBd0MsRUFDeEMsU0FBNEQ7UUFGNUQsZ0JBQVcsR0FBWCxXQUFXLENBQW9CO1FBQy9CLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFDeEMsY0FBUyxHQUFULFNBQVMsQ0FBbUQ7UUFmL0QsZ0JBQVcsR0FBRyxXQUFXLENBQUM7UUFFbkMsV0FBTSxHQUFvQixJQUFJLENBQUMsbUJBQW1CLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDckUsb0JBQWUsR0FDYixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsS0FBSyxVQUFVO1lBQ2xFLENBQUMsQ0FBQyxJQUFJLENBQUMs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LENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQ3JDLEdBQUcsQ0FDRCxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQ1osQ0FBQztZQUNDLEtBQUssRUFBRSxTQUFTO1lBQ2hCLFFBQVEsRUFBRSxHQUFHLGNBQWMsQ0FBQyxTQUFTLElBQUksY0FBYyxDQUFDLFFBQVEsRUFBRTtZQUNsRSxJQUFJLEVBQUU7Z0JBQ0osY0FBYyxDQUFDLGdCQUFnQjtnQkFDL0IsY0FBYyxDQUFDLE9BQU8sRUFBRSxJQUFJO2FBQzdCO1NBQ08sQ0FBQSxDQUNiLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFTyx5QkFBeUIsQ0FBQyxnQkFBd0I7UUFDeEQsTUFBTSxTQUFTLEdBQUcsZ0JBQWdCO2FBQy9CLEtBQUssQ0FBQyxHQUFHLENBQUM7YUFDVixHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRXBDLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7bUhBdE9VLHNCQUFzQjt1R0FBdEIsc0JBQXNCLHlEQzdCbkMsMHZNQXFNQTsyRkR4S2Esc0JBQXNCO2tCQUxsQyxTQUFTOytCQUNFLG1CQUFtQixtQkFFWix1QkFBdUIsQ0FBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjMgU0FQIFNwYXJ0YWN1cyB0ZWFtIDxzcGFydGFjdXMtdGVhbUBzYXAuY29tPlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQ2FydE91dGxldHMsXG4gIERlbGl2ZXJ5TW9kZSxcbiAgUGF5bWVudERldGFpbHMsXG59IGZyb20gJ0BzcGFydGFjdXMvY2FydC9iYXNlL3Jvb3QnO1xuaW1wb3J0IHtcbiAgQWRkcmVzcyxcbiAgQ21zT3JkZXJEZXRhaWxPdmVydmlld0NvbXBvbmVudCxcbiAgQ29zdENlbnRlcixcbiAgVHJhbnNsYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgQ2FyZCwgQ21zQ29tcG9uZW50RGF0YSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBjb21iaW5lTGF0ZXN0LCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBPcmRlckRldGFpbHNTZXJ2aWNlIH0gZnJvbSAnLi4vb3JkZXItZGV0YWlscy5zZXJ2aWNlJztcbmltcG9ydCB7IHBheW1lbnRNZXRob2RDYXJkIH0gZnJvbSAnQHNwYXJ0YWN1cy9vcmRlci9yb290JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtb3JkZXItb3ZlcnZpZXcnLFxuICB0ZW1wbGF0ZVVybDogJy4vb3JkZXItb3ZlcnZpZXcuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgT3JkZXJPdmVydmlld0NvbXBvbmVudCB7XG4gIHJlYWRvbmx5IGNhcnRPdXRsZXRzID0gQ2FydE91dGxldHM7XG5cbiAgb3JkZXIkOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLm9yZGVyRGV0YWlsc1NlcnZpY2UuZ2V0T3JkZXJEZXRhaWxzKCk7XG4gIGlzT3JkZXJMb2FkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9XG4gICAgdHlwZW9mIHRoaXMub3JkZXJEZXRhaWxzU2VydmljZS5pc09yZGVyRGV0YWlsc0xvYWRpbmcgPT09ICdmdW5jdGlvbidcbiAgICAgID8gdGhpcy5vcmRlckRldGFpbHNTZXJ2aWNlLmlzT3JkZXJEZXRhaWxzTG9hZGluZygpXG4gICAgICA6IG9mKGZhbHNlKTtcblxuICBzaW1wbGUkOiBPYnNlcnZhYmxlPGJvb2xlYW4gfCB1bmRlZmluZWQ+ID0gdGhpcy5jb21wb25lbnQuZGF0YSQucGlwZShcbiAgICBtYXAoKGRhdGEpID0+IGRhdGEuc2ltcGxlKVxuICApO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCB0cmFuc2xhdGlvbjogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBvcmRlckRldGFpbHNTZXJ2aWNlOiBPcmRlckRldGFpbHNTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjb21wb25lbnQ6IENtc0NvbXBvbmVudERhdGE8Q21zT3JkZXJEZXRhaWxPdmVydmlld0NvbXBvbmVudD5cbiAgKSB7fVxuXG4gIGdldFJlcGxlbmlzaG1lbnRDb2RlQ2FyZENvbnRlbnQob3JkZXJDb2RlOiBzdHJpbmcpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5yZXBsZW5pc2htZW50SWQnKS5waXBlKFxuICAgICAgZmlsdGVyKCgpID0+IEJvb2xlYW4ob3JkZXJDb2RlKSksXG4gICAgICBtYXAoKHRleHRUaXRsZSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IHRleHRUaXRsZSxcbiAgICAgICAgdGV4dDogW29yZGVyQ29kZV0sXG4gICAgICB9KSlcbiAgICApO1xuICB9XG5cbiAgZ2V0UmVwbGVuaXNobWVudEFjdGl2ZUNhcmRDb250ZW50KGFjdGl2ZTogYm9vbGVhbik6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiBjb21iaW5lTGF0ZXN0KFtcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdvcmRlckRldGFpbHMuc3RhdHVzJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLmFjdGl2ZScpLFxuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5jYW5jZWxsZWQnKSxcbiAgICBdKS5waXBlKFxuICAgICAgbWFwKChbdGV4dFRpdGxlLCB0ZXh0QWN0aXZlLCB0ZXh0Q2FuY2VsbGVkXSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IHRleHRUaXRsZSxcbiAgICAgICAgdGV4dDogW2FjdGl2ZSA/IHRleHRBY3RpdmUgOiB0ZXh0Q2FuY2VsbGVkXSxcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cblxuICBnZXRSZXBsZW5pc2htZW50U3RhcnRPbkNhcmRDb250ZW50KGlzb0RhdGU6IHN0cmluZyB8IG51bGwpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5zdGFydE9uJykucGlwZShcbiAgICAgIGZpbHRlcigoKSA9PiBCb29sZWFuKGlzb0RhdGUpKSxcbiAgICAgIG1hcCgodGV4dFRpdGxlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGl0bGU6IHRleHRUaXRsZSxcbiAgICAgICAgICB0ZXh0OiBbaXNvRGF0ZV0sXG4gICAgICAgIH0gYXMgQ2FyZDtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGdldFJlcGxlbmlzaG1lbnRGcmVxdWVuY3lDYXJkQ29udGVudChmcmVxdWVuY3k6IHN0cmluZyk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLmZyZXF1ZW5jeScpLnBpcGUoXG4gICAgICBmaWx0ZXIoKCkgPT4gQm9vbGVhbihmcmVxdWVuY3kpKSxcbiAgICAgIG1hcCgodGV4dFRpdGxlKSA9PiAoe1xuICAgICAgICB0aXRsZTogdGV4dFRpdGxlLFxuICAgICAgICB0ZXh0OiBbZnJlcXVlbmN5XSxcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cblxuICBnZXRSZXBsZW5pc2htZW50TmV4dERhdGVDYXJkQ29udGVudChcbiAgICBpc29EYXRlOiBzdHJpbmcgfCBudWxsXG4gICk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLm5leHRPcmRlckRhdGUnKS5waXBlKFxuICAgICAgZmlsdGVyKCgpID0+IEJvb2xlYW4oaXNvRGF0ZSkpLFxuICAgICAgbWFwKCh0ZXh0VGl0bGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogdGV4dFRpdGxlLFxuICAgICAgICAgIHRleHQ6IFtpc29EYXRlXSxcbiAgICAgICAgfSBhcyBDYXJkO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0T3JkZXJDb2RlQ2FyZENvbnRlbnQob3JkZXJDb2RlOiBzdHJpbmcpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5vcmRlck51bWJlcicpLnBpcGUoXG4gICAgICBmaWx0ZXIoKCkgPT4gQm9vbGVhbihvcmRlckNvZGUpKSxcbiAgICAgIG1hcCgodGV4dFRpdGxlKSA9PiAoe1xuICAgICAgICB0aXRsZTogdGV4dFRpdGxlLFxuICAgICAgICB0ZXh0OiBbb3JkZXJDb2RlXSxcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cblxuICBnZXRPcmRlckN1cnJlbnREYXRlQ2FyZENvbnRlbnQoaXNvRGF0ZTogc3RyaW5nIHwgbnVsbCk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLnBsYWNlZE9uJykucGlwZShcbiAgICAgIGZpbHRlcigoKSA9PiBCb29sZWFuKGlzb0RhdGUpKSxcbiAgICAgIG1hcCgodGV4dFRpdGxlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGl0bGU6IHRleHRUaXRsZSxcbiAgICAgICAgICB0ZXh0OiBbaXNvRGF0ZV0sXG4gICAgICAgIH0gYXMgQ2FyZDtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGdldE9yZGVyU3RhdHVzQ2FyZENvbnRlbnQoc3RhdHVzOiBzdHJpbmcpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLnN0YXR1cycpLFxuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5zdGF0dXNEaXNwbGF5XycgKyBzdGF0dXMpLFxuICAgIF0pLnBpcGUoXG4gICAgICBtYXAoKFt0ZXh0VGl0bGUsIHRleHRTdGF0dXNdKSA9PiAoe1xuICAgICAgICB0aXRsZTogdGV4dFRpdGxlLFxuICAgICAgICB0ZXh0OiBbdGV4dFN0YXR1c10sXG4gICAgICB9KSlcbiAgICApO1xuICB9XG5cbiAgZ2V0UHVyY2hhc2VPcmRlck51bWJlcihwb051bWJlcjogc3RyaW5nKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QoW1xuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZGVyRGV0YWlscy5wdXJjaGFzZU9yZGVyTnVtYmVyJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JkZXJEZXRhaWxzLmVtcHR5UHVyY2hhc2VPcmRlcklkJyksXG4gICAgXSkucGlwZShcbiAgICAgIG1hcCgoW3RleHRUaXRsZSwgbm9uZVRleHRUaXRsZV0pID0+ICh7XG4gICAgICAgIHRpdGxlOiB0ZXh0VGl0bGUsXG4gICAgICAgIHRleHQ6IFtwb051bWJlciA/IHBvTnVtYmVyIDogbm9uZVRleHRUaXRsZV0sXG4gICAgICB9KSlcbiAgICApO1xuICB9XG5cbiAgZ2V0TWV0aG9kT2ZQYXltZW50Q2FyZENvbnRlbnQoXG4gICAgaGFzUGF5bWVudEluZm86IFBheW1lbnREZXRhaWxzXG4gICk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiBjb21iaW5lTGF0ZXN0KFtcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdvcmRlckRldGFpbHMubWV0aG9kT2ZQYXltZW50JyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgncGF5bWVudFR5cGVzLnBheW1lbnRUeXBlX0FDQ09VTlQnKSxcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdwYXltZW50VHlwZXMucGF5bWVudFR5cGVfQ0FSRCcpLFxuICAgIF0pLnBpcGUoXG4gICAgICBtYXAoKFt0ZXh0VGl0bGUsIHRleHRBY2NvdW50LCB0ZXh0Q2FyZF0pID0+ICh7XG4gICAgICAgIHRpdGxlOiB0ZXh0VGl0bGUsXG4gICAgICAgIHRleHQ6IFtCb29sZWFuKGhhc1BheW1lbnRJbmZvKSA/IHRleHRDYXJkIDogdGV4dEFjY291bnRdLFxuICAgICAgfSkpXG4gICAgKTtcbiAgfVxuXG4gIGdldENvc3RDZW50ZXJDYXJkQ29udGVudChjb3N0Q2VudGVyOiBDb3N0Q2VudGVyKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdvcmRlckRldGFpbHMuY29zdENlbnRlcicpLnBpcGUoXG4gICAgICBmaWx0ZXIoKCkgPT4gQm9vbGVhbihjb3N0Q2VudGVyKSksXG4gICAgICBtYXAoKHRleHRUaXRsZSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IHRleHRUaXRsZSxcbiAgICAgICAgdGV4dEJvbGQ6IGNvc3RDZW50ZXI/Lm5hbWUsXG4gICAgICAgIHRleHQ6IFsnKCcgKyBjb3N0Q2VudGVyPy51bml0Py5uYW1lICsgJyknXSxcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cblxuICBnZXRBZGRyZXNzQ2FyZENvbnRlbnQoZGVsaXZlcnlBZGRyZXNzOiBBZGRyZXNzKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdhZGRyZXNzQ2FyZC5zaGlwVG8nKS5waXBlKFxuICAgICAgZmlsdGVyKCgpID0+IEJvb2xlYW4oZGVsaXZlcnlBZGRyZXNzKSksXG4gICAgICBtYXAoKHRleHRUaXRsZSkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRBZGRyZXNzID0gdGhpcy5ub3JtYWxpemVGb3JtYXR0ZWRBZGRyZXNzKFxuICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzID8/ICcnXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogdGV4dFRpdGxlLFxuICAgICAgICAgIHRleHRCb2xkOiBgJHtkZWxpdmVyeUFkZHJlc3MuZmlyc3ROYW1lfSAke2RlbGl2ZXJ5QWRkcmVzcy5sYXN0TmFtZX1gLFxuICAgICAgICAgIHRleHQ6IFtmb3JtYXR0ZWRBZGRyZXNzLCBkZWxpdmVyeUFkZHJlc3MuY291bnRyeT8ubmFtZV0sXG4gICAgICAgIH0gYXMgQ2FyZDtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGdldERlbGl2ZXJ5TW9kZUNhcmRDb250ZW50KGRlbGl2ZXJ5TW9kZTogRGVsaXZlcnlNb2RlKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdvcmRlckRldGFpbHMuc2hpcHBpbmdNZXRob2QnKS5waXBlKFxuICAgICAgZmlsdGVyKCgpID0+IEJvb2xlYW4oZGVsaXZlcnlNb2RlKSksXG4gICAgICBtYXAoXG4gICAgICAgICh0ZXh0VGl0bGUpID0+XG4gICAgICAgICAgKHtcbiAgICAgICAgICAgIHRpdGxlOiB0ZXh0VGl0bGUsXG4gICAgICAgICAgICB0ZXh0Qm9sZDogZGVsaXZlcnlNb2RlLm5hbWUsXG4gICAgICAgICAgICB0ZXh0OiBbXG4gICAgICAgICAgICAgIGRlbGl2ZXJ5TW9kZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgZGVsaXZlcnlNb2RlLmRlbGl2ZXJ5Q29zdD8uZm9ybWF0dGVkVmFsdWVcbiAgICAgICAgICAgICAgICA/IGRlbGl2ZXJ5TW9kZS5kZWxpdmVyeUNvc3Q/LmZvcm1hdHRlZFZhbHVlXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSBhcyBDYXJkKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBnZXRQYXltZW50SW5mb0NhcmRDb250ZW50KHBheW1lbnQ6IFBheW1lbnREZXRhaWxzKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QoW1xuICAgICAgdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ3BheW1lbnRGb3JtLnBheW1lbnQnKSxcbiAgICAgIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdwYXltZW50Q2FyZC5leHBpcmVzJywge1xuICAgICAgICBtb250aDogQm9vbGVhbihwYXltZW50KSA/IHBheW1lbnQuZXhwaXJ5TW9udGggOiAnJyxcbiAgICAgICAgeWVhcjogQm9vbGVhbihwYXltZW50KSA/IHBheW1lbnQuZXhwaXJ5WWVhciA6ICcnLFxuICAgICAgfSksXG4gICAgXSkucGlwZShcbiAgICAgIGZpbHRlcigoKSA9PiBCb29sZWFuKHBheW1lbnQpKSxcbiAgICAgIG1hcCgoW3RleHRUaXRsZSwgdGV4dEV4cGlyZXNdKSA9PlxuICAgICAgICBwYXltZW50TWV0aG9kQ2FyZCh0ZXh0VGl0bGUsIHRleHRFeHBpcmVzLCBwYXltZW50KVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBpc1BheW1lbnRJbmZvQ2FyZEZ1bGwocGF5bWVudDogUGF5bWVudERldGFpbHMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgISFwYXltZW50Py5jYXJkTnVtYmVyICYmICEhcGF5bWVudD8uZXhwaXJ5TW9udGggJiYgISFwYXltZW50Py5leHBpcnlZZWFyXG4gICAgKTtcbiAgfVxuXG4gIGdldEJpbGxpbmdBZGRyZXNzQ2FyZENvbnRlbnQoYmlsbGluZ0FkZHJlc3M6IEFkZHJlc3MpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ3BheW1lbnRGb3JtLmJpbGxpbmdBZGRyZXNzJykucGlwZShcbiAgICAgIGZpbHRlcigoKSA9PiBCb29sZWFuKGJpbGxpbmdBZGRyZXNzKSksXG4gICAgICBtYXAoXG4gICAgICAgICh0ZXh0VGl0bGUpID0+XG4gICAgICAgICAgKHtcbiAgICAgICAgICAgIHRpdGxlOiB0ZXh0VGl0bGUsXG4gICAgICAgICAgICB0ZXh0Qm9sZDogYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAsXG4gICAgICAgICAgICB0ZXh0OiBbXG4gICAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLmNvdW50cnk/Lm5hbWUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0gYXMgQ2FyZClcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVGb3JtYXR0ZWRBZGRyZXNzKGZvcm1hdHRlZEFkZHJlc3M6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYWRkcmVzc2VzID0gZm9ybWF0dGVkQWRkcmVzc1xuICAgICAgLnNwbGl0KCcsJylcbiAgICAgIC5tYXAoKGFkZHJlc3MpID0+IGFkZHJlc3MudHJpbSgpKTtcblxuICAgIHJldHVybiBhZGRyZXNzZXMuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJyk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJjeC1vcmRlci1zdW1tYXJ5XCIgKm5nSWY9XCJvcmRlciQgfCBhc3luYyBhcyBvcmRlclwiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiIShpc09yZGVyTG9hZGluZyQgfCBhc3luYylcIj5cbiAgICA8ZGl2ICpuZ0lmPVwiIShzaW1wbGUkIHwgYXN5bmMpXCIgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJvcmRlci5yZXBsZW5pc2htZW50T3JkZXJDb2RlOyBlbHNlIG90aGVyT3JkZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImN4LXN1bW1hcnktY2FyZFwiPlxuICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgICAgZ2V0UmVwbGVuaXNobWVudENvZGVDYXJkQ29udGVudChvcmRlcj8ucmVwbGVuaXNobWVudE9yZGVyQ29kZSlcbiAgICAgICAgICAgICAgICB8IGFzeW5jXG4gICAgICAgICAgICBcIlxuICAgICAgICAgID48L2N4LWNhcmQ+XG5cbiAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgW2NvbnRlbnRdPVwiZ2V0UmVwbGVuaXNobWVudEFjdGl2ZUNhcmRDb250ZW50KG9yZGVyPy5hY3RpdmUpIHwgYXN5bmNcIlxuICAgICAgICAgID48L2N4LWNhcmQ+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1zdW1tYXJ5LWNhcmRcIj5cbiAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgW2NvbnRlbnRdPVwiXG4gICAgICAgICAgICAgIGdldFJlcGxlbmlzaG1lbnRTdGFydE9uQ2FyZENvbnRlbnQob3JkZXI/LmZpcnN0RGF0ZSB8IGN4RGF0ZSlcbiAgICAgICAgICAgICAgICB8IGFzeW5jXG4gICAgICAgICAgICBcIlxuICAgICAgICAgID48L2N4LWNhcmQ+XG5cbiAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgW2NvbnRlbnRdPVwiXG4gICAgICAgICAgICAgIGdldFJlcGxlbmlzaG1lbnRGcmVxdWVuY3lDYXJkQ29udGVudChcbiAgICAgICAgICAgICAgICBvcmRlcj8udHJpZ2dlcj8uZGlzcGxheVRpbWVUYWJsZVxuICAgICAgICAgICAgICApIHwgYXN5bmNcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPjwvY3gtY2FyZD5cblxuICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgICAgZ2V0UmVwbGVuaXNobWVudE5leHREYXRlQ2FyZENvbnRlbnQoXG4gICAgICAgICAgICAgICAgb3JkZXI/LnRyaWdnZXI/LmFjdGl2YXRpb25UaW1lIHwgY3hEYXRlXG4gICAgICAgICAgICAgICkgfCBhc3luY1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+PC9jeC1jYXJkPlxuXG4gICAgICAgICAgPCEtLSBUT0RPOihDWElOVC0yMzA5KSBmb3IgbmV4dCBtYWpvciByZWxlYXNlIHJlbW92ZSBmZWF0dXJlIGxldmVsIC0tPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKmN4RmVhdHVyZUxldmVsPVwiJzYuNCdcIj5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICBbY3hPdXRsZXRdPVwiY2FydE91dGxldHMuT1JERVJfT1ZFUlZJRVdcIlxuICAgICAgICAgICAgICBbY3hPdXRsZXRDb250ZXh0XT1cInsgaXRlbTogb3JkZXIsIHJlYWRvbmx5OiB0cnVlIH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPG5nLXRlbXBsYXRlICNvdGhlck9yZGVyPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtc3VtbWFyeS1jYXJkXCI+XG4gICAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICAgIFtjb250ZW50XT1cImdldE9yZGVyQ29kZUNhcmRDb250ZW50KG9yZGVyPy5jb2RlKSB8IGFzeW5jXCJcbiAgICAgICAgICA+PC9jeC1jYXJkPlxuXG4gICAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICAgIFtjb250ZW50XT1cIlxuICAgICAgICAgICAgICBnZXRPcmRlckN1cnJlbnREYXRlQ2FyZENvbnRlbnQob3JkZXI/LmNyZWF0ZWQgfCBjeERhdGUpIHwgYXN5bmNcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPjwvY3gtY2FyZD5cblxuICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICBbY29udGVudF09XCJnZXRPcmRlclN0YXR1c0NhcmRDb250ZW50KG9yZGVyLnN0YXR1c0Rpc3BsYXkpIHwgYXN5bmNcIlxuICAgICAgICAgID48L2N4LWNhcmQ+XG5cbiAgICAgICAgICA8IS0tIFRPRE86KENYSU5ULTIzMDkpIGZvciBuZXh0IG1ham9yIHJlbGVhc2UgcmVtb3ZlIGZlYXR1cmUgbGV2ZWwgLS0+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi40J1wiPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgIFtjeE91dGxldF09XCJjYXJ0T3V0bGV0cy5PUkRFUl9PVkVSVklFV1wiXG4gICAgICAgICAgICAgIFtjeE91dGxldENvbnRleHRdPVwieyBpdGVtOiBvcmRlciwgcmVhZG9ubHk6IHRydWUgfVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgKm5nSWY9XCJvcmRlci5wdXJjaGFzZU9yZGVyTnVtYmVyIHx8IG9yZGVyLnB1cmNoYXNlT3JkZXJOdW1iZXIgPT09ICcnXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImN4LXN1bW1hcnktY2FyZFwiPlxuICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgICAgZ2V0UHVyY2hhc2VPcmRlck51bWJlcihvcmRlcj8ucHVyY2hhc2VPcmRlck51bWJlcikgfCBhc3luY1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+PC9jeC1jYXJkPlxuXG4gICAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICAgIFtjb250ZW50XT1cImdldE1ldGhvZE9mUGF5bWVudENhcmRDb250ZW50KG9yZGVyLnBheW1lbnRJbmZvKSB8IGFzeW5jXCJcbiAgICAgICAgICA+PC9jeC1jYXJkPlxuXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm9yZGVyLmNvc3RDZW50ZXJcIj5cbiAgICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICAgIFtjb250ZW50XT1cImdldENvc3RDZW50ZXJDYXJkQ29udGVudChvcmRlcj8uY29zdENlbnRlcikgfCBhc3luY1wiXG4gICAgICAgICAgICA+PC9jeC1jYXJkPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtc3VtbWFyeS1jYXJkXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJvcmRlci5kZWxpdmVyeUFkZHJlc3NcIj5cbiAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgW2NvbnRlbnRdPVwiZ2V0QWRkcmVzc0NhcmRDb250ZW50KG9yZGVyPy5kZWxpdmVyeUFkZHJlc3MpIHwgYXN5bmNcIlxuICAgICAgICAgID48L2N4LWNhcmQ+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJvcmRlci5kZWxpdmVyeU1vZGVcIj5cbiAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgW2NvbnRlbnRdPVwiZ2V0RGVsaXZlcnlNb2RlQ2FyZENvbnRlbnQob3JkZXI/LmRlbGl2ZXJ5TW9kZSkgfCBhc3luY1wiXG4gICAgICAgICAgPjwvY3gtY2FyZD5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm9yZGVyLnBheW1lbnRJbmZvXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKmN4RmVhdHVyZUxldmVsPVwiJzYuMydcIj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImN4LXN1bW1hcnktY2FyZFwiXG4gICAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgICBvcmRlcj8ucGF5bWVudEluZm8/LmJpbGxpbmdBZGRyZXNzIHx8XG4gICAgICAgICAgICAgIGlzUGF5bWVudEluZm9DYXJkRnVsbChvcmRlcj8ucGF5bWVudEluZm8pXG4gICAgICAgICAgICBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc1BheW1lbnRJbmZvQ2FyZEZ1bGwob3JkZXI/LnBheW1lbnRJbmZvKVwiPlxuICAgICAgICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgICAgICAgIFtjb250ZW50XT1cIlxuICAgICAgICAgICAgICAgICAgZ2V0UGF5bWVudEluZm9DYXJkQ29udGVudChvcmRlcj8ucGF5bWVudEluZm8pIHwgYXN5bmNcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+PC9jeC1jYXJkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgICAgIFtjb250ZW50XT1cIlxuICAgICAgICAgICAgICAgIGdldEJpbGxpbmdBZGRyZXNzQ2FyZENvbnRlbnQob3JkZXI/LnBheW1lbnRJbmZvPy5iaWxsaW5nQWRkcmVzcylcbiAgICAgICAgICAgICAgICAgIHwgYXN5bmNcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID48L2N4LWNhcmQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgKmN4RmVhdHVyZUxldmVsPVwiJyE2LjMnXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LXN1bW1hcnktY2FyZFwiPlxuICAgICAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICAgICAgW2NvbnRlbnRdPVwiZ2V0UGF5bWVudEluZm9DYXJkQ29udGVudChvcmRlcj8ucGF5bWVudEluZm8pIHwgYXN5bmNcIlxuICAgICAgICAgICAgPjwvY3gtY2FyZD5cblxuICAgICAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICAgICAgW2NvbnRlbnRdPVwiXG4gICAgICAgICAgICAgICAgZ2V0QmlsbGluZ0FkZHJlc3NDYXJkQ29udGVudChvcmRlcj8ucGF5bWVudEluZm8/LmJpbGxpbmdBZGRyZXNzKVxuICAgICAgICAgICAgICAgICAgfCBhc3luY1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjwvY3gtY2FyZD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgKm5nSWY9XCJzaW1wbGUkIHwgYXN5bmNcIiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImN4LW9yZGVyLWRldGFpbHMtY2FyZHNcIj5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJnZXRPcmRlckNvZGVDYXJkQ29udGVudChvcmRlcj8uY29kZSkgfCBhc3luY1wiXG4gICAgICAgID48L2N4LWNhcmQ+XG5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgIGdldE9yZGVyQ3VycmVudERhdGVDYXJkQ29udGVudChvcmRlcj8uY3JlYXRlZCB8IGN4RGF0ZSkgfCBhc3luY1xuICAgICAgICAgIFwiXG4gICAgICAgID48L2N4LWNhcmQ+XG5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJnZXRPcmRlclN0YXR1c0NhcmRDb250ZW50KG9yZGVyLnN0YXR1c0Rpc3BsYXkpIHwgYXN5bmNcIlxuICAgICAgICA+PC9jeC1jYXJkPlxuXG4gICAgICAgIDwhLS0gVE9ETzooQ1hJTlQtMjMwOSkgZm9yIG5leHQgbWFqb3IgcmVsZWFzZSByZW1vdmUgZmVhdHVyZSBsZXZlbCAtLT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi40J1wiPlxuICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgW2N4T3V0bGV0XT1cImNhcnRPdXRsZXRzLk9SREVSX09WRVJWSUVXXCJcbiAgICAgICAgICAgIFtjeE91dGxldENvbnRleHRdPVwieyBpdGVtOiBvcmRlciwgcmVhZG9ubHk6IHRydWUgfVwiXG4gICAgICAgICAgPlxuICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG4gICAgICA8bmctY29udGFpbmVyICpjeEZlYXR1cmVMZXZlbD1cIichNi42J1wiPlxuICAgICAgICA8Y3gtb3JkZXItZGV0YWlsLWJpbGxpbmc+PC9jeC1vcmRlci1kZXRhaWwtYmlsbGluZz5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPG5nLWNvbnRhaW5lciAqY3hGZWF0dXJlTGV2ZWw9XCInNi42J1wiPlxuICAgICAgICA8Y3gtb3JkZXItZGV0YWlsLWJpbGxpbmdcbiAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgaXNQYXltZW50SW5mb0NhcmRGdWxsKG9yZGVyPy5wYXltZW50SW5mbykgfHxcbiAgICAgICAgICAgIG9yZGVyPy5wYXltZW50SW5mbz8uYmlsbGluZ0FkZHJlc3NcbiAgICAgICAgICBcIlxuICAgICAgICA+PC9jeC1vcmRlci1kZXRhaWwtYmlsbGluZz5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvZGl2PlxuIl19