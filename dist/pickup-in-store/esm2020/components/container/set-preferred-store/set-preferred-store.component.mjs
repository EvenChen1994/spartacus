/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component, Input, Optional } from '@angular/core';
import { ICON_TYPE } from '@spartacus/storefront';
import { Subscription } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/pickup-in-store/root";
import * as i2 from "@spartacus/storefront";
import * as i3 from "@angular/common";
import * as i4 from "@spartacus/core";
export class SetPreferredStoreComponent {
    constructor(preferredStoreFacade, outlet) {
        this.preferredStoreFacade = preferredStoreFacade;
        this.outlet = outlet;
        this.ICON_TYPE = ICON_TYPE;
        this.storeSelected$ = this.preferredStoreFacade.getPreferredStore$();
        this.subscription = new Subscription();
    }
    ngOnInit() {
        this.subscription.add(this.outlet?.context$.subscribe((pointOfServiceNames) => (this.pointOfServiceName = pointOfServiceNames)));
    }
    ngOnDestroy() {
        this.subscription.unsubscribe();
    }
    setAsPreferred() {
        this.preferredStoreFacade.setPreferredStore(this.pointOfServiceName);
        return false;
    }
}
SetPreferredStoreComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: SetPreferredStoreComponent, deps: [{ token: i1.PreferredStoreFacade }, { token: i2.OutletContextData, optional: true }], target: i0.ɵɵFactoryTarget.Component });
SetPreferredStoreComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: SetPreferredStoreComponent, selector: "cx-set-preferred-store", inputs: { pointOfServiceName: "pointOfServiceName" }, ngImport: i0, template: "<div\n  [attr.data-preferred-store]=\"pointOfServiceName.name\"\n  [attr.data-store-is-selected]=\"\n    pointOfServiceName.name === (storeSelected$ | async)?.name\n  \"\n  class=\"setpreferredstore-container\"\n  (click)=\"setAsPreferred()\"\n>\n  <div\n    [ngClass]=\"{\n      'icon-selected':\n        pointOfServiceName.name === (storeSelected$ | async)?.name,\n      'icon-not-selected':\n        pointOfServiceName.name !== (storeSelected$ | async)?.name\n    }\"\n  >\n    <cx-icon [type]=\"ICON_TYPE.HEART\"></cx-icon>\n  </div>\n  <button\n    data-text=\"setPreferredStore.myStore\"\n    [attr.data-preferred-store]=\"pointOfServiceName.name\"\n    class=\"set-preferred-heading\"\n  >\n    {{\n      pointOfServiceName.name === (storeSelected$ | async)?.name\n        ? ('setPreferredStore.myStore' | cxTranslate)\n        : ('setPreferredStore.makeThisMyStore' | cxTranslate)\n    }}\n  </button>\n</div>\n", dependencies: [{ kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "component", type: i2.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "pipe", type: i4.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: SetPreferredStoreComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-set-preferred-store', template: "<div\n  [attr.data-preferred-store]=\"pointOfServiceName.name\"\n  [attr.data-store-is-selected]=\"\n    pointOfServiceName.name === (storeSelected$ | async)?.name\n  \"\n  class=\"setpreferredstore-container\"\n  (click)=\"setAsPreferred()\"\n>\n  <div\n    [ngClass]=\"{\n      'icon-selected':\n        pointOfServiceName.name === (storeSelected$ | async)?.name,\n      'icon-not-selected':\n        pointOfServiceName.name !== (storeSelected$ | async)?.name\n    }\"\n  >\n    <cx-icon [type]=\"ICON_TYPE.HEART\"></cx-icon>\n  </div>\n  <button\n    data-text=\"setPreferredStore.myStore\"\n    [attr.data-preferred-store]=\"pointOfServiceName.name\"\n    class=\"set-preferred-heading\"\n  >\n    {{\n      pointOfServiceName.name === (storeSelected$ | async)?.name\n        ? ('setPreferredStore.myStore' | cxTranslate)\n        : ('setPreferredStore.makeThisMyStore' | cxTranslate)\n    }}\n  </button>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.PreferredStoreFacade }, { type: i2.OutletContextData, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { pointOfServiceName: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0LXByZWZlcnJlZC1zdG9yZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvcGlja3VwLWluLXN0b3JlL2NvbXBvbmVudHMvY29udGFpbmVyL3NldC1wcmVmZXJyZWQtc3RvcmUvc2V0LXByZWZlcnJlZC1zdG9yZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvcGlja3VwLWluLXN0b3JlL2NvbXBvbmVudHMvY29udGFpbmVyL3NldC1wcmVmZXJyZWQtc3RvcmUvc2V0LXByZWZlcnJlZC1zdG9yZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXFCLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU05RSxPQUFPLEVBQUUsU0FBUyxFQUFxQixNQUFNLHVCQUF1QixDQUFDO0FBQ3JFLE9BQU8sRUFBYyxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7OztBQU1oRCxNQUFNLE9BQU8sMEJBQTBCO0lBUXJDLFlBQ1ksb0JBQTBDLEVBQzlCLE1BQThDO1FBRDFELHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDOUIsV0FBTSxHQUFOLE1BQU0sQ0FBd0M7UUFUN0QsY0FBUyxHQUFHLFNBQVMsQ0FBQztRQUd4QixtQkFBYyxHQUNuQixJQUFJLENBQUMsb0JBQW9CLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUNqRCxpQkFBWSxHQUFpQixJQUFJLFlBQVksRUFBRSxDQUFDO0lBSzdDLENBQUM7SUFFSixRQUFRO1FBQ04sSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQ25CLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FDN0IsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsbUJBQW1CLENBQUMsQ0FDekUsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFDRCxjQUFjO1FBQ1osSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3JFLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQzs7dUhBM0JVLDBCQUEwQjsyR0FBMUIsMEJBQTBCLG9IQ25CdkMseTVCQThCQTsyRkRYYSwwQkFBMEI7a0JBSnRDLFNBQVM7K0JBQ0Usd0JBQXdCOzswQkFhL0IsUUFBUTs0Q0FSRixrQkFBa0I7c0JBQTFCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtcbiAgUG9pbnRPZlNlcnZpY2VOYW1lcyxcbiAgUHJlZmVycmVkU3RvcmVGYWNhZGUsXG59IGZyb20gJ0BzcGFydGFjdXMvcGlja3VwLWluLXN0b3JlL3Jvb3QnO1xuaW1wb3J0IHsgSUNPTl9UWVBFLCBPdXRsZXRDb250ZXh0RGF0YSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtc2V0LXByZWZlcnJlZC1zdG9yZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9zZXQtcHJlZmVycmVkLXN0b3JlLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgU2V0UHJlZmVycmVkU3RvcmVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIHJlYWRvbmx5IElDT05fVFlQRSA9IElDT05fVFlQRTtcbiAgQElucHV0KCkgcG9pbnRPZlNlcnZpY2VOYW1lOiBQb2ludE9mU2VydmljZU5hbWVzO1xuXG4gIHB1YmxpYyBzdG9yZVNlbGVjdGVkJDogT2JzZXJ2YWJsZTxQb2ludE9mU2VydmljZU5hbWVzIHwgbnVsbD4gPVxuICAgIHRoaXMucHJlZmVycmVkU3RvcmVGYWNhZGUuZ2V0UHJlZmVycmVkU3RvcmUkKCk7XG4gIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBwcmVmZXJyZWRTdG9yZUZhY2FkZTogUHJlZmVycmVkU3RvcmVGYWNhZGUsXG4gICAgQE9wdGlvbmFsKCkgcHJvdGVjdGVkIG91dGxldDogT3V0bGV0Q29udGV4dERhdGE8UG9pbnRPZlNlcnZpY2VOYW1lcz5cbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgIHRoaXMub3V0bGV0Py5jb250ZXh0JC5zdWJzY3JpYmUoXG4gICAgICAgIChwb2ludE9mU2VydmljZU5hbWVzKSA9PiAodGhpcy5wb2ludE9mU2VydmljZU5hbWUgPSBwb2ludE9mU2VydmljZU5hbWVzKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG4gIHNldEFzUHJlZmVycmVkKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMucHJlZmVycmVkU3RvcmVGYWNhZGUuc2V0UHJlZmVycmVkU3RvcmUodGhpcy5wb2ludE9mU2VydmljZU5hbWUpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwiPGRpdlxuICBbYXR0ci5kYXRhLXByZWZlcnJlZC1zdG9yZV09XCJwb2ludE9mU2VydmljZU5hbWUubmFtZVwiXG4gIFthdHRyLmRhdGEtc3RvcmUtaXMtc2VsZWN0ZWRdPVwiXG4gICAgcG9pbnRPZlNlcnZpY2VOYW1lLm5hbWUgPT09IChzdG9yZVNlbGVjdGVkJCB8IGFzeW5jKT8ubmFtZVxuICBcIlxuICBjbGFzcz1cInNldHByZWZlcnJlZHN0b3JlLWNvbnRhaW5lclwiXG4gIChjbGljayk9XCJzZXRBc1ByZWZlcnJlZCgpXCJcbj5cbiAgPGRpdlxuICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICdpY29uLXNlbGVjdGVkJzpcbiAgICAgICAgcG9pbnRPZlNlcnZpY2VOYW1lLm5hbWUgPT09IChzdG9yZVNlbGVjdGVkJCB8IGFzeW5jKT8ubmFtZSxcbiAgICAgICdpY29uLW5vdC1zZWxlY3RlZCc6XG4gICAgICAgIHBvaW50T2ZTZXJ2aWNlTmFtZS5uYW1lICE9PSAoc3RvcmVTZWxlY3RlZCQgfCBhc3luYyk/Lm5hbWVcbiAgICB9XCJcbiAgPlxuICAgIDxjeC1pY29uIFt0eXBlXT1cIklDT05fVFlQRS5IRUFSVFwiPjwvY3gtaWNvbj5cbiAgPC9kaXY+XG4gIDxidXR0b25cbiAgICBkYXRhLXRleHQ9XCJzZXRQcmVmZXJyZWRTdG9yZS5teVN0b3JlXCJcbiAgICBbYXR0ci5kYXRhLXByZWZlcnJlZC1zdG9yZV09XCJwb2ludE9mU2VydmljZU5hbWUubmFtZVwiXG4gICAgY2xhc3M9XCJzZXQtcHJlZmVycmVkLWhlYWRpbmdcIlxuICA+XG4gICAge3tcbiAgICAgIHBvaW50T2ZTZXJ2aWNlTmFtZS5uYW1lID09PSAoc3RvcmVTZWxlY3RlZCQgfCBhc3luYyk/Lm5hbWVcbiAgICAgICAgPyAoJ3NldFByZWZlcnJlZFN0b3JlLm15U3RvcmUnIHwgY3hUcmFuc2xhdGUpXG4gICAgICAgIDogKCdzZXRQcmVmZXJyZWRTdG9yZS5tYWtlVGhpc015U3RvcmUnIHwgY3hUcmFuc2xhdGUpXG4gICAgfX1cbiAgPC9idXR0b24+XG48L2Rpdj5cbiJdfQ==