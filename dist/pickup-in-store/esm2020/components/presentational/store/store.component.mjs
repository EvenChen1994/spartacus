/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { storeHasStock } from '@spartacus/pickup-in-store/core';
import { ICON_TYPE } from '@spartacus/storefront';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@spartacus/storefront";
import * as i3 from "../../container/set-preferred-store/set-preferred-store.component";
import * as i4 from "./store-schedule/store-schedule.component";
import * as i5 from "./store-address/store-address.component";
import * as i6 from "@spartacus/core";
/**
 * A store in the store list including address, opening times, stock level, and
 * distance from the search location.
 */
export class StoreComponent {
    constructor() {
        /** The details of the store to be displayed */
        this.storeDetails = {};
        /** An event emitter triggered when this store is selected for pickup */
        this.storeSelected = new EventEmitter();
        this.openHoursOpen = false;
        this.ICON_TYPE = ICON_TYPE;
    }
    ngOnInit() {
        this.isInStock = storeHasStock(this.storeDetails);
    }
    /**
     * Select the current store for pickup.
     */
    selectStore() {
        this.storeSelected.emit(this.storeDetails);
        // return false to prevent this button adding to cart
        return false;
    }
    /**
     * Toggle whether the store's opening hours are visible.
     */
    toggleOpenHours() {
        this.openHoursOpen = !this.openHoursOpen;
        return false;
    }
}
StoreComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: StoreComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
StoreComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: StoreComponent, selector: "cx-store", inputs: { storeDetails: "storeDetails" }, outputs: { storeSelected: "storeSelected" }, ngImport: i0, template: "<div class=\"cx-store\">\n  <div class=\"cx-store-address\">\n    <div class=\"cx-store-full-address\">\n      <cx-store-address [storeDetails]=\"storeDetails\"></cx-store-address>\n\n      <div>\n        <div>\n          <button\n            (click)=\"toggleOpenHours()\"\n            class=\"cx-store-opening-hours-toggle\"\n          >\n            {{ 'store.viewHours' | cxTranslate }}\n            <span class=\"cx-store-opening-hours-icon\"\n              ><cx-icon\n                [type]=\"\n                  openHoursOpen ? ICON_TYPE.CARET_UP : ICON_TYPE.CARET_DOWN\n                \"\n              ></cx-icon\n            ></span>\n          </button>\n        </div>\n        <cx-store-schedule *ngIf=\"openHoursOpen\" [storeDetails]=\"storeDetails\">\n        </cx-store-schedule>\n        <cx-set-preferred-store\n          [pointOfServiceName]=\"{\n            name: storeDetails?.name,\n            displayName: storeDetails?.displayName\n          }\"\n        ></cx-set-preferred-store>\n      </div>\n    </div>\n  </div>\n  <div>\n    <div class=\"cx-store-distance\">{{ storeDetails?.formattedDistance }}</div>\n    <div>\n      <cx-icon\n        class=\"cx-store-stock-icon\"\n        *ngIf=\"isInStock\"\n        [type]=\"ICON_TYPE.CHECK\"\n      ></cx-icon>\n      <span\n        class=\"cx-stock-level\"\n        [ngClass]=\"{\n          'cx-store-in-stock': isInStock,\n          'cx-store-out-of-stock': !isInStock\n        }\"\n      >\n        {{\n          'store.stockLevel'\n            | cxTranslate\n              : {\n                  context: isInStock ? 'inStock' : 'outOfStock',\n                  count: storeDetails?.stockInfo?.stockLevel\n                }\n        }}</span\n      >\n    </div>\n  </div>\n</div>\n<div class=\"cx-store-pick-up-from-here\">\n  <button\n    (click)=\"selectStore()\"\n    class=\"btn btn-secondary btn-block\"\n    [disabled]=\"!isInStock\"\n    [attr.data-pickup-in-store-button]=\"storeDetails.name\"\n  >\n    {{ 'store.pickupFromHere' | cxTranslate }}\n  </button>\n</div>\n", dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { kind: "component", type: i3.SetPreferredStoreComponent, selector: "cx-set-preferred-store", inputs: ["pointOfServiceName"] }, { kind: "component", type: i4.StoreScheduleComponent, selector: "cx-store-schedule", inputs: ["storeDetails"] }, { kind: "component", type: i5.StoreAddressComponent, selector: "cx-store-address", inputs: ["storeDetails"] }, { kind: "pipe", type: i6.TranslatePipe, name: "cxTranslate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: StoreComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-store', template: "<div class=\"cx-store\">\n  <div class=\"cx-store-address\">\n    <div class=\"cx-store-full-address\">\n      <cx-store-address [storeDetails]=\"storeDetails\"></cx-store-address>\n\n      <div>\n        <div>\n          <button\n            (click)=\"toggleOpenHours()\"\n            class=\"cx-store-opening-hours-toggle\"\n          >\n            {{ 'store.viewHours' | cxTranslate }}\n            <span class=\"cx-store-opening-hours-icon\"\n              ><cx-icon\n                [type]=\"\n                  openHoursOpen ? ICON_TYPE.CARET_UP : ICON_TYPE.CARET_DOWN\n                \"\n              ></cx-icon\n            ></span>\n          </button>\n        </div>\n        <cx-store-schedule *ngIf=\"openHoursOpen\" [storeDetails]=\"storeDetails\">\n        </cx-store-schedule>\n        <cx-set-preferred-store\n          [pointOfServiceName]=\"{\n            name: storeDetails?.name,\n            displayName: storeDetails?.displayName\n          }\"\n        ></cx-set-preferred-store>\n      </div>\n    </div>\n  </div>\n  <div>\n    <div class=\"cx-store-distance\">{{ storeDetails?.formattedDistance }}</div>\n    <div>\n      <cx-icon\n        class=\"cx-store-stock-icon\"\n        *ngIf=\"isInStock\"\n        [type]=\"ICON_TYPE.CHECK\"\n      ></cx-icon>\n      <span\n        class=\"cx-stock-level\"\n        [ngClass]=\"{\n          'cx-store-in-stock': isInStock,\n          'cx-store-out-of-stock': !isInStock\n        }\"\n      >\n        {{\n          'store.stockLevel'\n            | cxTranslate\n              : {\n                  context: isInStock ? 'inStock' : 'outOfStock',\n                  count: storeDetails?.stockInfo?.stockLevel\n                }\n        }}</span\n      >\n    </div>\n  </div>\n</div>\n<div class=\"cx-store-pick-up-from-here\">\n  <button\n    (click)=\"selectStore()\"\n    class=\"btn btn-secondary btn-block\"\n    [disabled]=\"!isInStock\"\n    [attr.data-pickup-in-store-button]=\"storeDetails.name\"\n  >\n    {{ 'store.pickupFromHere' | cxTranslate }}\n  </button>\n</div>\n" }]
        }], propDecorators: { storeDetails: [{
                type: Input
            }], storeSelected: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3BpY2t1cC1pbi1zdG9yZS9jb21wb25lbnRzL3ByZXNlbnRhdGlvbmFsL3N0b3JlL3N0b3JlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9waWNrdXAtaW4tc3RvcmUvY29tcG9uZW50cy9wcmVzZW50YXRpb25hbC9zdG9yZS9zdG9yZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUvRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDaEUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7OztBQUVsRDs7O0dBR0c7QUFLSCxNQUFNLE9BQU8sY0FBYztJQUozQjtRQUtFLCtDQUErQztRQUN0QyxpQkFBWSxHQUF3QixFQUFFLENBQUM7UUFDaEQsd0VBQXdFO1FBRXhFLGtCQUFhLEdBQXNDLElBQUksWUFBWSxFQUF1QixDQUFDO1FBRzNGLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBQ2IsY0FBUyxHQUFHLFNBQVMsQ0FBQztLQXNCaEM7SUFwQkMsUUFBUTtRQUNOLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzNDLHFEQUFxRDtRQUNyRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7T0FFRztJQUNILGVBQWU7UUFDYixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUN6QyxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7OzJHQTlCVSxjQUFjOytGQUFkLGNBQWMsdUlDbkIzQix5Z0VBcUVBOzJGRGxEYSxjQUFjO2tCQUoxQixTQUFTOytCQUNFLFVBQVU7OEJBS1gsWUFBWTtzQkFBcEIsS0FBSztnQkFHTixhQUFhO3NCQURaLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBQb2ludE9mU2VydmljZVN0b2NrIH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7IHN0b3JlSGFzU3RvY2sgfSBmcm9tICdAc3BhcnRhY3VzL3BpY2t1cC1pbi1zdG9yZS9jb3JlJztcbmltcG9ydCB7IElDT05fVFlQRSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5cbi8qKlxuICogQSBzdG9yZSBpbiB0aGUgc3RvcmUgbGlzdCBpbmNsdWRpbmcgYWRkcmVzcywgb3BlbmluZyB0aW1lcywgc3RvY2sgbGV2ZWwsIGFuZFxuICogZGlzdGFuY2UgZnJvbSB0aGUgc2VhcmNoIGxvY2F0aW9uLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1zdG9yZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9zdG9yZS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIFN0b3JlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqIFRoZSBkZXRhaWxzIG9mIHRoZSBzdG9yZSB0byBiZSBkaXNwbGF5ZWQgKi9cbiAgQElucHV0KCkgc3RvcmVEZXRhaWxzOiBQb2ludE9mU2VydmljZVN0b2NrID0ge307XG4gIC8qKiBBbiBldmVudCBlbWl0dGVyIHRyaWdnZXJlZCB3aGVuIHRoaXMgc3RvcmUgaXMgc2VsZWN0ZWQgZm9yIHBpY2t1cCAqL1xuICBAT3V0cHV0KClcbiAgc3RvcmVTZWxlY3RlZDogRXZlbnRFbWl0dGVyPFBvaW50T2ZTZXJ2aWNlU3RvY2s+ID0gbmV3IEV2ZW50RW1pdHRlcjxQb2ludE9mU2VydmljZVN0b2NrPigpO1xuXG4gIGlzSW5TdG9jazogYm9vbGVhbjtcbiAgb3BlbkhvdXJzT3BlbiA9IGZhbHNlO1xuICByZWFkb25seSBJQ09OX1RZUEUgPSBJQ09OX1RZUEU7XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5pc0luU3RvY2sgPSBzdG9yZUhhc1N0b2NrKHRoaXMuc3RvcmVEZXRhaWxzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgdGhlIGN1cnJlbnQgc3RvcmUgZm9yIHBpY2t1cC5cbiAgICovXG4gIHNlbGVjdFN0b3JlKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuc3RvcmVTZWxlY3RlZC5lbWl0KHRoaXMuc3RvcmVEZXRhaWxzKTtcbiAgICAvLyByZXR1cm4gZmFsc2UgdG8gcHJldmVudCB0aGlzIGJ1dHRvbiBhZGRpbmcgdG8gY2FydFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgd2hldGhlciB0aGUgc3RvcmUncyBvcGVuaW5nIGhvdXJzIGFyZSB2aXNpYmxlLlxuICAgKi9cbiAgdG9nZ2xlT3BlbkhvdXJzKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMub3BlbkhvdXJzT3BlbiA9ICF0aGlzLm9wZW5Ib3Vyc09wZW47XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiY3gtc3RvcmVcIj5cbiAgPGRpdiBjbGFzcz1cImN4LXN0b3JlLWFkZHJlc3NcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY3gtc3RvcmUtZnVsbC1hZGRyZXNzXCI+XG4gICAgICA8Y3gtc3RvcmUtYWRkcmVzcyBbc3RvcmVEZXRhaWxzXT1cInN0b3JlRGV0YWlsc1wiPjwvY3gtc3RvcmUtYWRkcmVzcz5cblxuICAgICAgPGRpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAoY2xpY2spPVwidG9nZ2xlT3BlbkhvdXJzKClcIlxuICAgICAgICAgICAgY2xhc3M9XCJjeC1zdG9yZS1vcGVuaW5nLWhvdXJzLXRvZ2dsZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3sgJ3N0b3JlLnZpZXdIb3VycycgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjeC1zdG9yZS1vcGVuaW5nLWhvdXJzLWljb25cIlxuICAgICAgICAgICAgICA+PGN4LWljb25cbiAgICAgICAgICAgICAgICBbdHlwZV09XCJcbiAgICAgICAgICAgICAgICAgIG9wZW5Ib3Vyc09wZW4gPyBJQ09OX1RZUEUuQ0FSRVRfVVAgOiBJQ09OX1RZUEUuQ0FSRVRfRE9XTlxuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgID48L2N4LWljb25cbiAgICAgICAgICAgID48L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8Y3gtc3RvcmUtc2NoZWR1bGUgKm5nSWY9XCJvcGVuSG91cnNPcGVuXCIgW3N0b3JlRGV0YWlsc109XCJzdG9yZURldGFpbHNcIj5cbiAgICAgICAgPC9jeC1zdG9yZS1zY2hlZHVsZT5cbiAgICAgICAgPGN4LXNldC1wcmVmZXJyZWQtc3RvcmVcbiAgICAgICAgICBbcG9pbnRPZlNlcnZpY2VOYW1lXT1cIntcbiAgICAgICAgICAgIG5hbWU6IHN0b3JlRGV0YWlscz8ubmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdG9yZURldGFpbHM/LmRpc3BsYXlOYW1lXG4gICAgICAgICAgfVwiXG4gICAgICAgID48L2N4LXNldC1wcmVmZXJyZWQtc3RvcmU+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXY+XG4gICAgPGRpdiBjbGFzcz1cImN4LXN0b3JlLWRpc3RhbmNlXCI+e3sgc3RvcmVEZXRhaWxzPy5mb3JtYXR0ZWREaXN0YW5jZSB9fTwvZGl2PlxuICAgIDxkaXY+XG4gICAgICA8Y3gtaWNvblxuICAgICAgICBjbGFzcz1cImN4LXN0b3JlLXN0b2NrLWljb25cIlxuICAgICAgICAqbmdJZj1cImlzSW5TdG9ja1wiXG4gICAgICAgIFt0eXBlXT1cIklDT05fVFlQRS5DSEVDS1wiXG4gICAgICA+PC9jeC1pY29uPlxuICAgICAgPHNwYW5cbiAgICAgICAgY2xhc3M9XCJjeC1zdG9jay1sZXZlbFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAnY3gtc3RvcmUtaW4tc3RvY2snOiBpc0luU3RvY2ssXG4gICAgICAgICAgJ2N4LXN0b3JlLW91dC1vZi1zdG9jayc6ICFpc0luU3RvY2tcbiAgICAgICAgfVwiXG4gICAgICA+XG4gICAgICAgIHt7XG4gICAgICAgICAgJ3N0b3JlLnN0b2NrTGV2ZWwnXG4gICAgICAgICAgICB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgY29udGV4dDogaXNJblN0b2NrID8gJ2luU3RvY2snIDogJ291dE9mU3RvY2snLFxuICAgICAgICAgICAgICAgICAgY291bnQ6IHN0b3JlRGV0YWlscz8uc3RvY2tJbmZvPy5zdG9ja0xldmVsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9fTwvc3BhblxuICAgICAgPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImN4LXN0b3JlLXBpY2stdXAtZnJvbS1oZXJlXCI+XG4gIDxidXR0b25cbiAgICAoY2xpY2spPVwic2VsZWN0U3RvcmUoKVwiXG4gICAgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBidG4tYmxvY2tcIlxuICAgIFtkaXNhYmxlZF09XCIhaXNJblN0b2NrXCJcbiAgICBbYXR0ci5kYXRhLXBpY2t1cC1pbi1zdG9yZS1idXR0b25dPVwic3RvcmVEZXRhaWxzLm5hbWVcIlxuICA+XG4gICAge3sgJ3N0b3JlLnBpY2t1cEZyb21IZXJlJyB8IGN4VHJhbnNsYXRlIH19XG4gIDwvYnV0dG9uPlxuPC9kaXY+XG4iXX0=