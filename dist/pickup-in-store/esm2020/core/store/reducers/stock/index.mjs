/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { InjectionToken } from '@angular/core';
import { StateUtils } from '@spartacus/core';
import { StockLevelActions } from '../../actions/index';
import { STOCK_DATA } from '../../stock-state';
import { browserLocationReducer } from './browser-location.reducer';
import { hideOutOfStockReducer } from './hide-out-of-stock.reducer';
import { stockAtStoreReducer, stockReducer } from './stock-level.reducer';
function getReducers() {
    return {
        browserLocation: browserLocationReducer,
        hideOutOfStock: hideOutOfStockReducer,
        stockLevel: StateUtils.loaderReducer(STOCK_DATA, stockReducer),
        stockLevelAtStore: stockAtStoreReducer,
    };
}
export const stockReducersToken = new InjectionToken('StockReducers');
export const stockReducersProvider = {
    provide: stockReducersToken,
    useFactory: getReducers,
};
export function clearStockState(reducer) {
    return function (state, action) {
        const STATE = new Map([[StockLevelActions.CLEAR_STOCK_DATA, undefined]]);
        return reducer(STATE.has(action.type) ? STATE.get(action.type) : state, action);
    };
}
export const stockMetaReducers = [clearStockState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvcGlja3VwLWluLXN0b3JlL2NvcmUvc3RvcmUvcmVkdWNlcnMvc3RvY2svaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSxjQUFjLEVBQVksTUFBTSxlQUFlLENBQUM7QUFPekQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTdDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3hELE9BQU8sRUFBK0IsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDNUUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDcEUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRTFFLFNBQVMsV0FBVztJQUNsQixPQUFPO1FBQ0wsZUFBZSxFQUFFLHNCQUFzQjtRQUN2QyxjQUFjLEVBQUUscUJBQXFCO1FBQ3JDLFVBQVUsRUFBRSxVQUFVLENBQUMsYUFBYSxDQUNsQyxVQUFVLEVBQ1YsWUFBWSxDQUNiO1FBQ0QsaUJBQWlCLEVBQUUsbUJBQW1CO0tBQ3ZDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQzdCLElBQUksY0FBYyxDQUErQixlQUFlLENBQUMsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBYTtJQUM3QyxPQUFPLEVBQUUsa0JBQWtCO0lBQzNCLFVBQVUsRUFBRSxXQUFXO0NBQ3hCLENBQUM7QUFFRixNQUFNLFVBQVUsZUFBZSxDQUM3QixPQUEwQztJQUUxQyxPQUFPLFVBQVUsS0FBSyxFQUFFLE1BQU07UUFDNUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RSxPQUFPLE9BQU8sQ0FDWixLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFDdkQsTUFBTSxDQUNQLENBQUM7SUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQXVCLENBQUMsZUFBZSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIEFjdGlvbixcbiAgQWN0aW9uUmVkdWNlcixcbiAgQWN0aW9uUmVkdWNlck1hcCxcbiAgTWV0YVJlZHVjZXIsXG59IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7IFN0YXRlVXRpbHMgfSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuXG5pbXBvcnQgeyBTdG9ja0xldmVsQWN0aW9ucyB9IGZyb20gJy4uLy4uL2FjdGlvbnMvaW5kZXgnO1xuaW1wb3J0IHsgU3RvY2tMZXZlbFN0YXRlLCBTdG9ja1N0YXRlLCBTVE9DS19EQVRBIH0gZnJvbSAnLi4vLi4vc3RvY2stc3RhdGUnO1xuaW1wb3J0IHsgYnJvd3NlckxvY2F0aW9uUmVkdWNlciB9IGZyb20gJy4vYnJvd3Nlci1sb2NhdGlvbi5yZWR1Y2VyJztcbmltcG9ydCB7IGhpZGVPdXRPZlN0b2NrUmVkdWNlciB9IGZyb20gJy4vaGlkZS1vdXQtb2Ytc3RvY2sucmVkdWNlcic7XG5pbXBvcnQgeyBzdG9ja0F0U3RvcmVSZWR1Y2VyLCBzdG9ja1JlZHVjZXIgfSBmcm9tICcuL3N0b2NrLWxldmVsLnJlZHVjZXInO1xuXG5mdW5jdGlvbiBnZXRSZWR1Y2VycygpOiBBY3Rpb25SZWR1Y2VyTWFwPFN0b2NrU3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBicm93c2VyTG9jYXRpb246IGJyb3dzZXJMb2NhdGlvblJlZHVjZXIsXG4gICAgaGlkZU91dE9mU3RvY2s6IGhpZGVPdXRPZlN0b2NrUmVkdWNlcixcbiAgICBzdG9ja0xldmVsOiBTdGF0ZVV0aWxzLmxvYWRlclJlZHVjZXI8U3RvY2tMZXZlbFN0YXRlLCBhbnk+KFxuICAgICAgU1RPQ0tfREFUQSxcbiAgICAgIHN0b2NrUmVkdWNlclxuICAgICksXG4gICAgc3RvY2tMZXZlbEF0U3RvcmU6IHN0b2NrQXRTdG9yZVJlZHVjZXIsXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBzdG9ja1JlZHVjZXJzVG9rZW46IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8U3RvY2tTdGF0ZT4+ID1cbiAgbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8U3RvY2tTdGF0ZT4+KCdTdG9ja1JlZHVjZXJzJyk7XG5cbmV4cG9ydCBjb25zdCBzdG9ja1JlZHVjZXJzUHJvdmlkZXI6IFByb3ZpZGVyID0ge1xuICBwcm92aWRlOiBzdG9ja1JlZHVjZXJzVG9rZW4sXG4gIHVzZUZhY3Rvcnk6IGdldFJlZHVjZXJzLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU3RvY2tTdGF0ZShcbiAgcmVkdWNlcjogQWN0aW9uUmVkdWNlcjxTdG9ja1N0YXRlLCBBY3Rpb24+XG4pOiBBY3Rpb25SZWR1Y2VyPFN0b2NrU3RhdGUsIEFjdGlvbj4ge1xuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICBjb25zdCBTVEFURSA9IG5ldyBNYXAoW1tTdG9ja0xldmVsQWN0aW9ucy5DTEVBUl9TVE9DS19EQVRBLCB1bmRlZmluZWRdXSk7XG4gICAgcmV0dXJuIHJlZHVjZXIoXG4gICAgICBTVEFURS5oYXMoYWN0aW9uLnR5cGUpID8gU1RBVEUuZ2V0KGFjdGlvbi50eXBlKSA6IHN0YXRlLFxuICAgICAgYWN0aW9uXG4gICAgKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHN0b2NrTWV0YVJlZHVjZXJzOiBNZXRhUmVkdWNlcjxhbnk+W10gPSBbY2xlYXJTdG9ja1N0YXRlXTtcbiJdfQ==