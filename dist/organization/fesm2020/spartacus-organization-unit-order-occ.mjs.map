{"version":3,"file":"spartacus-organization-unit-order-occ.mjs","sources":["../../../feature-libs/organization/unit-order/occ/adapters/occ-unit-order.adapter.ts","../../../feature-libs/organization/unit-order/occ/adapters/index.ts","../../../feature-libs/organization/unit-order/occ/model/occ-unit-order-endpoints.model.ts","../../../feature-libs/organization/unit-order/occ/model/index.ts","../../../feature-libs/organization/unit-order/occ/config/default-occ-organization-config.ts","../../../feature-libs/organization/unit-order/occ/unit-order-occ.module.ts","../../../feature-libs/organization/unit-order/occ/public_api.ts","../../../feature-libs/organization/unit-order/occ/spartacus-organization-unit-order-occ.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ConverterService, Occ, OccEndpointsService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  Order,\n  OrderHistoryList,\n  ORDER_HISTORY_NORMALIZER,\n  ORDER_NORMALIZER,\n} from '@spartacus/order/root';\nimport { UnitOrderAdapter } from '@spartacus/organization/unit-order/core';\n\n@Injectable()\nexport class OccUnitOrderAdapter implements UnitOrderAdapter {\n  constructor(\n    protected http: HttpClient,\n    protected occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  public loadUnitOrderHistory(\n    userId: string,\n    pageSize?: number,\n    currentPage?: number,\n    filters?: string,\n    sort?: string\n  ): Observable<OrderHistoryList> {\n    const params: { [key: string]: string } = {};\n    if (pageSize) {\n      params['pageSize'] = pageSize.toString();\n    }\n    if (currentPage) {\n      params['currentPage'] = currentPage.toString();\n    }\n    if (filters) {\n      params['filters'] = filters.toString();\n    }\n    if (sort) {\n      params['sort'] = sort.toString();\n    }\n\n    const url = this.occEndpoints.buildUrl('unitLevelOrderHistory', {\n      urlParams: { userId },\n      queryParams: params,\n    });\n\n    return this.http\n      .get<Occ.OrderHistoryList>(url)\n      .pipe(this.converter.pipeable(ORDER_HISTORY_NORMALIZER));\n  }\n\n  public loadUnitOrderDetail(\n    userId: string,\n    orderCode: string\n  ): Observable<Order> {\n    const url = this.occEndpoints.buildUrl('unitLevelOrderDetail', {\n      urlParams: { userId, orderId: orderCode },\n    });\n\n    return this.http\n      .get<Occ.Order>(url)\n      .pipe(this.converter.pipeable(ORDER_NORMALIZER));\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './occ-unit-order.adapter';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { OccEndpoint } from '@spartacus/core';\n\ndeclare module '@spartacus/core' {\n  interface OccEndpoints {\n    /**\n     * Endpoint to retrieve unit-level orders\n     *\n     * @member {string}\n     */\n    unitLevelOrderHistory?: string | OccEndpoint;\n\n    /**\n     * Endpoint to retrieve unit-level order detail\n     *\n     * @member {string}\n     */\n    unitLevelOrderDetail?: string | OccEndpoint;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Imported for side effects (module augmentation)\nimport './occ-unit-order-endpoints.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { OccConfig } from '@spartacus/core';\n\nexport const defaultOccUnitOrderConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        unitLevelOrderHistory: `/orgUsers/\\${userId}/orgUnits/orders`,\n        unitLevelOrderDetail: `orgUsers/\\${userId}/orgUnits/orders/\\${orderId}?fields=FULL`,\n      },\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\n\nimport { defaultOccUnitOrderConfig } from './config/default-occ-organization-config';\nimport { OccUnitOrderAdapter } from './adapters/occ-unit-order.adapter';\nimport { UnitOrderAdapter } from '@spartacus/organization/unit-order/core';\nimport { ORDER_NORMALIZER } from '@spartacus/order/root';\nimport { OccOrderNormalizer } from '@spartacus/order/occ';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(defaultOccUnitOrderConfig),\n    { provide: UnitOrderAdapter, useClass: OccUnitOrderAdapter },\n    {\n      provide: ORDER_NORMALIZER,\n      useExisting: OccOrderNormalizer,\n      multi: true,\n    },\n  ],\n})\nexport class UnitOrderOccModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './adapters/index';\nexport * from './model/index';\nexport * from './unit-order-occ.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}