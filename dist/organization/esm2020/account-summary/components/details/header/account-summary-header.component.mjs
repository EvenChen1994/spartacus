/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, } from '@angular/core';
import { Subscription } from 'rxjs';
import { map, switchMap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/organization/account-summary/root";
import * as i2 from "@spartacus/core";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@angular/common";
export class AccountSummaryHeaderComponent {
    constructor(accountSummaryFacade, languageService, translation) {
        this.accountSummaryFacade = accountSummaryFacade;
        this.languageService = languageService;
        this.translation = translation;
        this.headerDetails$ = this.languageService
            .getActive()
            .pipe(switchMap(() => this.accountSummaryFacade.getAccountSummary()));
        this.subscriptions = new Subscription();
    }
    ngOnInit() {
        this.subscriptions.add(this.translation
            .translate('orgAccountSummary.details.notApplicable')
            .subscribe((text) => (this.notApplicable = text)));
    }
    ngOnDestroy() {
        this.subscriptions.unsubscribe();
    }
    getIdCardContent(id) {
        return this.translation.translate('orgAccountSummary.details.uid').pipe(map((idTitle) => ({
            title: idTitle,
            text: [id || this.notApplicable],
        })));
    }
    getNameCardContent(name) {
        return this.translation.translate('orgAccountSummary.details.name').pipe(map((nameTitle) => ({
            title: nameTitle,
            text: [name || this.notApplicable],
        })));
    }
    getAddressCardContent(billingAddress) {
        return this.translation.translate('orgAccountSummary.details.address').pipe(map((addressTitle) => {
            const name = `${billingAddress?.title}, ${billingAddress?.firstName} ${billingAddress?.lastName}`;
            const address = billingAddress?.formattedAddress;
            const country = billingAddress?.country?.name;
            return {
                title: addressTitle,
                text: Boolean(billingAddress)
                    ? [name, address, country]
                    : [this.notApplicable],
            };
        }));
    }
    getCreditRepCardContent(creditRep) {
        return this.translation
            .translate('orgAccountSummary.details.creditRep')
            .pipe(map((creditRepTitle) => ({
            title: creditRepTitle,
            text: [creditRep || this.notApplicable],
        })));
    }
    getCreditLineCardContent(creditLine) {
        return this.translation
            .translate('orgAccountSummary.details.creditLine')
            .pipe(map((creditLineTitle) => ({
            title: creditLineTitle,
            text: [creditLine || this.notApplicable],
        })));
    }
    getCurrentBalanceCardContent(currentBalance) {
        return this.translation
            .translate('orgAccountSummary.details.currentBalance')
            .pipe(map((currentBalanceTitle) => ({
            title: currentBalanceTitle,
            text: [currentBalance || this.notApplicable],
        })));
    }
    getOpenBalanceCardContent(openBalance) {
        return this.translation
            .translate('orgAccountSummary.details.openBalance')
            .pipe(map((openBalanceTitle) => ({
            title: openBalanceTitle,
            text: [openBalance || this.notApplicable],
        })));
    }
    getPastDueBalanceCardContent(pastDueBalance) {
        return this.translation
            .translate('orgAccountSummary.details.pastDueBalance')
            .pipe(map((pastDueBalanceTitle) => ({
            title: pastDueBalanceTitle,
            text: [pastDueBalance ?? this.notApplicable],
        })));
    }
}
AccountSummaryHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AccountSummaryHeaderComponent, deps: [{ token: i1.AccountSummaryFacade }, { token: i2.LanguageService }, { token: i2.TranslationService }], target: i0.ɵɵFactoryTarget.Component });
AccountSummaryHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: AccountSummaryHeaderComponent, selector: "cx-account-summary-header", ngImport: i0, template: "<div class=\"cx-account-summary\" *ngIf=\"headerDetails$ | async as headerDetails\">\n  <div class=\"cx-account-summary-header-cards\">\n    <div\n      class=\"\n        cx-summary-card-responsive-group cx-summary-card-group-unit-address\n      \"\n    >\n      <!-- Card: Unit ID & Unit Name -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"getIdCardContent(headerDetails?.orgUnit?.uid) | async\"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"getNameCardContent(headerDetails?.orgUnit?.name) | async\"\n        >\n        </cx-card>\n      </div>\n\n      <!-- Card: Address -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getAddressCardContent(headerDetails?.billingAddress) | async\n          \"\n        >\n        </cx-card>\n      </div>\n    </div>\n\n    <div\n      class=\"\n        cx-summary-card-responsive-group cx-summary-card-group-credit-balance\n      \"\n    >\n      <!-- Card: Credit Rep & Credit Line -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getCreditRepCardContent(headerDetails?.accountManagerName) | async\n          \"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"\n            getCreditLineCardContent(headerDetails?.creditLimit) | async\n          \"\n        >\n        </cx-card>\n      </div>\n\n      <!-- Card: Current Balance & Open Balance -->\n      <div class=\"cx-summary-card cx-summary-card-balance\">\n        <cx-card\n          [content]=\"\n            getCurrentBalanceCardContent(\n              headerDetails?.amountBalance?.currentBalance\n            ) | async\n          \"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"\n            getOpenBalanceCardContent(headerDetails?.amountBalance?.openBalance)\n              | async\n          \"\n        >\n        </cx-card>\n      </div>\n    </div>\n\n    <!-- Card: Past Due Balance & Date Ranges -->\n    <div class=\"cx-summary-card cx-summary-card-group-due\">\n      <!-- If there range of past due balances are provided, display them here in a bordered section -->\n      <div\n        *ngIf=\"\n          headerDetails.amountBalance &&\n            headerDetails.amountBalance.dueBalances as pastDue;\n          else noDueRange\n        \"\n        [class.cx-account-summary-header-past-due-section]=\"pastDue.length > 0\"\n      >\n        <!-- Dynamically create lines of past due date ranges -->\n        <div\n          *ngIf=\"pastDue.length > 0\"\n          class=\"cx-account-summary-header-past-due-range-dates\"\n        >\n          <div\n            *ngFor=\"let rangeBalance of pastDue\"\n            class=\"cx-account-summary-header-past-due-range-collection\"\n            [tabindex]=\"-1\"\n          >\n            <div\n              class=\"cx-past-due-range-date\"\n              *ngIf=\"rangeBalance.dayRange as dayRange\"\n            >\n              <ng-template [ngIf]=\"dayRange?.maxBoundary\" [ngIfElse]=\"dayPlus\">\n                {{\n                  'orgAccountSummary.details.dayRange'\n                    | cxTranslate\n                      : {\n                          minBoundary: dayRange.minBoundary,\n                          maxBoundary: dayRange.maxBoundary\n                        }\n                }}\n              </ng-template>\n\n              <ng-template #dayPlus>\n                {{\n                  'orgAccountSummary.details.dayPlus'\n                    | cxTranslate: { minBoundary: dayRange.minBoundary }\n                }}\n              </ng-template>\n            </div>\n            <div>\n              {{ rangeBalance.amount }}\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"cx-account-summary-header-past-due-balance-total\"\n          [tabindex]=\"-1\"\n        >\n          <div class=\"cx-past-due-balance-label cx-card-title\">\n            {{ 'orgAccountSummary.details.pastDueBalance' | cxTranslate }}\n          </div>\n          <div>{{ headerDetails?.amountBalance?.pastDueBalance }}</div>\n        </div>\n      </div>\n\n      <!-- When there are no Ranges, only show a card containing the Past Due Balance -->\n      <ng-template #noDueRange>\n        <cx-card\n          [content]=\"\n            getPastDueBalanceCardContent(\n              headerDetails?.amountBalance?.pastDueBalance\n            ) | async\n          \"\n        >\n        </cx-card>\n      </ng-template>\n    </div>\n  </div>\n</div>\n", dependencies: [{ kind: "component", type: i3.CardComponent, selector: "cx-card", inputs: ["border", "editMode", "isDefault", "content", "fitToContainer", "truncateText", "charactersLimit", "index"], outputs: ["deleteCard", "setDefaultCard", "sendCard", "editCard", "cancelCard"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i2.TranslatePipe, name: "cxTranslate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AccountSummaryHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-account-summary-header', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"cx-account-summary\" *ngIf=\"headerDetails$ | async as headerDetails\">\n  <div class=\"cx-account-summary-header-cards\">\n    <div\n      class=\"\n        cx-summary-card-responsive-group cx-summary-card-group-unit-address\n      \"\n    >\n      <!-- Card: Unit ID & Unit Name -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"getIdCardContent(headerDetails?.orgUnit?.uid) | async\"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"getNameCardContent(headerDetails?.orgUnit?.name) | async\"\n        >\n        </cx-card>\n      </div>\n\n      <!-- Card: Address -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getAddressCardContent(headerDetails?.billingAddress) | async\n          \"\n        >\n        </cx-card>\n      </div>\n    </div>\n\n    <div\n      class=\"\n        cx-summary-card-responsive-group cx-summary-card-group-credit-balance\n      \"\n    >\n      <!-- Card: Credit Rep & Credit Line -->\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getCreditRepCardContent(headerDetails?.accountManagerName) | async\n          \"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"\n            getCreditLineCardContent(headerDetails?.creditLimit) | async\n          \"\n        >\n        </cx-card>\n      </div>\n\n      <!-- Card: Current Balance & Open Balance -->\n      <div class=\"cx-summary-card cx-summary-card-balance\">\n        <cx-card\n          [content]=\"\n            getCurrentBalanceCardContent(\n              headerDetails?.amountBalance?.currentBalance\n            ) | async\n          \"\n        >\n        </cx-card>\n\n        <cx-card\n          [content]=\"\n            getOpenBalanceCardContent(headerDetails?.amountBalance?.openBalance)\n              | async\n          \"\n        >\n        </cx-card>\n      </div>\n    </div>\n\n    <!-- Card: Past Due Balance & Date Ranges -->\n    <div class=\"cx-summary-card cx-summary-card-group-due\">\n      <!-- If there range of past due balances are provided, display them here in a bordered section -->\n      <div\n        *ngIf=\"\n          headerDetails.amountBalance &&\n            headerDetails.amountBalance.dueBalances as pastDue;\n          else noDueRange\n        \"\n        [class.cx-account-summary-header-past-due-section]=\"pastDue.length > 0\"\n      >\n        <!-- Dynamically create lines of past due date ranges -->\n        <div\n          *ngIf=\"pastDue.length > 0\"\n          class=\"cx-account-summary-header-past-due-range-dates\"\n        >\n          <div\n            *ngFor=\"let rangeBalance of pastDue\"\n            class=\"cx-account-summary-header-past-due-range-collection\"\n            [tabindex]=\"-1\"\n          >\n            <div\n              class=\"cx-past-due-range-date\"\n              *ngIf=\"rangeBalance.dayRange as dayRange\"\n            >\n              <ng-template [ngIf]=\"dayRange?.maxBoundary\" [ngIfElse]=\"dayPlus\">\n                {{\n                  'orgAccountSummary.details.dayRange'\n                    | cxTranslate\n                      : {\n                          minBoundary: dayRange.minBoundary,\n                          maxBoundary: dayRange.maxBoundary\n                        }\n                }}\n              </ng-template>\n\n              <ng-template #dayPlus>\n                {{\n                  'orgAccountSummary.details.dayPlus'\n                    | cxTranslate: { minBoundary: dayRange.minBoundary }\n                }}\n              </ng-template>\n            </div>\n            <div>\n              {{ rangeBalance.amount }}\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"cx-account-summary-header-past-due-balance-total\"\n          [tabindex]=\"-1\"\n        >\n          <div class=\"cx-past-due-balance-label cx-card-title\">\n            {{ 'orgAccountSummary.details.pastDueBalance' | cxTranslate }}\n          </div>\n          <div>{{ headerDetails?.amountBalance?.pastDueBalance }}</div>\n        </div>\n      </div>\n\n      <!-- When there are no Ranges, only show a card containing the Past Due Balance -->\n      <ng-template #noDueRange>\n        <cx-card\n          [content]=\"\n            getPastDueBalanceCardContent(\n              headerDetails?.amountBalance?.pastDueBalance\n            ) | async\n          \"\n        >\n        </cx-card>\n      </ng-template>\n    </div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AccountSummaryFacade }, { type: i2.LanguageService }, { type: i2.TranslationService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC1zdW1tYXJ5LWhlYWRlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FjY291bnQtc3VtbWFyeS9jb21wb25lbnRzL2RldGFpbHMvaGVhZGVyL2FjY291bnQtc3VtbWFyeS1oZWFkZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZ2FuaXphdGlvbi9hY2NvdW50LXN1bW1hcnkvY29tcG9uZW50cy9kZXRhaWxzL2hlYWRlci9hY2NvdW50LXN1bW1hcnktaGVhZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFFSCxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsR0FHVixNQUFNLGVBQWUsQ0FBQztBQU92QixPQUFPLEVBQWMsWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7OztBQU9oRCxNQUFNLE9BQU8sNkJBQTZCO0lBUXhDLFlBQ1ksb0JBQTBDLEVBQzFDLGVBQWdDLEVBQ2hDLFdBQStCO1FBRi9CLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMsb0JBQWUsR0FBZixlQUFlLENBQWlCO1FBQ2hDLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtRQVQzQyxtQkFBYyxHQUFzQyxJQUFJLENBQUMsZUFBZTthQUNyRSxTQUFTLEVBQUU7YUFDWCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUU5RCxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFNMUMsQ0FBQztJQUVKLFFBQVE7UUFDTixJQUFJLENBQUMsYUFBYSxD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QUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUIsS0FBSyxFQUFFLG1CQUFtQjtZQUMxQixJQUFJLEVBQUUsQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQztTQUM3QyxDQUFDLENBQUMsQ0FDSixDQUFDO0lBQ04sQ0FBQztJQUVELHlCQUF5QixDQUFDLFdBQW9CO1FBQzVDLE9BQU8sSUFBSSxDQUFDLFdBQVc7YUFDcEIsU0FBUyxDQUFDLHVDQUF1QyxDQUFDO2FBQ2xELElBQUksQ0FDSCxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN6QixLQUFLLEVBQUUsZ0JBQWdCO1lBQ3ZCLElBQUksRUFBRSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDO1NBQzFDLENBQUMsQ0FBQyxDQUNKLENBQUM7SUFDTixDQUFDO0lBRUQsNEJBQTRCLENBQUMsY0FBdUI7UUFDbEQsT0FBTyxJQUFJLENBQUMsV0FBVzthQUNwQixTQUFTLENBQUMsMENBQTBDLENBQUM7YUFDckQsSUFBSSxDQUNILEdBQUcsQ0FBQyxDQUFDLG1CQUFtQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzVCLEtBQUssRUFBRSxtQkFBbUI7WUFDMUIsSUFBSSxFQUFFLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUM7U0FDN0MsQ0FBQyxDQUFDLENBQ0osQ0FBQztJQUNOLENBQUM7OzBIQWpIVSw2QkFBNkI7OEdBQTdCLDZCQUE2QixpRUMxQjFDLDQ5SUFvSkE7MkZEMUhhLDZCQUE2QjtrQkFMekMsU0FBUzsrQkFDRSwyQkFBMkIsbUJBRXBCLHVCQUF1QixDQUFDLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU1BEWC1GaWxlQ29weXJpZ2h0VGV4dDogMjAyMyBTQVAgU3BhcnRhY3VzIHRlYW0gPHNwYXJ0YWN1cy10ZWFtQHNhcC5jb20+XG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBZGRyZXNzLCBMYW5ndWFnZVNlcnZpY2UsIFRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQge1xuICBBY2NvdW50U3VtbWFyeURldGFpbHMsXG4gIEFjY291bnRTdW1tYXJ5RmFjYWRlLFxufSBmcm9tICdAc3BhcnRhY3VzL29yZ2FuaXphdGlvbi9hY2NvdW50LXN1bW1hcnkvcm9vdCc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnQHNwYXJ0YWN1cy9zdG9yZWZyb250JztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LWFjY291bnQtc3VtbWFyeS1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vYWNjb3VudC1zdW1tYXJ5LWhlYWRlci5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBBY2NvdW50U3VtbWFyeUhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgbm90QXBwbGljYWJsZTogc3RyaW5nO1xuICBoZWFkZXJEZXRhaWxzJDogT2JzZXJ2YWJsZTxBY2NvdW50U3VtbWFyeURldGFpbHM+ID0gdGhpcy5sYW5ndWFnZVNlcnZpY2VcbiAgICAuZ2V0QWN0aXZlKClcbiAgICAucGlwZShzd2l0Y2hNYXAoKCkgPT4gdGhpcy5hY2NvdW50U3VtbWFyeUZhY2FkZS5nZXRBY2NvdW50U3VtbWFyeSgpKSk7XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGFjY291bnRTdW1tYXJ5RmFjYWRlOiBBY2NvdW50U3VtbWFyeUZhY2FkZSxcbiAgICBwcm90ZWN0ZWQgbGFuZ3VhZ2VTZXJ2aWNlOiBMYW5ndWFnZVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2VcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uXG4gICAgICAgIC50cmFuc2xhdGUoJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMubm90QXBwbGljYWJsZScpXG4gICAgICAgIC5zdWJzY3JpYmUoKHRleHQpID0+ICh0aGlzLm5vdEFwcGxpY2FibGUgPSB0ZXh0KSlcbiAgICApO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBnZXRJZENhcmRDb250ZW50KGlkPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb24udHJhbnNsYXRlKCdvcmdBY2NvdW50U3VtbWFyeS5kZXRhaWxzLnVpZCcpLnBpcGUoXG4gICAgICBtYXAoKGlkVGl0bGUpID0+ICh7XG4gICAgICAgIHRpdGxlOiBpZFRpdGxlLFxuICAgICAgICB0ZXh0OiBbaWQgfHwgdGhpcy5ub3RBcHBsaWNhYmxlXSxcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cblxuICBnZXROYW1lQ2FyZENvbnRlbnQobmFtZT86IHN0cmluZyk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnb3JnQWNjb3VudFN1bW1hcnkuZGV0YWlscy5uYW1lJykucGlwZShcbiAgICAgIG1hcCgobmFtZVRpdGxlKSA9PiAoe1xuICAgICAgICB0aXRsZTogbmFtZVRpdGxlLFxuICAgICAgICB0ZXh0OiBbbmFtZSB8fCB0aGlzLm5vdEFwcGxpY2FibGVdLFxuICAgICAgfSkpXG4gICAgKTtcbiAgfVxuXG4gIGdldEFkZHJlc3NDYXJkQ29udGVudChiaWxsaW5nQWRkcmVzcz86IEFkZHJlc3MpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvbi50cmFuc2xhdGUoJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuYWRkcmVzcycpLnBpcGUoXG4gICAgICBtYXAoKGFkZHJlc3NUaXRsZSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7YmlsbGluZ0FkZHJlc3M/LnRpdGxlfSwgJHtiaWxsaW5nQWRkcmVzcz8uZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzPy5sYXN0TmFtZX1gO1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gYmlsbGluZ0FkZHJlc3M/LmZvcm1hdHRlZEFkZHJlc3M7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSBiaWxsaW5nQWRkcmVzcz8uY291bnRyeT8ubmFtZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogYWRkcmVzc1RpdGxlLFxuICAgICAgICAgIHRleHQ6IEJvb2xlYW4oYmlsbGluZ0FkZHJlc3MpXG4gICAgICAgICAgICA/IFtuYW1lLCBhZGRyZXNzLCBjb3VudHJ5XVxuICAgICAgICAgICAgOiBbdGhpcy5ub3RBcHBsaWNhYmxlXSxcbiAgICAgICAgfSBhcyBDYXJkO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0Q3JlZGl0UmVwQ2FyZENvbnRlbnQoY3JlZGl0UmVwPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb25cbiAgICAgIC50cmFuc2xhdGUoJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuY3JlZGl0UmVwJylcbiAgICAgIC5waXBlKFxuICAgICAgICBtYXAoKGNyZWRpdFJlcFRpdGxlKSA9PiAoe1xuICAgICAgICAgIHRpdGxlOiBjcmVkaXRSZXBUaXRsZSxcbiAgICAgICAgICB0ZXh0OiBbY3JlZGl0UmVwIHx8IHRoaXMubm90QXBwbGljYWJsZV0sXG4gICAgICAgIH0pKVxuICAgICAgKTtcbiAgfVxuXG4gIGdldENyZWRpdExpbmVDYXJkQ29udGVudChjcmVkaXRMaW5lPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb25cbiAgICAgIC50cmFuc2xhdGUoJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuY3JlZGl0TGluZScpXG4gICAgICAucGlwZShcbiAgICAgICAgbWFwKChjcmVkaXRMaW5lVGl0bGUpID0+ICh7XG4gICAgICAgICAgdGl0bGU6IGNyZWRpdExpbmVUaXRsZSxcbiAgICAgICAgICB0ZXh0OiBbY3JlZGl0TGluZSB8fCB0aGlzLm5vdEFwcGxpY2FibGVdLFxuICAgICAgICB9KSlcbiAgICAgICk7XG4gIH1cblxuICBnZXRDdXJyZW50QmFsYW5jZUNhcmRDb250ZW50KGN1cnJlbnRCYWxhbmNlPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxDYXJkPiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRpb25cbiAgICAgIC50cmFuc2xhdGUoJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuY3VycmVudEJhbGFuY2UnKVxuICAgICAgLnBpcGUoXG4gICAgICAgIG1hcCgoY3VycmVudEJhbGFuY2VUaXRsZSkgPT4gKHtcbiAgICAgICAgICB0aXRsZTogY3VycmVudEJhbGFuY2VUaXRsZSxcbiAgICAgICAgICB0ZXh0OiBbY3VycmVudEJhbGFuY2UgfHwgdGhpcy5ub3RBcHBsaWNhYmxlXSxcbiAgICAgICAgfSkpXG4gICAgICApO1xuICB9XG5cbiAgZ2V0T3BlbkJhbGFuY2VDYXJkQ29udGVudChvcGVuQmFsYW5jZT86IHN0cmluZyk6IE9ic2VydmFibGU8Q2FyZD4ge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uXG4gICAgICAudHJhbnNsYXRlKCdvcmdBY2NvdW50U3VtbWFyeS5kZXRhaWxzLm9wZW5CYWxhbmNlJylcbiAgICAgIC5waXBlKFxuICAgICAgICBtYXAoKG9wZW5CYWxhbmNlVGl0bGUpID0+ICh7XG4gICAgICAgICAgdGl0bGU6IG9wZW5CYWxhbmNlVGl0bGUsXG4gICAgICAgICAgdGV4dDogW29wZW5CYWxhbmNlIHx8IHRoaXMubm90QXBwbGljYWJsZV0sXG4gICAgICAgIH0pKVxuICAgICAgKTtcbiAgfVxuXG4gIGdldFBhc3REdWVCYWxhbmNlQ2FyZENvbnRlbnQocGFzdER1ZUJhbGFuY2U/OiBzdHJpbmcpOiBPYnNlcnZhYmxlPENhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGlvblxuICAgICAgLnRyYW5zbGF0ZSgnb3JnQWNjb3VudFN1bW1hcnkuZGV0YWlscy5wYXN0RHVlQmFsYW5jZScpXG4gICAgICAucGlwZShcbiAgICAgICAgbWFwKChwYXN0RHVlQmFsYW5jZVRpdGxlKSA9PiAoe1xuICAgICAgICAgIHRpdGxlOiBwYXN0RHVlQmFsYW5jZVRpdGxlLFxuICAgICAgICAgIHRleHQ6IFtwYXN0RHVlQmFsYW5jZSA/PyB0aGlzLm5vdEFwcGxpY2FibGVdLFxuICAgICAgICB9KSlcbiAgICAgICk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJjeC1hY2NvdW50LXN1bW1hcnlcIiAqbmdJZj1cImhlYWRlckRldGFpbHMkIHwgYXN5bmMgYXMgaGVhZGVyRGV0YWlsc1wiPlxuICA8ZGl2IGNsYXNzPVwiY3gtYWNjb3VudC1zdW1tYXJ5LWhlYWRlci1jYXJkc1wiPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiXG4gICAgICAgIGN4LXN1bW1hcnktY2FyZC1yZXNwb25zaXZlLWdyb3VwIGN4LXN1bW1hcnktY2FyZC1ncm91cC11bml0LWFkZHJlc3NcbiAgICAgIFwiXG4gICAgPlxuICAgICAgPCEtLSBDYXJkOiBVbml0IElEICYgVW5pdCBOYW1lIC0tPlxuICAgICAgPGRpdiBjbGFzcz1cImN4LXN1bW1hcnktY2FyZFwiPlxuICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgIFtjb250ZW50XT1cImdldElkQ2FyZENvbnRlbnQoaGVhZGVyRGV0YWlscz8ub3JnVW5pdD8udWlkKSB8IGFzeW5jXCJcbiAgICAgICAgPlxuICAgICAgICA8L2N4LWNhcmQ+XG5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJnZXROYW1lQ2FyZENvbnRlbnQoaGVhZGVyRGV0YWlscz8ub3JnVW5pdD8ubmFtZSkgfCBhc3luY1wiXG4gICAgICAgID5cbiAgICAgICAgPC9jeC1jYXJkPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDwhLS0gQ2FyZDogQWRkcmVzcyAtLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjeC1zdW1tYXJ5LWNhcmRcIj5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgIGdldEFkZHJlc3NDYXJkQ29udGVudChoZWFkZXJEZXRhaWxzPy5iaWxsaW5nQWRkcmVzcykgfCBhc3luY1xuICAgICAgICAgIFwiXG4gICAgICAgID5cbiAgICAgICAgPC9jeC1jYXJkPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cIlxuICAgICAgICBjeC1zdW1tYXJ5LWNhcmQtcmVzcG9uc2l2ZS1ncm91cCBjeC1zdW1tYXJ5LWNhcmQtZ3JvdXAtY3JlZGl0LWJhbGFuY2VcbiAgICAgIFwiXG4gICAgPlxuICAgICAgPCEtLSBDYXJkOiBDcmVkaXQgUmVwICYgQ3JlZGl0IExpbmUgLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtc3VtbWFyeS1jYXJkXCI+XG4gICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgW2NvbnRlbnRdPVwiXG4gICAgICAgICAgICBnZXRDcmVkaXRSZXBDYXJkQ29udGVudChoZWFkZXJEZXRhaWxzPy5hY2NvdW50TWFuYWdlck5hbWUpIHwgYXN5bmNcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgIDwvY3gtY2FyZD5cblxuICAgICAgICA8Y3gtY2FyZFxuICAgICAgICAgIFtjb250ZW50XT1cIlxuICAgICAgICAgICAgZ2V0Q3JlZGl0TGluZUNhcmRDb250ZW50KGhlYWRlckRldGFpbHM/LmNyZWRpdExpbWl0KSB8IGFzeW5jXG4gICAgICAgICAgXCJcbiAgICAgICAgPlxuICAgICAgICA8L2N4LWNhcmQ+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPCEtLSBDYXJkOiBDdXJyZW50IEJhbGFuY2UgJiBPcGVuIEJhbGFuY2UgLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwiY3gtc3VtbWFyeS1jYXJkIGN4LXN1bW1hcnktY2FyZC1iYWxhbmNlXCI+XG4gICAgICAgIDxjeC1jYXJkXG4gICAgICAgICAgW2NvbnRlbnRdPVwiXG4gICAgICAgICAgICBnZXRDdXJyZW50QmFsYW5jZUNhcmRDb250ZW50KFxuICAgICAgICAgICAgICBoZWFkZXJEZXRhaWxzPy5hbW91bnRCYWxhbmNlPy5jdXJyZW50QmFsYW5jZVxuICAgICAgICAgICAgKSB8IGFzeW5jXG4gICAgICAgICAgXCJcbiAgICAgICAgPlxuICAgICAgICA8L2N4LWNhcmQ+XG5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgIGdldE9wZW5CYWxhbmNlQ2FyZENvbnRlbnQoaGVhZGVyRGV0YWlscz8uYW1vdW50QmFsYW5jZT8ub3BlbkJhbGFuY2UpXG4gICAgICAgICAgICAgIHwgYXN5bmNcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgIDwvY3gtY2FyZD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBDYXJkOiBQYXN0IER1ZSBCYWxhbmNlICYgRGF0ZSBSYW5nZXMgLS0+XG4gICAgPGRpdiBjbGFzcz1cImN4LXN1bW1hcnktY2FyZCBjeC1zdW1tYXJ5LWNhcmQtZ3JvdXAtZHVlXCI+XG4gICAgICA8IS0tIElmIHRoZXJlIHJhbmdlIG9mIHBhc3QgZHVlIGJhbGFuY2VzIGFyZSBwcm92aWRlZCwgZGlzcGxheSB0aGVtIGhlcmUgaW4gYSBib3JkZXJlZCBzZWN0aW9uIC0tPlxuICAgICAgPGRpdlxuICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgIGhlYWRlckRldGFpbHMuYW1vdW50QmFsYW5jZSAmJlxuICAgICAgICAgICAgaGVhZGVyRGV0YWlscy5hbW91bnRCYWxhbmNlLmR1ZUJhbGFuY2VzIGFzIHBhc3REdWU7XG4gICAgICAgICAgZWxzZSBub0R1ZVJhbmdlXG4gICAgICAgIFwiXG4gICAgICAgIFtjbGFzcy5jeC1hY2NvdW50LXN1bW1hcnktaGVhZGVyLXBhc3QtZHVlLXNlY3Rpb25dPVwicGFzdER1ZS5sZW5ndGggPiAwXCJcbiAgICAgID5cbiAgICAgICAgPCEtLSBEeW5hbWljYWxseSBjcmVhdGUgbGluZXMgb2YgcGFzdCBkdWUgZGF0ZSByYW5nZXMgLS0+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAqbmdJZj1cInBhc3REdWUubGVuZ3RoID4gMFwiXG4gICAgICAgICAgY2xhc3M9XCJjeC1hY2NvdW50LXN1bW1hcnktaGVhZGVyLXBhc3QtZHVlLXJhbmdlLWRhdGVzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCByYW5nZUJhbGFuY2Ugb2YgcGFzdER1ZVwiXG4gICAgICAgICAgICBjbGFzcz1cImN4LWFjY291bnQtc3VtbWFyeS1oZWFkZXItcGFzdC1kdWUtcmFuZ2UtY29sbGVjdGlvblwiXG4gICAgICAgICAgICBbdGFiaW5kZXhdPVwiLTFcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3M9XCJjeC1wYXN0LWR1ZS1yYW5nZS1kYXRlXCJcbiAgICAgICAgICAgICAgKm5nSWY9XCJyYW5nZUJhbGFuY2UuZGF5UmFuZ2UgYXMgZGF5UmFuZ2VcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiZGF5UmFuZ2U/Lm1heEJvdW5kYXJ5XCIgW25nSWZFbHNlXT1cImRheVBsdXNcIj5cbiAgICAgICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgICAgJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuZGF5UmFuZ2UnXG4gICAgICAgICAgICAgICAgICAgIHwgY3hUcmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluQm91bmRhcnk6IGRheVJhbmdlLm1pbkJvdW5kYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZGFyeTogZGF5UmFuZ2UubWF4Qm91bmRhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGF5UGx1cz5cbiAgICAgICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgICAgJ29yZ0FjY291bnRTdW1tYXJ5LmRldGFpbHMuZGF5UGx1cydcbiAgICAgICAgICAgICAgICAgICAgfCBjeFRyYW5zbGF0ZTogeyBtaW5Cb3VuZGFyeTogZGF5UmFuZ2UubWluQm91bmRhcnkgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt7IHJhbmdlQmFsYW5jZS5hbW91bnQgfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJjeC1hY2NvdW50LXN1bW1hcnktaGVhZGVyLXBhc3QtZHVlLWJhbGFuY2UtdG90YWxcIlxuICAgICAgICAgIFt0YWJpbmRleF09XCItMVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtcGFzdC1kdWUtYmFsYW5jZS1sYWJlbCBjeC1jYXJkLXRpdGxlXCI+XG4gICAgICAgICAgICB7eyAnb3JnQWNjb3VudFN1bW1hcnkuZGV0YWlscy5wYXN0RHVlQmFsYW5jZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+e3sgaGVhZGVyRGV0YWlscz8uYW1vdW50QmFsYW5jZT8ucGFzdER1ZUJhbGFuY2UgfX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPCEtLSBXaGVuIHRoZXJlIGFyZSBubyBSYW5nZXMsIG9ubHkgc2hvdyBhIGNhcmQgY29udGFpbmluZyB0aGUgUGFzdCBEdWUgQmFsYW5jZSAtLT5cbiAgICAgIDxuZy10ZW1wbGF0ZSAjbm9EdWVSYW5nZT5cbiAgICAgICAgPGN4LWNhcmRcbiAgICAgICAgICBbY29udGVudF09XCJcbiAgICAgICAgICAgIGdldFBhc3REdWVCYWxhbmNlQ2FyZENvbnRlbnQoXG4gICAgICAgICAgICAgIGhlYWRlckRldGFpbHM/LmFtb3VudEJhbGFuY2U/LnBhc3REdWVCYWxhbmNlXG4gICAgICAgICAgICApIHwgYXN5bmNcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgIDwvY3gtY2FyZD5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=