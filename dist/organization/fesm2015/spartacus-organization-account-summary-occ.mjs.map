{"version":3,"file":"spartacus-organization-account-summary-occ.mjs","sources":["../../../feature-libs/organization/account-summary/occ/adapters/occ-account-summary.adapter.ts","../../../feature-libs/organization/account-summary/occ/config/default-occ-account-summary-config.ts","../../../feature-libs/organization/account-summary/occ/account-summary-occ.module.ts","../../../feature-libs/organization/account-summary/occ/adapters/index.ts","../../../feature-libs/organization/account-summary/occ/model/index.ts","../../../feature-libs/organization/account-summary/occ/public_api.ts","../../../feature-libs/organization/account-summary/occ/spartacus-organization-account-summary-occ.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\nimport {\n  ConverterService,\n  LoggerService,\n  OccEndpointsService,\n  normalizeHttpError,\n} from '@spartacus/core';\nimport {\n  ACCOUNT_SUMMARY_DOCUMENT_NORMALIZER,\n  ACCOUNT_SUMMARY_NORMALIZER,\n  AccountSummaryAdapter,\n} from '@spartacus/organization/account-summary/core';\nimport {\n  AccountSummaryDetails,\n  AccountSummaryList,\n  DocumentQueryParams,\n} from '@spartacus/organization/account-summary/root';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable()\nexport class OccAccountSummaryAdapter implements AccountSummaryAdapter {\n  protected logger = inject(LoggerService);\n\n  constructor(\n    protected http: HttpClient,\n    protected occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  getAccountSummary(\n    userId: string,\n    orgUnitId: string\n  ): Observable<AccountSummaryDetails> {\n    return this.http\n      .get<AccountSummaryDetails>(\n        this.buildAccountSummaryUrl(userId, orgUnitId)\n      )\n      .pipe(\n        catchError((error: HttpErrorResponse) =>\n          throwError(normalizeHttpError(error, this.logger))\n        ),\n        this.converter.pipeable(ACCOUNT_SUMMARY_NORMALIZER)\n      );\n  }\n\n  getDocumentList(\n    userId: string,\n    orgUnitId: string,\n    params: DocumentQueryParams\n  ): Observable<AccountSummaryList> {\n    return this.http\n      .get<AccountSummaryList>(\n        this.buildDocumentListUrl(userId, orgUnitId, params)\n      )\n      .pipe(\n        catchError((error: HttpErrorResponse) =>\n          throwError(normalizeHttpError(error, this.logger))\n        ),\n        this.converter.pipeable(ACCOUNT_SUMMARY_DOCUMENT_NORMALIZER)\n      );\n  }\n\n  getDocumentAttachment(\n    userId: string,\n    orgUnitId: string,\n    orgDocumentId: string,\n    orgDocumentAttachmentId: string\n  ): Observable<Blob> {\n    const options = {\n      responseType: 'blob' as 'json',\n    };\n\n    return this.http\n      .get<Blob>(\n        this.buildDocumentAttachmentUrl(\n          userId,\n          orgUnitId,\n          orgDocumentId,\n          orgDocumentAttachmentId\n        ),\n        options\n      )\n      .pipe(\n        catchError((error: HttpErrorResponse) =>\n          throwError(normalizeHttpError(error, this.logger))\n        )\n      );\n  }\n\n  private buildAccountSummaryUrl(userId: string, orgUnitId: string): string {\n    return this.occEndpoints.buildUrl('accountSummary', {\n      urlParams: { userId, orgUnitId },\n    });\n  }\n\n  private buildDocumentListUrl(\n    userId: string,\n    orgUnitId: string,\n    queryParams: DocumentQueryParams\n  ): string {\n    return this.occEndpoints.buildUrl('accountSummaryDocument', {\n      urlParams: { userId, orgUnitId },\n      queryParams,\n    });\n  }\n\n  private buildDocumentAttachmentUrl(\n    userId: string,\n    orgUnitId: string,\n    orgDocumentId: string,\n    orgDocumentAttachmentId: string\n  ): string {\n    return this.occEndpoints.buildUrl('accountSummaryDocumentAttachment', {\n      urlParams: { userId, orgUnitId, orgDocumentId, orgDocumentAttachmentId },\n    });\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { OccConfig } from '@spartacus/core';\nimport { AccountSummaryOccEndpoints } from '../model';\n\nconst accountSummaryHeaderOccEndpoints: AccountSummaryOccEndpoints = {\n  accountSummary: 'users/${userId}/orgUnits/${orgUnitId}/accountSummary',\n  accountSummaryDocument: 'users/${userId}/orgUnits/${orgUnitId}/orgDocuments',\n  accountSummaryDocumentAttachment:\n    'users/${userId}/orgUnits/${orgUnitId}/orgDocuments/${orgDocumentId}/attachments/${orgDocumentAttachmentId}',\n};\n\nexport const defaultOccAccountSummaryConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        ...accountSummaryHeaderOccEndpoints,\n      },\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { AccountSummaryAdapter } from '@spartacus/organization/account-summary/core';\nimport { OccAccountSummaryAdapter } from './adapters/occ-account-summary.adapter';\nimport { defaultOccAccountSummaryConfig } from './config/default-occ-account-summary-config';\n\n@NgModule({\n  providers: [\n    provideDefaultConfig(defaultOccAccountSummaryConfig),\n    { provide: AccountSummaryAdapter, useClass: OccAccountSummaryAdapter },\n  ],\n})\nexport class AccountSummaryOccModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './occ-account-summary.adapter';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './occ-account-summary-endpoints.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './account-summary-occ.module';\nexport * from './adapters/index';\nexport * from './model/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;;MA4Ba,wBAAwB,CAAA;AAGnC,IAAA,WAAA,CACY,IAAgB,EAChB,YAAiC,EACjC,SAA2B,EAAA;AAF3B,QAAA,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAY;AAChB,QAAA,IAAY,CAAA,YAAA,GAAZ,YAAY,CAAqB;AACjC,QAAA,IAAS,CAAA,SAAA,GAAT,SAAS,CAAkB;AAL7B,QAAA,IAAA,CAAA,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;KAMrC;IAEJ,iBAAiB,CACf,MAAc,EACd,SAAiB,EAAA;QAEjB,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CACF,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,SAAS,CAAC,CAC/C;AACA,aAAA,IAAI,CACH,UAAU,CAAC,CAAC,KAAwB,KAClC,UAAU,CAAC,kBAAkB,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CACnD,EACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CACpD,CAAC;KACL;AAED,IAAA,eAAe,CACb,MAAc,EACd,SAAiB,EACjB,MAA2B,EAAA;QAE3B,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CACF,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,CACrD;AACA,aAAA,IAAI,CACH,UAAU,CAAC,CAAC,KAAwB,KAClC,UAAU,CAAC,kBAAkB,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CACnD,EACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAC7D,CAAC;KACL;AAED,IAAA,qBAAqB,CACnB,MAAc,EACd,SAAiB,EACjB,aAAqB,EACrB,uBAA+B,EAAA;AAE/B,QAAA,MAAM,OAAO,GAAG;AACd,YAAA,YAAY,EAAE,MAAgB;SAC/B,CAAC;QAEF,OAAO,IAAI,CAAC,IAAI;AACb,aAAA,GAAG,CACF,IAAI,CAAC,0BAA0B,CAC7B,MAAM,EACN,SAAS,EACT,aAAa,EACb,uBAAuB,CACxB,EACD,OAAO,CACR;aACA,IAAI,CACH,UAAU,CAAC,CAAC,KAAwB,KAClC,UAAU,CAAC,kBAAkB,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CACnD,CACF,CAAC;KACL;IAEO,sBAAsB,CAAC,MAAc,EAAE,SAAiB,EAAA;AAC9D,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,gBAAgB,EAAE;AAClD,YAAA,SAAS,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE;AACjC,SAAA,CAAC,CAAC;KACJ;AAEO,IAAA,oBAAoB,CAC1B,MAAc,EACd,SAAiB,EACjB,WAAgC,EAAA;AAEhC,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,wBAAwB,EAAE;AAC1D,YAAA,SAAS,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE;YAChC,WAAW;AACZ,SAAA,CAAC,CAAC;KACJ;AAEO,IAAA,0BAA0B,CAChC,MAAc,EACd,SAAiB,EACjB,aAAqB,EACrB,uBAA+B,EAAA;AAE/B,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,kCAAkC,EAAE;YACpE,SAAS,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,uBAAuB,EAAE;AACzE,SAAA,CAAC,CAAC;KACJ;;qHA/FU,wBAAwB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,UAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,mBAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,gBAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;yHAAxB,wBAAwB,EAAA,CAAA,CAAA;2FAAxB,wBAAwB,EAAA,UAAA,EAAA,CAAA;kBADpC,UAAU;;;AC3BX;;;;AAIG;AAKH,MAAM,gCAAgC,GAA+B;AACnE,IAAA,cAAc,EAAE,sDAAsD;AACtE,IAAA,sBAAsB,EAAE,oDAAoD;AAC5E,IAAA,gCAAgC,EAC9B,4GAA4G;CAC/G,CAAC;AAEK,MAAM,8BAA8B,GAAc;AACvD,IAAA,OAAO,EAAE;AACP,QAAA,GAAG,EAAE;YACH,SAAS,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACJ,gCAAgC,CACpC;AACF,SAAA;AACF,KAAA;CACF;;ACxBD;;;;AAIG;MAcU,uBAAuB,CAAA;;oHAAvB,uBAAuB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;qHAAvB,uBAAuB,EAAA,CAAA,CAAA;AAAvB,uBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,uBAAuB,EALvB,SAAA,EAAA;QACT,oBAAoB,CAAC,8BAA8B,CAAC;AACpD,QAAA,EAAE,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,wBAAwB,EAAE;AACvE,KAAA,EAAA,CAAA,CAAA;2FAEU,uBAAuB,EAAA,UAAA,EAAA,CAAA;kBANnC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,SAAS,EAAE;wBACT,oBAAoB,CAAC,8BAA8B,CAAC;AACpD,wBAAA,EAAE,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,wBAAwB,EAAE;AACvE,qBAAA;iBACF,CAAA;;;ACjBD;;;;AAIG;;ACJH;;;;AAIG;;ACJH;;;;AAIG;;ACJH;;AAEG;;;;"}