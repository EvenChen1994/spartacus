<div *ngIf="loading$ | async; else consentManagementForm">
  <div class="cx-spinner">
    <cx-spinner></cx-spinner>
  </div>
</div>
<ng-template #consentManagementForm>
  <div role="status" [attr.aria-label]="'common.loaded' | cxTranslate"></div>
  <ng-container *ngIf="templateList$ | async as templateList">
    <div class="cx-consent-toggles">
      <div class="col-sm-12 col-md-8 col-lg-6">
        <div class="header">{{ 'newConsentManagement.header' | cxTranslate }}</div>
        <div class="message">{{ 'newConsentManagement.message' | cxTranslate }}</div>
        <cx-new-consent-management-form
          *ngFor="let consentTemplate of templateList"
          [consentTemplate]="consentTemplate"
          [requiredConsents]="requiredConsents"
          (consentChanged)="onConsentChange($event)"
        ></cx-new-consent-management-form>
      </div>
    </div>
  </ng-container>
</ng-template>
