<ng-container *ngIf="messageDetails$ | async as messageDetails">
  <div class="message-body">
    <div class="container">
      <div class="avatar-line"></div>
      <div class="cx-messages">
        <ng-container *ngFor="let event of messageDetails.messages">
          <div
            class="cx-message-card"
            [ngClass]="{ 'padding-left': event.author !== 'Mark Rivers' }"
          >
            <cx-avatar [event]="event"> </cx-avatar>

            <div>
              <label>{{
                event.createdAt | cxDate: 'MMMM d, YYYY h:mm aa'
              }}</label>
              <div
                [ngClass]="
                  event.author === 'Mark Rivers'
                    ? 'cx-message-left-align-text'
                    : 'cx-message-right-align-text'
                "
              >
                {{ event.message }}
              </div>
              <p *ngIf="event.attachments" class="cx-attachment">
                <cx-icon [type]="iconTypes.ATTACHMENT"></cx-icon>
                {{ event.attachments[0].filename }}
              </p>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="message-footer padding-left">
    <div class="message-box">
      <input
        type="text"
        class="form-control"
        placeholder="{{
          messageDetails.newMessagePlaceHolder ||
            ('chatMessaging.addNewMessage' | cxTranslate)
        }}"
        [maxLength]="messageDetails.characterLimit || messageTextLimit"
        [(ngModel)]="messageText"
      />
      <div class="cx-message-footer-labels">
        <cx-file-upload
          customButton="true"
          [accept]="attachmentValidity.allowedTypes"
        >
          <cx-icon [type]="iconTypes.UPLOAD"></cx-icon>
          <span class="cx-message-footer-text">Upload File</span>
        </cx-file-upload>
        <p class="cx-message-footer-label">
          {{
            'chatMessaging.charactersLeft'
              | cxTranslate: { count: inputCharacterLeft | async }
          }}
        </p>
      </div>
    </div>

    <div class="col-xs-6 col-md-3 col-lg-2">
      <button class="btn btn-block btn-primary">
        {{ 'chatMessaging.send' | cxTranslate }}
      </button>
    </div>
  </div>
</ng-container>
