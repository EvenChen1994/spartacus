"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=341,exports.ids=[341],exports.modules={39964:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RulebasedConfiguratorWrapperModule:()=>RulebasedConfiguratorWrapperModule});var core=__webpack_require__(40305),spartacus_core=__webpack_require__(46167),spartacus_product_configurator_common=__webpack_require__(71506),spartacus_storefront=__webpack_require__(25907),ReplaySubject=__webpack_require__(58834),Subscription=__webpack_require__(31765),of=__webpack_require__(95202),timer=__webpack_require__(76424),BehaviorSubject=__webpack_require__(60403),combineLatest=__webpack_require__(20085),empty=__webpack_require__(14614),merge=__webpack_require__(66273),delayWhen=__webpack_require__(15335),filter=__webpack_require__(2026),map=__webpack_require__(86466),tap=__webpack_require__(85171),take=__webpack_require__(95426),switchMap=__webpack_require__(63714),delay=__webpack_require__(79927),distinctUntilChanged=__webpack_require__(33029),innerSubscribe=__webpack_require__(65814);function distinct(keySelector,flushes){return source=>source.lift(new DistinctOperator(keySelector,flushes))}__name(distinct,"distinct");class DistinctOperator{constructor(keySelector,flushes){this.keySelector=keySelector,this.flushes=flushes}call(subscriber,source){return source.subscribe(new DistinctSubscriber(subscriber,this.keySelector,this.flushes))}}__name(DistinctOperator,"DistinctOperator");class DistinctSubscriber extends innerSubscribe.Ds{constructor(destination,keySelector,flushes){super(destination),this.keySelector=keySelector,this.values=new Set,flushes&&this.add((0,innerSubscribe.ft)(flushes,new innerSubscribe.IY(this)))}notifyNext(){this.values.clear()}notifyError(error){this._error(error)}_next(value){this.keySelector?this._useKeySelector(value):this._finalizeNext(value,value)}_useKeySelector(value){let key;const{destination}=this;try{key=this.keySelector(value)}catch(err){return void destination.error(err)}this._finalizeNext(key,value)}_finalizeNext(key,value){const{values}=this;values.has(key)||(values.add(key),this.destination.next(value))}}__name(DistinctSubscriber,"DistinctSubscriber");var debounce=__webpack_require__(53137),first=__webpack_require__(54473),skip=__webpack_require__(46619),distinctUntilKeyChanged=__webpack_require__(38845),mergeMap=__webpack_require__(37505),catchError=__webpack_require__(2155),fesm2020_forms=__webpack_require__(43070),ngrx_store=__webpack_require__(91464),spartacus_cart_base_core=__webpack_require__(49352),spartacus_cart_base_root=__webpack_require__(638),spartacus_checkout_base_root=__webpack_require__(11871),spartacus_order_root=__webpack_require__(63641),common=__webpack_require__(89318),ng_select_ng_select=__webpack_require__(80060),router=__webpack_require__(9664),ngrx_effects=__webpack_require__(48030),http=__webpack_require__(48664);function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"button",5),core.NdJ("click",__name(function(){core.CHM(_r9);const container_r1=core.oxw(2).ngIf,ctx_r7=core.oxw();return core.KtG(ctx_r7.onAddToCart(container_r1.configuration,container_r1.routerData))},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_2_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const container_r1=core.oxw(2).ngIf,ctx_r5=core.oxw();core.xp6(1),core.uIk("aria-label",core.lcZ(2,2,ctx_r5.getButtonResourceKey(container_r1.routerData,container_r1.configuration))+" "+core.xi3(3,4,"configurator.a11y.addToCartPrices",ctx_r5.extractConfigPrices(container_r1.configuration))),core.xp6(3),core.hij(" ",core.lcZ(5,7,ctx_r5.getButtonResourceKey(container_r1.routerData,container_r1.configuration))," ")}}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf){const _r15=core.EpF();core.ynx(0),core.TgZ(1,"div",6)(2,"div",7)(3,"div",8)(4,"label"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core._UZ(7,"cx-item-counter",9),core.qZA(),core.TgZ(8,"button",10),core.NdJ("click",__name(function(){core.CHM(_r15);const container_r1=core.oxw(3).ngIf,ctx_r13=core.oxw();return core.KtG(ctx_r13.onAddToCart(container_r1.configuration,container_r1.routerData))},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template_button_click_8_listener")),core.ALo(9,"cxTranslate"),core.ALo(10,"cxTranslate"),core.ALo(11,"cxTranslate"),core._UZ(12,"cx-icon",11),core.qZA()()(),core.BQk()}if(2&rf){const container_r1=core.oxw(3).ngIf,ctx_r11=core.oxw();core.xp6(5),core.Oqu(core.lcZ(6,5,"configurator.addToCart.quantity")),core.xp6(2),core.Q6J("control",ctx_r11.quantityControl),core.xp6(1),core.s9C("title",core.lcZ(11,12,ctx_r11.getButtonResourceKey(container_r1.routerData,container_r1.configuration))),core.uIk("aria-label",core.lcZ(9,7,ctx_r11.getButtonResourceKey(container_r1.routerData,container_r1.configuration))+" "+core.xi3(10,9,"configurator.a11y.addToCartPrices",ctx_r11.extractConfigPrices(container_r1.configuration))),core.xp6(4),core.Q6J("type",ctx_r11.iconType.CART_PLUS)}}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_2_Template(rf,ctx){if(1&rf){const _r19=core.EpF();core.ynx(0),core.TgZ(1,"button",5),core.NdJ("click",__name(function(){core.CHM(_r19);const container_r1=core.oxw(3).ngIf,ctx_r17=core.oxw();return core.KtG(ctx_r17.onAddToCart(container_r1.configuration,container_r1.routerData))},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_2_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const container_r1=core.oxw(3).ngIf,ctx_r12=core.oxw();core.xp6(1),core.uIk("aria-label",core.lcZ(2,2,ctx_r12.getButtonResourceKey(container_r1.routerData,container_r1.configuration))+" "+core.xi3(3,4,"configurator.a11y.addToCartPrices",ctx_r12.extractConfigPrices(container_r1.configuration))),core.xp6(3),core.hij(" ",core.lcZ(5,7,ctx_r12.getButtonResourceKey(container_r1.routerData,container_r1.configuration))," ")}}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template,13,14,"ng-container",0),core.YNc(2,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_2_Template,6,9,"ng-container",0),core.BQk()),2&rf){const container_r1=core.oxw(2).ngIf,ctx_r6=core.oxw();core.xp6(1),core.Q6J("ngIf",!ctx_r6.isCartEntry(container_r1.routerData)),core.xp6(1),core.Q6J("ngIf",ctx_r6.isCartEntry(container_r1.routerData))}}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",3),core.YNc(2,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_2_Template,6,9,"ng-container",4),core.YNc(3,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_Template,3,2,"ng-container",4),core.qZA(),core.BQk()),2&rf&&(core.xp6(2),core.Q6J("cxFeatureLevel","!6.1"),core.xp6(1),core.Q6J("cxFeatureLevel","6.1"))}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r25=core.EpF();core.ynx(0),core.TgZ(1,"button",13),core.NdJ("click",__name(function(){core.CHM(_r25);const ctx_r24=core.oxw(3);return core.KtG(ctx_r24.leaveConfigurationOverview())},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_1_Template_button_click_1_listener")),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.BQk()}2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"configurator.addToCart.buttonDisplayOnly")," "))}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_2_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.ynx(0),core.TgZ(1,"button",14),core.NdJ("click",__name(function(){core.CHM(_r27);const ctx_r26=core.oxw(3);return core.KtG(ctx_r26.leaveConfigurationOverview())},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_2_Template_button_click_1_listener")),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.BQk()}2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"configurator.addToCart.buttonClose")," "))}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",12),core.YNc(1,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_1_Template,4,3,"ng-container",4),core.YNc(2,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_2_Template,4,3,"ng-container",4),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("cxFeatureLevel","!6.1"),core.xp6(1),core.Q6J("cxFeatureLevel","6.1"))}function ConfiguratorAddToCartButtonComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template,4,2,"ng-container",1),core.YNc(2,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template,3,2,"ng-template",null,2,core.W1O),core.BQk()),2&rf){const container_r1=ctx.ngIf,_r3=core.MAs(3);core.xp6(1),core.Q6J("ngIf",!container_r1.routerData.displayOnly)("ngIfElse",_r3)}}function ConfiguratorAttributeFooterComponent_ng_container_0_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",3),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw(2);core.s9C("id",ctx_r2.createAttributeUiKey("attribute-msg",ctx_r2.attribute.name)),core.uIk("aria-label",core.lcZ(1,4,"configurator.attribute.defaultRequiredMessage")),core.xp6(2),core.Q6J("type",ctx_r2.iconType.ERROR),core.xp6(1),core.hij(" ",core.lcZ(4,6,"configurator.attribute.defaultRequiredMessage")," ")}}function ConfiguratorAttributeFooterComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeFooterComponent_ng_container_0_div_1_Template,5,8,"div",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.showRequiredMessageForUserInput$))}}function ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.attribute.defaultRequiredMessage")," "))}function ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_5_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.attribute.singleSelectRequiredMessage")," "))}function ConfiguratorAttributeFooterComponent_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core._UZ(3,"cx-icon",3),core.YNc(4,ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_4_Template,3,3,"ng-container",4),core.YNc(5,ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_5_Template,3,3,"ng-container",4),core.qZA()),2&rf){const ctx_r3=core.oxw(2);core.s9C("id",ctx_r3.createAttributeUiKey("attribute-msg",ctx_r3.attribute.name)),core.uIk("aria-label",ctx_r3.isUserInput(ctx_r3.attribute)?core.lcZ(1,5,"configurator.attribute.defaultRequiredMessage"):core.lcZ(2,7,"configurator.attribute.singleSelectRequiredMessage")),core.xp6(3),core.Q6J("type",ctx_r3.iconType.ERROR),core.xp6(1),core.Q6J("ngIf",ctx_r3.isUserInput(ctx_r3.attribute)),core.xp6(1),core.Q6J("ngIf",ctx_r3.isDropDown(ctx_r3.attribute))}}function ConfiguratorAttributeFooterComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeFooterComponent_ng_container_1_div_1_Template,6,9,"div",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r1.showRequiredMessageForUserInput$))}}function ConfiguratorAttributeHeaderComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",7),core._UZ(1,"cx-icon",8),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("type",ctx_r0.iconTypes.WARNING),core.xp6(1),core.hij(" ",core.lcZ(3,2,"configurator.attribute.notVisibleAttributeMsg"),"\n")}}function ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-icon",8),2&rf){const ctx_r8=core.oxw(2);core.Q6J("type",ctx_r8.iconTypes.WARNING)}}__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_2_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_2_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_2_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_2_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_ng_container_3_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_1_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_1_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_2_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_ng_container_2_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_0_div_1_Template,"ConfiguratorAttributeFooterComponent_ng_container_0_div_1_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_0_Template,"ConfiguratorAttributeFooterComponent_ng_container_0_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_4_Template,"ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_4_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_5_Template,"ConfiguratorAttributeFooterComponent_ng_container_1_div_1_ng_container_5_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_1_div_1_Template,"ConfiguratorAttributeFooterComponent_ng_container_1_div_1_Template"),__name(ConfiguratorAttributeFooterComponent_ng_container_1_Template,"ConfiguratorAttributeFooterComponent_ng_container_1_Template"),__name(ConfiguratorAttributeHeaderComponent_div_0_Template,"ConfiguratorAttributeHeaderComponent_div_0_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template,"ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template");const _c0=__name(function(a0){return{attribute:a0}},"_c0");function ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.ynx(0),core.TgZ(1,"a",12),core.NdJ("click",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw(3);return core.KtG(ctx_r11.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template_a_click_1_listener"))("keydown.enter",__name(function(){core.CHM(_r12);const ctx_r13=core.oxw(3);return core.KtG(ctx_r13.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template_a_keydown_enter_1_listener")),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r10=core.oxw(3);core.xp6(1),core.uIk("aria-label",core.xi3(2,2,"configurator.a11y.navigateToConflict",core.VKq(7,_c0,ctx_r10.attribute.label))),core.xp6(2),core.hij(" ",core.lcZ(4,5,ctx_r10.getConflictMessageKey())," ")}}function ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template,5,9,"ng-container",11),core.BQk()),2&rf){const ctx_r9=core.oxw(2),_r6=core.MAs(14);core.xp6(1),core.Q6J("ngIf",ctx_r9.isNavigationToConflictEnabled())("ngIfElse",_r6)}}function ConfiguratorAttributeHeaderComponent_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",9),core.ALo(1,"cxTranslate"),core.YNc(2,ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template,1,1,"cx-icon",10),core.YNc(3,ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template,2,2,"ng-container",11),core.qZA()),2&rf){const ctx_r1=core.oxw(),_r4=core.MAs(12);core.s9C("id",ctx_r1.createAttributeUiKey("attribute-msg",ctx_r1.attribute.name)),core.uIk("aria-live",ctx_r1.isConflictResolutionActive()?"assertive":"off")("aria-atomic",!!ctx_r1.isConflictResolutionActive())("role",ctx_r1.isConflictResolutionActive()?"alert":null)("aria-label",ctx_r1.isConflictResolutionActive()?core.lcZ(1,8,"configurator.a11y.conflictDetected"):""),core.xp6(2),core.Q6J("ngIf",ctx_r1.isAttributeGroup()),core.xp6(1),core.Q6J("ngIf",ctx_r1.isAttributeGroup())("ngIfElse",_r4)}}function ConfiguratorAttributeHeaderComponent_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",13),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",14),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw();core.s9C("id",ctx_r2.createAttributeUiKey("attribute-msg",ctx_r2.attribute.name)),core.uIk("aria-label",core.lcZ(1,4,ctx_r2.getRequiredMessageKey())),core.xp6(2),core.Q6J("type",ctx_r2.iconTypes.ERROR),core.xp6(1),core.hij(" ",core.lcZ(4,6,ctx_r2.getRequiredMessageKey()),"\n")}}function ConfiguratorAttributeHeaderComponent_img_10_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",15),2&rf){const ctx_r3=core.oxw();core.s9C("src",null==ctx_r3.image?null:ctx_r3.image.url,core.LSH),core.s9C("alt",null==ctx_r3.image?null:ctx_r3.image.altText)}}function ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"a",12),core.NdJ("click",__name(function(){core.CHM(_r16);const ctx_r15=core.oxw(2);return core.KtG(ctx_r15.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template_a_click_0_listener"))("keydown.enter",__name(function(){core.CHM(_r16);const ctx_r17=core.oxw(2);return core.KtG(ctx_r17.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template_a_keydown_enter_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r14=core.oxw(2);core.xp6(1),core.hij(" ",core.lcZ(2,1,ctx_r14.getConflictMessageKey())," ")}}function ConfiguratorAttributeHeaderComponent_ng_template_11_Template(rf,ctx){if(1&rf&&core.YNc(0,ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template,3,3,"a",16),2&rf){const ctx_r5=core.oxw();core.Q6J("ngIf",ctx_r5.isNavigationToGroupEnabled)}}function ConfiguratorAttributeHeaderComponent_ng_template_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",17),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const ctx_r7=core.oxw();core.xp6(1),core.hij(" ",core.lcZ(2,1,ctx_r7.getConflictMessageKey())," ")}}__name(ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template,"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template,"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_Template,"ConfiguratorAttributeHeaderComponent_div_7_Template"),__name(ConfiguratorAttributeHeaderComponent_div_8_Template,"ConfiguratorAttributeHeaderComponent_div_8_Template"),__name(ConfiguratorAttributeHeaderComponent_img_10_Template,"ConfiguratorAttributeHeaderComponent_img_10_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template,"ConfiguratorAttributeHeaderComponent_ng_template_11_a_0_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_template_11_Template,"ConfiguratorAttributeHeaderComponent_ng_template_11_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_template_13_Template,"ConfiguratorAttributeHeaderComponent_ng_template_13_Template");const _c1=__name(function(a0){return{param:a0}},"_c1");function ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij("\xa0... ",core.lcZ(2,1,"configurator.button.less"),""))}function ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template(rf,ctx){1&rf&&(core._uU(0),core.ALo(1,"cxTranslate")),2&rf&&core.hij(" \xa0... ",core.lcZ(1,1,"configurator.button.more"),"")}function ConfiguratorShowMoreComponent_ng_container_0_button_3_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"button",3),core.NdJ("click",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw(2);return core.KtG(ctx_r5.toggleShowMore())},"ConfiguratorShowMoreComponent_ng_container_0_button_3_Template_button_click_0_listener")),core.YNc(1,ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template,3,3,"ng-container",4),core.YNc(2,ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template,2,3,"ng-template",null,5,core.W1O),core.qZA()}if(2&rf){const _r3=core.MAs(3),ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngIf",ctx_r1.showHiddenText)("ngIfElse",_r3)}}__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template"),__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template"),__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_Template");const _c2=__name(function(a0){return{item:a0}},"_c2");function ConfiguratorShowMoreComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"span",1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorShowMoreComponent_ng_container_0_button_3_Template,4,2,"button",2),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("innerHTML",ctx_r0.textToShow,core.oJD),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.itemDescription",core.VKq(6,_c2,ctx_r0.productName))),core.xp6(2),core.Q6J("ngIf",ctx_r0.showMore)}}function ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core._uU(3),core.qZA(),core.BQk()),2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngClass",ctx_r1.styleClass),core.uIk("aria-label",core.lcZ(2,3,"configurator.a11y.valueSurcharge")),core.xp6(2),core.hij(" ",ctx_r1.price," ")}}function ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxNumeric"),core.qZA(),core.TgZ(5,"div",3),core._uU(6),core.qZA(),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.uIk("aria-label",core.lcZ(2,3,"configurator.a11y.valueSurcharge")),core.xp6(2),core.hij(" ",ctx_r2.quantityWithPrice(core.lcZ(4,5,null==ctx_r2.formula?null:ctx_r2.formula.quantity))," "),core.xp6(3),core.Oqu(ctx_r2.priceTotal)}}function ConfiguratorPriceComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template,4,5,"ng-container",0),core.YNc(2,ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template,7,7,"ng-container",0),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r0.displayPriceOnly()),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayQuantityAndPrice())}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",10),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const product_r1=core.oxw().ngIf;core.xp6(1),core.AsE(" ",core.lcZ(2,2,"configurator.attribute.id"),": ",product_r1.code," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-configurator-show-more",11),2&rf){const product_r1=core.oxw().ngIf;core.Q6J("text",product_r1.description)("textSize",45)("productName",product_r1.code)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"cx-configurator-attribute-quantity",20),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r11);const ctx_r10=core.oxw(3);return core.KtG(ctx_r10.onChangeQuantity($event))},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template_cx_configurator_attribute_quantity_changeQuantity_0_listener")),core.qZA()}if(2&rf){const ctx_r8=core.oxw(3);core.Q6J("quantityOptions",ctx_r8.extractQuantityParameters())}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template(rf,ctx){if(1&rf){const _r19=core.EpF();core.TgZ(0,"button",26),core.NdJ("click",__name(function(){core.CHM(_r19);const ctx_r18=core.oxw(5);return core.KtG(ctx_r18.onHandleDeselect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r15=core.oxw();core.Q6J("cxFocus",ctx_r15.focusConfig),core.uIk("aria-label",ctx_r15.getAriaLabelMultiSelected(product_r1))("aria-describedby",ctx_r15.createAttributeUiKey("label",ctx_r15.attributeName)),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.button.remove")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template(rf,ctx){if(1&rf){const _r22=core.EpF();core.TgZ(0,"button",27),core.NdJ("click",__name(function(){core.CHM(_r22);const ctx_r21=core.oxw(5);return core.KtG(ctx_r21.onHandleSelect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r17=core.oxw();core.Q6J("disabled",ctx_r17.productCardOptions.disableAllButtons||core.lcZ(1,5,ctx_r17.loading$))("cxFocus",ctx_r17.focusConfig),core.uIk("aria-label",ctx_r17.getAriaLabelMultiUnselected(product_r1))("aria-describedby",ctx_r17.createAttributeUiKey("label",ctx_r17.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.add")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template,3,6,"button",24),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template,4,9,"ng-template",null,25,core.W1O),core.BQk()),2&rf){const _r16=core.MAs(3),ctx_r12=core.oxw(4);core.xp6(1),core.Q6J("ngIf",null==ctx_r12.productCardOptions||null==ctx_r12.productCardOptions.productBoundValue?null:ctx_r12.productCardOptions.productBoundValue.selected)("ngIfElse",_r16)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template(rf,ctx){if(1&rf){const _r28=core.EpF();core.TgZ(0,"button",27),core.NdJ("click",__name(function(){core.CHM(_r28);const ctx_r27=core.oxw(5);return core.KtG(ctx_r27.onHandleSelect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r24=core.oxw();core.Q6J("disabled",ctx_r24.productCardOptions.disableAllButtons||core.lcZ(1,5,ctx_r24.loading$))("cxFocus",ctx_r24.focusConfig),core.uIk("aria-label",ctx_r24.getAriaLabelSingleUnselected(product_r1))("aria-describedby",ctx_r24.createAttributeUiKey("label",ctx_r24.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.select")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template(rf,ctx){if(1&rf){const _r34=core.EpF();core.TgZ(0,"button",32),core.NdJ("click",__name(function(){core.CHM(_r34);const ctx_r33=core.oxw(7);return core.KtG(ctx_r33.onHandleDeselect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(6).ngIf,ctx_r31=core.oxw();core.Q6J("disabled",ctx_r31.productCardOptions.hideRemoveButton||core.lcZ(1,5,ctx_r31.loading$))("cxFocus",ctx_r31.focusConfig),core.uIk("aria-label",ctx_r31.getAriaLabelSingleSelected(product_r1))("aria-describedby",ctx_r31.createAttributeUiKey("label",ctx_r31.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.deselect")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",33),core._uU(1),core.qZA()),2&rf){const product_r1=core.oxw(6).ngIf,ctx_r32=core.oxw();core.xp6(1),core.hij(" ",ctx_r32.getAriaLabelSingleSelectedNoButton(product_r1)," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template,4,9,"button",30),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template,2,1,"span",31),core.BQk()),2&rf){const ctx_r30=core.oxw(6);core.xp6(1),core.Q6J("ngIf",!(null!=ctx_r30.productCardOptions&&ctx_r30.productCardOptions.hideRemoveButton)),core.xp6(1),core.Q6J("ngIf",null==ctx_r30.productCardOptions?null:ctx_r30.productCardOptions.hideRemoveButton)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template(rf,ctx){if(1&rf&&core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template,3,2,"ng-container",0),2&rf){const ctx_r26=core.oxw(5);core.Q6J("ngIf",ctx_r26.isValueCodeDefined(null==ctx_r26.productCardOptions||null==ctx_r26.productCardOptions.productBoundValue?null:ctx_r26.productCardOptions.productBoundValue.valueCode))}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template,4,9,"button",28),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template,1,1,"ng-template",null,29,core.W1O)),2&rf){const _r25=core.MAs(2),ctx_r14=core.oxw(4);core.Q6J("ngIf",!(null!=ctx_r14.productCardOptions&&null!=ctx_r14.productCardOptions.productBoundValue&&ctx_r14.productCardOptions.productBoundValue.selected))("ngIfElse",_r25)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template,4,2,"ng-container",22),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template,3,2,"ng-template",null,23,core.W1O),core.qZA()),2&rf){const _r13=core.MAs(3),ctx_r9=core.oxw(3);core.xp6(1),core.Q6J("ngIf",null==ctx_r9.productCardOptions?null:ctx_r9.productCardOptions.multiSelect)("ngIfElse",_r13)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12)(1,"div",13)(2,"div",14),core.YNc(3,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template,1,1,"cx-configurator-attribute-quantity",15),core.qZA(),core.TgZ(4,"div",16),core._UZ(5,"cx-configurator-price",17),core.qZA()(),core.TgZ(6,"div",18),core.YNc(7,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template,4,2,"div",19),core.qZA()()),2&rf){const ctx_r4=core.oxw(2);core.xp6(3),core.Q6J("ngIf",ctx_r4.showQuantity),core.xp6(2),core.Q6J("formula",ctx_r4.extractPriceFormulaParameters()),core.xp6(2),core.Q6J("ngIf",!(null!=ctx_r4.productCardOptions&&ctx_r4.productCardOptions.singleDropdown))}}function ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",34),core._UZ(2,"cx-icon",35),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.BQk()),2&rf){const ctx_r5=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r5.createAttributeUiKey("attribute-msg",ctx_r5.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(4,2,"configurator.attribute.deselectionNotPossible")," ")}}__name(ConfiguratorShowMoreComponent_ng_container_0_Template,"ConfiguratorShowMoreComponent_ng_container_0_Template"),__name(ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template,"ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorPriceComponent_ng_container_0_Template,"ConfiguratorPriceComponent_ng_container_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template");const _c3=__name(function(a0){return{"cx-product-card-selected":a0}},"_c3");function ConfiguratorAttributeProductCardComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core.TgZ(3,"div",2)(4,"div",3),core._UZ(5,"cx-media",4),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"p"),core._uU(9),core.qZA()(),core.YNc(10,ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template,3,4,"div",7),core.YNc(11,ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template,1,3,"cx-configurator-show-more",8),core.qZA()(),core.YNc(12,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template,8,3,"div",9),core.YNc(13,ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template,5,4,"ng-container",0),core.qZA(),core.BQk()),2&rf){const product_r1=ctx.ngIf,ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngClass",core.VKq(11,_c3,ctx_r0.isProductCardSelected())),core.uIk("aria-label",core.xi3(2,8,"configurator.a11y.itemOfAttribute",core.VKq(13,_c0,ctx_r0.productCardOptions.attributeLabel))),core.xp6(4),core.Q6J("container",null==product_r1.images?null:product_r1.images.PRIMARY),core.xp6(4),core.hij(" ",product_r1.name," "),core.xp6(1),core.Q6J("ngIf",product_r1.code),core.xp6(1),core.Q6J("ngIf",product_r1.description&&product_r1.code),core.xp6(1),core.Q6J("ngIf",!ctx_r0.productCardOptions.singleDropdown||ctx_r0.hasPriceDisplay()),core.xp6(1),core.Q6J("ngIf",ctx_r0.showDeselectionNotPossible)}}function ConfiguratorAttributeCheckBoxListComponent_div_4_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onChangeQuantity($event))},"ConfiguratorAttributeCheckBoxListComponent_div_4_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r0.extractQuantityParameters(ctx_r0.attribute.quantity,!ctx_r0.attribute.required)),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r9);const ctx_r8=core.oxw(),value_r4=ctx_r8.$implicit,i_r5=ctx_r8.index,ctx_r7=core.oxw();return core.KtG(ctx_r7.onChangeValueQuantity($event,value_r4.valueCode,i_r5))},"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template_cx_configurator_attribute_quantity_changeQuantity_0_listener")),core.qZA()}if(2&rf){const value_r4=core.oxw().$implicit,ctx_r6=core.oxw();core.Q6J("quantityOptions",ctx_r6.extractQuantityParameters(value_r4.quantity,ctx_r6.allowZeroValueQuantity))}}__name(ConfiguratorAttributeProductCardComponent_ng_container_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_Template"),__name(ConfiguratorAttributeCheckBoxListComponent_div_4_Template,"ConfiguratorAttributeCheckBoxListComponent_div_4_Template"),__name(ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template,"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template");const _c4=__name(function(a0){return{key:a0}},"_c4"),_c5=__name(function(a0,a1,a2){return{value:a0,attribute:a1,price:a2}},"_c5"),_c6=__name(function(a0,a1){return{value:a0,attribute:a1}},"_c6");function ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.ynx(0),core.TgZ(1,"div",7)(2,"div",8)(3,"input",9),core.NdJ("change",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.onSelect())},"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template_input_change_3_listener")),core.ALo(4,"cxTranslate"),core.ALo(5,"cxTranslate"),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"label",10),core._uU(8),core.qZA()(),core.TgZ(9,"div",11),core._UZ(10,"cx-configurator-price",6),core.qZA()(),core.YNc(11,ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template,1,1,"cx-configurator-attribute-quantity",12),core.BQk()}if(2&rf){const value_r4=ctx.$implicit,i_r5=ctx.index,ctx_r1=core.oxw();core.xp6(3),core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r4.valueCode)),core.s9C("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.Q6J("cxFocus",core.VKq(21,_c4,ctx_r1.attribute.name+"-"+value_r4.name))("value",value_r4.valueCode)("formControl",ctx_r1.attributeCheckBoxForms[i_r5]),core.uIk("aria-label",value_r4.valuePrice&&0!==(null==value_r4.valuePrice?null:value_r4.valuePrice.value)?value_r4.valuePriceTotal&&0!==(null==value_r4.valuePriceTotal?null:value_r4.valuePriceTotal.value)?core.xi3(4,12,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(23,_c5,value_r4.valueDisplay,ctx_r1.attribute.label,value_r4.valuePriceTotal.formattedValue)):core.xi3(5,15,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(27,_c5,value_r4.valueDisplay,ctx_r1.attribute.label,value_r4.valuePrice.formattedValue)):core.xi3(6,18,"configurator.a11y.valueOfAttributeFull",core.WLB(31,_c6,value_r4.valueDisplay,ctx_r1.attribute.label)))("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)),core.xp6(4),core.s9C("id",ctx_r1.createValueUiKey("label",ctx_r1.attribute.name,value_r4.valueCode)),core.s9C("for",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r4.valueCode)),core.xp6(1),core.Oqu(ctx_r1.getLabel(ctx_r1.expMode,value_r4.valueDisplay,value_r4.valueCode)),core.xp6(2),core.Q6J("formula",ctx_r1.extractValuePriceFormulaParameters(value_r4)),core.xp6(1),core.Q6J("ngIf",value_r4.selected&&ctx_r1.withQuantity&&!ctx_r1.withQuantityOnAttributeLevel)}}function ConfiguratorAttributeInputFieldComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"input",2),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.s9C("maxlength",ctx_r0.attribute.maxlength),core.Q6J("formControl",ctx_r0.attributeInputForm)("required",ctx_r0.isRequired)("cxFocus",core.VKq(13,_c4,ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute))),core.uIk("required",ctx_r0.attribute.required)("aria-label",ctx_r0.isUserInputEmpty?core.xi3(2,7,"configurator.a11y.valueOfAttributeBlank",core.VKq(15,_c0,ctx_r0.attribute.label)):core.xi3(3,10,"configurator.a11y.valueOfAttributeFull",core.WLB(17,_c6,ctx_r0.attribute.userInput,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name))}}__name(ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template,"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template"),__name(ConfiguratorAttributeInputFieldComponent_ng_container_1_Template,"ConfiguratorAttributeInputFieldComponent_ng_container_1_Template");const _c7=__name(function(a0){return{"cx-required-error-msg ":a0}},"_c7");function ConfiguratorAttributeInputFieldComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"input",3),core.ALo(2,"async"),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.ekj("ng-invalid",ctx_r1.isRequired&&ctx_r1.isUserInputEmpty),core.s9C("maxlength",ctx_r1.attribute.maxlength),core.Q6J("formControl",ctx_r1.attributeInputForm)("ngClass",core.VKq(16,_c7,core.lcZ(2,8,ctx_r1.showRequiredErrorMessage$)))("cxFocus",core.VKq(18,_c4,ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute))),core.uIk("aria-label",ctx_r1.isUserInputEmpty?core.xi3(3,10,"configurator.a11y.valueOfAttributeBlank",core.VKq(20,_c0,ctx_r1.attribute.label)):core.xi3(4,13,"configurator.a11y.valueOfAttributeFull",core.WLB(22,_c6,ctx_r1.attribute.userInput,ctx_r1.attribute.label)))("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name))}}function ConfiguratorAttributeNumericInputFieldComponent_label_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label",4),core._uU(1),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Oqu(ctx_r0.getHelpTextForInterval())}}function ConfiguratorAttributeNumericInputFieldComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"input",5),core.NdJ("change",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw();return core.KtG(ctx_r5.onChange())},"ConfiguratorAttributeNumericInputFieldComponent_ng_container_2_Template_input_change_1_listener")),core.qZA(),core.BQk()}if(2&rf){const ctx_r1=core.oxw();core.xp6(1),core.s9C("maxlength",ctx_r1.attribute.maxlength),core.Q6J("formControl",ctx_r1.attributeInputForm)("required",ctx_r1.isRequired)("cxFocus",core.VKq(8,_c4,ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute))),core.uIk("aria-describedby",ctx_r1.mustDisplayValidationMessage()?ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)+" "+ctx_r1.createAttributeUiKey("attribute-msg",ctx_r1.attribute.name):ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name))("role",ctx_r1.attribute.dataType)("required",ctx_r1.attribute.required)("aria-label",ctx_r1.getAriaLabelComplete())}}function ConfiguratorAttributeNumericInputFieldComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.ynx(0),core.TgZ(1,"input",6),core.NdJ("change",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw();return core.KtG(ctx_r7.onChange())},"ConfiguratorAttributeNumericInputFieldComponent_ng_container_3_Template_input_change_1_listener")),core.ALo(2,"async"),core.qZA(),core.BQk()}if(2&rf){const ctx_r2=core.oxw();core.xp6(1),core.ekj("ng-invalid",ctx_r2.isRequired&&ctx_r2.isUserInputEmpty),core.s9C("maxlength",ctx_r2.attribute.maxlength),core.Q6J("formControl",ctx_r2.attributeInputForm)("ngClass",core.VKq(12,_c7,core.lcZ(2,10,ctx_r2.showRequiredErrorMessage$)))("cxFocus",core.VKq(14,_c4,ctx_r2.createAttributeIdForConfigurator(ctx_r2.attribute))),core.uIk("aria-describedby",ctx_r2.mustDisplayValidationMessage()?ctx_r2.createAttributeUiKey("label",ctx_r2.attribute.name)+" "+ctx_r2.createAttributeUiKey("attribute-msg",ctx_r2.attribute.name):ctx_r2.createAttributeUiKey("label",ctx_r2.attribute.name))("role",ctx_r2.attribute.dataType)("required",ctx_r2.attribute.required)("aria-label",ctx_r2.getAriaLabelComplete())}}__name(ConfiguratorAttributeInputFieldComponent_ng_container_2_Template,"ConfiguratorAttributeInputFieldComponent_ng_container_2_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_label_0_Template,"ConfiguratorAttributeNumericInputFieldComponent_label_0_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_ng_container_2_Template,"ConfiguratorAttributeNumericInputFieldComponent_ng_container_2_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_ng_container_3_Template,"ConfiguratorAttributeNumericInputFieldComponent_ng_container_3_Template");const _c8=__name(function(a0){return{pattern:a0}},"_c8");function ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",8),core._uU(2),core.ALo(3,"cxTranslate"),core.BQk()),2&rf){const ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("type",ctx_r9.iconType.WARNING),core.xp6(1),core.hij(" ",core.xi3(3,2,"configurator.attribute.wrongNumericFormat",core.VKq(5,_c8,ctx_r9.numericFormatPattern))," ")}}function ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",8),core._uU(2),core.ALo(3,"cxTranslate"),core.BQk()),2&rf){const ctx_r10=core.oxw(2);core.xp6(1),core.Q6J("type",ctx_r10.iconType.ERROR),core.xp6(1),core.hij(" ",core.xi3(3,2,"configurator.attribute.wrongNumericFormatMessage",core.VKq(5,_c8,ctx_r10.numericFormatPattern))," ")}}function ConfiguratorAttributeNumericInputFieldComponent_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",7),core.YNc(1,ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_1_Template,4,7,"ng-container",2),core.YNc(2,ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_2_Template,4,7,"ng-container",2),core.qZA()),2&rf){const ctx_r3=core.oxw();core.s9C("id",ctx_r3.createAttributeUiKey("attribute-msg",ctx_r3.attribute.name)),core.xp6(1),core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2")}}function ConfiguratorAttributeNumericInputFieldComponent_div_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",7),core._UZ(1,"cx-icon",8),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r4=core.oxw();core.s9C("id",ctx_r4.createAttributeUiKey("attribute-msg",ctx_r4.attribute.name)),core.xp6(1),core.Q6J("type",ctx_r4.iconType.ERROR),core.xp6(1),core.hij(" ",core.lcZ(3,3,"configurator.attribute.wrongIntervalFormat"),"\n")}}function ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_option_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",9),core._uU(1),core.qZA()),2&rf){const item_r8=ctx.$implicit,ctx_r7=core.oxw(3);core.Q6J("selected",item_r8.selected)("label",ctx_r7.getLabel(ctx_r7.expMode,item_r8.valueDisplay,item_r8.valueCode,item_r8))("value",item_r8.valueCode),core.uIk("aria-label",ctx_r7.getAriaLabel(item_r8,ctx_r7.attribute)),core.xp6(1),core.hij(" ",ctx_r7.getLabel(ctx_r7.expMode,item_r8.valueDisplay,item_r8.valueCode,item_r8)," ")}}function ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.ynx(0),core.TgZ(1,"select",7),core.NdJ("change",__name(function(){core.CHM(_r10);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.onSelect(ctx_r9.attributeDropDownForm.value))},"ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_Template_select_change_1_listener")),core.YNc(2,ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_option_2_Template,2,5,"option",8),core.qZA(),core.BQk()}if(2&rf){const ctx_r4=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r4.createAttributeIdForConfigurator(ctx_r4.attribute)),core.Q6J("formControl",ctx_r4.attributeDropDownForm)("cxFocus",core.VKq(5,_c4,ctx_r4.attribute.name)),core.uIk("aria-describedby",ctx_r4.createAttributeUiKey("label",ctx_r4.attribute.name)),core.xp6(1),core.Q6J("ngForOf",ctx_r4.attribute.values)}}function ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_option_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",9),core._uU(1),core.qZA()),2&rf){const item_r12=ctx.$implicit,ctx_r11=core.oxw(3);core.Q6J("selected",item_r12.selected)("label",ctx_r11.getLabel(ctx_r11.expMode,item_r12.valueDisplay,item_r12.valueCode,item_r12))("value",item_r12.valueCode),core.uIk("aria-label",ctx_r11.getAriaLabel(item_r12,ctx_r11.attribute)),core.xp6(1),core.hij(" ",ctx_r11.getLabel(ctx_r11.expMode,item_r12.valueDisplay,item_r12.valueCode,item_r12)," ")}}function ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.ynx(0),core.TgZ(1,"select",10),core.NdJ("change",__name(function(){core.CHM(_r14);const ctx_r13=core.oxw(2);return core.KtG(ctx_r13.onSelect(ctx_r13.attributeDropDownForm.value))},"ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_Template_select_change_1_listener")),core.ALo(2,"async"),core.YNc(3,ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_option_3_Template,2,5,"option",8),core.qZA(),core.BQk()}if(2&rf){const ctx_r5=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r5.createAttributeIdForConfigurator(ctx_r5.attribute)),core.Q6J("ngClass",core.VKq(8,_c7,core.lcZ(2,6,ctx_r5.showRequiredErrorMessage$)))("formControl",ctx_r5.attributeDropDownForm)("cxFocus",core.VKq(10,_c4,ctx_r5.attribute.name)),core.uIk("aria-describedby",ctx_r5.createAttributeUiKey("label",ctx_r5.attribute.name)),core.xp6(2),core.Q6J("ngForOf",ctx_r5.attribute.values)}}function ConfiguratorAttributeDropDownComponent_div_0_div_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",11),core._UZ(1,"cx-configurator-price",12),core.qZA()),2&rf){const ctx_r6=core.oxw(2);core.xp6(1),core.Q6J("formula",ctx_r6.extractValuePriceFormulaParameters(ctx_r6.getSelectedValue()))}}__name(ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_1_Template,"ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_1_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_2_Template,"ConfiguratorAttributeNumericInputFieldComponent_div_4_ng_container_2_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_div_4_Template,"ConfiguratorAttributeNumericInputFieldComponent_div_4_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_div_5_Template,"ConfiguratorAttributeNumericInputFieldComponent_div_5_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_option_2_Template,"ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_option_2_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_Template,"ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_option_3_Template,"ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_option_3_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_Template,"ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_div_6_Template,"ConfiguratorAttributeDropDownComponent_div_0_div_6_Template");const _c9=__name(function(a0){return{count:a0}},"_c9");function ConfiguratorAttributeDropDownComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3)(1,"label",4),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.YNc(4,ConfiguratorAttributeDropDownComponent_div_0_ng_container_4_Template,3,7,"ng-container",5),core.YNc(5,ConfiguratorAttributeDropDownComponent_div_0_ng_container_5_Template,4,12,"ng-container",5),core.YNc(6,ConfiguratorAttributeDropDownComponent_div_0_div_6_Template,2,1,"div",6),core.qZA()),2&rf){const ctx_r0=core.oxw();let tmp_4_0;core.xp6(1),core.s9C("for",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.hij(" ",core.xi3(3,5,"configurator.a11y.listbox",core.VKq(8,_c9,ctx_r0.attribute.values.length))," "),core.xp6(2),core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2"),core.xp6(1),core.Q6J("ngIf",!ctx_r0.withQuantity&&(null==(tmp_4_0=ctx_r0.getSelectedValue())?null:tmp_4_0.valuePrice))}}function ConfiguratorAttributeDropDownComponent_div_1_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"div",13)(1,"cx-configurator-attribute-quantity",14),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.onChangeQuantity($event,ctx_r15.attributeDropDownForm))},"ConfiguratorAttributeDropDownComponent_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",12),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters(ctx_r1.attributeDropDownForm)),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template(rf,ctx){1&rf&&(core._UZ(0,"cx-configurator-attribute-numeric-input-field",15),core.ALo(1,"cxTranslate")),2&rf&&core.uIk("aria-label",core.lcZ(1,1,"configurator.a11y.additionalValue"))}function ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template(rf,ctx){1&rf&&(core._UZ(0,"cx-configurator-attribute-input-field",15),core.ALo(1,"cxTranslate")),2&rf&&core.uIk("aria-label",core.lcZ(1,1,"configurator.a11y.additionalValue"))}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r4);const ctx_r3=core.oxw(2);return core.KtG(ctx_r3.onChangeAttributeQuantity($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters(ctx_r1.attribute.quantity)),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",7),core.NdJ("handleDeselect",__name(function($event){core.CHM(_r8);const ctx_r7=core.oxw(2);return core.KtG(ctx_r7.onDeselect($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener"))("handleQuantity",__name(function($event){core.CHM(_r8);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.onChangeValueQuantity($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleQuantity_0_listener"))("handleSelect",__name(function($event){core.CHM(_r8);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.onSelect($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleSelect_0_listener")),core.ALo(1,"async"),core.ALo(2,"async"),core.qZA()}if(2&rf){const value_r5=ctx.$implicit,i_r6=ctx.index,ctx_r2=core.oxw(2);core.s9C("id",ctx_r2.createAttributeValueIdForConfigurator(ctx_r2.attribute,value_r5.valueCode)),core.Q6J("productCardOptions",ctx_r2.extractProductCardParameters(core.lcZ(1,2,ctx_r2.loading$),core.lcZ(2,4,ctx_r2.preventAction$),value_r5,i_r6))}}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.YNc(1,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template,3,2,"div",2),core.YNc(2,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,3,6,"cx-configurator-attribute-product-card",3),core.qZA()),2&rf){const ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.Q6J("ngIf",ctx_r0.withQuantityOnAttributeLevel),core.xp6(1),core.Q6J("ngForOf",null==ctx_r0.attribute?null:ctx_r0.attribute.values)}}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",9),2&rf){const image_r5=ctx.ngIf;core.s9C("src",null==image_r5?null:image_r5.url,core.LSH),core.s9C("alt",null==image_r5?null:image_r5.altText)}}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template(rf,ctx){1&rf&&core._UZ(0,"div",10)}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",2)(1,"input",3),core.NdJ("click",__name(function(){const i_r2=core.CHM(_r7).index,ctx_r6=core.oxw();return core.KtG(ctx_r6.onSelect(i_r2))},"ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template_input_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",4)(5,"label",5),core.YNc(6,ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template,1,2,"img",6),core.YNc(7,ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template,1,0,"div",7),core._uU(8),core._UZ(9,"cx-configurator-price",8),core.qZA()()()}if(2&rf){const value_r1=ctx.$implicit,i_r2=ctx.index,ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)),core.xp6(1),core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.s9C("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("value",value_r1.valueCode)("formControl",ctx_r0.attributeCheckBoxForms[i_r2])("cxFocus",core.VKq(21,_c4,ctx_r0.attribute.name+"-"+value_r1.name)),core.uIk("aria-label",value_r1.valuePrice&&0!==(null==value_r1.valuePrice?null:value_r1.valuePrice.value)?core.xi3(2,15,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(23,_c5,value_r1.valueDisplay,ctx_r0.attribute.label,value_r1.valuePrice.formattedValue)):core.xi3(3,18,"configurator.a11y.valueOfAttributeFull",core.WLB(27,_c6,value_r1.valueDisplay,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name))("checked",ctx_r0.attributeCheckBoxForms[i_r2].value?"checked":null),core.xp6(4),core.s9C("id",ctx_r0.createValueUiKey("label",ctx_r0.attribute.name,value_r1.valueCode)),core.s9C("for",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.xp6(1),core.Q6J("ngIf",ctx_r0.getImage(value_r1)),core.xp6(1),core.Q6J("ngIf",!ctx_r0.getImage(value_r1)),core.xp6(1),core.hij(" ",ctx_r0.getLabel(ctx_r0.expMode,value_r1.valueDisplay,value_r1.valueCode)," "),core.xp6(1),core.Q6J("formula",ctx_r0.extractValuePriceFormulaParameters(value_r1))}}function ConfiguratorAttributeRadioButtonComponent_div_4_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div",5)(1,"cx-configurator-attribute-quantity",6),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.onChangeQuantity($event))},"ConfiguratorAttributeRadioButtonComponent_div_4_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",7),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r0.extractQuantityParameters()),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorAttributeRadioButtonComponent_div_5_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"div",8)(1,"div",9)(2,"input",10),core.NdJ("change",__name(function(){const value_r6=core.CHM(_r8).$implicit,ctx_r7=core.oxw();return core.KtG(ctx_r7.onSelect(value_r6.valueCode))},"ConfiguratorAttributeRadioButtonComponent_div_5_Template_input_change_2_listener")),core.qZA(),core.TgZ(3,"label",11),core._uU(4),core.qZA()(),core.TgZ(5,"div",12),core._UZ(6,"cx-configurator-price",7),core.qZA()()}if(2&rf){const value_r6=ctx.$implicit,ctx_r1=core.oxw();core.xp6(2),core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r6.valueCode)),core.s9C("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.Q6J("formControl",ctx_r1.attributeRadioButtonForm)("value",value_r6.valueCode)("cxFocus",core.VKq(14,_c4,ctx_r1.attribute.name+"-"+value_r6.name)),core.uIk("required",ctx_r1.attribute.required)("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute))("aria-label",ctx_r1.getAriaLabel(value_r6,ctx_r1.attribute))("checked",ctx_r1.attributeRadioButtonForm.value===value_r6.valueCode?"checked":null)("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)),core.xp6(1),core.s9C("id",ctx_r1.createValueUiKey("label",ctx_r1.attribute.name,value_r6.valueCode)),core.s9C("for",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r6.valueCode)),core.xp6(1),core.Oqu(ctx_r1.getLabel(ctx_r1.expMode,value_r6.valueDisplay,value_r6.valueCode)),core.xp6(2),core.Q6J("formula",ctx_r1.extractValuePriceFormulaParameters(value_r6))}}function ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template(rf,ctx){1&rf&&core._UZ(0,"cx-configurator-attribute-numeric-input-field",13)}function ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template(rf,ctx){1&rf&&core._UZ(0,"cx-configurator-attribute-input-field",13)}function ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",5)(1,"span",6),core._uU(2),core.qZA(),core.TgZ(3,"div",7)(4,"label",8),core._uU(5),core.qZA()(),core.TgZ(6,"div",9),core._UZ(7,"cx-configurator-price",10),core.qZA()()),2&rf){const value_r4=core.oxw().$implicit,ctx_r5=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r5.createValueUiKey("label",ctx_r5.attribute.name,value_r4.valueCode)),core.xp6(1),core.hij(" ",ctx_r5.getAriaLabel(ctx_r5.attribute,value_r4)," "),core.xp6(2),core.s9C("id",ctx_r5.createValueUiKey("label",ctx_r5.attribute.name,value_r4.valueCode)),core.xp6(1),core.Oqu(ctx_r5.getLabel(ctx_r5.expMode,value_r4.valueDisplay,value_r4.valueCode)),core.xp6(2),core.Q6J("formula",ctx_r5.extractValuePriceFormulaParameters(value_r4))}}function ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_div_1_Template,8,5,"div",4),core.BQk()),2&rf){const value_r4=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",value_r4.selected)}}function ConfiguratorAttributeReadOnlyComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_Template,2,1,"ng-container",3),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",ctx_r0.attribute.values)}}function ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"span",6),core._uU(2),core.qZA(),core.TgZ(3,"div",12)(4,"span",13),core._uU(5),core.qZA()(),core.BQk()),2&rf){const ctx_r7=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r7.createValueUiKey("label",ctx_r7.attribute.name,ctx_r7.attribute.selectedSingleValue)),core.xp6(1),core.hij(" ",ctx_r7.getAriaLabel(ctx_r7.attribute)," "),core.xp6(3),core.Oqu(ctx_r7.attribute.selectedSingleValue)}}function ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"span",6),core._uU(2),core.qZA(),core.TgZ(3,"div",12)(4,"span",13),core._uU(5),core.qZA()(),core.BQk()),2&rf){const ctx_r8=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r8.createValueUiKey("label",ctx_r8.attribute.name,ctx_r8.attribute.userInput)),core.xp6(1),core.hij(" ",ctx_r8.getAriaLabel(ctx_r8.attribute)," "),core.xp6(3),core.Oqu(ctx_r8.attribute.userInput)}}function ConfiguratorAttributeReadOnlyComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_0_Template,6,3,"ng-container",11),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_1_Template,6,3,"ng-container",11)),2&rf){const ctx_r2=core.oxw();core.Q6J("ngIf",ctx_r2.attribute.selectedSingleValue),core.xp6(1),core.Q6J("ngIf",ctx_r2.attribute.userInput)}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_option_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",8),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._uU(4),core.qZA()),2&rf){const item_r6=ctx.$implicit,ctx_r5=core.oxw(3);let tmp_4_0;core.Q6J("label",ctx_r5.getLabel(!1,item_r6.valueDisplay,void 0,item_r6))("selected",item_r6.selected)("value",item_r6.valueCode)("value",item_r6.valueCode),core.uIk("aria-label",ctx_r5.isRetractValue(item_r6.valueCode)?core.xi3(1,6,"configurator.a11y.forAttribute",core.WLB(15,_c6,item_r6.valueDisplay,ctx_r5.attribute.label)):item_r6.valuePrice&&0!==(null==item_r6.valuePrice?null:item_r6.valuePrice.value)?core.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",core.kEZ(18,_c5,item_r6.valueDisplay,ctx_r5.attribute.label,null!==(tmp_4_0=null==item_r6.valuePriceTotal?null:item_r6.valuePriceTotal.formattedValue)&&void 0!==tmp_4_0?tmp_4_0:0)):core.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",core.WLB(22,_c6,item_r6.valueDisplay,ctx_r5.attribute.label))),core.xp6(4),core.hij(" ",ctx_r5.getLabel(!1,item_r6.valueDisplay,void 0,item_r6)," ")}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.ynx(0),core.TgZ(1,"select",6),core.NdJ("change",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw(2);return core.KtG(ctx_r7.onSelect(ctx_r7.attributeDropDownForm.value))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_Template_select_change_1_listener")),core.YNc(2,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_option_2_Template,5,25,"option",7),core.qZA(),core.BQk()}if(2&rf){const ctx_r3=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r3.createAttributeIdForConfigurator(ctx_r3.attribute)),core.Q6J("formControl",ctx_r3.attributeDropDownForm)("cxFocus",core.VKq(5,_c4,ctx_r3.attribute.name)),core.uIk("aria-describedby",ctx_r3.createAttributeUiKey("label",ctx_r3.attribute.name)),core.xp6(1),core.Q6J("ngForOf",ctx_r3.attribute.values)}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_option_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",8),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._uU(4),core.qZA()),2&rf){const item_r10=ctx.$implicit,ctx_r9=core.oxw(3);let tmp_4_0;core.Q6J("label",ctx_r9.getLabel(!1,item_r10.valueDisplay,void 0,item_r10))("selected",item_r10.selected)("value",item_r10.valueCode)("value",item_r10.valueCode),core.uIk("aria-label",ctx_r9.isRetractValue(item_r10.valueCode)?core.xi3(1,6,"configurator.a11y.forAttribute",core.WLB(15,_c6,item_r10.valueDisplay,ctx_r9.attribute.label)):item_r10.valuePrice&&0!==(null==item_r10.valuePrice?null:item_r10.valuePrice.value)?core.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",core.kEZ(18,_c5,item_r10.valueDisplay,ctx_r9.attribute.label,null!==(tmp_4_0=null==item_r10.valuePriceTotal?null:item_r10.valuePriceTotal.formattedValue)&&void 0!==tmp_4_0?tmp_4_0:0)):core.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",core.WLB(22,_c6,item_r10.valueDisplay,ctx_r9.attribute.label))),core.xp6(4),core.hij(" ",ctx_r9.getLabel(!1,item_r10.valueDisplay,void 0,item_r10)," ")}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.ynx(0),core.TgZ(1,"select",9),core.NdJ("change",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw(2);return core.KtG(ctx_r11.onSelect(ctx_r11.attributeDropDownForm.value))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_Template_select_change_1_listener")),core.ALo(2,"async"),core.YNc(3,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_option_3_Template,5,25,"option",7),core.qZA(),core.BQk()}if(2&rf){const ctx_r4=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r4.createAttributeIdForConfigurator(ctx_r4.attribute)),core.Q6J("ngClass",core.VKq(8,_c7,core.lcZ(2,6,ctx_r4.showRequiredErrorMessage$)))("formControl",ctx_r4.attributeDropDownForm)("cxFocus",core.VKq(10,_c4,ctx_r4.attribute.name)),core.uIk("aria-describedby",ctx_r4.createAttributeUiKey("label",ctx_r4.attribute.name)),core.xp6(2),core.Q6J("ngForOf",ctx_r4.attribute.values)}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3)(1,"label",4),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.YNc(4,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_Template,3,7,"ng-container",5),core.YNc(5,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_Template,4,12,"ng-container",5),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.s9C("for",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.hij(" ",core.xi3(3,4,"configurator.a11y.listbox",core.VKq(7,_c9,null==ctx_r0.attribute.values?null:ctx_r0.attribute.values.length))," "),core.xp6(2),core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2")}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",10),core.NdJ("handleDeselect",__name(function(){core.CHM(_r14);const ctx_r13=core.oxw();return core.KtG(ctx_r13.onSelect(ctx_r13.RETRACT_VALUE_CODE))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,ctx_r1.selectedValue.valueCode)),core.Q6J("productCardOptions",ctx_r1.extractProductCardParameters())}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"div",11)(1,"cx-configurator-attribute-quantity",12),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.onChangeQuantity($event,ctx_r15.attributeDropDownForm))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",13),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r2.extractQuantityParameters(ctx_r2.attributeDropDownForm)),core.xp6(1),core.Q6J("formula",ctx_r2.extractPriceFormulaParameters())}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r4);const ctx_r3=core.oxw(2);return core.KtG(ctx_r3.onChangeQuantity($event))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters()),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",7),core.NdJ("handleDeselect",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw(2);return core.KtG(ctx_r7.onSelect(""))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener"))("handleSelect",__name(function($event){core.CHM(_r8);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.onSelect($event))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleSelect_0_listener")),core.qZA()}if(2&rf){const value_r5=ctx.$implicit,i_r6=ctx.index,ctx_r2=core.oxw(2);core.Q6J("id",ctx_r2.createAttributeValueIdForConfigurator(ctx_r2.attribute,value_r5.valueCode))("productCardOptions",ctx_r2.extractProductCardParameters(value_r5,i_r6))}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.YNc(1,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template,3,2,"div",2),core.YNc(2,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,1,2,"cx-configurator-attribute-product-card",3),core.qZA()),2&rf){const ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.Q6J("ngIf",ctx_r0.withQuantity),core.xp6(1),core.Q6J("ngForOf",null==ctx_r0.attribute?null:ctx_r0.attribute.values)}}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",9),2&rf){const value_r1=core.oxw().$implicit,ctx_r2=core.oxw();let tmp_0_0,tmp_1_0;core.s9C("src",null==(tmp_0_0=ctx_r2.getImage(value_r1))?null:tmp_0_0.url,core.LSH),core.s9C("alt",null==(tmp_1_0=ctx_r2.getImage(value_r1))?null:tmp_1_0.altText)}}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template(rf,ctx){1&rf&&core._UZ(0,"div",10)}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"div",2)(1,"input",3),core.NdJ("click",__name(function(){const value_r1=core.CHM(_r6).$implicit,ctx_r5=core.oxw();return core.KtG(ctx_r5.onClick(value_r1.valueCode))},"ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template_input_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",4)(5,"label",5),core.YNc(6,ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template,1,2,"img",6),core.YNc(7,ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template,1,0,"div",7),core._uU(8),core._UZ(9,"cx-configurator-price",8),core.qZA()()()}if(2&rf){const value_r1=ctx.$implicit,ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)),core.xp6(1),core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.s9C("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("value",value_r1.valueCode)("formControl",ctx_r0.attributeRadioButtonForm)("value",value_r1.valueCode)("cxFocus",core.VKq(25,_c4,ctx_r0.attribute.name+"-"+value_r1.name)),core.uIk("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute))("required",ctx_r0.attribute.required)("checked",ctx_r0.attributeRadioButtonForm.value===value_r1.valueCode?"checked":null)("aria-checked",ctx_r0.attributeRadioButtonForm.value===value_r1.valueCode?"true":"false")("aria-label",value_r1.valuePrice&&0!==(null==value_r1.valuePrice?null:value_r1.valuePrice.value)?core.xi3(2,19,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(27,_c5,value_r1.valueDisplay,ctx_r0.attribute.label,value_r1.valuePrice.formattedValue)):core.xi3(3,22,"configurator.a11y.valueOfAttributeFull",core.WLB(31,_c6,value_r1.valueDisplay,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name)),core.xp6(4),core.s9C("id",ctx_r0.createValueUiKey("label",ctx_r0.attribute.name,value_r1.valueCode)),core.s9C("for",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.xp6(1),core.Q6J("ngIf",ctx_r0.getImage(value_r1)),core.xp6(1),core.Q6J("ngIf",!ctx_r0.getImage(value_r1)),core.xp6(1),core.hij(" ",ctx_r0.getLabel(ctx_r0.expMode,value_r1.valueDisplay,value_r1.valueCode)," "),core.xp6(1),core.Q6J("formula",ctx_r0.extractValuePriceFormulaParameters(value_r1))}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",8),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.header.multipleWarnings"),""))}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",10),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",11),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"button",9),core.NdJ("click",__name(function(){core.CHM(_r10);const ctx_r9=core.oxw(3);return core.KtG(ctx_r9.toggleWarnings())},"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template,2,0,"ng-container",0),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template,2,0,"ng-container",0),core.qZA()}if(2&rf){const ctx_r5=core.oxw(3);core.uIk("aria-expanded",ctx_r5.showWarnings),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.header.reviewWarnings")," "),core.xp6(2),core.Q6J("ngIf",!ctx_r5.showWarnings),core.xp6(1),core.Q6J("ngIf",ctx_r5.showWarnings)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.qZA()),2&rf){const warningMessage_r11=ctx.$implicit,configuration_r1=core.oxw(2).ngIf,ctx_r6=core.oxw();core.ekj("open",ctx_r6.showWarnings||1===(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)),core.xp6(1),core.hij(" ",warningMessage_r11," ")}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"span",2),core._UZ(3,"cx-icon",3),core.qZA(),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template,3,3,"span",4),core.YNc(5,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template,5,6,"button",5),core.TgZ(6,"div",6),core.YNc(7,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template,2,3,"div",7),core.qZA()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;let tmp_0_0,tmp_1_0;core.xp6(4),core.Q6J("ngIf",(null!==(tmp_0_0=null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)&&void 0!==tmp_0_0?tmp_0_0:0)>1),core.xp6(1),core.Q6J("ngIf",(null!==(tmp_1_0=null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)&&void 0!==tmp_1_0?tmp_1_0:0)>1),core.xp6(1),core.ekj("inline",1===(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)),core.xp6(1),core.Q6J("ngForOf",configuration_r1.warningMessages)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",19),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.header.multipleErrors"),""))}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",10),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",11),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template(rf,ctx){if(1&rf){const _r20=core.EpF();core.TgZ(0,"button",20),core.NdJ("click",__name(function(){core.CHM(_r20);const ctx_r19=core.oxw(3);return core.KtG(ctx_r19.toggleErrors())},"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template,2,0,"ng-container",0),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template,2,0,"ng-container",0),core.qZA()}if(2&rf){const ctx_r15=core.oxw(3);core.uIk("aria-expanded",ctx_r15.showErrors),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.header.reviewErrors")," "),core.xp6(2),core.Q6J("ngIf",!ctx_r15.showErrors),core.xp6(1),core.Q6J("ngIf",ctx_r15.showErrors)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21),core._uU(1),core.qZA()),2&rf){const errorMessage_r21=ctx.$implicit,configuration_r1=core.oxw(2).ngIf,ctx_r16=core.oxw();core.ekj("open",ctx_r16.showErrors||1===(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)),core.xp6(1),core.hij(" ",errorMessage_r21," ")}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",13)(2,"span",2),core._UZ(3,"cx-icon",14),core.qZA(),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template,3,3,"span",15),core.YNc(5,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template,5,6,"button",16),core.TgZ(6,"div",17),core.YNc(7,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template,2,3,"div",18),core.qZA()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;let tmp_0_0,tmp_1_0;core.xp6(4),core.Q6J("ngIf",(null!==(tmp_0_0=null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)&&void 0!==tmp_0_0?tmp_0_0:0)>1),core.xp6(1),core.Q6J("ngIf",(null!==(tmp_1_0=null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)&&void 0!==tmp_1_0?tmp_1_0:0)>1),core.xp6(1),core.ekj("inline",1===(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)),core.xp6(1),core.Q6J("ngForOf",configuration_r1.errorMessages)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template,8,5,"ng-container",0),core.YNc(2,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template,8,5,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;let tmp_0_0,tmp_1_0;core.xp6(1),core.Q6J("ngIf",(null!==(tmp_0_0=null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)&&void 0!==tmp_0_0?tmp_0_0:0)>0),core.xp6(1),core.Q6J("ngIf",(null!==(tmp_1_0=null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)&&void 0!==tmp_1_0?tmp_1_0:0)>0)}}function ConfiguratorConflictDescriptionComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",1),core._uU(2),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("type",ctx_r0.iconTypes.WARNING),core.xp6(1),core.hij(" ",ctx_r0.currentGroup.name,"\n")}}__name(ConfiguratorAttributeDropDownComponent_div_0_Template,"ConfiguratorAttributeDropDownComponent_div_0_Template"),__name(ConfiguratorAttributeDropDownComponent_div_1_Template,"ConfiguratorAttributeDropDownComponent_div_1_Template"),__name(ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template,"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template"),__name(ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template,"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template"),__name(ConfiguratorAttributeRadioButtonComponent_div_4_Template,"ConfiguratorAttributeRadioButtonComponent_div_4_Template"),__name(ConfiguratorAttributeRadioButtonComponent_div_5_Template,"ConfiguratorAttributeRadioButtonComponent_div_5_Template"),__name(ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template,"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template"),__name(ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template,"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_div_1_Template,"ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_div_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_Template,"ConfiguratorAttributeReadOnlyComponent_ng_container_2_ng_container_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_container_2_Template,"ConfiguratorAttributeReadOnlyComponent_ng_container_2_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_0_Template,"ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_0_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_1_Template,"ConfiguratorAttributeReadOnlyComponent_ng_template_3_ng_container_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_ng_template_3_Template,"ConfiguratorAttributeReadOnlyComponent_ng_template_3_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_option_2_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_option_2_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_4_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_option_3_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_option_3_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_ng_container_5_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template"),__name(ConfiguratorConflictDescriptionComponent_ng_container_0_Template,"ConfiguratorConflictDescriptionComponent_ng_container_0_Template");const _c10=__name(function(a0){return{number:a0}},"_c10");function ConfiguratorConflictSuggestionComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.TgZ(7,"span",2),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.conflict.suggestionTitle",core.VKq(15,_c10,ctx_r0.suggestionNumber+1))+" "+core.xi3(3,6,"configurator.conflict.suggestionText",core.VKq(17,_c0,ctx_r0.attribute.label))),core.xp6(4),core.Oqu(core.xi3(6,9,"configurator.conflict.suggestionTitle",core.VKq(19,_c10,ctx_r0.suggestionNumber+1))),core.xp6(3),core.Oqu(core.xi3(9,12,"configurator.conflict.suggestionText",core.VKq(21,_c0,ctx_r0.attribute.label)))}}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.exit")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.exitMobile")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_1_Template,3,3,"ng-container",0),core.ALo(2,"async"),core.YNc(3,ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_3_Template,3,3,"ng-container",0),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r2.isDesktop())),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r2.isMobile()))}}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.cancelConfigurationMobile")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.cancelConfiguration")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_1_Template,3,3,"ng-container",0),core.ALo(2,"async"),core.YNc(3,ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_3_Template,3,3,"ng-container",0),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r3=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r3.isMobile())),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r3.isDesktop()))}}function ConfiguratorExitButtonComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"button",1),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.exitConfiguration())},"ConfiguratorExitButtonComponent_ng_container_0_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.YNc(4,ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_Template,5,6,"ng-container",0),core.YNc(5,ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_Template,5,6,"ng-container",0),core.qZA(),core.BQk()}if(2&rf){const container_r1=ctx.ngIf;core.xp6(1),core.uIk("title",container_r1.routerData.isOwnerCartEntry?core.lcZ(2,3,"configurator.button.cancelConfiguration"):core.lcZ(3,5,"configurator.button.exit")),core.xp6(3),core.Q6J("ngIf",!container_r1.routerData.isOwnerCartEntry),core.xp6(1),core.Q6J("ngIf",container_r1.routerData.isOwnerCartEntry)}}function ConfiguratorGroupComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-conflict-description",3),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("currentGroup",ctx_r0.group)}}function ConfiguratorGroupComponent_div_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-conflict-suggestion",5),core.BQk()),2&rf){const ctx_r6=core.oxw(),attribute_r2=ctx_r6.$implicit,indexOfAttribute_r3=ctx_r6.index,ctx_r4=core.oxw();core.xp6(1),core.Q6J("currentGroup",ctx_r4.group)("attribute",attribute_r2)("suggestionNumber",indexOfAttribute_r3)}}__name(ConfiguratorConflictSuggestionComponent_ng_container_0_Template,"ConfiguratorConflictSuggestionComponent_ng_container_0_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_1_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_1_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_3_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_ng_container_3_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_4_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_1_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_1_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_3_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_ng_container_3_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_5_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_Template,"ConfiguratorExitButtonComponent_ng_container_0_Template"),__name(ConfiguratorGroupComponent_ng_container_1_Template,"ConfiguratorGroupComponent_ng_container_1_Template"),__name(ConfiguratorGroupComponent_div_2_ng_container_1_Template,"ConfiguratorGroupComponent_div_2_ng_container_1_Template");const _c11=__name(function(a1,a2,a3,a4,a5,a6){return{componentKey:"Header",attribute:a1,owner:a2,group:a3,language:a4,expMode:a5,isNavigationToGroupEnabled:a6}},"_c11"),_c12=__name(function(a0,a1,a2,a3,a4,a5){return{componentKey:a0,attribute:a1,owner:a2,group:a3,language:a4,expMode:a5}},"_c12"),_c13=__name(function(a1,a2,a3,a4,a5){return{componentKey:"Footer",attribute:a1,owner:a2,group:a3,language:a4,expMode:a5}},"_c13");function ConfiguratorGroupComponent_div_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"div",6),core.ALo(2,"async"),core._UZ(3,"div",6),core.ALo(4,"async"),core._UZ(5,"div",6),core.ALo(6,"async"),core.BQk()),2&rf){const activeLanguage_r7=ctx.ngIf,attribute_r2=core.oxw().$implicit,ctx_r5=core.oxw();let tmp_0_0,tmp_1_0,tmp_2_0;core.xp6(1),core.Q6J("cxConfiguratorAttributeComponent",core.HTZ(9,_c11,attribute_r2,ctx_r5.owner,ctx_r5.group,activeLanguage_r7,null!==(tmp_0_0=core.lcZ(2,3,ctx_r5.expMode))&&void 0!==tmp_0_0&&tmp_0_0,ctx_r5.isNavigationToGroupEnabled)),core.xp6(2),core.Q6J("cxConfiguratorAttributeComponent",core.HTZ(16,_c12,ctx_r5.getComponentKey(attribute_r2),attribute_r2,ctx_r5.owner,ctx_r5.group,activeLanguage_r7,null!==(tmp_1_0=core.lcZ(4,5,ctx_r5.expMode))&&void 0!==tmp_1_0&&tmp_1_0)),core.xp6(2),core.Q6J("cxConfiguratorAttributeComponent",core.qbA(23,_c13,attribute_r2,ctx_r5.owner,ctx_r5.group,activeLanguage_r7,null!==(tmp_2_0=core.lcZ(6,7,ctx_r5.expMode))&&void 0!==tmp_2_0&&tmp_2_0))}}function ConfiguratorGroupComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",4),core.YNc(1,ConfiguratorGroupComponent_div_2_ng_container_1_Template,2,3,"ng-container",1),core.YNc(2,ConfiguratorGroupComponent_div_2_ng_container_2_Template,7,29,"ng-container",1),core.ALo(3,"async"),core.qZA()),2&rf){const attribute_r2=ctx.$implicit,ctx_r1=core.oxw();core.ekj("cx-hidden",!attribute_r2.visible),core.xp6(1),core.Q6J("ngIf",ctx_r1.isConflictGroupType(ctx_r1.group.groupType)),core.xp6(1),core.Q6J("ngIf",core.lcZ(3,4,ctx_r1.activeLanguage$))}}function ConfiguratorConflictSolverDialogComponent_ng_container_18_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-group",11),core.BQk()),2&rf){const conflictGroup_r3=ctx.ngIf,routerData_r1=core.oxw().ngIf;core.xp6(1),core.Q6J("group",conflictGroup_r3)("owner",routerData_r1.owner)("isNavigationToGroupEnabled",!1)}}function ConfiguratorConflictSolverDialogComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorConflictSolverDialogComponent_ng_container_18_ng_container_1_Template,2,3,"ng-container",10),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.conflictGroup$))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-group",3),core.BQk()),2&rf){const group_r6=ctx.ngIf,configuration_r3=core.oxw(2).ngIf,ctx_r5=core.oxw();core.xp6(1),core.Q6J("group",group_r6)("owner",configuration_r3.owner)("isNavigationToGroupEnabled",ctx_r5.isNavigationToGroupEnabled(configuration_r3))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,2,3,"ng-container",2),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r4=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r4.currentGroup$))}}function ConfiguratorFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorFormComponent_ng_container_0_ng_container_1_Template,3,3,"ng-container",0),core.BQk()),2&rf){const configuration_r3=ctx.ngIf,ctx_r0=core.oxw(),_r1=core.MAs(3);core.xp6(1),core.Q6J("ngIf",!ctx_r0.isDialogActive(configuration_r3))("ngIfElse",_r1)}}function ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"div",20),core.BQk())}function ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",15)(1,"div",16),core._UZ(2,"div",17)(3,"div",18),core.qZA(),core.TgZ(4,"div",19),core.YNc(5,ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template,2,0,"ng-container",2),core.qZA()()),2&rf){const i_r12=ctx.index;core.xp6(5),core.Q6J("ngIf",0!==i_r12)}}__name(ConfiguratorGroupComponent_div_2_ng_container_2_Template,"ConfiguratorGroupComponent_div_2_ng_container_2_Template"),__name(ConfiguratorGroupComponent_div_2_Template,"ConfiguratorGroupComponent_div_2_Template"),__name(ConfiguratorConflictSolverDialogComponent_ng_container_18_ng_container_1_Template,"ConfiguratorConflictSolverDialogComponent_ng_container_18_ng_container_1_Template"),__name(ConfiguratorConflictSolverDialogComponent_ng_container_18_Template,"ConfiguratorConflictSolverDialogComponent_ng_container_18_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_1_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorFormComponent_ng_container_0_Template,"ConfiguratorFormComponent_ng_container_0_Template"),__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template"),__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template");const _c14=__name(function(){return[0,1,2]},"_c14");function ConfiguratorFormComponent_ng_template_2_ng_container_0_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",5)(2,"div",6),core._UZ(3,"div",7)(4,"div",8),core.qZA(),core.TgZ(5,"div",9),core._UZ(6,"div",10)(7,"div",11),core.qZA()(),core.TgZ(8,"div",5)(9,"div",6),core._UZ(10,"div",7)(11,"div",8),core.TgZ(12,"div",12),core._UZ(13,"div",13),core.qZA()(),core.TgZ(14,"div",9),core.YNc(15,ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template,6,1,"div",14),core.qZA()(),core.BQk()),2&rf&&(core.xp6(15),core.Q6J("ngForOf",core.DdM(1,_c14)))}function ConfiguratorFormComponent_ng_template_2_Template(rf,ctx){1&rf&&core.YNc(0,ConfiguratorFormComponent_ng_template_2_ng_container_0_Template,16,2,"ng-container",4),2&rf&&core.Q6J("ngForOf",core.DdM(1,_c14))}__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_Template"),__name(ConfiguratorFormComponent_ng_template_2_Template,"ConfiguratorFormComponent_ng_template_2_Template");const _c15=["groupItem"],_c16=__name(function(){return{key:"cx-menu-back"}},"_c16");function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template(rf,ctx){if(1&rf){const _r18=core.EpF();core.TgZ(0,"button",8,9),core.NdJ("click",__name(function(){core.CHM(_r18);const ctx_r17=core.oxw(7);return core.KtG(ctx_r17.navigateUp())},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template_button_click_0_listener"))("keydown",__name(function($event){core.CHM(_r18);const ctx_r20=core.oxw(2),groupIndex_r11=ctx_r20.index,group_r10=ctx_r20.$implicit,currentGroup_r8=core.oxw().ngIf,ctx_r19=core.oxw(4);return core.KtG(ctx_r19.switchGroupOnArrowPress($event,groupIndex_r11,group_r10,currentGroup_r8))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template_button_keydown_0_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._UZ(4,"cx-icon",10),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()}if(2&rf){const parentGroup_r14=core.oxw().ngIf,ctx_r15=core.oxw(6);core.Q6J("cxFocus",core.DdM(11,_c16)),core.uIk("aria-selected",!1)("aria-label",ctx_r15.isConflictGroupTypeAllowingUndefined(parentGroup_r14.groupType)?core.lcZ(2,5,"configurator.a11y.conflictBack"):core.lcZ(3,7,"configurator.a11y.groupBack")),core.xp6(4),core.Q6J("type",ctx_r15.iconTypes.CARET_LEFT),core.xp6(1),core.hij(" ",core.lcZ(6,9,"configurator.button.back")," ")}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template,7,12,"button",7),core.BQk()),2&rf){const parentGroup_r14=ctx.ngIf,groupIndex_r11=core.oxw().index;core.xp6(1),core.Q6J("ngIf",null!==parentGroup_r14&&0===groupIndex_r11)}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_cx_icon_22_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-icon",21),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate")),2&rf){const group_r10=core.oxw(2).$implicit,ctx_r25=core.oxw(5);core.s9C("id",ctx_r25.createIconId(ctx_r25.iconTypes.CARET_RIGHT,group_r10.id)),core.s9C("title",core.lcZ(2,6,"configurator.icon.subgroup")),core.Q6J("type",ctx_r25.iconTypes.CARET_RIGHT),core.uIk("aria-label",core.lcZ(1,4,"configurator.a11y.iconSubGroup"))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf){const _r29=core.EpF();core.ynx(0),core.TgZ(1,"button",11,9),core.NdJ("click",__name(function(){core.CHM(_r29);const group_r10=core.oxw().$implicit,ctx_r27=core.oxw(5);return core.KtG(ctx_r27.click(group_r10))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template_button_click_1_listener"))("keydown",__name(function($event){core.CHM(_r29);const ctx_r31=core.oxw(),groupIndex_r11=ctx_r31.index,group_r10=ctx_r31.$implicit,currentGroup_r8=core.oxw().ngIf,ctx_r30=core.oxw(4);return core.KtG(ctx_r30.switchGroupOnArrowPress($event,groupIndex_r11,group_r10,currentGroup_r8))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template_button_keydown_1_listener")),core.ALo(3,"async"),core.ALo(4,"async"),core.TgZ(5,"span",12),core._uU(6),core.qZA(),core.TgZ(7,"div",13)(8,"div",14),core._uU(9),core.qZA(),core.TgZ(10,"div",15),core._UZ(11,"cx-icon",16),core.ALo(12,"cxTranslate"),core.ALo(13,"cxTranslate"),core.qZA(),core.TgZ(14,"div",15),core._UZ(15,"cx-icon",17),core.ALo(16,"cxTranslate"),core.ALo(17,"cxTranslate"),core._UZ(18,"cx-icon",18),core.ALo(19,"cxTranslate"),core.ALo(20,"cxTranslate"),core.qZA(),core.TgZ(21,"div",19),core.YNc(22,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_cx_icon_22_Template,3,8,"cx-icon",20),core.qZA()()(),core.BQk()}if(2&rf){const group_r10=core.oxw().$implicit,currentGroup_r8=core.oxw().ngIf,configuration_r3=core.oxw(3).ngIf,ctx_r13=core.oxw();core.xp6(1),core.ekj("DISABLED",!group_r10.configurable)("cx-menu-conflict",ctx_r13.isConflictGroupTypeAllowingUndefined(group_r10.groupType))("active",ctx_r13.isGroupSelected(group_r10.id,currentGroup_r8.id))("disable",!group_r10.configurable),core.s9C("id",group_r10.id),core.s9C("ngClass",core.lcZ(3,32,ctx_r13.getGroupStatusStyles(group_r10,configuration_r3))),core.Q6J("cxFocus",core.VKq(48,_c4,group_r10.id))("tabindex",ctx_r13.getTabIndex(group_r10,currentGroup_r8.id)),core.uIk("aria-describedby",core.lcZ(4,34,ctx_r13.getAriaDescribedby(group_r10,configuration_r3)))("aria-selected",ctx_r13.isGroupSelected(group_r10.id,currentGroup_r8.id))("aria-controls",ctx_r13.isGroupSelected(group_r10.id,currentGroup_r8.id)?ctx_r13.createAriaControls(group_r10.id):null)("aria-label",ctx_r13.getAriaLabel(group_r10)),core.xp6(4),core.s9C("title",group_r10.description),core.xp6(1),core.Oqu(ctx_r13.getGroupMenuTitle(group_r10)),core.xp6(3),core.hij(" ",ctx_r13.getConflictNumber(group_r10)," "),core.xp6(2),core.s9C("id",ctx_r13.createIconId(ctx_r13.iconTypes.WARNING,group_r10.id)),core.s9C("title",core.lcZ(13,38,"configurator.icon.groupConflict")),core.Q6J("type",ctx_r13.iconTypes.WARNING),core.uIk("aria-label",core.lcZ(12,36,"configurator.a11y.iconConflict")),core.xp6(4),core.s9C("id",ctx_r13.createIconId(ctx_r13.iconTypes.ERROR,group_r10.id)),core.s9C("title",core.lcZ(17,42,"configurator.icon.groupIncomplete")),core.Q6J("type",ctx_r13.iconTypes.ERROR),core.uIk("aria-label",core.lcZ(16,40,"configurator.a11y.iconIncomplete")),core.xp6(3),core.s9C("id",ctx_r13.createIconId(ctx_r13.iconTypes.SUCCESS,group_r10.id)),core.s9C("title",core.lcZ(20,46,"configurator.icon.groupComplete")),core.Q6J("type",ctx_r13.iconTypes.SUCCESS),core.uIk("aria-label",core.lcZ(19,44,"configurator.a11y.iconComplete")),core.xp6(4),core.Q6J("ngIf",ctx_r13.hasSubGroups(group_r10))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.YNc(3,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template,23,50,"ng-container",5),core.ALo(4,"async"),core.BQk()),2&rf){const group_r10=ctx.$implicit,ctx_r9=core.oxw(5);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r9.displayedParentGroup$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r9.displayMenuItem(group_r10)))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_Template,5,6,"ng-container",6),core.BQk()),2&rf){const groups_r6=core.oxw().ngIf;core.xp6(1),core.Q6J("ngForOf",groups_r6)}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r5=core.oxw(3);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r5.currentGroup$))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2)(2,"span",3),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"span",4),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA(),core.YNc(8,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_Template,3,3,"ng-container",5),core.ALo(9,"async"),core.qZA(),core.BQk()),2&rf){const ctx_r4=core.oxw(2);core.xp6(3),core.hij(" ",core.lcZ(4,3,"configurator.a11y.listOfGroups")," "),core.xp6(3),core.hij(" ",core.lcZ(7,5,"configurator.a11y.inListOfGroups")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(9,7,ctx_r4.displayedGroups$))}}function ConfiguratorGroupMenuComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_Template,10,9,"ng-container",0),core.BQk()),2&rf){const configuration_r3=ctx.ngIf,ctx_r0=core.oxw(),_r1=core.MAs(3);core.xp6(1),core.Q6J("ngIf",!ctx_r0.isDialogActive(configuration_r3))("ngIfElse",_r1)}}function ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",24),core._UZ(1,"div",25),core.qZA())}__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_cx_icon_22_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_cx_icon_22_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_ng_container_3_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_ng_container_8_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_Template,"ConfiguratorGroupMenuComponent_ng_container_0_Template"),__name(ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template,"ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template");const _c17=__name(function(){return[0,1,2,3,4,5,6,7,8,9]},"_c17");function ConfiguratorGroupMenuComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",22),core.YNc(1,ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template,2,0,"div",23),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngForOf",core.DdM(1,_c17)))}function ConfiguratorGroupTitleComponent_ng_container_0_ng_container_2_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-hamburger-menu"),core.BQk())}function ConfiguratorGroupTitleComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2),core.YNc(2,ConfiguratorGroupTitleComponent_ng_container_0_ng_container_2_Template,2,0,"ng-container",3),core.ALo(3,"async"),core._uU(4),core.qZA(),core.BQk()),2&rf){const group_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(2),core.Q6J("ngIf",core.lcZ(3,2,ctx_r0.isMobile())),core.xp6(2),core.hij(" ",ctx_r0.getGroupTitle(group_r3)," ")}}function ConfiguratorGroupTitleComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",4)}function ConfiguratorOverviewAttributeComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",4),core._uU(2),core.qZA(),core.TgZ(3,"div",5),core._UZ(4,"cx-configurator-price",6),core.qZA(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(2),core.hij(" ",ctx_r0.attributeOverview.attribute," "),core.xp6(2),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorOverviewAttributeComponent_ng_template_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",5),core._UZ(1,"cx-configurator-price",6),core.qZA(),core.TgZ(2,"div",4),core._uU(3),core.qZA()),2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("formula",ctx_r2.extractPriceFormulaParameters()),core.xp6(2),core.hij(" ",ctx_r2.attributeOverview.attribute," ")}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",12),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.AsE(" ",core.lcZ(2,2,"configurator.attribute.id"),": ",ctx_r2.attributeOverview.productCode,"")}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",13)(1,"span",14),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"span",15),core._uU(5),core.ALo(6,"cxNumeric"),core.qZA()()),2&rf){const ctx_r3=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.attribute.quantity")),core.xp6(3),core.Oqu(core.lcZ(6,4,ctx_r3.attributeOverview.quantity))}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",16)(1,"span",14),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"span",15),core._uU(5),core.qZA()()),2&rf){const ctx_r4=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.overviewForm.itemPrice")),core.xp6(3),core.Oqu(null==ctx_r4.attributeOverview.valuePrice?null:ctx_r4.attributeOverview.valuePrice.formattedValue)}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"div",2),core._UZ(3,"cx-media",3),core.qZA(),core.TgZ(4,"span",4),core._uU(5),core.qZA(),core.TgZ(6,"div",5)(7,"div"),core._uU(8),core.qZA(),core.YNc(9,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template,3,4,"span",6),core.YNc(10,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template,7,6,"div",7),core.YNc(11,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template,6,4,"div",8),core.qZA()(),core.TgZ(12,"div",9)(13,"span",10),core._uU(14),core.qZA(),core._UZ(15,"cx-configurator-price",11),core.qZA(),core.BQk()),2&rf){const product_r1=ctx.ngIf,ctx_r0=core.oxw();core.xp6(3),core.Q6J("container",ctx_r0.getProductPrimaryImage(product_r1)),core.xp6(2),core.hij(" ",ctx_r0.getAriaLabel()," "),core.xp6(3),core.hij(" ",ctx_r0.attributeOverview.value," "),core.xp6(1),core.Q6J("ngIf",null==ctx_r0.attributeOverview?null:ctx_r0.attributeOverview.productCode),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayQuantity()),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayPrice()),core.xp6(3),core.Oqu(ctx_r0.attributeOverview.attribute),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorOverviewFilterBarComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"button",2),core.NdJ("click",__name(function(){const filter_r3=core.CHM(_r6).$implicit,ctx_r5=core.oxw();return core.KtG(ctx_r5.onAttrFilterRemove(ctx_r5.config,filter_r3))},"ConfiguratorOverviewFilterBarComponent_ng_container_0_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"span",3),core._UZ(6,"cx-icon",4),core.qZA()(),core.BQk()}if(2&rf){const filter_r3=ctx.$implicit,ctx_r0=core.oxw();core.xp6(1),core.s9C("title",core.lcZ(2,3,filter_r3===ctx_r0.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.removeByPrice":"configurator.overviewFilter.removeMySelections")),core.xp6(2),core.hij(" ",core.lcZ(4,5,filter_r3===ctx_r0.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.byPrice":"configurator.overviewFilter.mySelections")," "),core.xp6(3),core.Q6J("type",ctx_r0.iconTypes.CLOSE)}}__name(ConfiguratorGroupMenuComponent_ng_template_2_Template,"ConfiguratorGroupMenuComponent_ng_template_2_Template"),__name(ConfiguratorGroupTitleComponent_ng_container_0_ng_container_2_Template,"ConfiguratorGroupTitleComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorGroupTitleComponent_ng_container_0_Template,"ConfiguratorGroupTitleComponent_ng_container_0_Template"),__name(ConfiguratorGroupTitleComponent_ng_template_2_Template,"ConfiguratorGroupTitleComponent_ng_template_2_Template"),__name(ConfiguratorOverviewAttributeComponent_ng_container_7_Template,"ConfiguratorOverviewAttributeComponent_ng_container_7_Template"),__name(ConfiguratorOverviewAttributeComponent_ng_template_9_Template,"ConfiguratorOverviewAttributeComponent_ng_template_9_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template"),__name(ConfiguratorOverviewFilterBarComponent_ng_container_0_Template,"ConfiguratorOverviewFilterBarComponent_ng_container_0_Template");const _c18=__name(function(a0){return{group:a0}},"_c18");function ConfiguratorOverviewFilterBarComponent_ng_container_1_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.ynx(0),core.TgZ(1,"button",2),core.NdJ("click",__name(function(){const groupId_r7=core.CHM(_r10).$implicit,ctx_r9=core.oxw();return core.KtG(ctx_r9.onGroupFilterRemove(ctx_r9.config,groupId_r7))},"ConfiguratorOverviewFilterBarComponent_ng_container_1_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core._uU(3),core.TgZ(4,"span",3),core._UZ(5,"cx-icon",4),core.qZA()(),core.BQk()}if(2&rf){const groupId_r7=ctx.$implicit,ctx_r1=core.oxw();core.xp6(1),core.s9C("title",core.xi3(2,3,"configurator.overviewFilter.removeByGroup",core.VKq(6,_c18,ctx_r1.getGroupFilterDescription(ctx_r1.config.overview,groupId_r7)))),core.xp6(2),core.hij(" ",ctx_r1.getGroupFilterDescription(ctx_r1.config.overview,groupId_r7)," "),core.xp6(2),core.Q6J("type",ctx_r1.iconTypes.CLOSE)}}function ConfiguratorOverviewFilterBarComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.ynx(0),core.TgZ(1,"button",2),core.NdJ("click",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.onRemoveAll(ctx_r11.config))},"ConfiguratorOverviewFilterBarComponent_ng_container_2_Template_button_click_1_listener")),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"span",3),core._UZ(6,"cx-icon",4),core.qZA()(),core.BQk()}if(2&rf){const ctx_r2=core.oxw();core.xp6(1),core.s9C("title",core.lcZ(2,3,"configurator.overviewFilter.removeAllFilters")),core.xp6(2),core.hij(" ",core.lcZ(4,5,"configurator.overviewFilter.removeAll")," "),core.xp6(3),core.Q6J("type",ctx_r2.iconTypes.CLOSE)}}function ConfiguratorOverviewFilterComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-filter-bar",8),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("config",ctx_r0.config)}}__name(ConfiguratorOverviewFilterBarComponent_ng_container_1_Template,"ConfiguratorOverviewFilterBarComponent_ng_container_1_Template"),__name(ConfiguratorOverviewFilterBarComponent_ng_container_2_Template,"ConfiguratorOverviewFilterBarComponent_ng_container_2_Template"),__name(ConfiguratorOverviewFilterComponent_ng_container_0_Template,"ConfiguratorOverviewFilterComponent_ng_container_0_Template");const _c19=__name(function(a0){return{groupName:a0}},"_c19");function ConfiguratorOverviewFilterComponent_ng_container_18_ng_container_4_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"div",2)(2,"div",3)(3,"input",10),core.NdJ("change",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw(2);return core.KtG(ctx_r5.onFilter(ctx_r5.config))},"ConfiguratorOverviewFilterComponent_ng_container_18_ng_container_4_Template_input_change_3_listener")),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"label",11),core._uU(6),core.qZA()()(),core.BQk()}if(2&rf){const group_r3=ctx.$implicit,i_r4=ctx.index,ctx_r2=core.oxw(2);core.xp6(3),core.s9C("id","cx-configurator-overview-filter-option-group-"+group_r3.id),core.s9C("name","config-overview-group-filter-"+group_r3.id),core.Q6J("formControl",ctx_r2.groupFilters[i_r4]),core.uIk("aria-label",core.xi3(4,6,"configurator.a11y.filterOverviewByGroup",core.VKq(9,_c19,group_r3.groupDescription))),core.xp6(2),core.s9C("for","cx-configurator-overview-filter-option-group-"+group_r3.id),core.xp6(1),core.Oqu(group_r3.groupDescription)}}function ConfiguratorOverviewFilterComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.YNc(4,ConfiguratorOverviewFilterComponent_ng_container_18_ng_container_4_Template,7,11,"ng-container",9),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(2),core.hij(" ",core.lcZ(3,2,"configurator.overviewFilter.byGroup")," "),core.xp6(2),core.Q6J("ngForOf",ctx_r1.config.overview.possibleGroups)}}__name(ConfiguratorOverviewFilterComponent_ng_container_18_ng_container_4_Template,"ConfiguratorOverviewFilterComponent_ng_container_18_ng_container_4_Template"),__name(ConfiguratorOverviewFilterComponent_ng_container_18_Template,"ConfiguratorOverviewFilterComponent_ng_container_18_Template");const _c20=["filterButton"],_c21=__name(function(a0){return{numAppliedFilters:a0}},"_c21");function ConfiguratorOverviewFilterButtonComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"button",2,3),core.NdJ("click",__name(function(){const configurationWithOv_r3=core.CHM(_r6).ngIf,ctx_r5=core.oxw();return core.KtG(ctx_r5.openFilterModal(configurationWithOv_r3))},"ConfiguratorOverviewFilterButtonComponent_ng_container_0_Template_button_click_1_listener")),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core._UZ(6,"cx-configurator-overview-filter-bar",4),core.BQk()}if(2&rf){const configurationWithOv_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(1),core.s9C("title",core.xi3(3,3,ctx_r0.getNumFilters(configurationWithOv_r3.overview)>0?"configurator.a11y.filterOverviewWithCount":"configurator.a11y.filterOverview",core.VKq(9,_c21,ctx_r0.getNumFilters(configurationWithOv_r3.overview)))),core.xp6(3),core.hij(" ",core.xi3(5,6,ctx_r0.getNumFilters(configurationWithOv_r3.overview)>0?"configurator.button.filterOverviewWithCount":"configurator.button.filterOverview",core.VKq(11,_c21,ctx_r0.getNumFilters(configurationWithOv_r3.overview)))," "),core.xp6(2),core.Q6J("config",configurationWithOv_r3)}}function ConfiguratorOverviewFilterButtonComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",5)}function ConfiguratorOverviewFilterDialogComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",8),core._UZ(2,"cx-configurator-overview-filter",9),core.qZA(),core.BQk()),2&rf){const config_r1=ctx.ngIf;core.xp6(2),core.Q6J("config",config_r1)("showFilterBar",!1)}}function ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}__name(ConfiguratorOverviewFilterButtonComponent_ng_container_0_Template,"ConfiguratorOverviewFilterButtonComponent_ng_container_0_Template"),__name(ConfiguratorOverviewFilterButtonComponent_ng_template_2_Template,"ConfiguratorOverviewFilterButtonComponent_ng_template_2_Template"),__name(ConfiguratorOverviewFilterDialogComponent_ng_container_10_Template,"ConfiguratorOverviewFilterDialogComponent_ng_container_10_Template"),__name(ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template");const _c22=__name(function(a0){return{overviewGroups:a0,level:1,idPrefix:""}},"_c22");function ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,1,0,"ng-container",4),core.BQk()),2&rf){const configuration_r7=core.oxw().ngIf;core.oxw();const _r3=core.MAs(5);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core.VKq(2,_c22,null==configuration_r7.overview?null:configuration_r7.overview.groups))}}function ConfiguratorOverviewFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template,2,4,"ng-container",0),core.BQk()),2&rf){const configuration_r7=ctx.ngIf,ctx_r0=core.oxw(),_r1=core.MAs(3);core.xp6(1),core.Q6J("ngIf",ctx_r0.hasAttributes(configuration_r7))("ngIfElse",_r1)}}function ConfiguratorOverviewFormComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",5)(1,"h2"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"p"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.overviewForm.noAttributeHeader")),core.xp6(3),core.Oqu(core.lcZ(6,4,"configurator.overviewForm.noAttributeText")))}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",16),core.BQk()),2&rf){const attributeOverview_r18=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r18)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-cpq-overview-attribute",16),core.BQk()),2&rf){const attributeOverview_r18=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r18)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",16),core.BQk()),2&rf){const attributeOverview_r18=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r18)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core.ynx(1,13),core.YNc(2,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_2_Template,2,1,"ng-container",14),core.YNc(3,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_3_Template,2,1,"ng-container",14),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_4_Template,2,1,"ng-container",15),core.BQk(),core.qZA()),2&rf){const attributeOverview_r18=ctx.$implicit,i_r19=ctx.index,group_r15=core.oxw().$implicit,ctx_r16=core.oxw(2);core.Q6J("ngClass",ctx_r16.getStyleClasses(group_r15.attributes,i_r19)),core.xp6(1),core.Q6J("ngSwitch",null==attributeOverview_r18?null:attributeOverview_r18.type),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r16.attributeOverviewType.GENERAL),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r16.attributeOverviewType.BUNDLE)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}__name(ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorOverviewFormComponent_ng_container_0_Template,"ConfiguratorOverviewFormComponent_ng_container_0_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_2_Template,"ConfiguratorOverviewFormComponent_ng_template_2_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_2_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_2_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_3_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_3_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_ng_container_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_ng_container_1_Template");const _c23=__name(function(a0,a1,a2){return{overviewGroups:a0,level:a1,idPrefix:a2}},"_c23");function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_ng_container_1_Template,1,0,"ng-container",4),core.BQk()),2&rf){const group_r15=core.oxw().$implicit,ctx_r29=core.oxw(),level_r12=ctx_r29.level,idPrefix_r13=ctx_r29.idPrefix,ctx_r17=core.oxw(),_r3=core.MAs(5);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core.kEZ(2,_c23,group_r15.subGroups,level_r12+1,ctx_r17.getPrefixId(idPrefix_r13,group_r15.id)))}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",8)(2,"span",6),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"h2",9)(6,"span"),core._uU(7),core.qZA()(),core.YNc(8,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_div_8_Template,5,4,"div",10),core.YNc(9,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_Template,2,6,"ng-container",11),core.qZA(),core.BQk()),2&rf){const group_r15=ctx.$implicit,ctx_r30=core.oxw(),idPrefix_r13=ctx_r30.idPrefix,level_r12=ctx_r30.level,ctx_r14=core.oxw();core.xp6(1),core.s9C("id",ctx_r14.getGroupId(idPrefix_r13,group_r15.id)),core.Q6J("ngClass",ctx_r14.getGroupLevelStyleClasses(level_r12,group_r15.subGroups)),core.xp6(2),core.hij(" ",core.xi3(4,6,"configurator.a11y.group",core.VKq(9,_c18,group_r15.groupDescription))," "),core.xp6(4),core.Oqu(group_r15.groupDescription),core.xp6(1),core.Q6J("ngForOf",group_r15.attributes),core.xp6(1),core.Q6J("ngIf",(null==group_r15.subGroups?null:group_r15.subGroups.length)>0)}}function ConfiguratorOverviewFormComponent_ng_template_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",6),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.YNc(3,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template,10,11,"ng-container",7)),2&rf){const overviewGroups_r11=ctx.overviewGroups;core.xp6(1),core.hij(" ",core.lcZ(2,2,"configurator.a11y.listOfAttributesAndValues")," "),core.xp6(2),core.Q6J("ngForOf",overviewGroups_r11)}}function ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",20),core._UZ(2,"div",21),core.qZA(),core.TgZ(3,"div",22),core._UZ(4,"div",23),core.qZA(),core._UZ(5,"div",24),core.BQk())}__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_9_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template");const _c24=__name(function(){return[0,1,2,3,4,5]},"_c24");function ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",17),core._UZ(2,"div",18),core.TgZ(3,"div",19),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template,6,0,"ng-container",7),core.qZA()(),core.BQk()),2&rf&&(core.xp6(4),core.Q6J("ngForOf",core.DdM(1,_c24)))}function ConfiguratorOverviewFormComponent_ng_template_6_Template(rf,ctx){1&rf&&core.YNc(0,ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template,5,2,"ng-container",7),2&rf&&core.Q6J("ngForOf",core.DdM(1,_c14))}function ConfiguratorOverviewMenuComponent_ng_container_0_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function ConfiguratorOverviewMenuComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewMenuComponent_ng_container_0_ng_container_1_Template,1,0,"ng-container",2),core.BQk()),2&rf){const ctx_r0=core.oxw(),_r1=core.MAs(2);core.xp6(1),core.Q6J("ngTemplateOutlet",_r1)("ngTemplateOutletContext",core.VKq(2,_c22,ctx_r0.config.overview.groups))}}function ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_ng_container_1_Template,1,0,"ng-container",2),core.BQk()),2&rf){const group_r8=core.oxw().$implicit,ctx_r12=core.oxw(),level_r5=ctx_r12.level,idPrefix_r6=ctx_r12.idPrefix,ctx_r9=core.oxw(),_r1=core.MAs(2);core.xp6(1),core.Q6J("ngTemplateOutlet",_r1)("ngTemplateOutletContext",core.kEZ(2,_c23,group_r8.subGroups,level_r5+1,ctx_r9.getPrefixId(idPrefix_r6,group_r8.id)))}}function ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r15=core.EpF();core.ynx(0),core.TgZ(1,"li",4)(2,"button",5),core.NdJ("click",__name(function(){const group_r8=core.CHM(_r15).$implicit,idPrefix_r6=core.oxw().idPrefix,ctx_r13=core.oxw();return core.KtG(ctx_r13.navigateToGroup(idPrefix_r6,group_r8.id))},"ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_Template_button_click_2_listener")),core.ALo(3,"cxTranslate"),core.TgZ(4,"span",6),core._uU(5),core.qZA(),core._UZ(6,"cx-icon",7),core.qZA(),core.YNc(7,ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_Template,2,6,"ng-container",0),core.qZA(),core.BQk()}if(2&rf){const group_r8=ctx.$implicit,ctx_r16=core.oxw(),level_r5=ctx_r16.level,idPrefix_r6=ctx_r16.idPrefix,ctx_r7=core.oxw();core.xp6(1),core.Q6J("ngClass",ctx_r7.getGroupLevelStyleClasses(level_r5)),core.xp6(1),core.s9C("id",ctx_r7.getMenuItemId(idPrefix_r6,group_r8.id)),core.uIk("aria-label",core.xi3(3,6,"configurator.a11y.groupName",core.VKq(9,_c18,group_r8.groupDescription))),core.xp6(3),core.hij(" ",group_r8.groupDescription,""),core.xp6(1),core.Q6J("type",ctx_r7.iconTypes.ARROW_LEFT),core.xp6(1),core.Q6J("ngIf",(null==group_r8.subGroups?null:group_r8.subGroups.length)>0)}}function ConfiguratorOverviewMenuComponent_ng_template_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ul"),core.YNc(1,ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_Template,8,11,"ng-container",3),core.qZA()),2&rf){const overviewGroups_r4=ctx.overviewGroups;core.xp6(1),core.Q6J("ngForOf",overviewGroups_r4)}}__name(ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template,"ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_6_Template,"ConfiguratorOverviewFormComponent_ng_template_6_Template"),__name(ConfiguratorOverviewMenuComponent_ng_container_0_ng_container_1_Template,"ConfiguratorOverviewMenuComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorOverviewMenuComponent_ng_container_0_Template,"ConfiguratorOverviewMenuComponent_ng_container_0_Template"),__name(ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_ng_container_1_Template,"ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_ng_container_1_Template"),__name(ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_Template,"ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_ng_container_7_Template"),__name(ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_Template,"ConfiguratorOverviewMenuComponent_ng_template_1_ng_container_1_Template"),__name(ConfiguratorOverviewMenuComponent_ng_template_1_Template,"ConfiguratorOverviewMenuComponent_ng_template_1_Template");const _c25=__name(function(a0,a1){return{entityKey:a0,ownerType:a1}},"_c25"),_c26=__name(function(a0,a1){return{cxRoute:a0,params:a1}},"_c26"),_c27=__name(function(a1){return{resolveIssues:!0,skipConflicts:a1}},"_c27");function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3),core._UZ(1,"cx-icon",4),core.TgZ(2,"div",5),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"button",6),core.ALo(6,"cxUrl"),core.ALo(7,"async"),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA()()()),2&rf){const numberOfIssues_r5=ctx.ngIf,routerData_r1=core.oxw(2).ngIf,ctx_r3=core.oxw();core.xp6(1),core.Q6J("type",ctx_r3.iconTypes.ERROR),core.xp6(2),core.hij(" ",core.xi3(4,5,"configurator.notificationBanner.numberOfIssues",core.VKq(14,_c9,numberOfIssues_r5))," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(6,8,core.WLB(19,_c26,"configure"+routerData_r1.owner.configuratorType,core.WLB(16,_c25,routerData_r1.owner.id,routerData_r1.owner.type))))("queryParams",core.VKq(22,_c27,core.lcZ(7,10,ctx_r3.skipConflictsOnIssueNavigation$))),core.xp6(3),core.hij(" ",core.lcZ(9,12,"configurator.header.resolveIssues")," ")}}__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template");const _c28=__name(function(){return{resolveIssues:!0}},"_c28");function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",7),core._UZ(1,"cx-icon",4),core.TgZ(2,"div",8),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"button",9),core.ALo(6,"cxUrl"),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA()()()),2&rf){const numberOfConflicts_r7=ctx.ngIf,routerData_r1=core.oxw(2).ngIf,ctx_r4=core.oxw();core.xp6(1),core.Q6J("type",ctx_r4.iconTypes.WARNING),core.xp6(2),core.hij(" ",core.xi3(4,5,"configurator.notificationBanner.numberOfConflicts",core.VKq(12,_c9,numberOfConflicts_r7))," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(6,8,core.WLB(17,_c26,"configure"+routerData_r1.owner.configuratorType,core.WLB(14,_c25,routerData_r1.owner.id,routerData_r1.owner.type))))("queryParams",core.DdM(20,_c28)),core.xp6(2),core.hij(" ",core.lcZ(8,10,"configurator.header.resolveConflicts")," ")}}function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template,10,24,"div",1),core.ALo(2,"async"),core.YNc(3,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template,9,21,"div",2),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r2.numberOfIssues$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r2.numberOfConflicts$))}}function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template,5,6,"ng-container",0),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.configurationOverview$))}}function ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_filter_8_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-configurator-overview-filter",5),2&rf){const configurationWithOv_r3=core.oxw().ngIf;core.Q6J("config",configurationWithOv_r3)}}function ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_menu_9_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-configurator-overview-menu",5),2&rf){const configurationWithOv_r3=core.oxw().ngIf;core.Q6J("config",configurationWithOv_r3)}}function ConfiguratorOverviewSidebarComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"div",2)(2,"button",3),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.onMenu())},"ConfiguratorOverviewSidebarComponent_ng_container_0_Template_button_click_2_listener")),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"button",3),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r10=core.oxw();return core.KtG(ctx_r10.onFilter())},"ConfiguratorOverviewSidebarComponent_ng_container_0_Template_button_click_5_listener")),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA()(),core.YNc(8,ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_filter_8_Template,1,1,"cx-configurator-overview-filter",4),core.YNc(9,ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_menu_9_Template,1,1,"cx-configurator-overview-menu",4),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(2),core.ekj("active",!ctx_r0.showFilter),core.uIk("aria-selected",!ctx_r0.showFilter),core.xp6(1),core.hij(" ",core.lcZ(4,10,"configurator.overviewSidebar.menu")," "),core.xp6(2),core.ekj("active",ctx_r0.showFilter),core.uIk("aria-selected",ctx_r0.showFilter),core.xp6(1),core.hij(" ",core.lcZ(7,12,"configurator.overviewSidebar.filter")," "),core.xp6(2),core.Q6J("ngIf",ctx_r0.showFilter),core.xp6(1),core.Q6J("ngIf",!ctx_r0.showFilter)}}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_div_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"div",11),core.qZA())}__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template"),__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_filter_8_Template,"ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_filter_8_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_menu_9_Template,"ConfiguratorOverviewSidebarComponent_ng_container_0_cx_configurator_overview_menu_9_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_container_0_Template,"ConfiguratorOverviewSidebarComponent_ng_container_0_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_div_2_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_div_2_Template");const _c29=__name(function(){return[0,1,2,3]},"_c29");function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",13),core.YNc(2,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_div_2_Template,2,0,"div",14),core.qZA(),core.BQk()),2&rf&&(core.xp6(2),core.Q6J("ngForOf",core.DdM(1,_c29)))}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"div",11),core.qZA())}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"div",11),core.qZA())}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",13),core.YNc(2,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_2_Template,2,0,"div",14),core.TgZ(3,"div",15),core.YNc(4,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_4_Template,2,0,"div",14),core.qZA()(),core.BQk()),2&rf&&(core.xp6(2),core.Q6J("ngForOf",core.DdM(2,_c14)),core.xp6(2),core.Q6J("ngForOf",core.DdM(3,_c14)))}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_div_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"div",11),core.qZA())}__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_2_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_2_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_4_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_div_4_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_div_2_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_div_2_Template");const _c30=__name(function(){return[0,1]},"_c30");function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",9),core.YNc(2,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_div_2_Template,2,0,"div",14),core.qZA(),core.BQk()),2&rf&&(core.xp6(2),core.Q6J("ngForOf",core.DdM(1,_c30)))}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",9)(2,"div",10),core._UZ(3,"div",11),core.qZA(),core.YNc(4,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_4_Template,3,2,"ng-container",12),core.YNc(5,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_5_Template,5,4,"ng-container",12),core.YNc(6,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_Template,3,2,"ng-container",12),core.qZA(),core.BQk()),2&rf){const i_r15=ctx.index;core.xp6(4),core.Q6J("ngIf",0===i_r15),core.xp6(1),core.Q6J("ngIf",1===i_r15),core.xp6(1),core.Q6J("ngIf",2===i_r15)}}function ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_Template(rf,ctx){1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_Template,7,3,"ng-container",8),core.BQk()),2&rf&&(core.xp6(1),core.Q6J("ngForOf",core.DdM(1,_c14)))}function ConfiguratorOverviewSidebarComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",6),core._UZ(1,"div",7),core.YNc(2,ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_Template,2,2,"ng-container",8),core.qZA()),2&rf&&(core.xp6(2),core.Q6J("ngForOf",core.DdM(1,_c30)))}function ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.ynx(0),core.TgZ(1,"button",1),core.NdJ("click",__name(function(){core.CHM(_r5);const configuration_r1=core.oxw().ngIf,ctx_r3=core.oxw();return core.KtG(ctx_r3.onPrevious(configuration_r1))},"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template_button_click_1_listener")),core.ALo(2,"async"),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",2),core.NdJ("click",__name(function(){core.CHM(_r5);const configuration_r1=core.oxw().ngIf,ctx_r6=core.oxw();return core.KtG(ctx_r6.onNext(configuration_r1))},"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template_button_click_6_listener")),core.ALo(7,"async"),core.ALo(8,"cxTranslate"),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const configuration_r1=core.oxw().ngIf,ctx_r2=core.oxw();core.xp6(1),core.Q6J("disabled",core.lcZ(2,6,ctx_r2.isFirstGroup(configuration_r1.owner))),core.uIk("aria-label",core.lcZ(3,8,"configurator.a11y.previous")),core.xp6(3),core.hij(" ",core.lcZ(5,10,"configurator.button.previous")," "),core.xp6(2),core.Q6J("disabled",core.lcZ(7,12,ctx_r2.isLastGroup(configuration_r1.owner))),core.uIk("aria-label",core.lcZ(8,14,"configurator.a11y.next")),core.xp6(3),core.hij(" ",core.lcZ(10,16,"configurator.button.next")," ")}}function ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template,11,18,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",configuration_r1.groups.length>1)}}function ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",7)(2,"div",4),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"div",6),core._uU(6),core.qZA()(),core.TgZ(7,"div",8)(8,"div",4),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core.TgZ(11,"div",6),core._uU(12),core.qZA()(),core.BQk()),2&rf){const configuration_r1=core.oxw(2).ngIf;core.xp6(3),core.hij(" ",core.lcZ(4,4,"configurator.priceSummary.basePrice"),": "),core.xp6(3),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.basePrice?null:configuration_r1.priceSummary.basePrice.formattedValue," "),core.xp6(3),core.hij(" ",core.lcZ(10,6,"configurator.priceSummary.selectedOptions"),": "),core.xp6(3),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.selectedOptions?null:configuration_r1.priceSummary.selectedOptions.formattedValue," ")}}function ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_6_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.priceSummary.totalPrice"),": "))}function ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_7_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.priceSummary.totalPricePerItem"),": "))}function ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"div",2),core.YNc(3,ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_3_Template,13,8,"ng-container",0),core.TgZ(4,"div",3)(5,"div",4),core.YNc(6,ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_6_Template,3,3,"ng-container",5),core.YNc(7,ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_7_Template,3,3,"ng-container",5),core.qZA(),core.TgZ(8,"div",6),core._uU(9),core.qZA()()()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;core.xp6(3),core.Q6J("ngIf",!configuration_r1.hideBasePriceAndSelectedOptions),core.xp6(3),core.Q6J("cxFeatureLevel","!6.1"),core.xp6(1),core.Q6J("cxFeatureLevel","6.1"),core.xp6(2),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.currentTotal?null:configuration_r1.priceSummary.currentTotal.formattedValue," ")}}function ConfiguratorPriceSummaryComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template,10,4,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",configuration_r1.pricingEnabled)}}__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_ng_container_6_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_ng_container_1_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_ng_container_2_Template"),__name(ConfiguratorOverviewSidebarComponent_ng_template_2_Template,"ConfiguratorOverviewSidebarComponent_ng_template_2_Template"),__name(ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template,"ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_3_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_3_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_6_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_6_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_7_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_ng_container_7_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_Template");const _c31=__name(function(a0){return{product:a0}},"_c31");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",13),core.ALo(2,"cxTranslate"),core.TgZ(3,"span",14),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA()(),core._UZ(6,"cx-icon",15),core.BQk()),2&rf){const product_r3=core.oxw().ngIf,ctx_r4=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.showMoreProductInfo",core.VKq(8,_c31,product_r3.name))),core.xp6(3),core.Oqu(core.lcZ(5,6,"configurator.header.showMore")),core.xp6(2),core.Q6J("type",ctx_r4.iconTypes.CARET_DOWN)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",13),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core._UZ(5,"cx-icon",15),core.BQk()),2&rf){const product_r3=core.oxw().ngIf,ctx_r5=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.showLessProductInfo",core.VKq(8,_c31,product_r3.name))),core.xp6(2),core.hij(" ",core.lcZ(4,6,"configurator.header.showLess")," "),core.xp6(2),core.Q6J("type",ctx_r5.iconTypes.CARET_UP)}}function ConfiguratorProductTitleComponent_ng_container_0_span_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productName")),core.xp6(2),core.hij(" ",product_r3.name," ")}}function ConfiguratorProductTitleComponent_ng_container_0_span_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productCode")),core.xp6(2),core.hij(" ",product_r3.code," ")}}function ConfiguratorProductTitleComponent_ng_container_0_span_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productDescription")),core.xp6(2),core.hij(" ",product_r3.description," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_13_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_13_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_15_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_15_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_17_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_17_Template");const _c32=__name(function(a0){return{name:a0}},"_c32");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",17)(2,"span",18),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",19),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r16=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyName",core.VKq(8,_c32,configuration_r16.kbKey.kbName))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyName")," "),core.xp6(3),core.hij(" ",configuration_r16.kbKey.kbName," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_2_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_2_Template");const _c33=__name(function(a0){return{logsys:a0}},"_c33");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",17)(2,"span",18),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",19),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r16=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyLogsys",core.VKq(8,_c33,configuration_r16.kbKey.kbLogsys))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyLogsys")," "),core.xp6(3),core.hij(" ",configuration_r16.kbKey.kbLogsys," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_3_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_3_Template");const _c34=__name(function(a0){return{version:a0}},"_c34");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",17)(2,"span",18),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",19),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r16=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyVersion",core.VKq(8,_c34,configuration_r16.kbKey.kbVersion))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyVersion")," "),core.xp6(3),core.hij(" ",configuration_r16.kbKey.kbVersion," ")}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",17)(2,"span",18),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",19),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r16=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyBuildNr",core.VKq(8,_c10,configuration_r16.kbKey.kbBuildNumber))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyBuildNr")," "),core.xp6(3),core.hij(" ",configuration_r16.kbKey.kbBuildNumber," ")}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",16),core.YNc(2,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_2_Template,8,10,"ng-container",5),core.YNc(3,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_3_Template,8,10,"ng-container",5),core.YNc(4,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_4_Template,8,10,"ng-container",5),core.YNc(5,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_5_Template,8,10,"ng-container",5),core.qZA(),core.BQk()),2&rf){const configuration_r16=core.oxw().ngIf;core.xp6(2),core.Q6J("ngIf",configuration_r16.kbKey.kbName),core.xp6(1),core.Q6J("ngIf",configuration_r16.kbKey.kbLogsys),core.xp6(1),core.Q6J("ngIf",configuration_r16.kbKey.kbVersion),core.xp6(1),core.Q6J("ngIf",configuration_r16.kbKey.kbBuildNumber)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template,6,4,"ng-container",5),core.BQk()),2&rf){const configuration_r16=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",configuration_r16.kbKey)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r9.configuration$))}}function ConfiguratorProductTitleComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r28=core.EpF();core.ynx(0),core.TgZ(1,"div",2)(2,"div",3)(3,"span"),core._uU(4),core.qZA()(),core.TgZ(5,"button",4),core.NdJ("click",__name(function(){core.CHM(_r28);const ctx_r27=core.oxw();return core.KtG(ctx_r27.triggerDetails())},"ConfiguratorProductTitleComponent_ng_container_0_Template_button_click_5_listener")),core.YNc(6,ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template,7,10,"ng-container",5),core.YNc(7,ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template,6,10,"ng-container",5),core.qZA(),core.TgZ(8,"div",6)(9,"div",7),core._UZ(10,"cx-media",8),core.qZA(),core.TgZ(11,"div",9)(12,"div",10),core.YNc(13,ConfiguratorProductTitleComponent_ng_container_0_span_13_Template,3,4,"span",5),core.qZA(),core.TgZ(14,"div",11),core.YNc(15,ConfiguratorProductTitleComponent_ng_container_0_span_15_Template,3,4,"span",5),core.qZA(),core.TgZ(16,"div",12),core.YNc(17,ConfiguratorProductTitleComponent_ng_container_0_span_17_Template,3,4,"span",5),core.qZA(),core.YNc(18,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template,3,3,"ng-container",5),core.ALo(19,"async"),core.qZA()()(),core.BQk()}if(2&rf){const product_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(4),core.hij(" ",product_r3.name," "),core.xp6(1),core.uIk("aria-expanded",ctx_r0.showMore),core.xp6(1),core.Q6J("ngIf",!ctx_r0.showMore),core.xp6(1),core.Q6J("ngIf",ctx_r0.showMore),core.xp6(1),core.ekj("open",ctx_r0.showMore),core.xp6(2),core.Q6J("container",null==product_r3||null==product_r3.images?null:product_r3.images.PRIMARY),core.xp6(1),core.uIk("aria-hidden",!ctx_r0.showMore),core.xp6(2),core.Q6J("ngIf",product_r3.name),core.xp6(2),core.Q6J("ngIf",product_r3.code),core.xp6(2),core.Q6J("ngIf",product_r3.description),core.xp6(1),core.Q6J("ngIf",core.lcZ(19,12,ctx_r0.expMode))}}function ConfiguratorProductTitleComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",20)}function ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.ynx(0),core.TgZ(1,"div",2),core.NdJ("esc",__name(function(){const product_r3=core.CHM(_r5).ngIf,ctx_r4=core.oxw(2);return core.KtG(ctx_r4.backToPDP(product_r3))},"ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template_div_esc_1_listener")),core.TgZ(2,"div",3)(3,"div",4),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",5),core.NdJ("click",__name(function(){const product_r3=core.CHM(_r5).ngIf,ctx_r6=core.oxw(2);return core.KtG(ctx_r6.backToPDP(product_r3))},"ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template_button_click_6_listener")),core.ALo(7,"cxTranslate"),core.TgZ(8,"span",6),core._UZ(9,"cx-icon",7),core.qZA()()(),core.TgZ(10,"div",8)(11,"div",9),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA(),core.TgZ(14,"button",10),core.NdJ("click",__name(function(){const product_r3=core.CHM(_r5).ngIf,ctx_r7=core.oxw(2);return core.KtG(ctx_r7.resume(product_r3))},"ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template_button_click_14_listener")),core._uU(15),core.ALo(16,"cxTranslate"),core.qZA(),core.TgZ(17,"button",11),core.NdJ("click",__name(function(){core.CHM(_r5);const dialogData_r1=core.oxw().ngIf,ctx_r8=core.oxw();return core.KtG(ctx_r8.restart(dialogData_r1.owner))},"ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template_button_click_17_listener")),core._uU(18),core.ALo(19,"cxTranslate"),core.qZA()()(),core.BQk()}if(2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.Q6J("cxFocus",ctx_r2.focusConfig),core.xp6(3),core.hij(" ",core.lcZ(5,7,"configurator.restartDialog.title")," "),core.xp6(2),core.s9C("title",core.lcZ(7,9,"configurator.a11y.closeRestartDialog")),core.xp6(3),core.Q6J("type",ctx_r2.iconTypes.CLOSE),core.xp6(3),core.hij(" ",core.lcZ(13,11,"configurator.restartDialog.description")," "),core.xp6(3),core.hij(" ",core.lcZ(16,13,"configurator.restartDialog.resumeButton")," "),core.xp6(3),core.hij(" ",core.lcZ(19,15,"configurator.restartDialog.restartButton")," ")}}function ConfiguratorRestartDialogComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template,20,17,"ng-container",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.product$))}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_4_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_4_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_5_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_5_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_Template,"ConfiguratorProductTitleComponent_ng_container_0_Template"),__name(ConfiguratorProductTitleComponent_ng_template_2_Template,"ConfiguratorProductTitleComponent_ng_template_2_Template"),__name(ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template,"ConfiguratorRestartDialogComponent_ng_container_1_ng_container_1_Template"),__name(ConfiguratorRestartDialogComponent_ng_container_1_Template,"ConfiguratorRestartDialogComponent_ng_container_1_Template");const _c35=["configTab"],_c36=["overviewTab"];function ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"div",3)(2,"a",4,5),core.NdJ("keydown",__name(function($event){core.CHM(_r9);const ctx_r8=core.oxw(3);return core.KtG(ctx_r8.switchTabOnArrowPress($event,"#configTab"))},"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template_a_keydown_2_listener")),core.ALo(4,"async"),core.ALo(5,"async"),core.ALo(6,"cxUrl"),core.ALo(7,"async"),core.ALo(8,"cxTranslate"),core.ALo(9,"cxTranslate"),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA(),core.TgZ(12,"a",4,6),core.NdJ("keydown",__name(function($event){core.CHM(_r9);const ctx_r10=core.oxw(3);return core.KtG(ctx_r10.switchTabOnArrowPress($event,"#overviewTab"))},"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template_a_keydown_12_listener")),core.ALo(14,"async"),core.ALo(15,"async"),core.ALo(16,"cxUrl"),core.ALo(17,"async"),core.ALo(18,"cxTranslate"),core.ALo(19,"cxTranslate"),core._uU(20),core.ALo(21,"cxTranslate"),core.qZA()(),core.BQk()}if(2&rf){const routerData_r1=core.oxw(2).ngIf,ctx_r5=core.oxw();core.xp6(2),core.ekj("active",!core.lcZ(4,14,ctx_r5.isOverviewPage$)),core.Q6J("tabindex",ctx_r5.getTabIndexConfigTab())("routerLink",core.lcZ(6,18,core.WLB(45,_c26,"configure"+routerData_r1.owner.configuratorType,core.WLB(42,_c25,routerData_r1.owner.id,routerData_r1.owner.type)))),core.uIk("aria-selected",!core.lcZ(5,16,ctx_r5.isOverviewPage$))("aria-label",core.lcZ(7,20,ctx_r5.isOverviewPage$)?core.lcZ(9,24,"configurator.a11y.configurationPageLink"):core.lcZ(8,22,"configurator.a11y.configurationPage")),core.xp6(8),core.Oqu(core.lcZ(11,26,"configurator.tabBar.configuration")),core.xp6(2),core.ekj("active",core.lcZ(14,28,ctx_r5.isOverviewPage$)),core.Q6J("tabindex",ctx_r5.getTabIndexOverviewTab())("routerLink",core.lcZ(16,32,core.WLB(51,_c26,"configureOverview"+routerData_r1.owner.configuratorType,core.WLB(48,_c25,routerData_r1.owner.id,routerData_r1.owner.type)))),core.uIk("aria-selected",core.lcZ(15,30,ctx_r5.isOverviewPage$))("aria-label",core.lcZ(17,34,ctx_r5.isOverviewPage$)?core.lcZ(18,36,"configurator.a11y.overviewPage"):core.lcZ(19,38,"configurator.a11y.overviewPageLink")),core.xp6(8),core.Oqu(core.lcZ(21,40,"configurator.tabBar.overview"))}}function ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template,22,54,"ng-container",0),core.BQk()),2&rf){const routerData_r1=core.oxw().ngIf;core.xp6(1),core.Q6J("ngIf",!routerData_r1.displayOnly)}}function ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template(rf,ctx){1&rf&&core._UZ(0,"div",7)}function ConfiguratorTabBarComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template,2,1,"ng-container",1),core.ALo(2,"async"),core.YNc(3,ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template,1,0,"ng-template",null,2,core.W1O),core.BQk()),2&rf){const _r3=core.MAs(4),ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r0.configuration$))("ngIfElse",_r3)}}function ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-product-carousel-item",4),2&rf){const item_r4=ctx.item;core.Q6J("item",item_r4)}}__name(ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_Template,"ConfiguratorTabBarComponent_ng_container_0_Template"),__name(ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template,"ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template");const _c37=__name(function(a0){return{title:a0}},"_c37");function ConfiguratorVariantCarouselComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core._UZ(2,"cx-carousel",2),core.ALo(3,"cxTranslate"),core.ALo(4,"async"),core.ALo(5,"async"),core.YNc(6,ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template,1,1,"ng-template",null,3,core.W1O),core.qZA(),core.BQk()),2&rf){const items_r1=ctx.ngIf,_r2=core.MAs(7),ctx_r0=core.oxw();core.xp6(2),core.Q6J("items",items_r1)("title",core.lcZ(5,9,ctx_r0.title$))("template",_r2),core.uIk("aria-label",core.xi3(3,4,"productCarousel.carouselLabel",core.VKq(11,_c37,core.lcZ(4,7,ctx_r0.title$))))}}var Configurator;__name(ConfiguratorVariantCarouselComponent_ng_container_0_Template,"ConfiguratorVariantCarouselComponent_ng_container_0_Template"),function(Configurator2){let GroupType;var GroupType2;let UiType;var UiType2;let ImageFormatType;var ImageFormatType2;let ImageType;var ImageType2;let DataType;var DataType2;let UpdateType;var UpdateType2;let AttributeOverviewType;var AttributeOverviewType2;let ValidationType;var ValidationType2;let OverviewFilter;var OverviewFilter2;(GroupType2=GroupType=Configurator2.GroupType||(Configurator2.GroupType={})).ATTRIBUTE_GROUP="AttributeGroup",GroupType2.SUB_ITEM_GROUP="SubItemGroup",GroupType2.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",GroupType2.CONFLICT_GROUP="ConflictGroup",(UiType2=UiType=Configurator2.UiType||(Configurator2.UiType={})).NOT_IMPLEMENTED="not_implemented",UiType2.RADIOBUTTON="radioGroup",UiType2.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",UiType2.CHECKBOX="checkBox",UiType2.CHECKBOXLIST="checkBoxList",UiType2.DROPDOWN="dropdown",UiType2.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",UiType2.LISTBOX="listbox",UiType2.LISTBOX_MULTI="listboxmulti",UiType2.READ_ONLY="readonly",UiType2.STRING="string",UiType2.NUMERIC="numeric",UiType2.AUTO_COMPLETE_CUSTOM="input_autocomplete",UiType2.MULTI_SELECTION_IMAGE="multi_selection_image",UiType2.SINGLE_SELECTION_IMAGE="single_selection_image",UiType2.CHECKBOXLIST_PRODUCT="checkBoxListProduct",UiType2.DROPDOWN_PRODUCT="dropdownProduct",UiType2.RADIOBUTTON_PRODUCT="radioGroupProduct",(ImageFormatType2=ImageFormatType=Configurator2.ImageFormatType||(Configurator2.ImageFormatType={})).VALUE_IMAGE="VALUE_IMAGE",ImageFormatType2.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE",(ImageType2=ImageType=Configurator2.ImageType||(Configurator2.ImageType={})).PRIMARY="PRIMARY",ImageType2.GALLERY="GALLERY",(DataType2=DataType=Configurator2.DataType||(Configurator2.DataType={})).INPUT_STRING="String",DataType2.INPUT_NUMBER="Number",DataType2.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",DataType2.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",DataType2.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",DataType2.NOT_IMPLEMENTED="not_implemented",(UpdateType2=UpdateType=Configurator2.UpdateType||(Configurator2.UpdateType={})).ATTRIBUTE="Attribute",UpdateType2.ATTRIBUTE_QUANTITY="AttributeQuantity",UpdateType2.VALUE_QUANTITY="ValueQuantity",(AttributeOverviewType2=AttributeOverviewType=Configurator2.AttributeOverviewType||(Configurator2.AttributeOverviewType={})).GENERAL="general",AttributeOverviewType2.BUNDLE="bundle",(ValidationType2=ValidationType=Configurator2.ValidationType||(Configurator2.ValidationType={})).NONE="NONE",ValidationType2.NUMERIC="NUMERIC",(OverviewFilter2=OverviewFilter=Configurator2.OverviewFilter||(Configurator2.OverviewFilter={})).VISIBLE="PRIMARY",OverviewFilter2.USER_INPUT="USER_INPUT",OverviewFilter2.PRICE_RELEVANT="PRICE_RELEVANT",Configurator2.ConflictIdPrefix="CONFLICT",Configurator2.ConflictHeaderId="CONFLICT_HEADER",Configurator2.CustomUiTypeIndicator="___",Configurator2.RetractValueCode="###RETRACT_VALUE_CODE###"}(Configurator||(Configurator={}));const CONFIGURATOR_DATA="[Configurator] Configuration Data",READ_CART_ENTRY_CONFIGURATION_SUCCESS="[Configurator] Read Cart Entry Configuration Success",READ_ORDER_ENTRY_CONFIGURATION_SUCCESS="[Configurator] Read Order Entry Configuration Success",ADD_TO_CART="[Configurator] Add to cart",UPDATE_CART_ENTRY="[Configurator] Update cart entry",ADD_NEXT_OWNER="[Configurator] Add next owner",SET_NEXT_OWNER_CART_ENTRY="[Configurator] Set next owner cart entry";class ReadCartEntryConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Cart Entry Configuration"}}__name(ReadCartEntryConfiguration,"ReadCartEntryConfiguration");class ReadCartEntryConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=READ_CART_ENTRY_CONFIGURATION_SUCCESS}}__name(ReadCartEntryConfigurationSuccess,"ReadCartEntryConfigurationSuccess");class ReadCartEntryConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Cart Entry Configuration Fail"}}__name(ReadCartEntryConfigurationFail,"ReadCartEntryConfigurationFail");class ReadOrderEntryConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Order Entry Configuration"}}__name(ReadOrderEntryConfiguration,"ReadOrderEntryConfiguration");class ReadOrderEntryConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=READ_ORDER_ENTRY_CONFIGURATION_SUCCESS}}__name(ReadOrderEntryConfigurationSuccess,"ReadOrderEntryConfigurationSuccess");class ReadOrderEntryConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Order Entry Configuration Fail"}}__name(ReadOrderEntryConfigurationFail,"ReadOrderEntryConfigurationFail");class AddToCart extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(spartacus_cart_base_core.N4,payload.cartId),this.payload=payload,this.type=ADD_TO_CART}}__name(AddToCart,"AddToCart");class UpdateCartEntry extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(spartacus_cart_base_core.N4,payload.cartId),this.payload=payload,this.type=UPDATE_CART_ENTRY}}__name(UpdateCartEntry,"UpdateCartEntry");class AddNextOwner{constructor(payload){this.payload=payload,this.type=ADD_NEXT_OWNER}}__name(AddNextOwner,"AddNextOwner");class RemoveCartBoundConfigurations{constructor(){this.type="[Configurator] Remove cart bound configurations"}}__name(RemoveCartBoundConfigurations,"RemoveCartBoundConfigurations");class SetNextOwnerCartEntry extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type=SET_NEXT_OWNER_CART_ENTRY}}__name(SetNextOwnerCartEntry,"SetNextOwnerCartEntry");const SEARCH_VARIANTS="[Configurator] Search Variants",SEARCH_VARIANTS_SUCCESS="[Configurator] Search Variants success";class SearchVariants extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=SEARCH_VARIANTS}}__name(SearchVariants,"SearchVariants");class SearchVariantsFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator]  Search Variants fail"}}__name(SearchVariantsFail,"SearchVariantsFail");class SearchVariantsSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type=SEARCH_VARIANTS_SUCCESS}}__name(SearchVariantsSuccess,"SearchVariantsSuccess");const CREATE_CONFIGURATION_SUCCESS="[Configurator] Create Configuration Sucess",READ_CONFIGURATION_SUCCESS="[Configurator] Read Configuration Sucess",UPDATE_CONFIGURATION_FINALIZE_SUCCESS="[Configurator] Update Configuration finalize success",CHANGE_GROUP="[Configurator] Change group",UPDATE_PRICE_SUMMARY="[Configurator] Update Configuration Summary Price",UPDATE_PRICE_SUMMARY_SUCCESS="[Configurator] Update Configuration Price Summary success",GET_CONFIGURATION_OVERVIEW_SUCCESS="[Configurator] Get Configuration Overview success",UPDATE_CONFIGURATION_OVERVIEW_SUCCESS="[Configurator] Update Configuration Overview success",SET_INTERACTION_STATE="[Configurator] Set interaction state",SET_CURRENT_GROUP="[Configurator] Set current group to State",SET_MENU_PARENT_GROUP="[Configurator] Set current parent group for menu to State",SET_GROUPS_VISITED="[Configurator] Set groups to visited",DISMISS_CONFLICT_DIALOG="[Configurator] Dismiss conflict dialog",CHECK_CONFLICT_DIALOG="[Configurator] Check conflict dialog";class CreateConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Create Configuration"}}__name(CreateConfiguration,"CreateConfiguration");class CreateConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Create Configuration Fail"}}__name(CreateConfigurationFail,"CreateConfigurationFail");class CreateConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=CREATE_CONFIGURATION_SUCCESS}}__name(CreateConfigurationSuccess,"CreateConfigurationSuccess");class ReadConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type="[Configurator] Read Configuration"}}__name(ReadConfiguration,"ReadConfiguration");class ReadConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Configuration Fail"}}__name(ReadConfigurationFail,"ReadConfigurationFail");class ReadConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=READ_CONFIGURATION_SUCCESS}}__name(ReadConfigurationSuccess,"ReadConfigurationSuccess");class UpdateConfiguration extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration",this.meta.loader={load:!0}}}__name(UpdateConfiguration,"UpdateConfiguration");class UpdateConfigurationFail extends spartacus_core.kPG.EntityProcessesDecrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration Fail",this.meta.loader={error:payload.error}}}__name(UpdateConfigurationFail,"UpdateConfigurationFail");class UpdateConfigurationSuccess extends spartacus_core.kPG.EntityProcessesDecrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration Success"}}__name(UpdateConfigurationSuccess,"UpdateConfigurationSuccess");class UpdateConfigurationFinalizeSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=UPDATE_CONFIGURATION_FINALIZE_SUCCESS}}__name(UpdateConfigurationFinalizeSuccess,"UpdateConfigurationFinalizeSuccess");class UpdateConfigurationFinalizeFail extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration finalize fail"}}__name(UpdateConfigurationFinalizeFail,"UpdateConfigurationFinalizeFail");class UpdatePriceSummary extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=UPDATE_PRICE_SUMMARY}}__name(UpdatePriceSummary,"UpdatePriceSummary");class UpdatePriceSummaryFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Update Configuration Price Summary fail"}}__name(UpdatePriceSummaryFail,"UpdatePriceSummaryFail");class UpdatePriceSummarySuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=UPDATE_PRICE_SUMMARY_SUCCESS}}__name(UpdatePriceSummarySuccess,"UpdatePriceSummarySuccess");class ChangeGroup extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type=CHANGE_GROUP}}__name(ChangeGroup,"ChangeGroup");class ChangeGroupFinalize extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Change group finalize"}}__name(ChangeGroupFinalize,"ChangeGroupFinalize");class RemoveConfiguration extends spartacus_core.kPG.EntityLoaderResetAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type="[Configurator] Remove configuration"}}__name(RemoveConfiguration,"RemoveConfiguration");class GetConfigurationOverview extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Get Configuration Overview"}}__name(GetConfigurationOverview,"GetConfigurationOverview");class GetConfigurationOverviewFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Get Configuration Overview fail"}}__name(GetConfigurationOverviewFail,"GetConfigurationOverviewFail");class GetConfigurationOverviewSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type=GET_CONFIGURATION_OVERVIEW_SUCCESS}}__name(GetConfigurationOverviewSuccess,"GetConfigurationOverviewSuccess");class UpdateConfigurationOverview extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration Overview"}}__name(UpdateConfigurationOverview,"UpdateConfigurationOverview");class UpdateConfigurationOverviewFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Update Configuration Overview fail"}}__name(UpdateConfigurationOverviewFail,"UpdateConfigurationOverviewFail");class UpdateConfigurationOverviewSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type=UPDATE_CONFIGURATION_OVERVIEW_SUCCESS}}__name(UpdateConfigurationOverviewSuccess,"UpdateConfigurationOverviewSuccess");class SetInteractionState extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.interactionState),this.payload=payload,this.type=SET_INTERACTION_STATE}}__name(SetInteractionState,"SetInteractionState");class SetCurrentGroup extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.currentGroup),this.payload=payload,this.type=SET_CURRENT_GROUP}}__name(SetCurrentGroup,"SetCurrentGroup");class SetMenuParentGroup extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.menuParentGroup),this.payload=payload,this.type=SET_MENU_PARENT_GROUP}}__name(SetMenuParentGroup,"SetMenuParentGroup");class SetGroupsVisited extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.visitedGroups),this.payload=payload,this.type=SET_GROUPS_VISITED}}__name(SetGroupsVisited,"SetGroupsVisited");class RemoveProductBoundConfigurations{constructor(){this.type="[Configurator] Remove product bound configurations"}}__name(RemoveProductBoundConfigurations,"RemoveProductBoundConfigurations");class DissmissConflictDialoge extends spartacus_core.kPG.EntitySuccessAction{constructor(ownerKey){super(CONFIGURATOR_DATA,ownerKey),this.ownerKey=ownerKey,this.type=DISMISS_CONFLICT_DIALOG}}__name(DissmissConflictDialoge,"DissmissConflictDialoge");class CheckConflictDialoge extends spartacus_core.kPG.EntitySuccessAction{constructor(ownerKey){super(CONFIGURATOR_DATA,ownerKey),this.ownerKey=ownerKey,this.type=CHECK_CONFLICT_DIALOG}}__name(CheckConflictDialoge,"CheckConflictDialoge");const getConfigurationsState=(0,ngrx_store.ZF)("productConfigurator"),getConfigurationState=(0,ngrx_store.P1)(getConfigurationsState,state=>state.configurations),getConfigurationProcessLoaderStateFactory=__name(code=>(0,ngrx_store.P1)(getConfigurationState,details=>spartacus_core.kPG.entityProcessesLoaderStateSelector(details,code)),"getConfigurationProcessLoaderStateFactory"),hasPendingChanges=__name(code=>(0,ngrx_store.P1)(getConfigurationState,details=>spartacus_core.kPG.entityHasPendingProcessesSelector(details,code)),"hasPendingChanges"),getConfigurationFactory=__name(code=>(0,ngrx_store.P1)(getConfigurationProcessLoaderStateFactory(code),configurationState=>spartacus_core.kPG.loaderValueSelector(configurationState)),"getConfigurationFactory"),getCurrentGroup=__name(ownerKey=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>configuration?.interactionState?.currentGroup),"getCurrentGroup"),isGroupVisited=__name((ownerKey,groupId)=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>{const groupsVisited=configuration?.interactionState?.groupsVisited;return!!groupsVisited&&groupsVisited[groupId]}),"isGroupVisited"),areGroupsVisited=__name((ownerKey,groupIds)=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>0===groupIds.map(id=>{const groupsVisited=configuration?.interactionState?.groupsVisited;return!!groupsVisited&&groupsVisited[id]}).filter(visited=>!visited).length),"areGroupsVisited");class ConfiguratorUtilsService{getParentGroup(groups,group,parentGroup){return groups.includes(group)?parentGroup:groups.map(currentGroup=>currentGroup.subGroups?this.getParentGroup(currentGroup.subGroups,group,currentGroup):void 0).filter(foundGroup=>foundGroup).pop()}getGroupById(groups,groupId){const currentGroup=groups.find(group=>group.id===groupId);if(currentGroup)return currentGroup;return this.getGroupFromSubGroups(groups,groupId)||groups[0]}getOptionalGroupById(groups,groupId){return groups.find(group=>group.id===groupId)||this.getGroupFromSubGroups(groups,groupId)}getGroupByIdIfPresent(groups,groupId){return groups.find(group=>group.id===groupId)||this.getGroupFromSubGroups(groups,groupId)}getGroupFromSubGroups(groups,groupId){return groups.map(group=>group.subGroups?this.getGroupByIdIfPresent(group.subGroups,groupId):void 0).filter(foundGroup=>foundGroup).pop()}hasSubGroups(group){return!!group.subGroups&&group.subGroups.length>0}isConfigurationCreated(configuration){const configId=configuration?.configId;return void 0!==configId&&0!==configId.length&&void 0!==configuration&&(configuration.flatGroups.length>0||void 0!==configuration.overview)}createConfigurationExtract(changedAttribute,configuration,updateType){updateType||(updateType=Configurator.UpdateType.ATTRIBUTE);const newConfiguration={configId:configuration.configId,groups:[],flatGroups:[],interactionState:{isConflictResolutionMode:configuration.interactionState.isConflictResolutionMode},owner:configuration.owner,productCode:configuration.productCode,updateType},groupPath=[];if(!changedAttribute.groupId)throw Error("GroupId must be available at attribute level during update");this.buildGroupPath(changedAttribute.groupId,configuration.groups,groupPath);const groupPathLength=groupPath.length;if(0===groupPathLength)throw new Error("At this point we expect that group is available in the configuration: "+changedAttribute.groupId+", "+JSON.stringify(configuration.groups.map(cGroup=>cGroup.id)));let currentGroupInExtract=this.buildGroupForExtract(groupPath[groupPathLength-1]),currentLeafGroupInExtract=currentGroupInExtract;newConfiguration.groups.push(currentGroupInExtract);for(let index=groupPath.length-1;index>0;index--)currentLeafGroupInExtract=this.buildGroupForExtract(groupPath[index-1]),currentGroupInExtract.subGroups=[currentLeafGroupInExtract],currentGroupInExtract=currentLeafGroupInExtract;return currentLeafGroupInExtract.attributes=[changedAttribute],newConfiguration}buildGroupPath(groupId,groupList,groupPath){let haveFoundGroup=!1;const group=groupList.find(currentGroup=>currentGroup.id===groupId);return group?(groupPath.push(group),haveFoundGroup=!0):groupList.filter(currentGroup=>currentGroup.subGroups).forEach(currentGroup=>{currentGroup.subGroups&&this.buildGroupPath(groupId,currentGroup.subGroups,groupPath)&&(groupPath.push(currentGroup),haveFoundGroup=!0)}),haveFoundGroup}getConfigurationFromState(configurationState){const configuration=configurationState.value;if(configuration)return configuration;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(group){return{groupType:group.groupType,id:group.id,subGroups:[]}}}__name(ConfiguratorUtilsService,"ConfiguratorUtilsService"),ConfiguratorUtilsService.\u0275fac=__name(function(t){return new(t||ConfiguratorUtilsService)},"ConfiguratorUtilsService_Factory"),ConfiguratorUtilsService.\u0275prov=core.Yz7({token:ConfiguratorUtilsService,factory:ConfiguratorUtilsService.\u0275fac,providedIn:"root"});class ConfiguratorCartService{constructor(store,activeCartService,commonConfigUtilsService,checkoutQueryFacade,userIdService,configuratorUtilsService){this.store=store,this.activeCartService=activeCartService,this.commonConfigUtilsService=commonConfigUtilsService,this.checkoutQueryFacade=checkoutQueryFacade,this.userIdService=userIdService,this.configuratorUtilsService=configuratorUtilsService}readConfigurationForCartEntry(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,delayWhen.j)(()=>this.activeCartService.isStable().pipe((0,filter.h)(stable=>stable))),(0,delayWhen.j)(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,map.U)(state=>state.loading),(0,filter.h)(loading=>!loading))),(0,tap.b)(configurationState=>{this.configurationNeedsReading(configurationState)&&this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const readFromCartEntryParameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),cartEntryNumber:owner.id,owner};this.store.dispatch(new ReadCartEntryConfiguration(readFromCartEntryParameters))})})}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtilsService.getConfigurationFromState(configurationState)))}readConfigurationForOrderEntry(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,tap.b)(configurationState=>{if(this.configurationNeedsReading(configurationState)){const ownerIdParts=this.commonConfigUtilsService.decomposeOwnerId(owner.id),readFromOrderEntryParameters={userId:spartacus_core.zyp,orderId:ownerIdParts.documentId,orderEntryNumber:ownerIdParts.entryNumber,owner};this.store.dispatch(new ReadOrderEntryConfiguration(readFromOrderEntryParameters))}}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtilsService.getConfigurationFromState(configurationState)))}addToCart(productCode,configId,owner,quantity){this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const addToCartParameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),productCode,quantity:quantity??1,configId,owner};this.store.dispatch(new AddToCart(addToCartParameters))})})}updateCartEntry(configuration){this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const parameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),cartEntryNumber:configuration.owner.id,configuration};this.store.dispatch(new UpdateCartEntry(parameters))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe((0,map.U)(cart=>cart?cart.entries:[]),(0,map.U)(entries=>entries?entries.filter(entry=>this.commonConfigUtilsService.getNumberOfIssues(entry)):[]),(0,map.U)(entries=>entries.length>0))}getEntry(entryNumber){return this.activeCartService.requireLoadedCart().pipe((0,map.U)(cart=>cart.entries?cart.entries:[]),(0,map.U)(entries=>{const filteredEntries=entries.filter(entry=>entry.entryNumber?.toString()===entryNumber);return filteredEntries?filteredEntries[filteredEntries.length-1]:void 0}))}removeCartBoundConfigurations(){this.store.dispatch(new RemoveCartBoundConfigurations)}isConfigurationCreated(configuration){return 0!==configuration.configId.length}configurationNeedsReading(configurationState){const configuration=configurationState.value;return void 0===configuration||!this.isConfigurationCreated(configuration)&&!configurationState.loading&&!configurationState.error}}__name(ConfiguratorCartService,"ConfiguratorCartService"),ConfiguratorCartService.\u0275fac=__name(function(t){return new(t||ConfiguratorCartService)(core.LFG(ngrx_store.yh),core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_product_configurator_common.NU),core.LFG(spartacus_checkout_base_root.nh),core.LFG(spartacus_core.XBV),core.LFG(ConfiguratorUtilsService))},"ConfiguratorCartService_Factory"),ConfiguratorCartService.\u0275prov=core.Yz7({token:ConfiguratorCartService,factory:ConfiguratorCartService.\u0275fac,providedIn:"root"});class ConfiguratorCommonsService{constructor(store,commonConfigUtilsService,configuratorCartService,activeCartService,configuratorUtils){this.store=store,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorCartService=configuratorCartService,this.activeCartService=activeCartService,this.configuratorUtils=configuratorUtils,this.logger=(0,core.f3M)(spartacus_core.mQy)}hasPendingChanges(owner){return this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(owner.key)))}isConfigurationLoading(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,map.U)(configurationState=>configurationState.loading??!1))}getConfiguration(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(owner.key)),(0,filter.h)(configuration=>this.configuratorUtils.isConfigurationCreated(configuration)))}getOrCreateConfiguration(owner,configIdTemplate){switch(owner.type){case spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(owner);case spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(owner);default:return this.getOrCreateConfigurationForProduct(owner,configIdTemplate)}}updateConfiguration(ownerKey,changedAttribute,updateType){updateType||(updateType=Configurator.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe((0,take.q)(1),(0,switchMap.w)(cart=>this.activeCartService.isStable().pipe((0,take.q)(1),(0,tap.b)(stable=>{(0,core.X6Q)()&&cart.code&&!stable&&this.logger.warn("Cart is busy, no configuration updates possible")}),(0,filter.h)(stable=>!cart.code||stable),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(ownerKey)),(0,take.q)(1)))))).subscribe(configuration=>{this.store.dispatch(new UpdateConfiguration(this.configuratorUtils.createConfigurationExtract(changedAttribute,configuration,updateType)))})}getConfigurationWithOverview(configuration){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(configuration.owner.key)),(0,filter.h)(config=>this.configuratorUtils.isConfigurationCreated(config)),(0,tap.b)(configurationState=>{this.hasConfigurationOverview(configurationState)||this.store.dispatch(new GetConfigurationOverview(configuration))}),(0,filter.h)(config=>this.hasConfigurationOverview(config)))}updateConfigurationOverview(configuration){this.store.dispatch(new UpdateConfigurationOverview(configuration))}removeConfiguration(owner){this.store.dispatch(new RemoveConfiguration({ownerKey:owner.key}))}dismissConflictSolverDialog(owner){this.store.dispatch(new DissmissConflictDialoge(owner.key))}checkConflictSolverDialog(owner){this.store.dispatch(new CheckConflictDialoge(owner.key))}hasConflicts(owner){return this.getConfiguration(owner).pipe((0,map.U)(configuration=>!1===configuration.immediateConflictResolution&&configuration.groups[0]?.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP))}forceNewConfiguration(owner){this.store.dispatch(new RemoveConfiguration({ownerKey:owner.key})),this.store.dispatch(new CreateConfiguration({owner,configIdTemplate:void 0,forceReset:!0}))}getOrCreateConfigurationForProduct(owner,configIdTemplate){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,tap.b)(configurationState=>{(void 0===configurationState.value||!this.configuratorUtils.isConfigurationCreated(configurationState.value))&&!0!==configurationState.loading&&!0!==configurationState.error&&this.store.dispatch(new CreateConfiguration({owner,configIdTemplate}))}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.configuratorUtils.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtils.getConfigurationFromState(configurationState)))}hasConfigurationOverview(configuration){return void 0!==configuration.overview}removeProductBoundConfigurations(){this.store.dispatch(new RemoveProductBoundConfigurations)}}__name(ConfiguratorCommonsService,"ConfiguratorCommonsService"),ConfiguratorCommonsService.\u0275fac=__name(function(t){return new(t||ConfiguratorCommonsService)(core.LFG(ngrx_store.yh),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorCartService),core.LFG(spartacus_cart_base_root.bu),core.LFG(ConfiguratorUtilsService))},"ConfiguratorCommonsService_Factory"),ConfiguratorCommonsService.\u0275prov=core.Yz7({token:ConfiguratorCommonsService,factory:ConfiguratorCommonsService.\u0275fac,providedIn:"root"});class ConfiguratorGroupStatusService{constructor(store,configuratorUtilsService){this.store=store,this.configuratorUtilsService=configuratorUtilsService}isGroupVisited(owner,groupId){return this.store.select(isGroupVisited(owner.key,groupId))}getFirstIncompleteGroup(configuration){return configuration.flatGroups?configuration.flatGroups.filter(group=>group.groupType!==Configurator.GroupType.CONFLICT_GROUP).find(group=>!group.complete):void 0}setGroupStatusVisited(configuration,groupId){const group=this.configuratorUtilsService.getGroupById(configuration.groups,groupId),parentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,groupId)),visitedGroupIds=[];visitedGroupIds.push(group.id),parentGroup&&this.getParentGroupStatusVisited(configuration,group.id,parentGroup,visitedGroupIds),this.store.dispatch(new SetGroupsVisited({entityKey:configuration.owner.key,visitedGroups:visitedGroupIds}))}areGroupsVisited(owner,groupIds){return this.store.select(areGroupsVisited(owner.key,groupIds))}getParentGroupStatusVisited(configuration,groupId,parentGroup,visitedGroupIds){const subGroups=[];parentGroup.subGroups.forEach(subGroup=>{subGroup.id!==groupId&&subGroups.push(subGroup.id)}),this.areGroupsVisited(configuration.owner,subGroups).pipe((0,take.q)(1)).subscribe(isVisited=>{if(isVisited){visitedGroupIds.push(parentGroup.id);const grandParentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,parentGroup.id));grandParentGroup&&this.getParentGroupStatusVisited(configuration,parentGroup.id,grandParentGroup,visitedGroupIds)}})}}__name(ConfiguratorGroupStatusService,"ConfiguratorGroupStatusService"),ConfiguratorGroupStatusService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupStatusService)(core.LFG(ngrx_store.yh),core.LFG(ConfiguratorUtilsService))},"ConfiguratorGroupStatusService_Factory"),ConfiguratorGroupStatusService.\u0275prov=core.Yz7({token:ConfiguratorGroupStatusService,factory:ConfiguratorGroupStatusService.\u0275fac,providedIn:"root"});class ConfiguratorGroupsService{constructor(store,configuratorCommonsService,configuratorUtilsService,configuratorGroupStatusService){this.store=store,this.configuratorCommonsService=configuratorCommonsService,this.configuratorUtilsService=configuratorUtilsService,this.configuratorGroupStatusService=configuratorGroupStatusService}getCurrentGroupId(owner){return this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>configuration.interactionState.currentGroup?configuration.interactionState.currentGroup:configuration.groups[0]?.id))}getFirstConflictGroup(configuration){return configuration.flatGroups.find(group=>group.groupType===Configurator.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(owner){this.configuratorCommonsService.getConfiguration(owner).pipe((0,take.q)(1)).subscribe(configuration=>{const groupId=this.configuratorGroupStatusService.getFirstIncompleteGroup(configuration)?.id;groupId&&this.navigateToGroup(configuration,groupId,!0)})}navigateToConflictSolver(owner){this.configuratorCommonsService.getConfiguration(owner).pipe((0,take.q)(1)).subscribe(configuration=>{const groupId=this.getFirstConflictGroup(configuration)?.id;groupId&&this.navigateToGroup(configuration,groupId,!0,!0)})}getMenuParentGroup(owner){return this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>{const menuParentGroup=configuration.interactionState.menuParentGroup;return menuParentGroup?this.configuratorUtilsService.getOptionalGroupById(configuration.groups,menuParentGroup):void 0}))}setMenuParentGroup(owner,groupId){this.store.dispatch(new SetMenuParentGroup({entityKey:owner.key,menuParentGroup:groupId}))}getCurrentGroup(owner){return this.getCurrentGroupId(owner).pipe((0,switchMap.w)(currentGroupId=>this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>this.configuratorUtilsService.getGroupById(configuration.groups,currentGroupId)))))}getConflictGroupForImmediateConflictResolution(owner){return this.configuratorCommonsService.getConfiguration(owner).pipe((0,delay.g)(0),(0,map.U)(configuration=>{if(configuration.interactionState.showConflictSolverDialog)return configuration.flatGroups.find(group=>group.groupType===Configurator.GroupType.CONFLICT_GROUP)}))}setGroupStatusVisited(owner,groupId){this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>this.configuratorGroupStatusService.setGroupStatusVisited(configuration,groupId)),(0,take.q)(1)).subscribe()}navigateToGroup(configuration,groupId,setStatus=!0,conflictResolutionMode=!1){setStatus&&this.getCurrentGroup(configuration.owner).pipe((0,take.q)(1)).subscribe(currentGroup=>{this.configuratorGroupStatusService.setGroupStatusVisited(configuration,currentGroup.id)});const parentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,groupId));this.store.dispatch(new ChangeGroup({configuration,groupId,parentGroupId:parentGroup?parentGroup.id:void 0,conflictResolutionMode}))}getNextGroupId(owner){return this.getNeighboringGroupId(owner,1)}getPreviousGroupId(owner){return this.getNeighboringGroupId(owner,-1)}isGroupVisited(owner,groupId){return this.configuratorGroupStatusService.isGroupVisited(owner,groupId)}getParentGroup(groups,group){return this.configuratorUtilsService.getParentGroup(groups,group)}hasSubGroups(group){return this.configuratorUtilsService.hasSubGroups(group)}isConflictGroupInImmediateConflictResolutionMode(groupType,immediateConflictResolution=!1){return!!groupType&&(groupType===Configurator.GroupType.CONFLICT_GROUP&&immediateConflictResolution)}getNeighboringGroupId(owner,neighboringIndex){return this.getCurrentGroupId(owner).pipe((0,switchMap.w)(currentGroupId=>this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>{let nextGroup;return configuration.flatGroups.forEach((group,index)=>{group.id===currentGroupId&&configuration.flatGroups&&configuration.flatGroups[index+neighboringIndex]&&!this.isConflictGroupInImmediateConflictResolutionMode(configuration.flatGroups[index+neighboringIndex]?.groupType,configuration.immediateConflictResolution)&&(nextGroup=configuration.flatGroups[index+neighboringIndex].id)}),nextGroup}),(0,take.q)(1))))}isConflictGroupType(groupType){return groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP||groupType===Configurator.GroupType.CONFLICT_GROUP}}__name(ConfiguratorGroupsService,"ConfiguratorGroupsService"),ConfiguratorGroupsService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupsService)(core.LFG(ngrx_store.yh),core.LFG(ConfiguratorCommonsService),core.LFG(ConfiguratorUtilsService),core.LFG(ConfiguratorGroupStatusService))},"ConfiguratorGroupsService_Factory"),ConfiguratorGroupsService.\u0275prov=core.Yz7({token:ConfiguratorGroupsService,factory:ConfiguratorGroupsService.\u0275fac,providedIn:"root"});class ConfiguratorStorefrontUtilsService{constructor(configuratorGroupsService,windowRef,keyboardFocusService){this.configuratorGroupsService=configuratorGroupsService,this.windowRef=windowRef,this.keyboardFocusService=keyboardFocusService,this.CX_PREFIX="cx",this.SEPARATOR="--",this.ADD_TO_CART_BUTTON_HEIGHT=82,this.logger=(0,core.f3M)(spartacus_core.mQy)}isCartEntryOrGroupVisited(owner,groupId){return this.configuratorGroupsService.isGroupVisited(owner,groupId).pipe((0,take.q)(1),(0,map.U)(result=>!!result||owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(controlArray,attribute){const localAssembledValues=[];for(let i=0;i<controlArray.length;i++){const value=attribute.values?attribute.values[i]:void 0;if(value){const localAttributeValue={valueCode:value.valueCode};localAttributeValue.name=value.name,localAttributeValue.quantity=value.quantity,localAttributeValue.selected=controlArray[i].value,localAssembledValues.push(localAttributeValue)}else(0,core.X6Q)()&&this.logger.warn("ControlArray does not match values, at least one value could not been found")}return localAssembledValues}scroll(element){let topOffset=0;element instanceof HTMLElement&&(topOffset=element.offsetTop),this.windowRef.nativeWindow?.scroll(0,topOffset)}scrollToConfigurationElement(selector){if(this.windowRef.isBrowser()){const element=this.getElement(selector);element&&this.scroll(element)}}focusFirstAttribute(){if(!this.windowRef.isBrowser())return;const form=this.getElement("cx-configurator-form");if(form){const focusableElements=this.keyboardFocusService.findFocusable(form);focusableElements&&focusableElements.length>0&&focusableElements[0].focus()}}getFocusableElementById(focusableElements,id){return focusableElements.find(focusableElement=>{if(id&&(-1!==focusableElement.nodeName.toLocaleLowerCase().indexOf(id)||-1!==focusableElement.id.indexOf(id)))return focusableElement})}getFocusableConflictDescription(focusableElements){return this.getFocusableElementById(focusableElements,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(focusableElements,valueUiKey){return this.getFocusableElementById(focusableElements,valueUiKey)}getFocusableElementByAttributeId(focusableElements,attributeName){return this.getFocusableElementById(focusableElements,attributeName)}createAttributeValueUiKey(attributeId,valueId){return attributeId+this.SEPARATOR+valueId}focusValue(attribute){if(!this.windowRef.isBrowser())return;const form=this.getElement("cx-configurator-form");if(form){const focusableElements=this.keyboardFocusService.findFocusable(form);focusableElements.length>0&&this.focusOnElements(focusableElements,attribute)}}focusOnElements(focusableElements,attribute){let foundFocusableElement=this.getFocusableConflictDescription(focusableElements);foundFocusableElement||(foundFocusableElement=this.focusOnElementForConflicting(attribute,foundFocusableElement,focusableElements)),foundFocusableElement&&foundFocusableElement.focus()}focusOnElementForConflicting(attribute,foundFocusableElement,focusableElements){const selectedValue=attribute.values?.find(value=>value.selected);if(selectedValue){const valueUiKey=this.createAttributeValueUiKey(attribute.name,selectedValue.valueCode);foundFocusableElement=this.getFocusableElementByValueUiKey(focusableElements,valueUiKey)}return foundFocusableElement||(foundFocusableElement=this.getFocusableElementByAttributeId(focusableElements,attribute.name)),foundFocusableElement}getPrefixId(idPrefix,groupId){return idPrefix?idPrefix+this.SEPARATOR+groupId:this.CX_PREFIX+this.SEPARATOR+groupId}createGroupId(groupId){if(groupId)return groupId+"-group"}createOvGroupId(prefix,groupId){return this.getPrefixId(prefix,groupId)+"-ovGroup"}createOvMenuItemId(prefix,groupId){return this.getPrefixId(prefix,groupId)+"-ovMenuItem"}setFocus(key,group){key&&this.keyboardFocusService.set(key,group)}changeStyling(querySelector,property,value){const element=this.getElement(querySelector);element&&element.style.setProperty(property,value)}removeStyling(querySelector,property){const element=this.getElement(querySelector);element&&element.style.removeProperty(property)}getElement(querySelector){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(querySelector)}getElements(querySelector){if(this.windowRef.isBrowser())return Array.from(this.windowRef.document.querySelectorAll(querySelector))}getVerticallyScrolledPixels(){if(this.windowRef.isBrowser())return this.windowRef.nativeWindow?.scrollY}hasScrollbar(querySelector){const element=this.getElement(querySelector);return!!element&&element.scrollHeight>element.clientHeight}isInViewport(element){if(element){const bounding=element.getBoundingClientRect(),height=element.offsetHeight,width=element.offsetWidth;return bounding.top>=-height&&bounding.left>=-width&&bounding.right<=(this.windowRef.nativeWindow?.innerWidth||element.clientWidth)+width&&bounding.bottom<=(this.windowRef.nativeWindow?.innerHeight||element.clientHeight)+height}return!1}getHeight(querySelector){const element=this.getElement(querySelector);return this.isInViewport(element)&&element?.offsetHeight?element?.offsetHeight:0}getSpareViewportHeight(){if(this.windowRef.isBrowser()){const occupiedHeight=this.getHeight("header")+this.getHeight(".VariantConfigOverviewHeader")+2*(0!==this.getHeight("cx-configurator-add-to-cart-button")?this.getHeight("cx-configurator-add-to-cart-button"):this.ADD_TO_CART_BUTTON_HEIGHT);return this.windowRef.nativeWindow?this.windowRef.nativeWindow.innerHeight-occupiedHeight:0}return 0}ensureElementVisible(querySelector,element){const container=this.getElement(querySelector);if(element&&container)if(element.offsetTop>container.scrollTop){const offsetBottom=element.offsetTop+element.offsetHeight;offsetBottom>container.scrollTop&&(container.scrollTop=offsetBottom-container.offsetHeight)}else container.scrollTop=element.getBoundingClientRect()?.top-10}}__name(ConfiguratorStorefrontUtilsService,"ConfiguratorStorefrontUtilsService"),ConfiguratorStorefrontUtilsService.\u0275fac=__name(function(t){return new(t||ConfiguratorStorefrontUtilsService)(core.LFG(ConfiguratorGroupsService),core.LFG(spartacus_core.X9E),core.LFG(spartacus_storefront.K9x))},"ConfiguratorStorefrontUtilsService_Factory"),ConfiguratorStorefrontUtilsService.\u0275prov=core.Yz7({token:ConfiguratorStorefrontUtilsService,factory:ConfiguratorStorefrontUtilsService.\u0275fac,providedIn:"root"});class ConfiguratorQuantityService{constructor(){this._quantity=new ReplaySubject.t(1)}setQuantity(quantity){this._quantity.next(quantity)}getQuantity(){return this._quantity}}__name(ConfiguratorQuantityService,"ConfiguratorQuantityService"),ConfiguratorQuantityService.\u0275fac=__name(function(t){return new(t||ConfiguratorQuantityService)},"ConfiguratorQuantityService_Factory"),ConfiguratorQuantityService.\u0275prov=core.Yz7({token:ConfiguratorQuantityService,factory:ConfiguratorQuantityService.\u0275fac,providedIn:"root"});const CX_SELECTOR="cx-configurator-add-to-cart-button";class ConfiguratorAddToCartButtonComponent{constructor(routingService,configuratorCommonsService,configuratorCartService,configuratorGroupsService,configRouterExtractorService,globalMessageService,orderHistoryFacade,commonConfiguratorUtilsService,configUtils,intersectionService,configuratorQuantityService){this.routingService=routingService,this.configuratorCommonsService=configuratorCommonsService,this.configuratorCartService=configuratorCartService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.globalMessageService=globalMessageService,this.orderHistoryFacade=orderHistoryFacade,this.commonConfiguratorUtilsService=commonConfiguratorUtilsService,this.configUtils=configUtils,this.intersectionService=intersectionService,this.configuratorQuantityService=configuratorQuantityService,this.subscription=new Subscription.w,this.quantityControl=new fesm2020_forms.p4(1),this.iconType=spartacus_storefront.e1G,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration}))).pipe((0,switchMap.w)(cont=>this.configuratorCommonsService.hasPendingChanges(cont.configuration.owner).pipe((0,map.U)(hasPendingChanges2=>({routerData:cont.routerData,configuration:cont.configuration,hasPendingChanges:hasPendingChanges2})))))))}ngOnInit(){this.makeAddToCartButtonSticky(),this.configuratorQuantityService&&this.configuratorQuantityService.getQuantity().pipe((0,take.q)(1)).subscribe(quantity=>{this.quantityControl.setValue(quantity)}),this.subscription.add(this.quantityControl.valueChanges.pipe((0,distinctUntilChanged.x)()).subscribe(()=>this.configuratorQuantityService?.setQuantity(this.quantityControl.value)))}navigateToCart(){this.routingService.go("cart")}navigateToOverview(configuratorType,owner){this.routingService.go({cxRoute:"configureOverview"+configuratorType,params:{ownerType:"cartEntry",entityKey:owner.id}})}displayConfirmationMessage(key){this.globalMessageService.add({key},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}performNavigation(configuratorType,owner,isAdd,isOverview,showMessage){const messageKey=isAdd?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate";isOverview?this.navigateToCart():this.navigateToOverview(configuratorType,owner),showMessage&&this.displayConfirmationMessage(messageKey)}getButtonResourceKey(routerData,configuration){return routerData.isOwnerCartEntry&&configuration.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":routerData.isOwnerCartEntry&&!configuration.isCartEntryUpdateRequired?"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}isCartEntry(routerData){return!!routerData.isOwnerCartEntry&&routerData.isOwnerCartEntry}onAddToCart(configuration,routerData){const pageType=routerData.pageType,configuratorType=configuration.owner.configuratorType,isOverview=pageType===spartacus_product_configurator_common.iB.PageType.OVERVIEW,isOwnerCartEntry=routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,owner=configuration.owner,currentGroup=configuration.interactionState.currentGroup;currentGroup&&this.configuratorGroupsService.setGroupStatusVisited(configuration.owner,currentGroup),this.container$.pipe((0,filter.h)(cont=>!cont.hasPendingChanges),(0,take.q)(1)).subscribe(()=>{isOwnerCartEntry?this.onUpdateCart(configuration,configuratorType,owner,isOverview):this.onAddToCartForProduct(owner,configuration,configuratorType,isOverview)})}onAddToCartForProduct(owner,configuration,configuratorType,isOverview){const quantity=this.quantityControl.value;this.configuratorCartService.addToCart(owner.id,configuration.configId,owner,quantity),this.configuratorCommonsService.getConfiguration(owner).pipe((0,filter.h)(configWithNextOwner=>void 0!==configWithNextOwner.nextOwner),(0,take.q)(1)).subscribe(configWithNextOwner=>{this.navigateForProductBound(configWithNextOwner,configuratorType,isOverview)})}navigateForProductBound(configWithNextOwner,configuratorType,isOverview){const nextOwner=configWithNextOwner.nextOwner??spartacus_product_configurator_common.mR.createInitialOwner();this.performNavigation(configuratorType,nextOwner,!0,isOverview,!0),isOverview||this.configuratorCommonsService.removeConfiguration(nextOwner)}onUpdateCart(configuration,configuratorType,owner,isOverview){configuration.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(configuration),this.performNavigation(configuratorType,owner,!1,isOverview,configuration.isCartEntryUpdateRequired??!1),configuration.isCartEntryUpdateRequired&&!isOverview&&this.configuratorCommonsService.removeConfiguration(owner)}leaveConfigurationOverview(){this.container$.pipe((0,take.q)(1)).subscribe(container=>{container.routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY?this.goToOrderDetails(container.routerData.owner):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(owner){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(owner.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe((0,filter.h)(order=>void 0!==order),(0,take.q)(1)).subscribe(order=>this.routingService.go({cxRoute:"orderDetails",params:order}))}extractConfigPrices(configuration){const priceSummary=configuration.priceSummary,basePrice=priceSummary?.basePrice?.formattedValue,selectedOptions=priceSummary?.selectedOptions?.formattedValue,totalPrice=priceSummary?.currentTotal?.formattedValue,prices={basePrice,selectedOptions,totalPrice};return(!basePrice||"-"===basePrice)&&(prices.basePrice="0"),(!selectedOptions||"-"===selectedOptions)&&(prices.selectedOptions="0"),(!totalPrice||"-"===totalPrice)&&(prices.totalPrice="0"),prices}makeAddToCartButtonSticky(){const options={rootMargin:"9999px 0px -100px 0px"};this.subscription.add(this.container$.pipe((0,take.q)(1),(0,delay.g)(0),(0,map.U)(()=>this.configUtils.getElement("cx-configurator-price-summary")),(0,switchMap.w)(priceSummary=>priceSummary?this.intersectionService.isIntersecting(priceSummary,options):(0,of.of)(void 0)),(0,filter.h)(isIntersecting=>void 0!==isIntersecting)).subscribe(isIntersecting=>{isIntersecting?this.configUtils.changeStyling(CX_SELECTOR,"position","sticky"):this.configUtils.changeStyling(CX_SELECTOR,"position","fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorAddToCartButtonComponent,"ConfiguratorAddToCartButtonComponent"),ConfiguratorAddToCartButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAddToCartButtonComponent)(core.Y36(spartacus_core.Znh),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorCartService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_core.IWp),core.Y36(spartacus_order_root.Kr),core.Y36(spartacus_product_configurator_common.NU),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(spartacus_storefront.o8g),core.Y36(ConfiguratorQuantityService,8))},"ConfiguratorAddToCartButtonComponent_Factory"),ConfiguratorAddToCartButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorAddToCartButtonComponent,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["displayOnly",""],[1,"cx-add-to-cart-btn-container"],[4,"cxFeatureLevel"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-quantity-add-to-cart-container"],[1,"cx-quantity-add-to-cart-row"],[1,"cx-quantity"],[3,"control"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"title","click"],[3,"type"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-display-only-btn",3,"click"],[1,"cx-btn","btn","btn-block","btn-secondary","cx-display-only-btn",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAddToCartButtonComponent_ng_container_0_Template,4,2,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.container$))},"ConfiguratorAddToCartButtonComponent_Template"),dependencies:[common.O5,spartacus_storefront.odZ,spartacus_storefront.oJW,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAddToCartButtonModule{}__name(ConfiguratorAddToCartButtonModule,"ConfiguratorAddToCartButtonModule"),ConfiguratorAddToCartButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAddToCartButtonModule)},"ConfiguratorAddToCartButtonModule_Factory"),ConfiguratorAddToCartButtonModule.\u0275mod=core.oAB({type:ConfiguratorAddToCartButtonModule}),ConfiguratorAddToCartButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorAddToCartButton:{component:ConfiguratorAddToCartButtonComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.Td$,spartacus_storefront.QX1,spartacus_core.GSh]});class ConfiguratorAttributeBaseComponent{createValueUiKey(prefix,attributeId,valueId){return this.createAttributeUiKey(prefix,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId}createAttributeValueIdForConfigurator(currentAttribute,value){return this.createValueUiKey(this.getUiType(currentAttribute),currentAttribute.name,value)}getUiType(attribute){return attribute.uiType?attribute.uiType:Configurator.UiType.NOT_IMPLEMENTED}createAttributeUiKey(prefix,attributeId){return ConfiguratorAttributeBaseComponent.PREFIX+ConfiguratorAttributeBaseComponent.SEPERATOR+prefix+ConfiguratorAttributeBaseComponent.SEPERATOR+attributeId}createAttributeIdForConfigurator(currentAttribute){return this.createAttributeUiKey(this.getUiType(currentAttribute),currentAttribute.name)}createAriaLabelledBy(prefix,attributeId,valueId,hasQuantity){let attributeUiKey=this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_LABEL,attributeId);return valueId&&(attributeUiKey+=" "+this.createAttributeUiKey(prefix,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId+" ",attributeUiKey+="boolean"!=typeof hasQuantity||hasQuantity?this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_OPTION_PRICE_VALUE,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId:this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_DDLB_OPTION_PRICE_VALUE,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId),attributeUiKey}createFocusId(attributeId,valueCode){return`${attributeId}--${valueCode}--focus`}getLabel(expMode,label,techName,value){let title=label||"";return expMode&&techName&&(title+=` / [${techName}]`),title+=this.getValuePrice(value),title}getImage(value){const images=value.images;return images?images[0]:void 0}getValuePrice(value){if(value?.valuePrice?.value&&!value.selected){if(value.valuePrice.value<0)return` [${value.valuePrice?.formattedValue}]`;if(value.valuePrice.value>0)return` [+${value.valuePrice?.formattedValue}]`}return""}getAttributeCode(attribute){const code=attribute.attrCode;if(code)return code;throw new Error("No attribute code for: "+attribute.name)}isWithAdditionalValues(attribute){const uiType=attribute.uiType;return uiType===Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT||uiType===Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT}isRequiredErrorMsg(attribute){return attribute.required&&attribute.incomplete||!1}isUserInput(attribute){return attribute.uiType===Configurator.UiType.STRING||attribute.uiType===Configurator.UiType.NUMERIC}isDropDown(attribute){return attribute.uiType===Configurator.UiType.DROPDOWN||attribute.uiType===Configurator.UiType.DROPDOWN_PRODUCT}getSelectedValue(attribute){return attribute.values?.find(value=>value.selected)}isNoValueSelected(attribute){const selectedValue=this.getSelectedValue(attribute);return!selectedValue||selectedValue.valueCode===Configurator.RetractValueCode}}__name(ConfiguratorAttributeBaseComponent,"ConfiguratorAttributeBaseComponent"),ConfiguratorAttributeBaseComponent.SEPERATOR="--",ConfiguratorAttributeBaseComponent.PREFIX="cx-configurator",ConfiguratorAttributeBaseComponent.PREFIX_LABEL="label",ConfiguratorAttributeBaseComponent.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue",ConfiguratorAttributeBaseComponent.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price";class ConfiguratorAttributeCompositionContext{}__name(ConfiguratorAttributeCompositionContext,"ConfiguratorAttributeCompositionContext"),ConfiguratorAttributeCompositionContext.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCompositionContext)},"ConfiguratorAttributeCompositionContext_Factory"),ConfiguratorAttributeCompositionContext.\u0275prov=core.Yz7({token:ConfiguratorAttributeCompositionContext,factory:ConfiguratorAttributeCompositionContext.\u0275fac});class ConfiguratorAttributeFooterComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtils,attributeComponentContext,featureConfigService){super(),this.configUtils=configUtils,this.attributeComponentContext=attributeComponentContext,this.featureConfigService=featureConfigService,this.iconType=spartacus_storefront.e1G,this.attribute=attributeComponentContext.attribute,this.owner=attributeComponentContext.owner,this.groupId=attributeComponentContext.group.id}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,map.U)(result=>!!result&&this.needsRequiredAttributeErrorMsg()))}needsRequiredAttributeErrorMsg(){return this.featureConfigService?.isLevel("6.2")?this.needsUserInputMsg()||this.needsDropDownMsg():this.needsUserInputMsg()}needsDropDownMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)}isUserInputEmpty(input){return void 0!==input&&(!input.trim()||0===input.length)}needsUserInputMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute)&&this.isUserInputEmpty(this.attribute.userInput)}needsUserInputMessage(){const uiType=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&(uiType===Configurator.UiType.STRING||uiType===Configurator.UiType.NUMERIC)&&this.isUserInputEmpty(this.attribute.userInput))??!1}}__name(ConfiguratorAttributeFooterComponent,"ConfiguratorAttributeFooterComponent"),ConfiguratorAttributeFooterComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeFooterComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(spartacus_core.Ru9,8))},"ConfiguratorAttributeFooterComponent_Factory"),ConfiguratorAttributeFooterComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeFooterComponent,selectors:[["cx-configurator-attribute-footer"]],features:[core.qOj],decls:2,vars:2,consts:[[4,"cxFeatureLevel"],["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"],[4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeFooterComponent_ng_container_0_Template,3,3,"ng-container",0),core.YNc(1,ConfiguratorAttributeFooterComponent_ng_container_1_Template,3,3,"ng-container",0)),2&rf&&(core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2"))},"ConfiguratorAttributeFooterComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeFooterModule{}__name(ConfiguratorAttributeFooterModule,"ConfiguratorAttributeFooterModule"),ConfiguratorAttributeFooterModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeFooterModule)},"ConfiguratorAttributeFooterModule_Factory"),ConfiguratorAttributeFooterModule.\u0275mod=core.oAB({type:ConfiguratorAttributeFooterModule}),ConfiguratorAttributeFooterModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{Footer:ConfiguratorAttributeFooterComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_core.GSh]});class ConfiguratorUISettingsConfig{}__name(ConfiguratorUISettingsConfig,"ConfiguratorUISettingsConfig"),ConfiguratorUISettingsConfig.\u0275fac=__name(function(t){return new(t||ConfiguratorUISettingsConfig)},"ConfiguratorUISettingsConfig_Factory"),ConfiguratorUISettingsConfig.\u0275prov=core.Yz7({token:ConfiguratorUISettingsConfig,factory:__name(function(t){let r=null;return r=t?new(t||ConfiguratorUISettingsConfig):core.LFG(spartacus_core.DeH),r},"ConfiguratorUISettingsConfig_Factory"),providedIn:"root"});class ConfiguratorAttributeHeaderComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtils,configuratorCommonsService,configuratorGroupsService,configuratorUiSettings,attributeComponentContext,featureConfigService){super(),this.configUtils=configUtils,this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configuratorUiSettings=configuratorUiSettings,this.attributeComponentContext=attributeComponentContext,this.featureConfigService=featureConfigService,this.iconTypes=spartacus_storefront.e1G,this.logger=(0,core.f3M)(spartacus_core.mQy),this.attribute=attributeComponentContext.attribute,this.owner=attributeComponentContext.owner,this.groupId=attributeComponentContext.group.id,this.groupType=attributeComponentContext.group.groupType??Configurator.GroupType.ATTRIBUTE_GROUP,this.expMode=attributeComponentContext.expMode,this.isNavigationToGroupEnabled=attributeComponentContext.isNavigationToGroupEnabled??!1}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,map.U)(result=>result&&this.needsRequiredAttributeErrorMsg()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:case Configurator.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.CHECKBOX:case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:case Configurator.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isAttributeWithoutErrorMsg(uiType){switch(uiType){case Configurator.UiType.NOT_IMPLEMENTED:case Configurator.UiType.STRING:case Configurator.UiType.NUMERIC:case Configurator.UiType.CHECKBOX:case Configurator.UiType.DROPDOWN:case Configurator.UiType.DROPDOWN_PRODUCT:return!1}return!0}isAttributeWithDomain(uiType){switch(uiType){case Configurator.UiType.NOT_IMPLEMENTED:case Configurator.UiType.STRING:case Configurator.UiType.NUMERIC:case Configurator.UiType.CHECKBOX:return!1}return!0}needsRequiredAttributeErrorMsg(){return this.featureConfigService?.isLevel("6.2")?this.isRequiredAttributeWithoutErrorMsg():this.isRequiredAttributeWithDomain()}isRequiredAttributeWithDomain(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithDomain(this.attribute.uiType)}isRequiredAttributeWithoutErrorMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithoutErrorMsg(this.attribute.uiType)}isAttributeGroup(){return Configurator.GroupType.ATTRIBUTE_GROUP===this.groupType}isConflictResolutionActive(){return this.isAttributeGroup()&&this.isNavigationToGroupEnabled}getConflictMessageKey(){return this.groupType===Configurator.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){const images=this.attribute.images;return!!images&&images.length>0}get image(){const images=this.attribute.images;return images&&this.hasImage?images[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe((0,take.q)(1)).subscribe(configuration=>{let groupId;groupId=this.groupType===Configurator.GroupType.CONFLICT_GROUP?this.attribute.groupId:this.findConflictGroupId(configuration,this.attribute),groupId?(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(name){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",name)))}findConflictGroupId(configuration,currentAttribute){return configuration.flatGroups.filter(group=>group.groupType===Configurator.GroupType.CONFLICT_GROUP).find(group=>group.attributes?.find(attribute=>attribute.key===currentAttribute.key))?.id}logError(text){(0,core.X6Q)()&&this.logger.error(text)}focusValue(attribute){this.onNavigationCompleted(()=>this.configUtils.focusValue(attribute))}onNavigationCompleted(callback){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,filter.h)(isLoading=>isLoading),(0,take.q)(1),(0,switchMap.w)(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,filter.h)(isLoading=>!isLoading),(0,take.q)(1),(0,delay.g)(0)))).subscribe(callback)}isNavigationToConflictEnabled(){return(this.isNavigationToGroupEnabled&&this.configuratorUiSettings.productConfigurator?.enableNavigationToConflict)??!1}}__name(ConfiguratorAttributeHeaderComponent,"ConfiguratorAttributeHeaderComponent"),ConfiguratorAttributeHeaderComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeHeaderComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(ConfiguratorUISettingsConfig),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(spartacus_core.Ru9,8))},"ConfiguratorAttributeHeaderComponent_Factory"),ConfiguratorAttributeHeaderComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeHeaderComponent,selectors:[["cx-configurator-attribute-header"]],features:[core.qOj],decls:15,vars:26,consts:[["class","cx-hidden-msg",4,"ngIf"],[3,"id"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],["conflictGroup",""],["withoutLink",""],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],["class","link cx-action-link","tabindex","0",3,"click","keydown.enter",4,"ngIf"],[1,"cx-conflict-msg"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeHeaderComponent_div_0_Template,4,4,"div",0),core.TgZ(1,"label",1),core.ALo(2,"async"),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core.TgZ(5,"span"),core._uU(6),core.qZA()(),core.YNc(7,ConfiguratorAttributeHeaderComponent_div_7_Template,4,10,"div",2),core.YNc(8,ConfiguratorAttributeHeaderComponent_div_8_Template,5,8,"div",3),core.ALo(9,"async"),core.YNc(10,ConfiguratorAttributeHeaderComponent_img_10_Template,1,2,"img",4),core.YNc(11,ConfiguratorAttributeHeaderComponent_ng_template_11_Template,1,1,"ng-template",null,5,core.W1O),core.YNc(13,ConfiguratorAttributeHeaderComponent_ng_template_13_Template,3,3,"ng-template",null,6,core.W1O)),2&rf&&(core.Q6J("ngIf",!ctx.attribute.visible),core.xp6(1),core.ekj("cx-required-error",core.lcZ(2,12,ctx.showRequiredMessageForDomainAttribute$)),core.s9C("id",ctx.createAttributeUiKey("label",ctx.attribute.name)),core.uIk("aria-label",ctx.attribute.required?core.xi3(4,17,"configurator.a11y.requiredAttribute",core.VKq(24,_c1,ctx.attribute.label)):core.xi3(3,14,"configurator.a11y.attribute",core.VKq(22,_c0,ctx.attribute.label))),core.xp6(4),core.ekj("cx-required-icon",ctx.attribute.required),core.uIk("aria-describedby",ctx.createAttributeUiKey("label",ctx.attribute.name)),core.xp6(1),core.Oqu(ctx.getLabel(ctx.expMode,ctx.attribute.label,ctx.attribute.name)),core.xp6(1),core.Q6J("ngIf",ctx.attribute.hasConflicts),core.xp6(1),core.Q6J("ngIf",core.lcZ(9,20,ctx.showRequiredMessageForDomainAttribute$)),core.xp6(2),core.Q6J("ngIf",ctx.hasImage))},"ConfiguratorAttributeHeaderComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeHeaderModule{}__name(ConfiguratorAttributeHeaderModule,"ConfiguratorAttributeHeaderModule"),ConfiguratorAttributeHeaderModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeHeaderModule)},"ConfiguratorAttributeHeaderModule_Factory"),ConfiguratorAttributeHeaderModule.\u0275mod=core.oAB({type:ConfiguratorAttributeHeaderModule}),ConfiguratorAttributeHeaderModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{Header:ConfiguratorAttributeHeaderComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,ng_select_ng_select.A0]});class ConfiguratorShowMoreComponent{constructor(cdRef){this.cdRef=cdRef,this.showMore=!1,this.showHiddenText=!1,this.textSize=60}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.showHiddenText?this.textToShow=this.textNormalized:this.textToShow=this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(text=""){return text.replace(/<[^>]*>/g,"")}}__name(ConfiguratorShowMoreComponent,"ConfiguratorShowMoreComponent"),ConfiguratorShowMoreComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorShowMoreComponent)(core.Y36(core.sBO))},"ConfiguratorShowMoreComponent_Factory"),ConfiguratorShowMoreComponent.\u0275cmp=core.Xpm({type:ConfiguratorShowMoreComponent,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"],["tabindex","-1",3,"click",4,"ngIf"],["tabindex","-1",3,"click"],[4,"ngIf","ngIfElse"],["less",""]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorShowMoreComponent_ng_container_0_Template,4,8,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.text)},"ConfiguratorShowMoreComponent_Template"),dependencies:[common.O5,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeQuantityComponent{constructor(config){this.config=config,this.quantity=new fesm2020_forms.p4(1),this.optionsChangeSub=new Subscription.w,this.quantityChangeSub=new Subscription.w,this.changeQuantity=new core.vpe}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(distinct()).subscribe(disable=>{disable?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.quantity??0)),(0,take.q)(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}}__name(ConfiguratorAttributeQuantityComponent,"ConfiguratorAttributeQuantityComponent"),ConfiguratorAttributeQuantityComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityComponent)(core.Y36(ConfiguratorUISettingsConfig))},"ConfiguratorAttributeQuantityComponent_Factory"),ConfiguratorAttributeQuantityComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeQuantityComponent,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"div",0)(1,"label"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core._UZ(4,"cx-item-counter",1),core.qZA()),2&rf){let tmp_1_0;core.xp6(2),core.Oqu(core.lcZ(3,4,"configurator.attribute.quantity")),core.xp6(2),core.Q6J("allowZero",null!==(tmp_1_0=ctx.quantityOptions.allowZero)&&void 0!==tmp_1_0&&tmp_1_0)("control",ctx.quantity)("min",ctx.quantityOptions.allowZero?0:1)}},"ConfiguratorAttributeQuantityComponent_Template"),dependencies:[spartacus_storefront.odZ,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceComponent{constructor(directionService){this.directionService=directionService}isRTLDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.RTL}removeSign(value,sign){return value?value.replace(sign,""):""}addSign(value,sign,before){return value?before?sign+value:value+sign:""}compileFormattedValue(priceValue,formattedValue,isRTL){if(priceValue>0)return this.addSign(formattedValue,"+",!isRTL);if(isRTL){const withoutSign=this.removeSign(formattedValue,"-");return this.addSign(withoutSign,"-",!1)}return formattedValue??""}get price(){return this.formula.priceTotal?this.priceTotal:this.compileFormattedValue(this.formula.price?.value??0,this.formula.price?.formattedValue,this.isRTLDirection())}get priceTotal(){return this.compileFormattedValue(this.formula.priceTotal?.value??0,this.formula.priceTotal?.formattedValue,this.isRTLDirection())}displayQuantityAndPrice(){const quantity=this.formula.quantity;return!!quantity&&(0!==this.formula.price?.value&&quantity>=1)}displayPriceOnly(){const priceValue=this.formula.price?.value??0,priceTotalValue=this.formula.priceTotal?.value??0;return(0!==priceValue||0!==priceTotalValue)&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&0!==this.formula.quantity||this.formula.price&&0!==this.formula.price?.value||this.formula.priceTotal&&0!==this.formula.priceTotal?.value)??!1}quantityWithPrice(formattedQuantity){return formattedQuantity+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let styleClass="cx-price";return this.isPriceLightedUp()||(styleClass+=" cx-greyed-out"),styleClass}}__name(ConfiguratorPriceComponent,"ConfiguratorPriceComponent"),ConfiguratorPriceComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceComponent)(core.Y36(spartacus_storefront.Lh6))},"ConfiguratorPriceComponent_Factory"),ConfiguratorPriceComponent.\u0275cmp=core.Xpm({type:ConfiguratorPriceComponent,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorPriceComponent_ng_container_0_Template,3,2,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayFormula())},"ConfiguratorPriceComponent_Template"),dependencies:[common.mk,common.O5,spartacus_core.X$D,spartacus_core.bOD],encapsulation:2,changeDetection:0});class ConfiguratorAttributeProductCardComponent extends ConfiguratorAttributeBaseComponent{constructor(productService,keyBoardFocus,translation){super(),this.productService=productService,this.keyBoardFocus=keyBoardFocus,this.translation=translation,this.loading$=new BehaviorSubject.X(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new core.vpe,this.handleQuantity=new core.vpe,this.handleSelect=new core.vpe,this.iconType=spartacus_storefront.e1G}ngOnInit(){this.loading$.next(!0);const productSystemId=this.productCardOptions.productBoundValue.productSystemId;this.product$=this.productService.get(productSystemId||"",spartacus_product_configurator_common.ns.CONFIGURATOR_PRODUCT_CARD).pipe((0,map.U)(respProduct=>respProduct||this.transformToProductType(this.productCardOptions.productBoundValue)),(0,tap.b)(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get attributeName(){return this.productCardOptions.attributeName||this.productCardOptions.attributeId.toString()}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton?this.showDeselectionNotPossibleMessage():(this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode))}onChangeQuantity(eventObject){eventObject?this.onHandleQuantity(eventObject):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){const quantityFromOptions=this.productCardOptions.productBoundValue.quantity,mergedLoading=this.productCardOptions.loading$?(0,combineLatest.aj)([this.loading$,this.productCardOptions.loading$]).pipe((0,map.U)(values=>values[0]||values[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:quantityFromOptions||0,disableQuantityActions$:mergedLoading}}isValueCodeDefined(valueCode){return!(!valueCode||valueCode===Configurator.RetractValueCode)}transformToProductType(value){return{code:value?.productSystemId,description:value?.description,images:{},name:value?.valueDisplay}}onHandleQuantity(quantity){this.loading$.next(!0),this.handleQuantity.emit({quantity,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelSingleSelected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelSingleSelectedNoButton(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelMultiSelected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelMultiUnselected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}}__name(ConfiguratorAttributeProductCardComponent,"ConfiguratorAttributeProductCardComponent"),ConfiguratorAttributeProductCardComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeProductCardComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_storefront.K9x),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeProductCardComponent_Factory"),ConfiguratorAttributeProductCardComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeProductCardComponent,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[core.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"quantityOptions","changeQuantity"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["single",""],["class","btn btn-secondary",3,"cxFocus","click",4,"ngIf","ngIfElse"],["select",""],[1,"btn","btn-secondary",3,"cxFocus","click"],[1,"btn","btn-primary",3,"disabled","cxFocus","click"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["deselect",""],["class","btn btn-secondary",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-secondary",3,"disabled","cxFocus","click"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_Template,14,15,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.product$))},"ConfiguratorAttributeProductCardComponent_Template"),dependencies:[common.mk,common.O5,ConfiguratorShowMoreComponent,ConfiguratorAttributeQuantityComponent,spartacus_storefront.R7z,ConfiguratorPriceComponent,spartacus_storefront.RRe,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceModule{}__name(ConfiguratorPriceModule,"ConfiguratorPriceModule"),ConfiguratorPriceModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceModule)},"ConfiguratorPriceModule_Factory"),ConfiguratorPriceModule.\u0275mod=core.oAB({type:ConfiguratorPriceModule}),ConfiguratorPriceModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorShowMoreModule{}__name(ConfiguratorShowMoreModule,"ConfiguratorShowMoreModule"),ConfiguratorShowMoreModule.\u0275fac=__name(function(t){return new(t||ConfiguratorShowMoreModule)},"ConfiguratorShowMoreModule_Factory"),ConfiguratorShowMoreModule.\u0275mod=core.oAB({type:ConfiguratorShowMoreModule}),ConfiguratorShowMoreModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorAttributeQuantityModule{}__name(ConfiguratorAttributeQuantityModule,"ConfiguratorAttributeQuantityModule"),ConfiguratorAttributeQuantityModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityModule)},"ConfiguratorAttributeQuantityModule_Factory"),ConfiguratorAttributeQuantityModule.\u0275mod=core.oAB({type:ConfiguratorAttributeQuantityModule}),ConfiguratorAttributeQuantityModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{updateDebounceTime:{quantity:750,input:500},addRetractOption:!1,enableNavigationToConflict:!1}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.Td$,spartacus_storefront.oPH]});class ConfiguratorAttributeProductCardModule{}__name(ConfiguratorAttributeProductCardModule,"ConfiguratorAttributeProductCardModule"),ConfiguratorAttributeProductCardModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeProductCardModule)},"ConfiguratorAttributeProductCardModule_Factory"),ConfiguratorAttributeProductCardModule.\u0275mod=core.oAB({type:ConfiguratorAttributeProductCardModule}),ConfiguratorAttributeProductCardModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorShowMoreModule,ConfiguratorAttributeQuantityModule,spartacus_core.LUR,router.Bz,spartacus_core.bhT,fesm2020_forms.u5,fesm2020_forms.UX,spartacus_storefront.cOq,ConfiguratorPriceModule,spartacus_storefront.oPH,spartacus_storefront.QX1]});class ConfiguratorAttributeQuantityService{disableQuantityActions(value){return!value||"0"===value}disableQuantityActionsMultiSelection(attribute){return!(attribute.dataType!==Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL||attribute.values&&attribute.values.find(value=>value.selected)&&0!==attribute.quantity)}withQuantityOnAttributeLevel(attribute){return attribute.dataType===Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(dataType,uiType){switch(uiType){case Configurator.UiType.DROPDOWN_PRODUCT:case Configurator.UiType.DROPDOWN:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.RADIOBUTTON:return dataType===Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:return dataType===Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(attribute){const selectedValues=attribute.values?attribute.values.filter(value=>value.selected).length:0;return!(attribute.required&&selectedValues<2)}}__name(ConfiguratorAttributeQuantityService,"ConfiguratorAttributeQuantityService"),ConfiguratorAttributeQuantityService.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityService)},"ConfiguratorAttributeQuantityService_Factory"),ConfiguratorAttributeQuantityService.\u0275prov=core.Yz7({token:ConfiguratorAttributeQuantityService,factory:ConfiguratorAttributeQuantityService.\u0275fac,providedIn:"root"});class ConfiguratorAttributeSingleSelectionBaseComponent extends ConfiguratorAttributeBaseComponent{constructor(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService){super(),this.quantityService=quantityService,this.translation=translation,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.loading$=new BehaviorSubject.X(!1),this.showRequiredErrorMessage$=(0,of.of)(!1),this.attribute=attributeComponentContext.attribute,this.ownerKey=attributeComponentContext.owner.key,this.ownerType=attributeComponentContext.owner.type,this.language=attributeComponentContext.language,this.expMode=attributeComponentContext.expMode,this.configuratorStorefrontUtilsService&&(this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(attributeComponentContext.owner,attributeComponentContext.group.id).pipe((0,map.U)(result=>result&&this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)||!1)))}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??Configurator.DataType.NOT_IMPLEMENTED,this.attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(value){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,selectedSingleValue:value},Configurator.UpdateType.ATTRIBUTE)}onSelectAdditionalValue(event){const userInput=event.changedAttribute.userInput;userInput&&(this.loading$.next(!0),event.changedAttribute.selectedSingleValue=userInput,this.configuratorCommonsService.updateConfiguration(event.ownerKey,event.changedAttribute,Configurator.UpdateType.ATTRIBUTE))}onHandleQuantity(quantity){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,quantity},Configurator.UpdateType.ATTRIBUTE_QUANTITY)}onChangeQuantity(eventObject,form){eventObject?this.onHandleQuantity(eventObject):(form&&form.setValue("0"),this.onSelect(""))}getInitialQuantity(form){const quantity=this.attribute.quantity??0;return form?"0"!==form.value?quantity:0:this.attribute.selectedSingleValue?quantity:0}extractQuantityParameters(form){const initialQuantity=this.getInitialQuantity(form),disableQuantityActions$=this.loading$.pipe((0,map.U)(loading=>loading||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity,disableQuantityActions$}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(value){return{price:value?.valuePrice,isLightedUp:!!value&&value.selected}}getSelectedValuePrice(){return this.attribute.values?.find(value=>value.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===Configurator.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===Configurator.ValidationType.NONE}getAriaLabel(value,attribute){const ariaLabel=this.getAriaLabelWithoutAdditionalValue(value,attribute);if(this.isWithAdditionalValues(this.attribute)){return ariaLabel+" "+this.getAdditionalValueAriaLabel()}return ariaLabel}getAdditionalValueAriaLabel(){let ariaLabel="";return this.translation.translate("configurator.a11y.additionalValue").pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text),ariaLabel}getAriaLabelWithoutAdditionalValue(value,attribute){let ariaLabel="";return value.valuePrice&&0!==value.valuePrice?.value?value.valuePriceTotal&&0!==value.valuePriceTotal?.value?this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:value.valueDisplay,attribute:attribute.label,price:value.valuePriceTotal.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text):this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:value.valueDisplay,attribute:attribute.label,price:value.valuePrice.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text):this.translation.translate("configurator.a11y.selectedValueOfAttributeFull",{value:value.valueDisplay,attribute:attribute.label}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text),ariaLabel}}__name(ConfiguratorAttributeSingleSelectionBaseComponent,"ConfiguratorAttributeSingleSelectionBaseComponent"),ConfiguratorAttributeSingleSelectionBaseComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBaseComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8))},"ConfiguratorAttributeSingleSelectionBaseComponent_Factory"),ConfiguratorAttributeSingleSelectionBaseComponent.\u0275dir=core.lG2({type:ConfiguratorAttributeSingleSelectionBaseComponent,features:[core.qOj]});class ConfiguratorAttributeMultiSelectionBaseComponent extends ConfiguratorAttributeBaseComponent{constructor(quantityService,attributeComponentContext,configuratorCommonsService){super(),this.quantityService=quantityService,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.loading$=new BehaviorSubject.X(!1),this.attribute=attributeComponentContext.attribute,this.ownerKey=attributeComponentContext.owner.key,this.expMode=attributeComponentContext.expMode}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??Configurator.DataType.NOT_IMPLEMENTED,this.attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(initialQuantity,allowZero){const disableQuantityActions$=this.loading$.pipe((0,map.U)(loading=>loading||this.disableQuantityActions));return{allowZero:allowZero??!this.attribute.required,initialQuantity,disableQuantityActions$}}onHandleAttributeQuantity(quantity){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,quantity},Configurator.UpdateType.ATTRIBUTE_QUANTITY)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeMultiSelectionBaseComponent,"ConfiguratorAttributeMultiSelectionBaseComponent"),ConfiguratorAttributeMultiSelectionBaseComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionBaseComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService))},"ConfiguratorAttributeMultiSelectionBaseComponent_Factory"),ConfiguratorAttributeMultiSelectionBaseComponent.\u0275dir=core.lG2({type:ConfiguratorAttributeMultiSelectionBaseComponent,features:[core.qOj]});class ConfiguratorAttributeCheckBoxListComponent extends ConfiguratorAttributeMultiSelectionBaseComponent{constructor(configUtilsService,quantityService,attributeComponentContext,configuratorCommonsService){super(quantityService,attributeComponentContext,configuratorCommonsService),this.configUtilsService=configUtilsService,this.quantityService=quantityService,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.attributeCheckBoxForms=new Array,this.logger=(0,core.f3M)(spartacus_core.mQy),this.group=attributeComponentContext.group.id}ngOnInit(){const disabled=!this.allowZeroValueQuantity;for(const value of this.attribute.values??[]){let attributeCheckBoxForm;attributeCheckBoxForm=value.selected?new fesm2020_forms.p4({value:!0,disabled}):new fesm2020_forms.p4(!1),this.attributeCheckBoxForms.push(attributeCheckBoxForm)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(){const selectedValues=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:selectedValues},Configurator.UpdateType.ATTRIBUTE)}onChangeValueQuantity(eventObject,valueCode,formIndex){if(0===eventObject)return this.attributeCheckBoxForms[formIndex].setValue(!1),void this.onSelect();const value=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(item=>item.valueCode===valueCode);value?(value.quantity=eventObject,this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:[value]},Configurator.UpdateType.VALUE_QUANTITY)):(0,core.X6Q)()&&this.logger.warn("no value for event:",eventObject)}onChangeQuantity(eventObject){eventObject?this.onHandleAttributeQuantity(eventObject):(this.attributeCheckBoxForms.forEach((_,index)=>this.attributeCheckBoxForms[index].setValue(!1)),this.onSelect())}}__name(ConfiguratorAttributeCheckBoxListComponent,"ConfiguratorAttributeCheckBoxListComponent"),ConfiguratorAttributeCheckBoxListComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckBoxListComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorAttributeQuantityService),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService))},"ConfiguratorAttributeCheckBoxListComponent_Factory"),ConfiguratorAttributeCheckBoxListComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeCheckBoxListComponent,selectors:[["cx-configurator-attribute-checkbox-list"]],features:[core.qOj],decls:6,vars:4,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","cxFocus","value","formControl","name","change"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"fieldset")(1,"legend",0),core._uU(2),core.qZA(),core.TgZ(3,"div",1),core.YNc(4,ConfiguratorAttributeCheckBoxListComponent_div_4_Template,3,2,"div",2),core.YNc(5,ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template,12,34,"ng-container",3),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(ctx.attribute.label),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngIf",ctx.withQuantityOnAttributeLevel),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeCheckBoxListComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeCheckboxListModule{}__name(ConfiguratorAttributeCheckboxListModule,"ConfiguratorAttributeCheckboxListModule"),ConfiguratorAttributeCheckboxListModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckboxListModule)},"ConfiguratorAttributeCheckboxListModule_Factory"),ConfiguratorAttributeCheckboxListModule.\u0275mod=core.oAB({type:ConfiguratorAttributeCheckboxListModule}),ConfiguratorAttributeCheckboxListModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_checkBoxList:ConfiguratorAttributeCheckBoxListComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule]});class ConfiguratorAttributeCheckBoxComponent extends ConfiguratorAttributeBaseComponent{constructor(attributeComponentContext,configuratorCommonsService){super(),this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.attributeCheckBoxForm=new fesm2020_forms.p4(""),this.attribute=attributeComponentContext.attribute,this.group=attributeComponentContext.group.id,this.ownerKey=attributeComponentContext.owner.key,this.expMode=attributeComponentContext.expMode}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue),this.attributeValue=this.getValueFromAttribute()}onSelect(){const selectedValues=this.assembleSingleValue();this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:selectedValues},Configurator.UpdateType.ATTRIBUTE)}getValueFromAttribute(){return this.attribute.values?this.attribute.values[0]:{valueCode:""}}assembleSingleValue(){const localAssembledValues=[],value=this.getValueFromAttribute(),localAttributeValue={valueCode:value.valueCode};return localAttributeValue.name=value.name,localAttributeValue.selected=this.attributeCheckBoxForm.value,localAssembledValues.push(localAttributeValue),localAssembledValues}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeCheckBoxComponent,"ConfiguratorAttributeCheckBoxComponent"),ConfiguratorAttributeCheckBoxComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckBoxComponent)(core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService))},"ConfiguratorAttributeCheckBoxComponent_Factory"),ConfiguratorAttributeCheckBoxComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeCheckBoxComponent,selectors:[["cx-configurator-attribute-checkbox"]],features:[core.qOj],decls:14,vars:28,consts:[[2,"display","none"],[3,"id"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","value","cxFocus","formControl","name","change"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"formula"]],template:__name(function(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"fieldset")(2,"legend",0),core._uU(3),core.qZA(),core.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"input",4),core.NdJ("change",__name(function(){return ctx.onSelect()},"ConfiguratorAttributeCheckBoxComponent_Template_input_change_7_listener")),core.ALo(8,"cxTranslate"),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"label",5),core._uU(11),core.qZA()(),core.TgZ(12,"div",6),core._UZ(13,"cx-configurator-price",7),core.qZA()()()(),core.BQk()),2&rf&&(core.xp6(3),core.Oqu(ctx.attribute.label),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(3),core.s9C("id",ctx.createAttributeValueIdForConfigurator(ctx.attribute,ctx.attributeValue.valueCode)),core.s9C("name",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.Q6J("value",ctx.attributeValue.valueCode)("cxFocus",core.VKq(19,_c4,ctx.attribute.name+"-"+ctx.attributeValue.name))("formControl",ctx.attributeCheckBoxForm),core.uIk("aria-label",ctx.attributeValue.valuePrice&&0!==(null==ctx.attributeValue.valuePrice?null:ctx.attributeValue.valuePrice.value)?core.xi3(8,13,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(21,_c5,ctx.attributeValue.valueDisplay,ctx.attribute.label,ctx.attributeValue.valuePrice.formattedValue)):core.xi3(9,16,"configurator.a11y.valueOfAttributeFull",core.WLB(25,_c6,ctx.attributeValue.valueDisplay,ctx.attribute.label)))("aria-describedby",ctx.createAttributeUiKey("label",ctx.attribute.name)+" "+ctx.createAttributeUiKey("attribute-msg",ctx.attribute.name)),core.xp6(3),core.s9C("id",ctx.createValueUiKey("label",ctx.attribute.name,ctx.attributeValue.valueCode)),core.s9C("for",ctx.createAttributeValueIdForConfigurator(ctx.attribute,ctx.attributeValue.valueCode)),core.xp6(1),core.Oqu(ctx.getLabel(ctx.expMode,ctx.attributeValue.valueDisplay,ctx.attributeValue.valueCode)),core.xp6(2),core.Q6J("formula",ctx.extractValuePriceFormulaParameters(ctx.attributeValue)))},"ConfiguratorAttributeCheckBoxComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeCheckboxModule{}__name(ConfiguratorAttributeCheckboxModule,"ConfiguratorAttributeCheckboxModule"),ConfiguratorAttributeCheckboxModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckboxModule)},"ConfiguratorAttributeCheckboxModule_Factory"),ConfiguratorAttributeCheckboxModule.\u0275mod=core.oAB({type:ConfiguratorAttributeCheckboxModule}),ConfiguratorAttributeCheckboxModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_checkBox:ConfiguratorAttributeCheckBoxComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorAttributeInputFieldComponent extends ConfiguratorAttributeBaseComponent{constructor(config,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService){super(),this.config=config,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.attributeInputForm=new fesm2020_forms.p4(""),this.showRequiredErrorMessage$=(0,of.of)(!1),this.FALLBACK_DEBOUNCE_TIME=500,this.attribute=attributeComponentContext.attribute,this.group=attributeComponentContext.group.id,this.owner=attributeComponentContext.owner,this.ownerKey=attributeComponentContext.owner.key,this.ownerType=attributeComponentContext.owner.type,this.configuratorStorefrontUtilsService&&(this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(this.owner,this.group).pipe((0,map.U)(result=>!!result&&(this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute)))))}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}onChange(){this.attributeInputForm.invalid||this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,userInput:this.attributeInputForm.value,selectedSingleValue:this.attributeInputForm.value},Configurator.UpdateType.ATTRIBUTE)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isUserInputEmpty(){return!this.attribute.userInput||0===this.attribute.userInput.trim().length}get isRequired(){return!!this.isUserInput(this.attribute)&&(this.attribute.required??!1)}}__name(ConfiguratorAttributeInputFieldComponent,"ConfiguratorAttributeInputFieldComponent"),ConfiguratorAttributeInputFieldComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeInputFieldComponent)(core.Y36(ConfiguratorUISettingsConfig),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8))},"ConfiguratorAttributeInputFieldComponent_Factory"),ConfiguratorAttributeInputFieldComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeInputFieldComponent,selectors:[["cx-configurator-attribute-input-field"]],features:[core.qOj],decls:3,vars:3,consts:[[1,"form-group",3,"id"],[4,"cxFeatureLevel"],[1,"form-control",3,"formControl","required","maxlength","cxFocus"],[1,"form-control",3,"formControl","ngClass","maxlength","cxFocus"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorAttributeInputFieldComponent_ng_container_1_Template,4,20,"ng-container",1),core.YNc(2,ConfiguratorAttributeInputFieldComponent_ng_container_2_Template,5,25,"ng-container",1),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2"))},"ConfiguratorAttributeInputFieldComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.nD,fesm2020_forms.oH,common.mk,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeNumericInputFieldService{performValidationAccordingToMetaData(input,groupingSeparator,decimalSeparator,numberTotalPlaces,numberDecimalPlaces){const search=new RegExp("\\"+groupingSeparator,"g"),woGrouping=input.replace(search,""),splitParts=woGrouping.split(decimalSeparator);return splitParts.length>2||(1===splitParts.length?woGrouping.length>numberTotalPlaces-numberDecimalPlaces:splitParts[0].length>numberTotalPlaces-numberDecimalPlaces||splitParts[1].length>numberDecimalPlaces)}formatIntervalValue(intervalValue,decimalPlaces,locale){return void 0===decimalPlaces&&(decimalPlaces=0),(0,common.uf)(intervalValue,locale,"1."+decimalPlaces+"-"+decimalPlaces)}getIntervals(values){const intervals=[];return values&&values.length>0&&values.forEach(value=>{const interval=this.getInterval(value);interval&&0!==Object.keys(interval).length&&intervals.push(interval)}),intervals}getInterval(value){const interval={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!value||!value.name||value.selected)return;let minVal,maxVal;return value.name.includes(" - ")?({minVal,maxVal}=this.handleStandardInterval(value.name,interval)):({minVal,maxVal}=this.handleSingleOrInfinite(value.name,interval)),minVal&&minVal.length>0&&(interval.minValue=+minVal),maxVal&&maxVal.length>0&&(interval.maxValue=+maxVal),interval}handleSingleOrInfinite(valueName,interval){let minVal="",maxVal="";return valueName.includes(">")&&(minVal=valueName,interval.minValueIncluded=!1,minVal=minVal.replace(">","")),valueName.includes("<")&&(maxVal=valueName,interval.maxValueIncluded=!1,maxVal=maxVal.replace("<","")),valueName.includes("\u2265")&&(minVal=valueName,interval.minValueIncluded=!0,minVal=minVal.replace("\u2265","")),valueName.includes("\u2264")&&(maxVal=valueName,interval.maxValueIncluded=!0,maxVal=maxVal.replace("\u2264","")),!valueName.includes(">")&&!valueName.includes("<")&&!valueName.includes("\u2264")&&!valueName.includes("\u2265")&&(minVal=valueName,maxVal=valueName,interval.maxValueIncluded=!0,interval.minValueIncluded=!0),{minVal,maxVal}}handleStandardInterval(valueName,interval){const index=valueName.indexOf(" - ");let minVal=valueName.substring(0,index),maxVal=valueName.substring(index+3,valueName.length);return interval.minValueIncluded=!0,interval.maxValueIncluded=!0,minVal.includes(">")&&(interval.minValueIncluded=!1,minVal=minVal.replace(">","")),maxVal.includes("<")&&(interval.maxValueIncluded=!1,maxVal=maxVal.replace("<","")),{minVal,maxVal}}getPatternForValidationMessage(decimalPlaces,totalLength,negativeAllowed,locale){let input=(10**totalLength-1).toString();decimalPlaces>0&&(input=input.substring(0,totalLength-decimalPlaces)+"."+input.substring(totalLength-decimalPlaces,totalLength));const inputAsNumber=Number(input);let formatted=(0,common.uf)(inputAsNumber,locale,"1."+decimalPlaces+"-"+decimalPlaces).replace(/9/g,"#");return negativeAllowed&&(formatted="-"+formatted),formatted}getNumberFormatValidator(locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed){return control=>{const input=control.value?.trim();return input?this.getValidationErrorsNumericFormat(input,locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed):null}}getValidationErrorsNumericFormat(input,locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed){const groupingSeparator=(0,common.dv)(locale,common.wE.Group),decimalSeparator=(0,common.dv)(locale,common.wE.Decimal);return new RegExp((negativeAllowed?"^-?":"^")+"[0123456789"+groupingSeparator+decimalSeparator+"]*$").test(input)?this.createValidationError(this.performValidationAccordingToMetaData(input,groupingSeparator,decimalSeparator,numberTotalPlaces+(input.includes("-")?1:0),numberDecimalPlaces)):this.createValidationError(!0)}getIntervalValidator(locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed,intervals,currentValue){return control=>{const input=control.value?.trim();return input&&input!==currentValue&&0!==intervals.length&&null==this.getValidationErrorsNumericFormat(input,locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed)?this.createIntervalValidationError(!this.checkIfPartOfIntervals(input,locale,intervals)):null}}checkIfPartOfIntervals(input,locale,intervals){return void 0!==intervals.find(interval=>this.inputMatchesInterval(input,locale,interval))}inputMatchesInterval(input,locale,interval){const inputNum=this.parseInput(input,locale);let matchesLower=!0;interval.minValue&&(matchesLower=interval.minValueIncluded?interval.minValue<=inputNum:interval.minValue<inputNum);let matchesHigher=!0;return interval.maxValue&&(matchesHigher=interval.maxValueIncluded?interval.maxValue>=inputNum:interval.maxValue>inputNum),matchesLower&&matchesHigher}parseInput(input,locale){const groupingSeparator=(0,common.dv)(locale,common.wE.Group),decimalSeparator=(0,common.dv)(locale,common.wE.Decimal);return this.parseInputForSeparators(input,groupingSeparator,decimalSeparator)}parseInputForSeparators(input,groupingSeparator,decimalSeparator){const search=new RegExp("\\"+groupingSeparator,"g"),normalizedInput=input.replace(search,"").replace(decimalSeparator,".");return parseFloat(normalizedInput)}createValidationError(isError){return isError?{wrongFormat:{}}:null}createIntervalValidationError(isError){return isError?{intervalNotMet:{}}:null}}__name(ConfiguratorAttributeNumericInputFieldService,"ConfiguratorAttributeNumericInputFieldService"),ConfiguratorAttributeNumericInputFieldService.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldService)},"ConfiguratorAttributeNumericInputFieldService_Factory"),ConfiguratorAttributeNumericInputFieldService.\u0275prov=core.Yz7({token:ConfiguratorAttributeNumericInputFieldService,factory:ConfiguratorAttributeNumericInputFieldService.\u0275fac,providedIn:"root"});__name(class DefaultSettings{},"DefaultSettings");class ConfiguratorAttributeNumericInputFieldComponent extends ConfiguratorAttributeInputFieldComponent{constructor(configAttributeNumericInputFieldService,config,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService,featureConfigService){super(config,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService),this.configAttributeNumericInputFieldService=configAttributeNumericInputFieldService,this.config=config,this.translation=translation,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.featureConfigService=featureConfigService,this.iconType=spartacus_storefront.e1G,this.intervals=[],this.logger=(0,core.f3M)(spartacus_core.mQy),this.language=attributeComponentContext.language}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}mustDisplayIntervalMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.intervalNotMet}ngOnInit(){this.initializeValidation(),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}initializeValidation(){this.locale=this.getInstalledLocale(this.language);let numDecimalPlaces=this.attribute.numDecimalPlaces,numTotalLength=this.attribute.numTotalLength,negativeAllowed=this.attribute.negativeAllowed;if(void 0===numDecimalPlaces||void 0===numTotalLength||void 0===negativeAllowed){const defaultSettings=this.getDefaultSettings();numDecimalPlaces=defaultSettings.numDecimalPlaces,numTotalLength=defaultSettings.numTotalLength,negativeAllowed=defaultSettings.negativeAllowed,(0,core.X6Q)()&&this.logger.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values));const numberFormatValidator=this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,numDecimalPlaces,numTotalLength,negativeAllowed),validatorArray=this.featureConfigService?.isLevel("6.2")?[numberFormatValidator,this.configAttributeNumericInputFieldService.getIntervalValidator(this.locale,numDecimalPlaces,numTotalLength,negativeAllowed,this.intervals,this.attribute.userInput)]:[numberFormatValidator];this.attributeInputForm=new fesm2020_forms.p4("",validatorArray),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(numDecimalPlaces,numTotalLength,negativeAllowed,this.locale)}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let intervalText="",concatenatedIntervalText="";return this.intervals.forEach((interval,index)=>{intervalText=this.getIntervalText(interval),index>0?(intervalText=intervalText.charAt(0).toLowerCase()+intervalText.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:concatenatedIntervalText,newInterval:intervalText}).pipe((0,take.q)(1)).subscribe(text=>concatenatedIntervalText=text)):concatenatedIntervalText=intervalText}),concatenatedIntervalText.trim()}getAriaLabelComplete(){let completeAriaText="";return 0===this.attribute.userInput?.length?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe((0,take.q)(1)).subscribe(text=>completeAriaText=text):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe((0,take.q)(1)).subscribe(text=>completeAriaText=text),completeAriaText+=" ",completeAriaText+=this.getHelpTextForInterval(),completeAriaText}getIntervalText(interval){let intervalText="",formattedMinValue="",formattedMaxValue="";if(interval.minValue&&(formattedMinValue=this.configAttributeNumericInputFieldService.formatIntervalValue(interval.minValue,this.attribute.numDecimalPlaces,this.locale)),interval.maxValue&&(formattedMaxValue=this.configAttributeNumericInputFieldService.formatIntervalValue(interval.maxValue,this.attribute.numDecimalPlaces,this.locale)),interval.minValue&&interval.maxValue){if(interval.minValue===interval.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:formattedMinValue}).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText;intervalText=this.getTextForRealInterval(formattedMinValue,formattedMaxValue,intervalText,interval)}else intervalText=this.getTextForPartialInterval(interval,intervalText,formattedMinValue,formattedMaxValue);return intervalText}getTextForPartialInterval(interval,intervalText,formattedMinValue,formattedMaxValue){return interval.minValue?intervalText=interval.minValueIncluded?this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValueIncluded",formattedMinValue):this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValue",formattedMinValue):interval.maxValue&&(intervalText=interval.maxValueIncluded?this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValueIncluded",formattedMaxValue):this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValue",formattedMaxValue)),intervalText}getTextForRealInterval(formattedMinValue,formattedMaxValue,intervalText,interval){let textToReturn=intervalText;return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:formattedMinValue,maxValue:formattedMaxValue}).pipe((0,take.q)(1)).subscribe(text=>textToReturn=text),(!interval.minValueIncluded||!interval.maxValueIncluded)&&(interval.minValueIncluded||interval.maxValueIncluded?(interval.minValueIncluded||(textToReturn+=" ",textToReturn+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),interval.maxValueIncluded||(textToReturn+=" ",textToReturn+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded"))):(textToReturn+=" ",textToReturn+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen"))),textToReturn}getAdditionalIntervalText(key){let intervalText="";return this.translation.translate(key).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText}getInfiniteIntervalText(key,value){let intervalText="";return this.translation.translate(key,{value}).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(locale){try{return(0,common.wM)(locale),locale}catch{return this.reportMissingLocaleData(locale),"en"}}reportMissingLocaleData(lang){(0,core.X6Q)()&&this.logger.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${lang}' (see https://angular.io/api/common/registerLocaleData).`)}}__name(ConfiguratorAttributeNumericInputFieldComponent,"ConfiguratorAttributeNumericInputFieldComponent"),ConfiguratorAttributeNumericInputFieldComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldComponent)(core.Y36(ConfiguratorAttributeNumericInputFieldService),core.Y36(ConfiguratorUISettingsConfig),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8),core.Y36(spartacus_core.Ru9,8))},"ConfiguratorAttributeNumericInputFieldComponent_Factory"),ConfiguratorAttributeNumericInputFieldComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeNumericInputFieldComponent,selectors:[["cx-configurator-attribute-numeric-input-field"]],features:[core.qOj],decls:6,vars:6,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[4,"cxFeatureLevel"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],[1,"form-control",3,"formControl","required","maxlength","cxFocus","change"],[1,"form-control",3,"formControl","ngClass","maxlength","cxFocus","change"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeNumericInputFieldComponent_label_0_Template,2,1,"label",0),core.TgZ(1,"div",1),core.YNc(2,ConfiguratorAttributeNumericInputFieldComponent_ng_container_2_Template,2,10,"ng-container",2),core.YNc(3,ConfiguratorAttributeNumericInputFieldComponent_ng_container_3_Template,3,16,"ng-container",2),core.qZA(),core.YNc(4,ConfiguratorAttributeNumericInputFieldComponent_div_4_Template,3,3,"div",3),core.YNc(5,ConfiguratorAttributeNumericInputFieldComponent_div_5_Template,4,5,"div",3)),2&rf&&(core.Q6J("ngIf",ctx.attribute.intervalInDomain),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("cxFeatureLevel","!6.2"),core.xp6(1),core.Q6J("cxFeatureLevel","6.2"),core.xp6(1),core.Q6J("ngIf",ctx.mustDisplayValidationMessage()),core.xp6(1),core.Q6J("ngIf",ctx.mustDisplayIntervalMessage()))},"ConfiguratorAttributeNumericInputFieldComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.nD,fesm2020_forms.oH,common.mk,common.O5,spartacus_storefront.oJW,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeDropDownComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService){super(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService),this.quantityService=quantityService,this.translation=translation,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.attributeDropDownForm=new fesm2020_forms.p4(""),this.group=attributeComponentContext.group.id}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(value=>value?.selected)}}__name(ConfiguratorAttributeDropDownComponent,"ConfiguratorAttributeDropDownComponent"),ConfiguratorAttributeDropDownComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeDropDownComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8))},"ConfiguratorAttributeDropDownComponent_Factory"),ConfiguratorAttributeDropDownComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeDropDownComponent,selectors:[["cx-configurator-attribute-drop-down"]],features:[core.qOj],decls:4,vars:4,consts:[["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[4,"cxFeatureLevel"],["class","cx-value-price",4,"ngIf"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"selected","label","value",4,"ngFor","ngForOf"],[3,"selected","label","value"],[1,"form-control",3,"id","ngClass","formControl","cxFocus","change"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[1,"cx-configurator-attribute-additional-value"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeDropDownComponent_div_0_Template,7,10,"div",0),core.YNc(1,ConfiguratorAttributeDropDownComponent_div_1_Template,3,2,"div",1),core.YNc(2,ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template,2,3,"cx-configurator-attribute-numeric-input-field",2),core.YNc(3,ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template,2,3,"cx-configurator-attribute-input-field",2)),2&rf&&(core.Q6J("ngIf",ctx.attribute.values&&0!==ctx.attribute.values.length),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueNumeric),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueAlphaNumeric))},"ConfiguratorAttributeDropDownComponent_Template"),dependencies:[common.mk,common.sg,common.O5,ConfiguratorAttributeQuantityComponent,fesm2020_forms.YN,fesm2020_forms.Kr,fesm2020_forms.EJ,fesm2020_forms.JJ,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorPriceComponent,ConfiguratorAttributeNumericInputFieldComponent,ConfiguratorAttributeInputFieldComponent,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeNumericInputFieldModule{}__name(ConfiguratorAttributeNumericInputFieldModule,"ConfiguratorAttributeNumericInputFieldModule"),ConfiguratorAttributeNumericInputFieldModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldModule)},"ConfiguratorAttributeNumericInputFieldModule_Factory"),ConfiguratorAttributeNumericInputFieldModule.\u0275mod=core.oAB({type:ConfiguratorAttributeNumericInputFieldModule}),ConfiguratorAttributeNumericInputFieldModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_numeric:ConfiguratorAttributeNumericInputFieldComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_core.GSh]});class ConfiguratorAttributeInputFieldModule{}__name(ConfiguratorAttributeInputFieldModule,"ConfiguratorAttributeInputFieldModule"),ConfiguratorAttributeInputFieldModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeInputFieldModule)},"ConfiguratorAttributeInputFieldModule_Factory"),ConfiguratorAttributeInputFieldModule.\u0275mod=core.oAB({type:ConfiguratorAttributeInputFieldModule}),ConfiguratorAttributeInputFieldModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_string:ConfiguratorAttributeInputFieldComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_core.GSh]});class ConfiguratorAttributeDropDownModule{}__name(ConfiguratorAttributeDropDownModule,"ConfiguratorAttributeDropDownModule"),ConfiguratorAttributeDropDownModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeDropDownModule)},"ConfiguratorAttributeDropDownModule_Factory"),ConfiguratorAttributeDropDownModule.\u0275mod=core.oAB({type:ConfiguratorAttributeDropDownModule}),ConfiguratorAttributeDropDownModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_dropdown:ConfiguratorAttributeDropDownComponent,AttributeType_dropdown_add:ConfiguratorAttributeDropDownComponent}}})],imports:[common.ez,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,ng_select_ng_select.A0,fesm2020_forms.UX,ConfiguratorPriceModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeInputFieldModule,spartacus_core.GSh]});class ConfiguratorAttributeMultiSelectionBundleComponent extends ConfiguratorAttributeMultiSelectionBaseComponent{constructor(){super(...arguments),this.preventAction$=new BehaviorSubject.X(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name,quantity,selected,valueCode})=>({name,quantity,selected,valueCode}))),this.attribute.required&&this.multipleSelectionValues.filter(value=>value.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(valueCode,state){const index=this.multipleSelectionValues.findIndex(value=>value.valueCode===valueCode);return this.multipleSelectionValues[index]={...this.multipleSelectionValues[index],selected:state},{changedAttribute:{...this.attribute,values:this.multipleSelectionValues},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(eventValue){const value=this.multipleSelectionValues.find(selectionValue=>selectionValue.valueCode===eventValue.valueCode);return value?(value.quantity=eventValue.quantity,{changedAttribute:{...this.attribute,values:[value]},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.VALUE_QUANTITY}):void 0}onSelect(eventValue){this.loading$.next(!0);const changes=this.updateMultipleSelectionValues(eventValue,!0);this.configuratorCommonsService.updateConfiguration(changes.ownerKey,changes.changedAttribute,changes.updateType)}onDeselect(eventValue){this.loading$.next(!0);const changes=this.updateMultipleSelectionValues(eventValue,!1);this.configuratorCommonsService.updateConfiguration(changes.ownerKey,changes.changedAttribute,changes.updateType)}onDeselectAll(){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:[]},Configurator.UpdateType.ATTRIBUTE)}onChangeValueQuantity(eventValue){this.loading$.next(!0);const changes=this.updateMultipleSelectionValuesQuantity(eventValue);changes&&this.configuratorCommonsService.updateConfiguration(changes.ownerKey,changes.changedAttribute,changes.updateType)}onChangeAttributeQuantity(eventObject){this.loading$.next(!0),eventObject?this.onHandleAttributeQuantity(eventObject):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(disableAllButtons,hideRemoveButton,value,index){return{disableAllButtons:disableAllButtons??!1,hideRemoveButton:hideRemoveButton??!1,productBoundValue:value,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:index}}}__name(ConfiguratorAttributeMultiSelectionBundleComponent,"ConfiguratorAttributeMultiSelectionBundleComponent"),ConfiguratorAttributeMultiSelectionBundleComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory||(\u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory=core.n5z(ConfiguratorAttributeMultiSelectionBundleComponent)))(t||ConfiguratorAttributeMultiSelectionBundleComponent)},"ConfiguratorAttributeMultiSelectionBundleComponent_Factory")}(),ConfiguratorAttributeMultiSelectionBundleComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeMultiSelectionBundleComponent,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[core.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template,3,3,"div",0),2&rf&&core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length)},"ConfiguratorAttributeMultiSelectionBundleComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeProductCardComponent,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,common.Ov],encapsulation:2,changeDetection:0});class ConfiguratorAttributeMultiSelectionBundleModule{}__name(ConfiguratorAttributeMultiSelectionBundleModule,"ConfiguratorAttributeMultiSelectionBundleModule"),ConfiguratorAttributeMultiSelectionBundleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionBundleModule)},"ConfiguratorAttributeMultiSelectionBundleModule_Factory"),ConfiguratorAttributeMultiSelectionBundleModule.\u0275mod=core.oAB({type:ConfiguratorAttributeMultiSelectionBundleModule}),ConfiguratorAttributeMultiSelectionBundleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_checkBoxListProduct:ConfiguratorAttributeMultiSelectionBundleComponent}}})],imports:[common.ez,ConfiguratorAttributeProductCardModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule]});class ConfiguratorAttributeMultiSelectionImageComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtilsService,attributeComponentContext,configuratorCommonsService){super(),this.configUtilsService=configUtilsService,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.attributeCheckBoxForms=new Array,this.attribute=attributeComponentContext.attribute,this.ownerKey=attributeComponentContext.owner.key,this.expMode=attributeComponentContext.expMode}ngOnInit(){const values=this.attribute.values;if(values)for(const value of values){let attributeCheckBoxForm;attributeCheckBoxForm=value.selected?new fesm2020_forms.p4(!0):new fesm2020_forms.p4(!1),this.attributeCheckBoxForms.push(attributeCheckBoxForm)}}onSelect(index){this.attributeCheckBoxForms[index].setValue(!this.attributeCheckBoxForms[index].value);const selectedValues=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:selectedValues},Configurator.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeMultiSelectionImageComponent,"ConfiguratorAttributeMultiSelectionImageComponent"),ConfiguratorAttributeMultiSelectionImageComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionImageComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService))},"ConfiguratorAttributeMultiSelectionImageComponent_Factory"),ConfiguratorAttributeMultiSelectionImageComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeMultiSelectionImageComponent,selectors:[["cx-configurator-attribute-multi-selection-image"]],features:[core.qOj],decls:2,vars:2,consts:[[1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template,10,30,"div",1),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeMultiSelectionImageComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeMultiSelectionImageModule{}__name(ConfiguratorAttributeMultiSelectionImageModule,"ConfiguratorAttributeMultiSelectionImageModule"),ConfiguratorAttributeMultiSelectionImageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionImageModule)},"ConfiguratorAttributeMultiSelectionImageModule_Factory"),ConfiguratorAttributeMultiSelectionImageModule.\u0275mod=core.oAB({type:ConfiguratorAttributeMultiSelectionImageModule}),ConfiguratorAttributeMultiSelectionImageModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_multi_selection_image:ConfiguratorAttributeMultiSelectionImageComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorAttributeNotSupportedComponent{}__name(ConfiguratorAttributeNotSupportedComponent,"ConfiguratorAttributeNotSupportedComponent"),ConfiguratorAttributeNotSupportedComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNotSupportedComponent)},"ConfiguratorAttributeNotSupportedComponent_Factory"),ConfiguratorAttributeNotSupportedComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeNotSupportedComponent,selectors:[["cx-configurator-attribute-not-supported"]],decls:3,vars:3,template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"em"),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.Oqu(core.lcZ(2,1,"configurator.attribute.notSupported")))},"ConfiguratorAttributeNotSupportedComponent_Template"),dependencies:[spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeNotSupportedModule{}__name(ConfiguratorAttributeNotSupportedModule,"ConfiguratorAttributeNotSupportedModule"),ConfiguratorAttributeNotSupportedModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNotSupportedModule)},"ConfiguratorAttributeNotSupportedModule_Factory"),ConfiguratorAttributeNotSupportedModule.\u0275mod=core.oAB({type:ConfiguratorAttributeNotSupportedModule}),ConfiguratorAttributeNotSupportedModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_not_implemented:ConfiguratorAttributeNotSupportedComponent}}})],imports:[common.ez,spartacus_core.LUR]});class ConfiguratorAttributeRadioButtonComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService){super(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService),this.quantityService=quantityService,this.translation=translation,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.attributeRadioButtonForm=new fesm2020_forms.p4("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}}__name(ConfiguratorAttributeRadioButtonComponent,"ConfiguratorAttributeRadioButtonComponent"),ConfiguratorAttributeRadioButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeRadioButtonComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8))},"ConfiguratorAttributeRadioButtonComponent_Factory"),ConfiguratorAttributeRadioButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeRadioButtonComponent,selectors:[["cx-configurator-attribute-radio-button"]],features:[core.qOj],decls:8,vars:6,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","form-check",4,"ngFor","ngForOf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"id","formControl","value","name","cxFocus","change"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[1,"cx-value-price"],[1,"cx-configurator-attribute-additional-value"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"fieldset")(1,"legend",0),core._uU(2),core.qZA(),core.TgZ(3,"div",1),core.YNc(4,ConfiguratorAttributeRadioButtonComponent_div_4_Template,3,2,"div",2),core.YNc(5,ConfiguratorAttributeRadioButtonComponent_div_5_Template,7,16,"div",3),core.YNc(6,ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template,1,0,"cx-configurator-attribute-numeric-input-field",4),core.YNc(7,ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template,1,0,"cx-configurator-attribute-input-field",4),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(ctx.attribute.label),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueNumeric),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueAlphaNumeric))},"ConfiguratorAttributeRadioButtonComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeQuantityComponent,fesm2020_forms.Fj,fesm2020_forms._,fesm2020_forms.JJ,fesm2020_forms.Q7,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorPriceComponent,ConfiguratorAttributeNumericInputFieldComponent,ConfiguratorAttributeInputFieldComponent],encapsulation:2,changeDetection:0});class ConfiguratorAttributeRadioButtonModule{}__name(ConfiguratorAttributeRadioButtonModule,"ConfiguratorAttributeRadioButtonModule"),ConfiguratorAttributeRadioButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeRadioButtonModule)},"ConfiguratorAttributeRadioButtonModule_Factory"),ConfiguratorAttributeRadioButtonModule.\u0275mod=core.oAB({type:ConfiguratorAttributeRadioButtonModule}),ConfiguratorAttributeRadioButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_radioGroup:ConfiguratorAttributeRadioButtonComponent,AttributeType_radioGroup_add:ConfiguratorAttributeRadioButtonComponent}}})],imports:[common.ez,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,fesm2020_forms.UX,ConfiguratorPriceModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeInputFieldModule]});class ConfiguratorAttributeReadOnlyComponent extends ConfiguratorAttributeBaseComponent{constructor(translationService,attributeComponentContext){super(),this.translationService=translationService,this.attributeComponentContext=attributeComponentContext,this.attribute=attributeComponentContext.attribute,this.group=attributeComponentContext.group.id,this.expMode=attributeComponentContext.expMode}getCurrentValueName(attribute,value){let name="";return attribute.selectedSingleValue&&!value?name=attribute.selectedSingleValue:attribute.userInput&&!value?name=attribute.userInput:value&&value.valueDisplay&&(name=value?.valueDisplay),name}getAriaLabel(attribute,value){let ariaLabel="";if(value){const valueName=this.getCurrentValueName(attribute,value);ariaLabel=value.valuePrice&&0!==value.valuePrice?.value?value.valuePriceTotal&&0!==value.valuePriceTotal?.value?this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",valueName,attribute,value.valuePriceTotal?.formattedValue):this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",valueName,attribute,value.valuePrice?.formattedValue):this.translate("configurator.a11y.readOnlyValueOfAttributeFull",valueName,attribute)}else{const valueName=this.getCurrentValueName(attribute);ariaLabel=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",valueName,attribute)}return ariaLabel}translate(resourceKey,valueName,attribute,formattedPrice){let ariaLabel="";const options=formattedPrice?{value:valueName,attribute:attribute.label,price:formattedPrice}:{value:valueName,attribute:attribute.label};return this.translationService.translate(resourceKey,options).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text),ariaLabel}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeReadOnlyComponent,"ConfiguratorAttributeReadOnlyComponent"),ConfiguratorAttributeReadOnlyComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeReadOnlyComponent)(core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext))},"ConfiguratorAttributeReadOnlyComponent_Factory"),ConfiguratorAttributeReadOnlyComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeReadOnlyComponent,selectors:[["cx-configurator-attribute-read-only"]],features:[core.qOj],decls:5,vars:3,consts:[[3,"id"],[4,"ngIf","ngIfElse"],["noStaticDomain",""],[4,"ngFor","ngForOf"],["class","form-check",4,"ngIf"],[1,"form-check"],["tabindex","0",1,"cx-visually-hidden",3,"id"],[1,"cx-value-label-pair"],["aria-hidden","true",1,"cx-read-only-attribute-label",3,"id"],[1,"cx-value-price"],[3,"formula"],[4,"ngIf"],["aria-hidden","true",1,"cx-read-only-attribute-label"],["aria-hidden","true"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"fieldset")(1,"div",0),core.YNc(2,ConfiguratorAttributeReadOnlyComponent_ng_container_2_Template,2,1,"ng-container",1),core.YNc(3,ConfiguratorAttributeReadOnlyComponent_ng_template_3_Template,2,2,"ng-template",null,2,core.W1O),core.qZA()()),2&rf){const _r1=core.MAs(4);core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngIf",ctx.attribute.values&&ctx.attribute.values.length>0)("ngIfElse",_r1)}},"ConfiguratorAttributeReadOnlyComponent_Template"),dependencies:[ConfiguratorPriceComponent,common.sg,common.O5],encapsulation:2,changeDetection:0});class ConfiguratorAttributeReadOnlyModule{}__name(ConfiguratorAttributeReadOnlyModule,"ConfiguratorAttributeReadOnlyModule"),ConfiguratorAttributeReadOnlyModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeReadOnlyModule)},"ConfiguratorAttributeReadOnlyModule_Factory"),ConfiguratorAttributeReadOnlyModule.\u0275mod=core.oAB({type:ConfiguratorAttributeReadOnlyModule}),ConfiguratorAttributeReadOnlyModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_readonly:ConfiguratorAttributeReadOnlyComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,ConfiguratorPriceModule,common.ez,spartacus_core.LUR]});class ConfiguratorAttributeSingleSelectionBundleDropdownComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService){super(quantityService,translation,attributeComponentContext,configuratorCommonsService,configuratorStorefrontUtilsService),this.quantityService=quantityService,this.translation=translation,this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.RETRACT_VALUE_CODE=Configurator.RetractValueCode,this.attributeDropDownForm=new fesm2020_forms.p4(""),this.group=attributeComponentContext.group.id}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);const values=this.attribute.values;if(values&&values.length>0){const selectedValue=values.find(value=>value.selected);selectedValue&&(this.selectionValue=selectedValue)}}get selectedValue(){let selectedValue;if(!this.selectionValue)throw new Error("selectedValue called without a defined selectionValue");return selectedValue=this.selectionValue,selectedValue}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectedValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}isNotRetractValue(){return(this.selectionValue&&this.selectionValue?.valueCode!==Configurator.RetractValueCode)??!1}isRetractValue(valueCode){return valueCode===Configurator.RetractValueCode}}__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent"),ConfiguratorAttributeSingleSelectionBundleDropdownComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBundleDropdownComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorStorefrontUtilsService,8))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_Factory"),ConfiguratorAttributeSingleSelectionBundleDropdownComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionBundleDropdownComponent,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],features:[core.qOj],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[4,"cxFeatureLevel"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[1,"form-control",3,"id","ngClass","formControl","cxFocus","change"],[3,"id","productCardOptions","handleDeselect"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template,6,9,"div",0),core.YNc(1,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template,1,2,"cx-configurator-attribute-product-card",1),core.YNc(2,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template,3,2,"div",2)),2&rf&&(core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length),core.xp6(1),core.Q6J("ngIf",ctx.isNotRetractValue()),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_Template"),dependencies:[common.mk,common.sg,common.O5,ConfiguratorAttributeProductCardComponent,fesm2020_forms.YN,fesm2020_forms.Kr,fesm2020_forms.EJ,fesm2020_forms.JJ,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionBundleDropdownModule{}__name(ConfiguratorAttributeSingleSelectionBundleDropdownModule,"ConfiguratorAttributeSingleSelectionBundleDropdownModule"),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBundleDropdownModule)},"ConfiguratorAttributeSingleSelectionBundleDropdownModule_Factory"),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionBundleDropdownModule}),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_dropdownProduct:ConfiguratorAttributeSingleSelectionBundleDropdownComponent}}})],imports:[common.ez,ConfiguratorAttributeProductCardModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,ng_select_ng_select.A0,fesm2020_forms.UX,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule,spartacus_core.GSh]});class ConfiguratorAttributeSingleSelectionBundleComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{extractProductCardParameters(value,index){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(value),productBoundValue:value,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:index}}getFocusIdOfNearestValue(currentValue){if(!this.attribute.values)return"n/a";let prevIdx=this.attribute.values.findIndex(value=>value.valueCode===currentValue.valueCode);return prevIdx--,prevIdx<0&&(prevIdx=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[prevIdx].valueCode)}}__name(ConfiguratorAttributeSingleSelectionBundleComponent,"ConfiguratorAttributeSingleSelectionBundleComponent"),ConfiguratorAttributeSingleSelectionBundleComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory||(\u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory=core.n5z(ConfiguratorAttributeSingleSelectionBundleComponent)))(t||ConfiguratorAttributeSingleSelectionBundleComponent)},"ConfiguratorAttributeSingleSelectionBundleComponent_Factory")}(),ConfiguratorAttributeSingleSelectionBundleComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionBundleComponent,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[core.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleSelect"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template,3,3,"div",0),2&rf&&core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length)},"ConfiguratorAttributeSingleSelectionBundleComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeProductCardComponent,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionBundleModule{}__name(ConfiguratorAttributeSingleSelectionBundleModule,"ConfiguratorAttributeSingleSelectionBundleModule"),ConfiguratorAttributeSingleSelectionBundleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBundleModule)},"ConfiguratorAttributeSingleSelectionBundleModule_Factory"),ConfiguratorAttributeSingleSelectionBundleModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionBundleModule}),ConfiguratorAttributeSingleSelectionBundleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_radioGroupProduct:ConfiguratorAttributeSingleSelectionBundleComponent}}})],imports:[common.ez,ConfiguratorAttributeProductCardModule,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.Td$,spartacus_storefront.oPH,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,ConfiguratorPriceModule]});class ConfiguratorAttributeSingleSelectionImageComponent extends ConfiguratorAttributeBaseComponent{constructor(attributeComponentContext,configuratorCommonsService){super(),this.attributeComponentContext=attributeComponentContext,this.configuratorCommonsService=configuratorCommonsService,this.attributeRadioButtonForm=new fesm2020_forms.p4(""),this.attribute=attributeComponentContext.attribute,this.ownerKey=attributeComponentContext.owner.key,this.expMode=attributeComponentContext.expMode}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(value){this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,selectedSingleValue:value},Configurator.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(value){return{price:value?.valuePrice,isLightedUp:!!value&&value.selected}}}__name(ConfiguratorAttributeSingleSelectionImageComponent,"ConfiguratorAttributeSingleSelectionImageComponent"),ConfiguratorAttributeSingleSelectionImageComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionImageComponent)(core.Y36(ConfiguratorAttributeCompositionContext),core.Y36(ConfiguratorCommonsService))},"ConfiguratorAttributeSingleSelectionImageComponent_Factory"),ConfiguratorAttributeSingleSelectionImageComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionImageComponent,selectors:[["cx-configurator-attribute-single-selection-image"]],features:[core.qOj],decls:2,vars:2,consts:[["role","radiogroup",1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template,10,34,"div",1),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeSingleSelectionImageComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms._,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionImageModule{}__name(ConfiguratorAttributeSingleSelectionImageModule,"ConfiguratorAttributeSingleSelectionImageModule"),ConfiguratorAttributeSingleSelectionImageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionImageModule)},"ConfiguratorAttributeSingleSelectionImageModule_Factory"),ConfiguratorAttributeSingleSelectionImageModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionImageModule}),ConfiguratorAttributeSingleSelectionImageModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{assignment:{AttributeType_single_selection_image:ConfiguratorAttributeSingleSelectionImageComponent}}})],imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorAttributeCompositionConfig{}__name(ConfiguratorAttributeCompositionConfig,"ConfiguratorAttributeCompositionConfig"),ConfiguratorAttributeCompositionConfig.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCompositionConfig)},"ConfiguratorAttributeCompositionConfig_Factory"),ConfiguratorAttributeCompositionConfig.\u0275prov=core.Yz7({token:ConfiguratorAttributeCompositionConfig,factory:__name(function(t){let r=null;return r=t?new(t||ConfiguratorAttributeCompositionConfig):core.LFG(spartacus_core.DeH),r},"ConfiguratorAttributeCompositionConfig_Factory"),providedIn:"root"});class ConfiguratorAttributeCompositionDirective{constructor(vcr,configuratorAttributeCompositionConfig){this.vcr=vcr,this.configuratorAttributeCompositionConfig=configuratorAttributeCompositionConfig,this.logger=(0,core.f3M)(spartacus_core.mQy)}ngOnInit(){const componentKey=this.context.componentKey,composition=this.configuratorAttributeCompositionConfig.productConfigurator?.assignment;composition&&this.renderComponent(composition[componentKey],componentKey)}renderComponent(component,componentKey){component?this.vcr.createComponent(component,{injector:this.getComponentInjector()}):(0,core.X6Q)()&&this.logger.warn("No attribute type component available for: "+componentKey)}getComponentInjector(){return core.zs3.create({providers:[{provide:ConfiguratorAttributeCompositionContext,useValue:this.context}],parent:this.vcr.injector})}}__name(ConfiguratorAttributeCompositionDirective,"ConfiguratorAttributeCompositionDirective"),ConfiguratorAttributeCompositionDirective.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCompositionDirective)(core.Y36(core.s_b),core.Y36(ConfiguratorAttributeCompositionConfig))},"ConfiguratorAttributeCompositionDirective_Factory"),ConfiguratorAttributeCompositionDirective.\u0275dir=core.lG2({type:ConfiguratorAttributeCompositionDirective,selectors:[["","cxConfiguratorAttributeComponent",""]],inputs:{context:["cxConfiguratorAttributeComponent","context"]}});class ConfiguratorAttributeCompositionModule{}__name(ConfiguratorAttributeCompositionModule,"ConfiguratorAttributeCompositionModule"),ConfiguratorAttributeCompositionModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCompositionModule)},"ConfiguratorAttributeCompositionModule_Factory"),ConfiguratorAttributeCompositionModule.\u0275mod=core.oAB({type:ConfiguratorAttributeCompositionModule}),ConfiguratorAttributeCompositionModule.\u0275inj=core.cJS({imports:[common.ez]});class ConfiguratorMessageConfig{}__name(ConfiguratorMessageConfig,"ConfiguratorMessageConfig");class ConfiguratorConflictAndErrorMessagesComponent{toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}constructor(configuratorCommonsService,configRouterExtractorService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.iconTypes=spartacus_storefront.e1G,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.showWarnings=!1,this.showErrors=!1}}__name(ConfiguratorConflictAndErrorMessagesComponent,"ConfiguratorConflictAndErrorMessagesComponent"),ConfiguratorConflictAndErrorMessagesComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictAndErrorMessagesComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorConflictAndErrorMessagesComponent_Factory"),ConfiguratorConflictAndErrorMessagesComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictAndErrorMessagesComponent,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template,3,2,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorConflictAndErrorMessagesComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorConflictAndErrorMessagesModule{}__name(ConfiguratorConflictAndErrorMessagesModule,"ConfiguratorConflictAndErrorMessagesModule"),ConfiguratorConflictAndErrorMessagesModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictAndErrorMessagesModule)},"ConfiguratorConflictAndErrorMessagesModule_Factory"),ConfiguratorConflictAndErrorMessagesModule.\u0275mod=core.oAB({type:ConfiguratorConflictAndErrorMessagesModule}),ConfiguratorConflictAndErrorMessagesModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:ConfiguratorConflictAndErrorMessagesComponent}}})],imports:[common.ez,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.QX1]});class ConfiguratorConflictDescriptionComponent{constructor(){this.groupType=Configurator.GroupType,this.iconTypes=spartacus_storefront.e1G,this.tabindex="0"}displayConflictDescription(group){return group.groupType===Configurator.GroupType.CONFLICT_GROUP}}__name(ConfiguratorConflictDescriptionComponent,"ConfiguratorConflictDescriptionComponent"),ConfiguratorConflictDescriptionComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictDescriptionComponent)},"ConfiguratorConflictDescriptionComponent_Factory"),ConfiguratorConflictDescriptionComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictDescriptionComponent,selectors:[["cx-configurator-conflict-description"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.Ikx("tabindex",ctx.tabindex)},"ConfiguratorConflictDescriptionComponent_HostBindings"),inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorConflictDescriptionComponent_ng_container_0_Template,3,2,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayConflictDescription(ctx.currentGroup))},"ConfiguratorConflictDescriptionComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW],encapsulation:2,changeDetection:0});class ConfiguratorConflictDescriptionModule{}__name(ConfiguratorConflictDescriptionModule,"ConfiguratorConflictDescriptionModule"),ConfiguratorConflictDescriptionModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictDescriptionModule)},"ConfiguratorConflictDescriptionModule_Factory"),ConfiguratorConflictDescriptionModule.\u0275mod=core.oAB({type:ConfiguratorConflictDescriptionModule}),ConfiguratorConflictDescriptionModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_storefront.QX1]});class ConfiguratorConflictSuggestionComponent{constructor(){this.groupType=Configurator.GroupType,this.tabindex="0"}displayConflictSuggestion(group){return!(group.groupType!==Configurator.GroupType.CONFLICT_GROUP||!group.attributes)&&group.attributes.length>0}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}}__name(ConfiguratorConflictSuggestionComponent,"ConfiguratorConflictSuggestionComponent"),ConfiguratorConflictSuggestionComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSuggestionComponent)},"ConfiguratorConflictSuggestionComponent_Factory"),ConfiguratorConflictSuggestionComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictSuggestionComponent,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.Ikx("tabindex",ctx.tabindex)},"ConfiguratorConflictSuggestionComponent_HostBindings"),inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorConflictSuggestionComponent_ng_container_0_Template,10,23,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayConflictSuggestion(ctx.currentGroup))},"ConfiguratorConflictSuggestionComponent_Template"),dependencies:[common.O5,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorConflictSuggestionModule{}__name(ConfiguratorConflictSuggestionModule,"ConfiguratorConflictSuggestionModule"),ConfiguratorConflictSuggestionModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSuggestionModule)},"ConfiguratorConflictSuggestionModule_Factory"),ConfiguratorConflictSuggestionModule.\u0275mod=core.oAB({type:ConfiguratorConflictSuggestionModule}),ConfiguratorConflictSuggestionModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorExitButtonComponent{constructor(productService,routingService,configRouterExtractorService,configuratorCommonsService,breakpointService,windowRef,location){this.productService=productService,this.routingService=routingService,this.configRouterExtractorService=configRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.breakpointService=breakpointService,this.windowRef=windowRef,this.location=location,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration}))).pipe((0,switchMap.w)(cont=>this.productService.get(cont.configuration.productCode).pipe((0,map.U)(product=>({routerData:cont.routerData,configuration:cont.configuration,product})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe((0,take.q)(1)).subscribe(container=>{container.routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:container.product})})}isDesktop(){return this.breakpointService.isUp(spartacus_storefront.Bst.md)}isMobile(){return this.breakpointService.isDown(spartacus_storefront.Bst.sm)}}__name(ConfiguratorExitButtonComponent,"ConfiguratorExitButtonComponent"),ConfiguratorExitButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorExitButtonComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.Znh),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_storefront.r),core.Y36(spartacus_core.X9E),core.Y36(common.Ye))},"ConfiguratorExitButtonComponent_Factory"),ConfiguratorExitButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorExitButtonComponent,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"btn","btn-tertiary",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorExitButtonComponent_ng_container_0_Template,6,7,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.container$))},"ConfiguratorExitButtonComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2});class ConfiguratorExitButtonModule{}__name(ConfiguratorExitButtonModule,"ConfiguratorExitButtonModule"),ConfiguratorExitButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorExitButtonModule)},"ConfiguratorExitButtonModule_Factory"),ConfiguratorExitButtonModule.\u0275mod=core.oAB({type:ConfiguratorExitButtonModule}),ConfiguratorExitButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorExitButton:{component:ConfiguratorExitButtonComponent}}}),spartacus_core.X9E],imports:[common.ez,spartacus_core.LUR]});class ConfiguratorExpertModeService{constructor(){this._expModeRequested=new ReplaySubject.t(1),this._expModeActive=new ReplaySubject.t(1)}setExpModeRequested(expMode){this._expModeRequested.next(expMode)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(expMode){this._expModeActive.next(expMode)}getExpModeActive(){return this._expModeActive}}__name(ConfiguratorExpertModeService,"ConfiguratorExpertModeService"),ConfiguratorExpertModeService.\u0275fac=__name(function(t){return new(t||ConfiguratorExpertModeService)},"ConfiguratorExpertModeService_Factory"),ConfiguratorExpertModeService.\u0275prov=core.Yz7({token:ConfiguratorExpertModeService,factory:ConfiguratorExpertModeService.\u0275fac,providedIn:"root"});class ConfiguratorGroupComponent{constructor(configuratorCommonsService,configuratorGroupsService,languageService,configUtils,configExpertModeService){this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.languageService=languageService,this.configUtils=configUtils,this.configExpertModeService=configExpertModeService,this.typePrefix="AttributeType_",this.activeLanguage$=this.languageService.getActive(),this.uiType=Configurator.UiType}updateConfiguration(event){this.configuratorCommonsService.updateConfiguration(event.ownerKey,event.changedAttribute,event.updateType)}isConflictGroupType(groupType){return!!groupType&&this.configuratorGroupsService.isConflictGroupType(groupType)}displayConflictDescription(group){return void 0!==group.groupType&&this.configuratorGroupsService.isConflictGroupType(group.groupType)&&""!==group.name}createGroupId(groupId){return this.configUtils.createGroupId(groupId)}get expMode(){return this.configExpertModeService.getExpModeActive()}getComponentKey(attribute){return attribute.uiTypeVariation?.includes(Configurator.CustomUiTypeIndicator)?this.typePrefix+attribute.uiTypeVariation:this.typePrefix+attribute.uiType}}__name(ConfiguratorGroupComponent,"ConfiguratorGroupComponent"),ConfiguratorGroupComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_core.TSl),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorExpertModeService))},"ConfiguratorGroupComponent_Factory"),ConfiguratorGroupComponent.\u0275cmp=core.Xpm({type:ConfiguratorGroupComponent,selectors:[["cx-configurator-group"]],inputs:{group:"group",owner:"owner",isNavigationToGroupEnabled:"isNavigationToGroupEnabled"},decls:3,vars:3,consts:[["role","tabpanel",3,"id"],[4,"ngIf"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"currentGroup","attribute","suggestionNumber"],[3,"cxConfiguratorAttributeComponent"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorGroupComponent_ng_container_1_Template,2,1,"ng-container",1),core.YNc(2,ConfiguratorGroupComponent_div_2_Template,4,6,"div",2),core.qZA()),2&rf&&(core.s9C("id",ctx.createGroupId(ctx.group.id)),core.xp6(1),core.Q6J("ngIf",ctx.displayConflictDescription(ctx.group)),core.xp6(1),core.Q6J("ngForOf",ctx.group.attributes))},"ConfiguratorGroupComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorConflictDescriptionComponent,ConfiguratorConflictSuggestionComponent,ConfiguratorAttributeCompositionDirective,common.Ov],encapsulation:2,changeDetection:0});class ConfiguratorConflictSolverDialogComponent{constructor(configuratorStorefrontUtilsService,configuratorCommonsService,launchDialogService,focusService){this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.configuratorCommonsService=configuratorCommonsService,this.launchDialogService=launchDialogService,this.focusService=focusService,this.iconTypes=spartacus_storefront.e1G,this.uiType=Configurator.UiType,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.subscription=new Subscription.w}init(conflictGroup,routerData){this.focusService.clear(),this.conflictGroup$=conflictGroup,this.routerData$=routerData}ngOnInit(){this.subscription.add(this.launchDialogService.data$.subscribe(dialogData=>{this.init(dialogData.conflictGroup,dialogData.routerData)}))}ngOnDestroy(){this.subscription?.unsubscribe()}dismissModal(reason){this.routerData$.pipe((0,take.q)(1)).subscribe(routerData=>this.configuratorCommonsService.dismissConflictSolverDialog(routerData.owner)),this.launchDialogService.closeDialog(reason),this.configuratorStorefrontUtilsService.scrollToConfigurationElement(".VariantConfigurationTemplate"),this.configuratorStorefrontUtilsService.focusFirstAttribute()}}__name(ConfiguratorConflictSolverDialogComponent,"ConfiguratorConflictSolverDialogComponent"),ConfiguratorConflictSolverDialogComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSolverDialogComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_storefront.Q3W),core.Y36(spartacus_storefront.K9x))},"ConfiguratorConflictSolverDialogComponent_Factory"),ConfiguratorConflictSolverDialogComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictSolverDialogComponent,selectors:[["cx-configurator-conflict-solver-dialog"]],decls:20,vars:18,consts:[[1,"cx-modal-container"],["aria-atomic","true","aria-live","assertive","role","alert","aria-relevant","additions",1,"cx-visually-hidden"],[1,"cx-modal-content",3,"cxFocus"],[1,"cx-dialog-header","modal-header"],["tabindex","0",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],[1,"cx-msg-warning"],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",2)(5,"div",3)(6,"div",4),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA(),core.TgZ(9,"button",5),core.NdJ("click",__name(function(){return ctx.dismissModal("Close conflict solver dialog")},"ConfiguratorConflictSolverDialogComponent_Template_button_click_9_listener")),core.ALo(10,"cxTranslate"),core.TgZ(11,"span",6),core._UZ(12,"cx-icon",7),core.qZA()()(),core.TgZ(13,"div",8)(14,"div",9),core._UZ(15,"cx-icon",7),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA(),core.YNc(18,ConfiguratorConflictSolverDialogComponent_ng_container_18_Template,3,3,"ng-container",10),core.ALo(19,"async"),core.qZA()()()),2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,8,"configurator.header.conflictWarning")," "),core.xp6(2),core.Q6J("cxFocus",ctx.focusConfig),core.xp6(3),core.hij(" ",core.lcZ(8,10,"configurator.header.resolveIssue")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(10,12,"configurator.a11y.closeConflictSolverModal")),core.xp6(3),core.Q6J("type",ctx.iconTypes.CLOSE),core.xp6(3),core.Q6J("type",ctx.iconTypes.ERROR),core.xp6(1),core.hij(" ",core.lcZ(17,14,"configurator.header.conflictWarning")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(19,16,ctx.routerData$)))},"ConfiguratorConflictSolverDialogComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,ConfiguratorGroupComponent,spartacus_storefront.RRe,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorConflictSolverDialogLauncherService{constructor(launchDialogService,configRouterExtractorService,configuratorGroupsService){this.launchDialogService=launchDialogService,this.configRouterExtractorService=configRouterExtractorService,this.configuratorGroupsService=configuratorGroupsService,this.subscription=new Subscription.w,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.conflictGroupAndRouterData$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getConflictGroupForImmediateConflictResolution(routerData.owner).pipe((0,map.U)(conflictGroup=>({conflictGroup,routerData})))),(0,delay.g)(0)),this.controlDialog()}controlDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe((0,filter.h)(data=>!!data.conflictGroup),(0,distinctUntilChanged.x)((prev,cur)=>prev.conflictGroup===cur.conflictGroup&&prev.routerData.navigationId===cur.routerData.navigationId)).subscribe(()=>{this.openModal(),this.subscribeToCloseDialog()}))}subscribeToCloseDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe((0,first.P)(data=>!data.conflictGroup)).subscribe(()=>this.closeModal("CLOSE_NO_CONFLICTS_EXIST")))}openModal(){this.launchDialogService.openDialogAndSubscribe("CONFLICT_SOLVER",void 0,{conflictGroup:this.conflictGroupAndRouterData$.pipe((0,map.U)(data=>data.conflictGroup)),routerData:this.routerData$})}closeModal(reason){this.launchDialogService.closeDialog(reason)}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(ConfiguratorConflictSolverDialogLauncherService,"ConfiguratorConflictSolverDialogLauncherService"),ConfiguratorConflictSolverDialogLauncherService.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSolverDialogLauncherService)(core.LFG(spartacus_storefront.Q3W),core.LFG(spartacus_product_configurator_common.u6),core.LFG(ConfiguratorGroupsService))},"ConfiguratorConflictSolverDialogLauncherService_Factory"),ConfiguratorConflictSolverDialogLauncherService.\u0275prov=core.Yz7({token:ConfiguratorConflictSolverDialogLauncherService,factory:ConfiguratorConflictSolverDialogLauncherService.\u0275fac,providedIn:"root"});class ConfiguratorGroupModule{}__name(ConfiguratorGroupModule,"ConfiguratorGroupModule"),ConfiguratorGroupModule.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupModule)},"ConfiguratorGroupModule_Factory"),ConfiguratorGroupModule.\u0275mod=core.oAB({type:ConfiguratorGroupModule}),ConfiguratorGroupModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorForm:{component:ConfiguratorGroupComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ng_select_ng_select.A0,ConfiguratorAttributeNotSupportedModule,ConfiguratorAttributeInputFieldModule,ConfiguratorAttributeFooterModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeHeaderModule,ConfiguratorAttributeRadioButtonModule,ConfiguratorAttributeSingleSelectionBundleModule,ConfiguratorAttributeMultiSelectionBundleModule,ConfiguratorAttributeReadOnlyModule,ConfiguratorAttributeSingleSelectionImageModule,ConfiguratorAttributeSingleSelectionBundleDropdownModule,ConfiguratorAttributeCheckboxModule,ConfiguratorAttributeCheckboxListModule,ConfiguratorAttributeDropDownModule,ConfiguratorAttributeMultiSelectionImageModule,ConfiguratorConflictDescriptionModule,ConfiguratorConflictSuggestionModule,ConfiguratorAttributeCompositionModule]});const defaultConfiguratorConflictSolverLayoutConfig={launch:{CONFLICT_SOLVER:{inlineRoot:!0,component:ConfiguratorConflictSolverDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class ConfiguratorConflictSolverDialogModule{constructor(_configuratorConflictSolverDialogLauncherService){}}__name(ConfiguratorConflictSolverDialogModule,"ConfiguratorConflictSolverDialogModule"),ConfiguratorConflictSolverDialogModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSolverDialogModule)(core.LFG(ConfiguratorConflictSolverDialogLauncherService))},"ConfiguratorConflictSolverDialogModule_Factory"),ConfiguratorConflictSolverDialogModule.\u0275mod=core.oAB({type:ConfiguratorConflictSolverDialogModule}),ConfiguratorConflictSolverDialogModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultConfiguratorConflictSolverLayoutConfig)],imports:[common.ez,spartacus_storefront.QX1,spartacus_core.LUR,ConfiguratorGroupModule,spartacus_storefront.oPH]});class ConfiguratorFormComponent{constructor(configuratorCommonsService,configuratorGroupsService,configRouterExtractorService,configExpertModeService,launchDialogService,featureConfigservice,globalMessageService){this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.configExpertModeService=configExpertModeService,this.launchDialogService=launchDialogService,this.featureConfigservice=featureConfigservice,this.globalMessageService=globalMessageService,this.subscription=new Subscription.w,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,filter.h)(routerData=>routerData.pageType===spartacus_product_configurator_common.iB.PageType.CONFIGURATION),(0,switchMap.w)(routerData=>this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner,routerData.configIdTemplate))),this.currentGroup$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner)))}ngOnDestroy(){this.subscription.unsubscribe()}listenForConflictResolution(){this.subscription.add(this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.hasConflicts(routerData.owner)),(0,distinctUntilChanged.x)(),(0,skip.T)(1),(0,filter.h)(hasConflicts=>!hasConflicts)).subscribe(()=>this.displayConflictResolvedMessage()))}displayConflictResolvedMessage(){this.globalMessageService&&this.featureConfigservice?.isLevel("6.1")&&this.globalMessageService.add({key:"configurator.header.conflictsResolved"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}ngOnInit(){this.listenForConflictResolution(),this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,take.q)(1)).subscribe(configuration=>{this.configuratorCommonsService.checkConflictSolverDialog(configuration.owner)}),this.routerData$.pipe((0,filter.h)(routingData=>!0===routingData.displayRestartDialog),(0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,take.q)(1),(0,filter.h)(configuration=>!1===configuration.interactionState.newConfiguration),(0,delay.g)(0)).subscribe(configuration=>{this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_RESTART_DIALOG",void 0,{owner:configuration.owner})}),this.routerData$.pipe((0,take.q)(1)).subscribe(routingData=>{routingData.resolveIssues&&this.configuratorCommonsService.hasConflicts(routingData.owner).pipe((0,take.q)(1)).subscribe(hasConflicts=>{hasConflicts&&!routingData.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(routingData.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(routingData.owner)}),routingData.expMode&&this.configExpertModeService?.setExpModeRequested(routingData.expMode)})}isNavigationToGroupEnabled(configuration){return!configuration.immediateConflictResolution}isDialogActive(configuration){return configuration.interactionState.showConflictSolverDialog??!1}}__name(ConfiguratorFormComponent,"ConfiguratorFormComponent"),ConfiguratorFormComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorFormComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorExpertModeService),core.Y36(spartacus_storefront.Q3W),core.Y36(spartacus_core.Ru9,8),core.Y36(spartacus_core.IWp,8))},"ConfiguratorFormComponent_Factory"),ConfiguratorFormComponent.\u0275cmp=core.Xpm({type:ConfiguratorFormComponent,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostForm",""],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorFormComponent_ng_container_0_Template,2,2,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorFormComponent_ng_template_2_Template,1,2,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r1)}},"ConfiguratorFormComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorGroupComponent,common.Ov],encapsulation:2,changeDetection:0});__name(class ConfigFormUpdateEvent{},"ConfigFormUpdateEvent");class ConfiguratorFormModule{}__name(ConfiguratorFormModule,"ConfiguratorFormModule"),ConfiguratorFormModule.\u0275fac=__name(function(t){return new(t||ConfiguratorFormModule)},"ConfiguratorFormModule_Factory"),ConfiguratorFormModule.\u0275mod=core.oAB({type:ConfiguratorFormModule}),ConfiguratorFormModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorForm:{component:ConfiguratorFormComponent}}})],imports:[common.ez,spartacus_core.LUR,ng_select_ng_select.A0,ConfiguratorGroupModule]});class ConfiguratorGroupMenuService{constructor(windowRef){this.windowRef=windowRef}getFocusedGroupIndex(groups){if(groups){const group=groups.find(groupHTMLEl=>groupHTMLEl.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(group)return groups.toArray().indexOf(group)}}updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex){return focusedGroupIndex&&focusedGroupIndex!==currentGroupIndex?focusedGroupIndex:currentGroupIndex}focusNextGroup(currentGroupIndex,groups){const focusedGroupIndex=this.getFocusedGroupIndex(groups);currentGroupIndex=this.updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex),groups&&(currentGroupIndex===groups.length-1?groups.first?.nativeElement?.focus():groups.toArray()[currentGroupIndex+1]?.nativeElement.focus())}focusPreviousGroup(currentGroupIndex,groups){const focusedGroupIndex=this.getFocusedGroupIndex(groups);currentGroupIndex=this.updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex),groups&&(0===currentGroupIndex?groups.last?.nativeElement?.focus():groups.toArray()[currentGroupIndex-1]?.nativeElement?.focus())}switchGroupOnArrowPress(event,groupIndex,groups){event.preventDefault(),"ArrowUp"===event.code?this.focusPreviousGroup(groupIndex,groups):"ArrowDown"===event.code&&this.focusNextGroup(groupIndex,groups)}isBackBtnFocused(groups){if(groups)return-1!==groups.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")&&this.windowRef?.document?.activeElement===groups.first?.nativeElement}}__name(ConfiguratorGroupMenuService,"ConfiguratorGroupMenuService"),ConfiguratorGroupMenuService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuService)(core.LFG(spartacus_core.X9E))},"ConfiguratorGroupMenuService_Factory"),ConfiguratorGroupMenuService.\u0275prov=core.Yz7({token:ConfiguratorGroupMenuService,factory:ConfiguratorGroupMenuService.\u0275fac,providedIn:"root"});class ConfiguratorGroupMenuComponent{constructor(configCommonsService,configuratorGroupsService,hamburgerMenuService,configRouterExtractorService,configUtils,configGroupMenuService,directionService,translation,configExpertModeService){this.configCommonsService=configCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.hamburgerMenuService=hamburgerMenuService,this.configRouterExtractorService=configRouterExtractorService,this.configUtils=configUtils,this.configGroupMenuService=configGroupMenuService,this.directionService=directionService,this.translation=translation,this.configExpertModeService=configExpertModeService,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration})),(0,filter.h)(cont=>cont.configuration.complete&&cont.configuration.consistent||cont.configuration.interactionState.issueNavigationDone||!cont.routerData.resolveIssues)).pipe((0,map.U)(cont=>cont.configuration)))),this.currentGroup$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner))),this.displayedParentGroup$=this.configuration$.pipe((0,switchMap.w)(configuration=>this.configuratorGroupsService.getMenuParentGroup(configuration.owner)),(0,switchMap.w)(parentGroup=>parentGroup?this.getCondensedParentGroup(parentGroup):(0,of.of)(parentGroup))),this.displayedGroups$=this.displayedParentGroup$.pipe((0,switchMap.w)(parentGroup=>this.configuration$.pipe((0,map.U)(configuration=>parentGroup?this.condenseGroups(parentGroup.subGroups):this.condenseGroups(configuration.groups))))),this.iconTypes=spartacus_storefront.e1G,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON"}click(group){this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{configuration.interactionState.currentGroup!==group.id&&(this.configuratorGroupsService.hasSubGroups(group)?this.configuratorGroupsService.setMenuParentGroup(configuration.owner,group.id):(this.configuratorGroupsService.navigateToGroup(configuration,group.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(){this.displayedParentGroup$.pipe((0,take.q)(1)).subscribe(displayedParentGroup=>{if(displayedParentGroup){const grandParentGroup$=this.getParentGroup(displayedParentGroup);this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{grandParentGroup$.pipe((0,take.q)(1)).subscribe(grandParentGroup=>{this.configuratorGroupsService.setMenuParentGroup(configuration.owner,grandParentGroup?grandParentGroup.id:void 0)})})}})}getConflictNumber(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP?"("+group.subGroups.length+")":""}hasSubGroups(group){return this.configuratorGroupsService.hasSubGroups(group)}getParentGroup(group){return this.configuration$.pipe((0,map.U)(configuration=>this.configuratorGroupsService.getParentGroup(configuration.groups,group)))}getCondensedParentGroup(parentGroup){return parentGroup&&parentGroup.subGroups&&1===parentGroup.subGroups.length&&parentGroup.groupType!==Configurator.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(parentGroup).pipe((0,switchMap.w)(group=>group?this.getCondensedParentGroup(group):(0,of.of)(group))):(0,of.of)(parentGroup)}condenseGroups(groups){return groups.flatMap(group=>1===group.subGroups.length&&group.groupType!==Configurator.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(group.subGroups):group)}isGroupVisited(group,configuration){return this.configuratorGroupsService.isGroupVisited(configuration.owner,group.id).pipe((0,map.U)(isVisited=>isVisited&&!this.isConflictGroupType(group.groupType??Configurator.GroupType.ATTRIBUTE_GROUP)),(0,take.q)(1))}isConflictGroupType(groupType){return this.configuratorGroupsService.isConflictGroupType(groupType)}isConflictGroupTypeAllowingUndefined(groupType){return!!groupType&&this.configuratorGroupsService.isConflictGroupType(groupType)}isConflictHeader(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_GROUP}getGroupStatusStyles(group,configuration){return this.isGroupVisited(group,configuration).pipe((0,map.U)(isVisited=>{let groupStatusStyle="cx-menu-item";return"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&!group.consistent&&(groupStatusStyle+=this.WARNING),"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&group.complete&&group.consistent&&isVisited&&(groupStatusStyle+=this.COMPLETE),!group.complete&&isVisited&&(groupStatusStyle+=this.ERROR),groupStatusStyle}))}isLTRDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.LTR}isRTLDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.RTL}isForwardsNavigation(event){return"ArrowRight"===event.code&&this.isLTRDirection()||"ArrowLeft"===event.code&&this.isRTLDirection()}isBackNavigation(event){return"ArrowLeft"===event.code&&this.isLTRDirection()||"ArrowRight"===event.code&&this.isRTLDirection()}switchGroupOnArrowPress(event,groupIndex,targetGroup,currentGroup){"ArrowUp"===event.code||"ArrowDown"===event.code?this.configGroupMenuService.switchGroupOnArrowPress(event,groupIndex,this.groups):this.isForwardsNavigation(event)?targetGroup&&this.hasSubGroups(targetGroup)&&(this.click(targetGroup),this.setFocusForSubGroup(targetGroup,currentGroup.id)):this.isBackNavigation(event)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&(this.navigateUp(),this.setFocusForMainMenu(currentGroup.id))}setFocusForMainMenu(currentGroupId){let key=currentGroupId;this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{configuration.groups?.forEach(group=>{1!==group.subGroups?.length&&(this.isGroupSelected(group.id,currentGroupId)||this.containsSelectedGroup(group,currentGroupId))&&(key=group.id)})}),this.configUtils.setFocus(key)}setFocusForSubGroup(group,currentGroupId){let key="cx-menu-back";this.containsSelectedGroup(group,currentGroupId)&&(key=currentGroupId),this.configUtils.setFocus(key)}containsSelectedGroup(group,currentGroupId){let isCurrentGroupFound=!1;return group.subGroups?.forEach(subGroup=>{this.isGroupSelected(subGroup.id,currentGroupId)&&(isCurrentGroupFound=!0)}),isCurrentGroupFound}getTabIndex(group,currentGroupId){return this.isGroupSelected(group.id,currentGroupId)||this.containsSelectedGroup(group,currentGroupId)?0:-1}isGroupSelected(groupId,currentGroupId){return groupId===currentGroupId}createAriaControls(groupId){return this.configUtils.createGroupId(groupId)}getAriaLabel(group){let translatedText="";return group&&group.groupType&&this.isConflictGroupType(group.groupType)?this.isConflictHeader(group)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(group)}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):translatedText=group.description?group.description:"":this.translation.translate("configurator.a11y.groupName",{group:group.description}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}createIconId(type,groupId){return this.ICON+type+groupId}getAriaDescribedby(group,configuration){return this.isGroupVisited(group,configuration).pipe((0,map.U)(isVisited=>{let ariaDescribedby="";return"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&!group.consistent&&group.groupType&&!this.isConflictGroupType(group.groupType)&&(ariaDescribedby+=this.createIconId(spartacus_storefront.e1G.WARNING,group.id)),"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&group.complete&&group.consistent&&isVisited&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.SUCCESS,group.id)),!group.complete&&isVisited&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.ERROR,group.id)),this.hasSubGroups(group)&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.CARET_RIGHT,group.id)),ariaDescribedby+=" inListOfGroups",ariaDescribedby}))}getGroupMenuTitle(group){let title=group.description;return!this.isConflictHeader(group)&&!this.isConflictGroup(group)&&this.configExpertModeService.getExpModeActive().pipe((0,take.q)(1)).subscribe(expMode=>{expMode&&(title+=` / [${group.name}]`)}),title}displayMenuItem(group){return this.configuration$.pipe((0,map.U)(configuration=>{let displayMenuItem=!0;return configuration.immediateConflictResolution&&group.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP&&(displayMenuItem=!1),displayMenuItem}))}isDialogActive(configuration){return configuration.interactionState.showConflictSolverDialog??!1}}__name(ConfiguratorGroupMenuComponent,"ConfiguratorGroupMenuComponent"),ConfiguratorGroupMenuComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_storefront.O2g),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorGroupMenuService),core.Y36(spartacus_storefront.Lh6),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorExpertModeService))},"ConfiguratorGroupMenuComponent_Factory"),ConfiguratorGroupMenuComponent.\u0275cmp=core.Xpm({type:ConfiguratorGroupMenuComponent,selectors:[["cx-configurator-group-menu"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c15,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.groups=_t)}},"ConfiguratorGroupMenuComponent_Query"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroups",""],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"cxFocus","click","keydown"],["groupItem",""],[3,"type"],["role","tab",3,"id","ngClass","cxFocus","tabindex","click","keydown"],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id","title"],[1,"ERROR",3,"type","id","title"],[1,"COMPLETE",3,"type","id","title"],[1,"subGroupIndicator"],[3,"type","id","title",4,"ngIf"],[3,"type","id","title"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorGroupMenuComponent_ng_container_0_Template,2,2,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorGroupMenuComponent_ng_template_2_Template,2,2,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r1)}},"ConfiguratorGroupMenuComponent_Template"),dependencies:[common.mk,common.sg,common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorGroupMenuModule{}__name(ConfiguratorGroupMenuModule,"ConfiguratorGroupMenuModule"),ConfiguratorGroupMenuModule.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuModule)},"ConfiguratorGroupMenuModule_Factory"),ConfiguratorGroupMenuModule.\u0275mod=core.oAB({type:ConfiguratorGroupMenuModule}),ConfiguratorGroupMenuModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorMenu:{component:ConfiguratorGroupMenuComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH]});class ConfiguratorGroupTitleComponent{constructor(configuratorCommonsService,configuratorGroupsService,configRouterExtractorService,configExpertModeService,breakpointService,configuratorStorefrontUtilsService,hamburgerMenuService){this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.configExpertModeService=configExpertModeService,this.breakpointService=breakpointService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.hamburgerMenuService=hamburgerMenuService,this.ghostStyle=!0,this.subscription=new Subscription.w,this.PRE_HEADER=".PreHeader",this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner).pipe((0,tap.b)(()=>{this.ghostStyle=!1})))),this.iconTypes=spartacus_storefront.e1G}ngOnInit(){this.subscription.add(this.hamburgerMenuService.isExpanded.subscribe(isExpanded=>{isExpanded?this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","block"):this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","none")}))}ngOnDestroy(){this.subscription.unsubscribe(),this.configuratorStorefrontUtilsService.removeStyling(this.PRE_HEADER,"display")}getGroupTitle(group){let title=group.description;return group.groupType!==Configurator.GroupType.CONFLICT_GROUP&&this.configExpertModeService.getExpModeActive().pipe((0,take.q)(1)).subscribe(expMode=>{expMode&&(title+=` / [${group.name}]`)}),title}isMobile(){return this.breakpointService.isDown(spartacus_storefront.Bst.md)}}__name(ConfiguratorGroupTitleComponent,"ConfiguratorGroupTitleComponent"),ConfiguratorGroupTitleComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupTitleComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorExpertModeService),core.Y36(spartacus_storefront.r),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(spartacus_storefront.O2g))},"ConfiguratorGroupTitleComponent_Factory"),ConfiguratorGroupTitleComponent.\u0275cmp=core.Xpm({type:ConfiguratorGroupTitleComponent,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorGroupTitleComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroup",""],[1,"cx-group-title"],[4,"ngIf"],[1,"cx-ghost-group-title"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorGroupTitleComponent_ng_container_0_Template,5,4,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorGroupTitleComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.displayedGroup$))("ngIfElse",_r1)}},"ConfiguratorGroupTitleComponent_Template"),dependencies:[common.O5,spartacus_storefront.Mzi,common.Ov],encapsulation:2,changeDetection:0});class ConfiguratorGroupTitleModule{}__name(ConfiguratorGroupTitleModule,"ConfiguratorGroupTitleModule"),ConfiguratorGroupTitleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupTitleModule)},"ConfiguratorGroupTitleModule_Factory"),ConfiguratorGroupTitleModule.\u0275mod=core.oAB({type:ConfiguratorGroupTitleModule}),ConfiguratorGroupTitleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorGroupTitle:{component:ConfiguratorGroupTitleComponent}}})],imports:[common.ez,spartacus_storefront.iqf]});class ConfiguratorOverviewAttributeComponent{constructor(breakpointService){this.breakpointService=breakpointService}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(spartacus_storefront.Bst.md)}}__name(ConfiguratorOverviewAttributeComponent,"ConfiguratorOverviewAttributeComponent"),ConfiguratorOverviewAttributeComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewAttributeComponent)(core.Y36(spartacus_storefront.r))},"ConfiguratorOverviewAttributeComponent_Factory"),ConfiguratorOverviewAttributeComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewAttributeComponent,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["mobile",""],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"span",0),core._uU(1),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"div",1),core._uU(6),core.qZA(),core.YNc(7,ConfiguratorOverviewAttributeComponent_ng_container_7_Template,5,2,"ng-container",2),core.ALo(8,"async"),core.YNc(9,ConfiguratorOverviewAttributeComponent_ng_template_9_Template,4,2,"ng-template",null,3,core.W1O)),2&rf){const _r1=core.MAs(10);core.xp6(1),core.hij(" ",ctx.attributeOverview.valuePrice&&0!==(null==ctx.attributeOverview.valuePrice?null:ctx.attributeOverview.valuePrice.value)?ctx.attributeOverview.valuePriceTotal&&0!==(null==ctx.attributeOverview.valuePriceTotal?null:ctx.attributeOverview.valuePriceTotal.value)?core.xi3(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(15,_c5,ctx.attributeOverview.value,ctx.attributeOverview.attribute,ctx.attributeOverview.valuePriceTotal.formattedValue)):core.xi3(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(19,_c5,ctx.attributeOverview.value,ctx.attributeOverview.attribute,ctx.attributeOverview.valuePrice.formattedValue)):core.xi3(4,10,"configurator.a11y.valueOfAttributeFull",core.WLB(23,_c6,ctx.attributeOverview.value,ctx.attributeOverview.attribute)),"\n"),core.xp6(5),core.hij(" ",ctx.attributeOverview.value,"\n"),core.xp6(1),core.Q6J("ngIf",core.lcZ(8,13,ctx.isDesktop()))("ngIfElse",_r1)}},"ConfiguratorOverviewAttributeComponent_Template"),dependencies:[common.O5,ConfiguratorPriceComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorOverviewAttributeModule{}__name(ConfiguratorOverviewAttributeModule,"ConfiguratorOverviewAttributeModule"),ConfiguratorOverviewAttributeModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewAttributeModule)},"ConfiguratorOverviewAttributeModule_Factory"),ConfiguratorOverviewAttributeModule.\u0275mod=core.oAB({type:ConfiguratorOverviewAttributeModule}),ConfiguratorOverviewAttributeModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorOverviewBundleAttributeComponent{constructor(productService,translation){this.productService=productService,this.translation=translation}ngOnInit(){const noCommerceProduct={images:{}};this.attributeOverview.productCode?this.product$=this.productService.get(this.attributeOverview.productCode,"list").pipe((0,map.U)(respProduct=>respProduct||noCommerceProduct)):this.product$=(0,of.of)(noCommerceProduct)}getProductPrimaryImage(product){return product?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){const quantity=this.attributeOverview.quantity;return void 0!==quantity&&quantity>0}displayPrice(){return void 0!==this.attributeOverview.valuePrice?.value&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let translatedText="";return this.displayQuantity()?void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}}__name(ConfiguratorOverviewBundleAttributeComponent,"ConfiguratorOverviewBundleAttributeComponent"),ConfiguratorOverviewBundleAttributeComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewBundleAttributeComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.D7D))},"ConfiguratorOverviewBundleAttributeComponent_Factory"),ConfiguratorOverviewBundleAttributeComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewBundleAttributeComponent,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template,16,8,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.product$))},"ConfiguratorOverviewBundleAttributeComponent_Template"),dependencies:[common.O5,spartacus_storefront.R7z,ConfiguratorPriceComponent,common.Ov,spartacus_core.X$D,spartacus_core.bOD],encapsulation:2,changeDetection:0});class ConfiguratorOverviewBundleAttributeModule{}__name(ConfiguratorOverviewBundleAttributeModule,"ConfiguratorOverviewBundleAttributeModule"),ConfiguratorOverviewBundleAttributeModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewBundleAttributeModule)},"ConfiguratorOverviewBundleAttributeModule_Factory"),ConfiguratorOverviewBundleAttributeModule.\u0275mod=core.oAB({type:ConfiguratorOverviewBundleAttributeModule}),ConfiguratorOverviewBundleAttributeModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_storefront.cOq,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorOverviewFilterBarComponent{constructor(configuratorCommonsService){this.configuratorCommonsService=configuratorCommonsService,this.iconTypes=spartacus_storefront.e1G,this.attributeFilterTypes=Configurator.OverviewFilter}getGroupFilterDescription(overview,groupId){return overview.possibleGroups?.find(group=>group.id===groupId)?.groupDescription??""}onAttrFilterRemove(config,attrToRemove){let[attrFilters,groupFilters]=this.getInputFilters(config.overview);attrFilters=attrFilters.filter(attrFilterName=>attrToRemove!==attrFilterName),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(config,attrFilters,groupFilters))}onGroupFilterRemove(config,groupIdToRemove){let[attrFilters,groupFilters]=this.getInputFilters(config.overview);groupFilters=groupFilters.filter(groupId=>groupIdToRemove!==groupId),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(config,attrFilters,groupFilters))}isShowRemoveAll(overview){return(overview.attributeFilters?.length??0)+(overview.groupFilters?.length??0)>1}onRemoveAll(config){this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(config,[],[]))}getInputFilters(overview){return[overview.attributeFilters??[],overview.groupFilters??[]]}createInputConfig(config,attrFilters,groupFilers){return{...config,overview:{configId:config.configId,productCode:config.productCode,attributeFilters:attrFilters,groupFilters:groupFilers,possibleGroups:config.overview?.possibleGroups}}}}__name(ConfiguratorOverviewFilterBarComponent,"ConfiguratorOverviewFilterBarComponent"),ConfiguratorOverviewFilterBarComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterBarComponent)(core.Y36(ConfiguratorCommonsService))},"ConfiguratorOverviewFilterBarComponent_Factory"),ConfiguratorOverviewFilterBarComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFilterBarComponent,selectors:[["cx-configurator-overview-filter-bar"]],inputs:{config:"config"},decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-overview-filter-applied",3,"title","click"],["aria-hidden","true"],[3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewFilterBarComponent_ng_container_0_Template,7,7,"ng-container",0),core.YNc(1,ConfiguratorOverviewFilterBarComponent_ng_container_1_Template,6,8,"ng-container",0),core.YNc(2,ConfiguratorOverviewFilterBarComponent_ng_container_2_Template,7,7,"ng-container",1)),2&rf&&(core.Q6J("ngForOf",ctx.config.overview.attributeFilters),core.xp6(1),core.Q6J("ngForOf",ctx.config.overview.groupFilters),core.xp6(1),core.Q6J("ngIf",ctx.isShowRemoveAll(ctx.config.overview)))},"ConfiguratorOverviewFilterBarComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.oJW,spartacus_core.X$D],encapsulation:2});class ConfiguratorOverviewFilterComponent{constructor(configuratorCommonsService){this.configuratorCommonsService=configuratorCommonsService,this.showFilterBar=!0,this.priceFilter=new fesm2020_forms.p4(""),this.mySelectionsFilter=new fesm2020_forms.p4(""),this.groupFilters=new Array}ngOnChanges(){this.extractAttrFilterState(this.config),this.extractGroupFilterState(this.config)}onFilter(config){const inputConfig=this.createInputConfig(config,this.collectAttrFilters(),this.collectGroupFilters(config.overview));this.configuratorCommonsService.updateConfigurationOverview(inputConfig)}extractGroupFilterState(configuration){this.groupFilters=[],configuration.overview.possibleGroups?.forEach(group=>{let isSelected=!1;configuration.overview.groupFilters&&(isSelected=configuration.overview.groupFilters.indexOf(group.id)>=0),this.groupFilters.push(new fesm2020_forms.p4(isSelected))})}extractAttrFilterState(configuration){if(configuration.overview.attributeFilters){const isPriceFilterSelected=configuration.overview.attributeFilters.indexOf(Configurator.OverviewFilter.PRICE_RELEVANT)>=0;this.priceFilter.setValue(isPriceFilterSelected);const isMySelectionsFilterSelected=configuration.overview.attributeFilters.indexOf(Configurator.OverviewFilter.USER_INPUT)>=0;this.mySelectionsFilter.setValue(isMySelectionsFilterSelected)}}collectGroupFilters(overview){const filters=[];let idx=0;return this.groupFilters.forEach(groupFilter=>{groupFilter.value&&overview?.possibleGroups&&filters.push(overview.possibleGroups[idx].id),idx++}),filters}collectAttrFilters(){const filters=[];return this.priceFilter.value&&filters.push(Configurator.OverviewFilter.PRICE_RELEVANT),this.mySelectionsFilter.value&&filters.push(Configurator.OverviewFilter.USER_INPUT),filters}createInputConfig(config,attrFilters,groupFilers){return{...config,overview:{configId:config.configId,productCode:config.productCode,attributeFilters:attrFilters,groupFilters:groupFilers,possibleGroups:config.overview?.possibleGroups}}}}__name(ConfiguratorOverviewFilterComponent,"ConfiguratorOverviewFilterComponent"),ConfiguratorOverviewFilterComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterComponent)(core.Y36(ConfiguratorCommonsService))},"ConfiguratorOverviewFilterComponent_Factory"),ConfiguratorOverviewFilterComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFilterComponent,selectors:[["cx-configurator-overview-filter"]],inputs:{showFilterBar:"showFilterBar",config:"config"},features:[core.TTD],decls:19,vars:19,consts:[[4,"ngIf"],[1,"cx-overview-filter-header"],[1,"cx-overview-filter-option"],[1,"form-check"],["id","cx-configurator-overview-filter-option-price","type","checkbox","name","config-overview-price-filter",1,"form-check-input",3,"formControl","change"],["for","cx-configurator-overview-filter-option-price",1,"form-check-label"],["id","cx-configurator-overview-filter-option-mySelections","type","checkbox","name","config-overview-my-selection-filter",1,"form-check-input",3,"formControl","change"],["for","cx-configurator-overview-filter-option-mySelections",1,"form-check-label"],[3,"config"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"id","formControl","name","change"],[1,"form-check-label",3,"for"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewFilterComponent_ng_container_0_Template,2,1,"ng-container",0),core.TgZ(1,"div",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",2)(5,"div",3)(6,"input",4),core.NdJ("change",__name(function(){return ctx.onFilter(ctx.config)},"ConfiguratorOverviewFilterComponent_Template_input_change_6_listener")),core.ALo(7,"cxTranslate"),core.qZA(),core.TgZ(8,"label",5),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA()()(),core.TgZ(11,"div",2)(12,"div",3)(13,"input",6),core.NdJ("change",__name(function(){return ctx.onFilter(ctx.config)},"ConfiguratorOverviewFilterComponent_Template_input_change_13_listener")),core.ALo(14,"cxTranslate"),core.qZA(),core.TgZ(15,"label",7),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA()()(),core.YNc(18,ConfiguratorOverviewFilterComponent_ng_container_18_Template,5,4,"ng-container",0)),2&rf&&(core.Q6J("ngIf",ctx.showFilterBar),core.xp6(2),core.hij(" ",core.lcZ(3,9,"configurator.overviewFilter.byOption"),"\n"),core.xp6(4),core.Q6J("formControl",ctx.priceFilter),core.uIk("aria-label",core.lcZ(7,11,"configurator.a11y.filterOverviewByPrice")),core.xp6(3),core.hij(" ",core.lcZ(10,13,"configurator.overviewFilter.byPrice"),""),core.xp6(4),core.Q6J("formControl",ctx.mySelectionsFilter),core.uIk("aria-label",core.lcZ(14,15,"configurator.a11y.filterOverviewByMySelections")),core.xp6(3),core.hij(" ",core.lcZ(17,17,"configurator.overviewFilter.mySelections"),""),core.xp6(2),core.Q6J("ngIf",ctx.config.overview.possibleGroups))},"ConfiguratorOverviewFilterComponent_Template"),dependencies:[common.sg,common.O5,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,ConfiguratorOverviewFilterBarComponent,spartacus_core.X$D],encapsulation:2});class ConfiguratorOverviewFilterBarModule{}__name(ConfiguratorOverviewFilterBarModule,"ConfiguratorOverviewFilterBarModule"),ConfiguratorOverviewFilterBarModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterBarModule)},"ConfiguratorOverviewFilterBarModule_Factory"),ConfiguratorOverviewFilterBarModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFilterBarModule}),ConfiguratorOverviewFilterBarModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,fesm2020_forms.u5,fesm2020_forms.UX]});class ConfiguratorOverviewFilterModule{}__name(ConfiguratorOverviewFilterModule,"ConfiguratorOverviewFilterModule"),ConfiguratorOverviewFilterModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterModule)},"ConfiguratorOverviewFilterModule_Factory"),ConfiguratorOverviewFilterModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFilterModule}),ConfiguratorOverviewFilterModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,fesm2020_forms.u5,fesm2020_forms.UX,ConfiguratorOverviewFilterBarModule]});class ConfiguratorOverviewFilterButtonComponent{constructor(launchDialogService,configuratorCommonsService,configRouterExtractorService){this.launchDialogService=launchDialogService,this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.ghostStyle=!0,this.config$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,filter.h)(configuration=>null!=configuration.overview),(0,tap.b)(()=>{this.ghostStyle=!1})),this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,filter.h)(configuration=>null!=configuration.overview),(0,tap.b)(()=>{this.ghostStyle=!1}))}getNumFilters(overview){return(overview.attributeFilters?.length??0)+(overview.groupFilters?.length??0)}openFilterModal(config){this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_OV_FILTER",this.filterButton,config)}}__name(ConfiguratorOverviewFilterButtonComponent,"ConfiguratorOverviewFilterButtonComponent"),ConfiguratorOverviewFilterButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterButtonComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorOverviewFilterButtonComponent_Factory"),ConfiguratorOverviewFilterButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFilterButtonComponent,selectors:[["cx-configurator-overview-filter-button"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c20,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.filterButton=_t.first)}},"ConfiguratorOverviewFilterButtonComponent_Query"),hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorOverviewFilterButtonComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostFilterButton",""],["tabindex","0",1,"btn","btn-secondary","cx-config-filter-button",3,"title","click"],["filterButton",""],[3,"config"],[1,"cx-ghost-filter-button","ghost"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorOverviewFilterButtonComponent_ng_container_0_Template,7,13,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorOverviewFilterButtonComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configurationWithOv$))("ngIfElse",_r1)}},"ConfiguratorOverviewFilterButtonComponent_Template"),dependencies:[common.O5,ConfiguratorOverviewFilterBarComponent,common.Ov,spartacus_core.X$D],encapsulation:2});class ConfiguratorOverviewFilterButtonModule{}__name(ConfiguratorOverviewFilterButtonModule,"ConfiguratorOverviewFilterButtonModule"),ConfiguratorOverviewFilterButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterButtonModule)},"ConfiguratorOverviewFilterButtonModule_Factory"),ConfiguratorOverviewFilterButtonModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFilterButtonModule}),ConfiguratorOverviewFilterButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewFilterButton:{component:ConfiguratorOverviewFilterButtonComponent}}})],imports:[common.ez,spartacus_core.LUR,ConfiguratorOverviewFilterBarModule]});class ConfiguratorOverviewFilterDialogComponent{constructor(launchDialogService){this.launchDialogService=launchDialogService,this.config$=this.launchDialogService.data$,this.iconTypes=spartacus_storefront.e1G,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}closeFilterModal(){this.launchDialogService.closeDialog("Close Filtering")}}__name(ConfiguratorOverviewFilterDialogComponent,"ConfiguratorOverviewFilterDialogComponent"),ConfiguratorOverviewFilterDialogComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterDialogComponent)(core.Y36(spartacus_storefront.Q3W))},"ConfiguratorOverviewFilterDialogComponent_Factory"),ConfiguratorOverviewFilterDialogComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFilterDialogComponent,selectors:[["cx-configurator-overview-filter-dialog"]],decls:12,vars:11,consts:[[1,"cx-configurator-overview-filter-dialog","cx-modal-container",3,"click"],[1,"cx-modal-content",3,"cxFocus","click","esc"],[1,"cx-dialog-header","modal-header"],[1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"title","click"],["aria-hidden","true"],[3,"type"],[4,"ngIf"],[1,"cx-dialog-body","modal-body"],[3,"config","showFilterBar"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("click",__name(function(){return ctx.closeFilterModal()},"ConfiguratorOverviewFilterDialogComponent_Template_div_click_0_listener")),core.TgZ(1,"div",1),core.NdJ("click",__name(function($event){return $event.stopPropagation()},"ConfiguratorOverviewFilterDialogComponent_Template_div_click_1_listener"))("esc",__name(function(){return ctx.closeFilterModal()},"ConfiguratorOverviewFilterDialogComponent_Template_div_esc_1_listener")),core.TgZ(2,"div",2)(3,"div",3),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",4),core.NdJ("click",__name(function(){return ctx.closeFilterModal()},"ConfiguratorOverviewFilterDialogComponent_Template_button_click_6_listener")),core.ALo(7,"cxTranslate"),core.TgZ(8,"span",5),core._UZ(9,"cx-icon",6),core.qZA()()(),core.YNc(10,ConfiguratorOverviewFilterDialogComponent_ng_container_10_Template,3,2,"ng-container",7),core.ALo(11,"async"),core.qZA()()),2&rf&&(core.xp6(1),core.Q6J("cxFocus",ctx.focusConfig),core.xp6(3),core.hij(" ",core.lcZ(5,5,"configurator.overviewFilter.title")," "),core.xp6(2),core.s9C("title",core.lcZ(7,7,"configurator.a11y.closeFilterMenu")),core.xp6(3),core.Q6J("type",ctx.iconTypes.CLOSE),core.xp6(1),core.Q6J("ngIf",core.lcZ(11,9,ctx.config$)))},"ConfiguratorOverviewFilterDialogComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,ConfiguratorOverviewFilterComponent,spartacus_storefront.RRe,common.Ov,spartacus_core.X$D],encapsulation:2});const defaultConfiguratorOverviewFilterDialogLayoutConfig={launch:{CONFIGURATOR_OV_FILTER:{inlineRoot:!0,component:ConfiguratorOverviewFilterDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class ConfiguratorOverviewFilterDialogModule{}__name(ConfiguratorOverviewFilterDialogModule,"ConfiguratorOverviewFilterDialogModule"),ConfiguratorOverviewFilterDialogModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFilterDialogModule)},"ConfiguratorOverviewFilterDialogModule_Factory"),ConfiguratorOverviewFilterDialogModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFilterDialogModule}),ConfiguratorOverviewFilterDialogModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultConfiguratorOverviewFilterDialogLayoutConfig)],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,ConfiguratorOverviewFilterModule,spartacus_storefront.oPH]});class ConfiguratorOverviewFormComponent{constructor(configuratorCommonsService,configRouterExtractorService,configuratorStorefrontUtilsService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.ghostStyle=!0,this.attributeOverviewType=Configurator.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner)),(0,distinctUntilKeyChanged.g)("configId"),(0,switchMap.w)(configuration=>this.configuratorCommonsService.getConfigurationWithOverview(configuration)),(0,filter.h)(configuration=>null!=configuration.overview),(0,tap.b)(()=>{this.ghostStyle=!1}))}hasAttributes(configuration){return this.hasGroupWithAttributes(configuration.overview?.groups)}hasGroupWithAttributes(groups){if(groups){let hasAttributes=void 0!==groups.find(group=>(group.attributes?group.attributes.length:0)>0);return hasAttributes||(hasAttributes=void 0!==groups.find(group=>this.hasGroupWithAttributes(group.subGroups))),hasAttributes}return!1}isSameAttribute(attributes,index){return attributes.length>1&&(0===index?attributes[index]?.attribute===attributes[index+1]?.attribute:attributes[index]?.attribute===attributes[index-1]?.attribute)}getStyleClasses(attributes,index){let styleClass="";switch(attributes[index]?.type){case this.attributeOverviewType.BUNDLE:styleClass+="bundle";break;case this.attributeOverviewType.GENERAL:styleClass+="general"}return(0===index||!this.isSameAttribute(attributes,index))&&(styleClass+=" margin"),!this.isSameAttribute(attributes,index+1)&&!styleClass.includes("bundle")&&(styleClass+=" last-value-pair"),styleClass}getGroupLevelStyleClasses(level,subGroups){let styleClass="cx-group";return 1===level?(styleClass+=" topLevel",subGroups&&subGroups.length>0&&(styleClass+=" subgroupTopLevel")):(styleClass+=" subgroup",styleClass+=" subgroupLevel"+level),styleClass}getPrefixId(idPrefix,groupId){return this.configuratorStorefrontUtilsService.getPrefixId(idPrefix,groupId)}getGroupId(idPrefix,groupId){return this.configuratorStorefrontUtilsService.createOvGroupId(idPrefix,groupId)}}__name(ConfiguratorOverviewFormComponent,"ConfiguratorOverviewFormComponent"),ConfiguratorOverviewFormComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFormComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorOverviewFormComponent_Factory"),ConfiguratorOverviewFormComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFormComponent,selectors:[["cx-configurator-overview-form"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorOverviewFormComponent_HostBindings"),decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"ngFor","ngForOf"],[3,"id","ngClass"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorOverviewFormComponent_ng_container_0_Template,2,2,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorOverviewFormComponent_ng_template_2_Template,7,6,"ng-template",null,1,core.W1O),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_Template,4,4,"ng-template",null,2,core.W1O),core.YNc(6,ConfiguratorOverviewFormComponent_ng_template_6_Template,1,2,"ng-template",null,3,core.W1O)),2&rf){const _r5=core.MAs(7);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r5)}},"ConfiguratorOverviewFormComponent_Template"),dependencies:[common.mk,common.sg,common.O5,common.tP,common.RF,common.n9,common.ED,ConfiguratorOverviewAttributeComponent,ConfiguratorOverviewBundleAttributeComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorOverviewFormModule{}__name(ConfiguratorOverviewFormModule,"ConfiguratorOverviewFormModule"),ConfiguratorOverviewFormModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFormModule)},"ConfiguratorOverviewFormModule_Factory"),ConfiguratorOverviewFormModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFormModule}),ConfiguratorOverviewFormModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewForm:{component:ConfiguratorOverviewFormComponent}}})],imports:[common.ez,ConfiguratorOverviewAttributeModule,ConfiguratorOverviewBundleAttributeModule,spartacus_core.LUR]});class ConfiguratorOverviewMenuComponent{constructor(configuratorStorefrontUtilsService){this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.height=this.getHeight(),this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT="cx-page-slot.VariantConfigOverviewNavigation",this.CX_CONFIGURATOR_OVERVIEW_MENU="cx-configurator-overview-menu",this.CX_MENU_ITEM_BUTTONS="button.cx-menu-item",this.CX_GROUPS="div.cx-group",this.CX_MENU_GROUP="cx-menu-group",this.OV_MENU_ITEM="-ovMenuItem",this.OV_GROUP="-ovGroup",this.ACTIVE_CLASS="active",this.MENU_ITEM_HEIGHT=39.5,this.iconTypes=spartacus_storefront.e1G,this.styles=[["margin-block-end","268px"],["position","-webkit-sticky"],["position","sticky"],["top","0"]]}ngAfterViewInit(){this.amount=this.getAmount(this.config),this.menuItemsHeight=this.getMenuItemsHeight(),this.adjustStyling(),this.onScroll()}onScroll(){this.menuItem=this.getMenuItemToHighlight(),this.highlight(this.menuItem),this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}onResize(){this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}getAmount(configuration){return configuration.overview?.groups?this.getAmountOfGroups(0,configuration.overview.groups):0}getAmountOfGroups(amount,groups){return groups&&(amount+=groups.length,groups.forEach(group=>{group.subGroups&&(amount=this.getAmountOfGroups(amount,group.subGroups))})),amount}getMenuItemsHeight(){return this.amount*this.MENU_ITEM_HEIGHT}adjustStyling(){this.amount>=1?this.changeStyling():this.removeStyling()}getHeight(){const spareViewportHeight=this.configuratorStorefrontUtilsService.getSpareViewportHeight();return this.menuItemsHeight>spareViewportHeight?spareViewportHeight+"px":""}changeStyling(){this.styles.forEach(style=>{this.configuratorStorefrontUtilsService.changeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,style[0],style[1])})}removeStyling(){this.styles.forEach(style=>{this.configuratorStorefrontUtilsService.removeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,style[0])})}getMenuItemToHighlight(){let menuItem;const groups=this.configuratorStorefrontUtilsService.getElements(this.CX_GROUPS),verticallyScrolledPixels=this.configuratorStorefrontUtilsService.getVerticallyScrolledPixels();return groups?.forEach(group=>{if(verticallyScrolledPixels&&verticallyScrolledPixels>=group.offsetTop){const id=group.id.replace(this.OV_GROUP,this.OV_MENU_ITEM);if(id){const querySelector="#"+id;menuItem=this.configuratorStorefrontUtilsService.getElement(querySelector)}}}),menuItem}highlight(elementToHighlight){elementToHighlight&&this.configuratorStorefrontUtilsService.getElements(this.CX_MENU_ITEM_BUTTONS)?.forEach(menuItem=>{menuItem.classList.remove(this.ACTIVE_CLASS),menuItem.id===elementToHighlight.id&&elementToHighlight.classList.add(this.ACTIVE_CLASS)})}ensureElementVisible(element){element&&this.configuratorStorefrontUtilsService.hasScrollbar(this.CX_CONFIGURATOR_OVERVIEW_MENU)&&this.configuratorStorefrontUtilsService.ensureElementVisible(this.CX_CONFIGURATOR_OVERVIEW_MENU,element)}getGroupLevelStyleClasses(level){return this.CX_MENU_GROUP+" groupLevel"+level}navigateToGroup(prefix,id){const ovGroupId=this.configuratorStorefrontUtilsService.createOvGroupId(prefix,id);this.configuratorStorefrontUtilsService.scrollToConfigurationElement("#"+ovGroupId+" h2")}getPrefixId(idPrefix,groupId){return this.configuratorStorefrontUtilsService.getPrefixId(idPrefix,groupId)}getGroupId(idPrefix,groupId){return this.configuratorStorefrontUtilsService.createOvGroupId(idPrefix,groupId)}getMenuItemId(idPrefix,groupId){return this.configuratorStorefrontUtilsService.createOvMenuItemId(idPrefix,groupId)}}__name(ConfiguratorOverviewMenuComponent,"ConfiguratorOverviewMenuComponent"),ConfiguratorOverviewMenuComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewMenuComponent)(core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorOverviewMenuComponent_Factory"),ConfiguratorOverviewMenuComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewMenuComponent,selectors:[["cx-configurator-overview-menu"]],hostVars:2,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("scroll",__name(function($event){return ctx.onScroll($event)},"ConfiguratorOverviewMenuComponent_scroll_HostBindingHandler"),!1,core.Jf7)("resize",__name(function($event){return ctx.onResize($event)},"ConfiguratorOverviewMenuComponent_resize_HostBindingHandler"),!1,core.Jf7),2&rf&&core.Udp("height",ctx.height)},"ConfiguratorOverviewMenuComponent_HostBindings"),inputs:{config:"config"},decls:3,vars:1,consts:[[4,"ngIf"],["groups",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"cx-menu-item",3,"id","click"],["aria-hidden","true"],["aria-hidden","true",3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewMenuComponent_ng_container_0_Template,2,4,"ng-container",0),core.YNc(1,ConfiguratorOverviewMenuComponent_ng_template_1_Template,2,1,"ng-template",null,1,core.W1O)),2&rf&&core.Q6J("ngIf",ctx.config)},"ConfiguratorOverviewMenuComponent_Template"),dependencies:[common.mk,common.sg,common.O5,common.tP,spartacus_storefront.oJW,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorOverviewMenuModule{}__name(ConfiguratorOverviewMenuModule,"ConfiguratorOverviewMenuModule"),ConfiguratorOverviewMenuModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewMenuModule)},"ConfiguratorOverviewMenuModule_Factory"),ConfiguratorOverviewMenuModule.\u0275mod=core.oAB({type:ConfiguratorOverviewMenuModule}),ConfiguratorOverviewMenuModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1]});class ConfiguratorOverviewNotificationBannerComponent{constructor(configuratorCommonsService,configRouterExtractorService,commonConfigUtilsService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.commonConfigUtilsService=commonConfigUtilsService,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,filter.h)(routerData=>routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.PRODUCT||routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY),(0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.configurationOverview$=this.configuration$.pipe((0,map.U)(configuration=>configuration.overview)),this.numberOfIssues$=this.configuration$.pipe((0,map.U)(configuration=>{const configOv=configuration.overview;return configOv?.totalNumberOfIssues?void 0!==configOv.numberOfIncompleteCharacteristics?configOv.numberOfIncompleteCharacteristics:configOv.totalNumberOfIssues:configuration.totalNumberOfIssues?configuration.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe((0,map.U)(configuration=>configuration.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe((0,map.U)(configuration=>(configuration.overview?.numberOfConflicts??0)>0)),this.iconTypes=spartacus_storefront.e1G}}__name(ConfiguratorOverviewNotificationBannerComponent,"ConfiguratorOverviewNotificationBannerComponent"),ConfiguratorOverviewNotificationBannerComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewNotificationBannerComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_product_configurator_common.NU))},"ConfiguratorOverviewNotificationBannerComponent_Factory"),ConfiguratorOverviewNotificationBannerComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewNotificationBannerComponent,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.routerData$))},"ConfiguratorOverviewNotificationBannerComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,router.rH,common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class ConfiguratorOverviewNotificationBannerModule{}__name(ConfiguratorOverviewNotificationBannerModule,"ConfiguratorOverviewNotificationBannerModule"),ConfiguratorOverviewNotificationBannerModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewNotificationBannerModule)},"ConfiguratorOverviewNotificationBannerModule_Factory"),ConfiguratorOverviewNotificationBannerModule.\u0275mod=core.oAB({type:ConfiguratorOverviewNotificationBannerModule}),ConfiguratorOverviewNotificationBannerModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewBanner:{component:ConfiguratorOverviewNotificationBannerComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.QX1,router.Bz]});class ConfiguratorOverviewSidebarComponent{constructor(configuratorCommonsService,configRouterExtractorService,configuratorStorefrontUtilsService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configuratorStorefrontUtilsService=configuratorStorefrontUtilsService,this.ghostStyle=!0,this.showFilter=!1,this.config$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,filter.h)(configuration=>null!=configuration.overview),(0,tap.b)(data=>{data&&(this.ghostStyle=!1)})),this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)),(0,filter.h)(configuration=>null!=configuration.overview),(0,tap.b)(data=>{data&&(this.ghostStyle=!1)}))}onFilter(){this.showFilter=!0}onMenu(){this.showFilter=!1}}__name(ConfiguratorOverviewSidebarComponent,"ConfiguratorOverviewSidebarComponent"),ConfiguratorOverviewSidebarComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewSidebarComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorOverviewSidebarComponent_Factory"),ConfiguratorOverviewSidebarComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewSidebarComponent,selectors:[["cx-configurator-overview-sidebar"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorOverviewSidebarComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostSidebar",""],["role","tablist",1,"cx-menu-bar"],["role","tab",3,"click"],[3,"config",4,"ngIf"],[3,"config"],[1,"cx-ghost-menu"],[1,"cx-ghost-menu-bar","ghost"],[4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level1"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-menu-item-title","ghost"],[4,"ngIf"],[1,"cx-ghost-menu-level2"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level3"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorOverviewSidebarComponent_ng_container_0_Template,10,14,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorOverviewSidebarComponent_ng_template_2_Template,3,2,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configurationWithOv$))("ngIfElse",_r1)}},"ConfiguratorOverviewSidebarComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorOverviewFilterComponent,ConfiguratorOverviewMenuComponent,common.Ov,spartacus_core.X$D],encapsulation:2});class ConfiguratorOverviewSidebarModule{}__name(ConfiguratorOverviewSidebarModule,"ConfiguratorOverviewSidebarModule"),ConfiguratorOverviewSidebarModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewSidebarModule)},"ConfiguratorOverviewSidebarModule_Factory"),ConfiguratorOverviewSidebarModule.\u0275mod=core.oAB({type:ConfiguratorOverviewSidebarModule}),ConfiguratorOverviewSidebarModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewSidebar:{component:ConfiguratorOverviewSidebarComponent}}})],imports:[common.ez,spartacus_core.LUR,ConfiguratorOverviewFilterModule,ConfiguratorOverviewMenuModule]});class ConfiguratorPreviousNextButtonsComponent{constructor(configuratorGroupsService,configuratorCommonsService,configRouterExtractorService,configUtils){this.configuratorGroupsService=configuratorGroupsService,this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configUtils=configUtils,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)))}onPrevious(configuration){this.configuratorGroupsService.getPreviousGroupId(configuration.owner).pipe((0,take.q)(1)).subscribe(groupId=>{groupId&&(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(configuration){this.configuratorGroupsService.getNextGroupId(configuration.owner).pipe((0,take.q)(1)).subscribe(groupId=>{groupId&&(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(owner){return this.configuratorGroupsService.getPreviousGroupId(owner).pipe((0,map.U)(group=>!group))}isLastGroup(owner){return this.configuratorGroupsService.getNextGroupId(owner).pipe((0,map.U)(group=>!group))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.isConfigurationLoading(routerData.owner).pipe((0,filter.h)(isLoading=>isLoading),(0,take.q)(1),(0,switchMap.w)(()=>this.configuratorCommonsService.isConfigurationLoading(routerData.owner).pipe((0,filter.h)(isLoading=>!isLoading),(0,take.q)(1),(0,delay.g)(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}}__name(ConfiguratorPreviousNextButtonsComponent,"ConfiguratorPreviousNextButtonsComponent"),ConfiguratorPreviousNextButtonsComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPreviousNextButtonsComponent)(core.Y36(ConfiguratorGroupsService),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorPreviousNextButtonsComponent_Factory"),ConfiguratorPreviousNextButtonsComponent.\u0275cmp=core.Xpm({type:ConfiguratorPreviousNextButtonsComponent,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-block","btn-secondary","cx-previous",3,"disabled","click"],[1,"btn","btn-block","btn-secondary","cx-next",3,"disabled","click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template,2,1,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorPreviousNextButtonsComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPreviousNextButtonsModule{}__name(ConfiguratorPreviousNextButtonsModule,"ConfiguratorPreviousNextButtonsModule"),ConfiguratorPreviousNextButtonsModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPreviousNextButtonsModule)},"ConfiguratorPreviousNextButtonsModule_Factory"),ConfiguratorPreviousNextButtonsModule.\u0275mod=core.oAB({type:ConfiguratorPreviousNextButtonsModule}),ConfiguratorPreviousNextButtonsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorPrevNext:{component:ConfiguratorPreviousNextButtonsComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.oPH]});class ConfiguratorPriceSummaryComponent{constructor(configuratorCommonsService,configRouterExtractorService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)))}}__name(ConfiguratorPriceSummaryComponent,"ConfiguratorPriceSummaryComponent"),ConfiguratorPriceSummaryComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceSummaryComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorPriceSummaryComponent_Factory"),ConfiguratorPriceSummaryComponent.\u0275cmp=core.Xpm({type:ConfiguratorPriceSummaryComponent,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-total-price"],[1,"cx-label"],[4,"cxFeatureLevel"],[1,"cx-amount"],[1,"cx-summary-row","cx-base-price"],[1,"cx-summary-row","cx-selected-options"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorPriceSummaryComponent_ng_container_0_Template,2,1,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorPriceSummaryComponent_Template"),dependencies:[common.O5,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceSummaryModule{}__name(ConfiguratorPriceSummaryModule,"ConfiguratorPriceSummaryModule"),ConfiguratorPriceSummaryModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceSummaryModule)},"ConfiguratorPriceSummaryModule_Factory"),ConfiguratorPriceSummaryModule.\u0275mod=core.oAB({type:ConfiguratorPriceSummaryModule}),ConfiguratorPriceSummaryModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorPriceSummary:{component:ConfiguratorPriceSummaryComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_core.GSh]});class ConfiguratorProductTitleComponent{constructor(configuratorCommonsService,configRouterExtractorService,productService,configExpertModeService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.productService=productService,this.configExpertModeService=configExpertModeService,this.ghostStyle=!0,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.product$=this.configuration$.pipe((0,map.U)(configuration=>{switch(configuration.owner.type){case spartacus_product_configurator_common.$g.OwnerType.PRODUCT:case spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY:return configuration.productCode;case spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY:return configuration.overview?.productCode}}),(0,switchMap.w)(productCode=>productCode?this.productService.get(productCode,"list"):empty.E)).pipe((0,tap.b)(()=>{this.ghostStyle=!1})),this.showMore=!1,this.iconTypes=spartacus_storefront.e1G}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService.getExpModeActive()}}__name(ConfiguratorProductTitleComponent,"ConfiguratorProductTitleComponent"),ConfiguratorProductTitleComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorProductTitleComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_core.M52),core.Y36(ConfiguratorExpertModeService))},"ConfiguratorProductTitleComponent_Factory"),ConfiguratorProductTitleComponent.\u0275cmp=core.Xpm({type:ConfiguratorProductTitleComponent,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorProductTitleComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostProductTitle",""],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorProductTitleComponent_ng_container_0_Template,20,14,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorProductTitleComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.product$))("ngIfElse",_r1)}},"ConfiguratorProductTitleComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.R7z,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorProductTitleModule{}__name(ConfiguratorProductTitleModule,"ConfiguratorProductTitleModule"),ConfiguratorProductTitleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorProductTitleModule)},"ConfiguratorProductTitleModule_Factory"),ConfiguratorProductTitleModule.\u0275mod=core.oAB({type:ConfiguratorProductTitleModule}),ConfiguratorProductTitleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorProductTitle:{component:ConfiguratorProductTitleComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,ng_select_ng_select.A0,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.cOq]});class ConfiguratorRestartDialogComponent{constructor(launchDialogService,configuratorCommonsService,routingService,productService){this.launchDialogService=launchDialogService,this.configuratorCommonsService=configuratorCommonsService,this.routingService=routingService,this.productService=productService,this.dialogData$=this.launchDialogService.data$.pipe((0,filter.h)(dialogData=>dialogData&&dialogData.owner)),this.product$=this.dialogData$.pipe((0,switchMap.w)(dialogData=>this.productService.get(dialogData.owner.id))),this.iconTypes=spartacus_storefront.e1G,this.focusConfig={trap:!0,block:!0,autofocus:".btn-primary",focusOnEscape:!0}}close(){this.launchDialogService.closeDialog("Close restart configuration dialog")}resume(product){this.close(),this.routingService.go({cxRoute:"configure"+product.configuratorType,params:{ownerType:spartacus_product_configurator_common.$g.OwnerType.PRODUCT,entityKey:product.code}})}restart(owner){this.configuratorCommonsService.forceNewConfiguration(owner),this.close()}backToPDP(product){this.close(),this.routingService.go({cxRoute:"product",params:product})}}__name(ConfiguratorRestartDialogComponent,"ConfiguratorRestartDialogComponent"),ConfiguratorRestartDialogComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorRestartDialogComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_core.Znh),core.Y36(spartacus_core.M52))},"ConfiguratorRestartDialogComponent_Factory"),ConfiguratorRestartDialogComponent.\u0275cmp=core.Xpm({type:ConfiguratorRestartDialogComponent,selectors:[["cx-configurator-restart-dialog"]],decls:3,vars:3,consts:[[1,"cx-modal-container"],[4,"ngIf"],[1,"cx-modal-content",3,"cxFocus","esc"],[1,"cx-dialog-header","modal-header"],[1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"title","click"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["id","cx-configurator-restart-dialog-description"],["aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-primary","btn-block",3,"click"],["type","button","aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-secondary","btn-block",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorRestartDialogComponent_ng_container_1_Template,3,3,"ng-container",1),core.ALo(2,"async"),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx.dialogData$)))},"ConfiguratorRestartDialogComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,common.Ov,spartacus_core.X$D],encapsulation:2});const defaultConfiguratorRestartDialogLayoutConfig={launch:{CONFIGURATOR_RESTART_DIALOG:{inlineRoot:!0,component:ConfiguratorRestartDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class ConfiguratorRestartDialogModule{}__name(ConfiguratorRestartDialogModule,"ConfiguratorRestartDialogModule"),ConfiguratorRestartDialogModule.\u0275fac=__name(function(t){return new(t||ConfiguratorRestartDialogModule)},"ConfiguratorRestartDialogModule_Factory"),ConfiguratorRestartDialogModule.\u0275mod=core.oAB({type:ConfiguratorRestartDialogModule}),ConfiguratorRestartDialogModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultConfiguratorRestartDialogLayoutConfig)],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH]});class ConfiguratorTabBarComponent{getTabIndexConfigTab(){let tabIndex=0;return this.isOverviewPage$.pipe((0,take.q)(1)).subscribe(isOvPage=>{isOvPage&&(tabIndex=-1)}),tabIndex}getTabIndexOverviewTab(){let tabIndex=0;return this.isOverviewPage$.pipe((0,take.q)(1)).subscribe(isOvPage=>{isOvPage||(tabIndex=-1)}),tabIndex}switchTabOnArrowPress(event,currentTab){("ArrowLeft"===event.code||"ArrowRight"===event.code)&&(event.preventDefault(),"#configTab"===currentTab?this.overviewTab.nativeElement?.focus():this.configTab.nativeElement?.focus())}constructor(configRouterExtractorService,configuratorCommonsService){this.configRouterExtractorService=configRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,tap.b)(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe((0,map.U)(routerData=>routerData.pageType===spartacus_product_configurator_common.iB.PageType.OVERVIEW))}}__name(ConfiguratorTabBarComponent,"ConfiguratorTabBarComponent"),ConfiguratorTabBarComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorTabBarComponent)(core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService))},"ConfiguratorTabBarComponent_Factory"),ConfiguratorTabBarComponent.\u0275cmp=core.Xpm({type:ConfiguratorTabBarComponent,selectors:[["cx-configurator-tab-bar"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(_c35,5),core.Gf(_c36,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.configTab=_t.first),core.iGM(_t=core.CRH())&&(ctx.overviewTab=_t.first)}},"ConfiguratorTabBarComponent_Query"),hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorTabBarComponent_HostBindings"),decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["ghostTabBar",""],["role","tablist",1,"cx-tab-bar"],["role","tab",3,"tabindex","routerLink","keydown"],["configTab",""],["overviewTab",""],[1,"cx-ghost-tab-bar"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorTabBarComponent_ng_container_0_Template,5,4,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.routerData$))},"ConfiguratorTabBarComponent_Template"),dependencies:[common.O5,router.rH,common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class ConfiguratorTabBarModule{}__name(ConfiguratorTabBarModule,"ConfiguratorTabBarModule"),ConfiguratorTabBarModule.\u0275fac=__name(function(t){return new(t||ConfiguratorTabBarModule)},"ConfiguratorTabBarModule_Factory"),ConfiguratorTabBarModule.\u0275mod=core.oAB({type:ConfiguratorTabBarModule}),ConfiguratorTabBarModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorTabBar:{component:ConfiguratorTabBarComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,ng_select_ng_select.A0,common.ez,spartacus_core.LUR,spartacus_core.bhT,router.Bz]});class ConfiguratorUpdateMessageComponent{constructor(configuratorCommonsService,configRouterExtractorService,config){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.config=config,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.hasPendingChanges(routerData.owner)),(0,distinctUntilChanged.x)(),(0,switchMap.w)(isLoading=>isLoading?(0,of.of)(isLoading).pipe((0,delay.g)(this.config.productConfigurator?.updateConfigurationMessage?.waitingTime||1e3)):(0,of.of)(isLoading)))}}__name(ConfiguratorUpdateMessageComponent,"ConfiguratorUpdateMessageComponent"),ConfiguratorUpdateMessageComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorUpdateMessageComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorMessageConfig))},"ConfiguratorUpdateMessageComponent_Factory"),ConfiguratorUpdateMessageComponent.\u0275cmp=core.Xpm({type:ConfiguratorUpdateMessageComponent,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1),core.ALo(2,"async"),core._UZ(3,"cx-spinner"),core.TgZ(4,"strong"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()()),2&rf&&(core.xp6(1),core.ekj("visible",core.lcZ(2,3,ctx.hasPendingChanges$)),core.xp6(4),core.Oqu(core.lcZ(6,5,"configurator.header.updateMessage")))},"ConfiguratorUpdateMessageComponent_Template"),dependencies:[spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorUpdateMessageModule{}__name(ConfiguratorUpdateMessageModule,"ConfiguratorUpdateMessageModule"),ConfiguratorUpdateMessageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorUpdateMessageModule)},"ConfiguratorUpdateMessageModule_Factory"),ConfiguratorUpdateMessageModule.\u0275mod=core.oAB({type:ConfiguratorUpdateMessageModule}),ConfiguratorUpdateMessageModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorUpdateMessage:{component:ConfiguratorUpdateMessageComponent}}}),(0,spartacus_core.i51)({productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}}),{provide:ConfiguratorMessageConfig,useExisting:spartacus_core.DeH}],imports:[common.ez,spartacus_storefront.Fme,spartacus_core.LUR]});class ConfiguratorVariantCarouselComponent{constructor(productService,translationService,configuratorRouterExtractorService,configuratorCommonsService){this.productService=productService,this.translationService=translationService,this.configuratorRouterExtractorService=configuratorRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe((0,map.U)(configuration=>configuration.variants?configuration.variants:[]),(0,map.U)(variants=>variants.map(variant=>this.productService.get(variant.productCode))))}}__name(ConfiguratorVariantCarouselComponent,"ConfiguratorVariantCarouselComponent"),ConfiguratorVariantCarouselComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantCarouselComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.D7D),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService))},"ConfiguratorVariantCarouselComponent_Factory"),ConfiguratorVariantCarouselComponent.\u0275cmp=core.Xpm({type:ConfiguratorVariantCarouselComponent,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],["carouselItem",""],[3,"item"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorVariantCarouselComponent_ng_container_0_Template,8,13,"ng-container",0),core.ALo(1,"async"),core.ALo(2,"async")),2&rf){let tmp_0_0;core.Q6J("ngIf",(null!==(tmp_0_0=null==(tmp_0_0=core.lcZ(1,1,ctx.items$))?null:tmp_0_0.length)&&void 0!==tmp_0_0?tmp_0_0:0)>0&&core.lcZ(2,3,ctx.items$))}},"ConfiguratorVariantCarouselComponent_Template"),dependencies:[common.O5,spartacus_storefront.Fy4,spartacus_storefront.mEt,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorVariantCarouselModule{}__name(ConfiguratorVariantCarouselModule,"ConfiguratorVariantCarouselModule"),ConfiguratorVariantCarouselModule.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantCarouselModule)},"ConfiguratorVariantCarouselModule_Factory"),ConfiguratorVariantCarouselModule.\u0275mod=core.oAB({type:ConfiguratorVariantCarouselModule}),ConfiguratorVariantCarouselModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorVariantCarousel:{component:ConfiguratorVariantCarouselComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.bBg,spartacus_storefront.pvk]});class RulebasedConfiguratorComponentsModule{}__name(RulebasedConfiguratorComponentsModule,"RulebasedConfiguratorComponentsModule"),RulebasedConfiguratorComponentsModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorComponentsModule)},"RulebasedConfiguratorComponentsModule_Factory"),RulebasedConfiguratorComponentsModule.\u0275mod=core.oAB({type:RulebasedConfiguratorComponentsModule}),RulebasedConfiguratorComponentsModule.\u0275inj=core.cJS({imports:[ConfiguratorPriceSummaryModule,ConfiguratorAddToCartButtonModule,ConfiguratorGroupMenuModule,ConfiguratorProductTitleModule,ConfiguratorTabBarModule,ConfiguratorGroupModule,ConfiguratorFormModule,ConfiguratorGroupTitleModule,ConfiguratorUpdateMessageModule,ConfiguratorPreviousNextButtonsModule,ConfiguratorOverviewAttributeModule,ConfiguratorOverviewFormModule,ConfiguratorOverviewMenuModule,ConfiguratorOverviewNotificationBannerModule,ConfiguratorConflictAndErrorMessagesModule,ConfiguratorExitButtonModule,ConfiguratorAttributeCompositionModule,ConfiguratorVariantCarouselModule,ConfiguratorOverviewFilterModule,ConfiguratorOverviewFilterButtonModule,ConfiguratorOverviewFilterDialogModule,ConfiguratorOverviewSidebarModule,ConfiguratorConflictSolverDialogModule,ConfiguratorRestartDialogModule]});class ConfiguratorCoreConfig{}__name(ConfiguratorCoreConfig,"ConfiguratorCoreConfig"),ConfiguratorCoreConfig.\u0275fac=__name(function(t){return new(t||ConfiguratorCoreConfig)},"ConfiguratorCoreConfig_Factory"),ConfiguratorCoreConfig.\u0275prov=core.Yz7({token:ConfiguratorCoreConfig,factory:__name(function(t){let r=null;return r=t?new(t||ConfiguratorCoreConfig):core.LFG(spartacus_core.DeH),r},"ConfiguratorCoreConfig_Factory"),providedIn:"root"});__name(class RulebasedConfiguratorAdapter{},"RulebasedConfiguratorAdapter");class RulebasedConfiguratorConnector{constructor(adapters,configUtilsService,config){this.adapters=adapters,this.configUtilsService=configUtilsService,this.config=config}createConfiguration(owner,configIdTemplate,forceReset=!1){return this.getAdapter(owner.configuratorType).createConfiguration(owner,configIdTemplate,forceReset)}readConfiguration(configId,groupId,configurationOwner){return this.getAdapter(configurationOwner.configuratorType).readConfiguration(configId,groupId,configurationOwner)}updateConfiguration(configuration){return this.getAdapter(configuration.owner.configuratorType).updateConfiguration(configuration)}addToCart(parameters){return this.getAdapter(parameters.owner.configuratorType).addToCart(parameters)}readConfigurationForCartEntry(parameters){return this.getAdapter(parameters.owner.configuratorType).readConfigurationForCartEntry(parameters)}updateConfigurationForCartEntry(parameters){return this.getAdapter(parameters.configuration.owner.configuratorType).updateConfigurationForCartEntry(parameters)}readConfigurationForOrderEntry(parameters){return this.getAdapter(parameters.owner.configuratorType).readConfigurationForOrderEntry(parameters)}readPriceSummary(configuration){return this.getAdapter(configuration.owner.configuratorType).readPriceSummary(configuration)}getConfigurationOverview(configuration){return this.getAdapter(configuration.owner.configuratorType).getConfigurationOverview(configuration.configId)}updateConfigurationOverview(configuration){const overview=configuration.overview;return overview?this.getAdapter(configuration.owner.configuratorType).updateConfigurationOverview(overview):this.getAdapter(configuration.owner.configuratorType).getConfigurationOverview(configuration.configId)}searchVariants(configuration){return this.getAdapter(configuration.owner.configuratorType).searchVariants(configuration.configId)}getAdapter(configuratorType){const adapterResult=this.adapters.find(adapter=>this.isAdapterMatching(adapter,configuratorType));if(adapterResult)return adapterResult;throw new Error("No adapter found for configurator type: "+configuratorType)}isAdapterMatching(adapter,configuratorType){let matching=adapter.getConfiguratorType()===configuratorType;if(matching&&"CLOUDCPQCONFIGURATOR"===configuratorType){matching=(this.config?.productConfigurator?.cpqOverOcc??!1)===(!!adapter.supportsCpqOverOcc&&adapter.supportsCpqOverOcc())}return matching}}__name(RulebasedConfiguratorConnector,"RulebasedConfiguratorConnector"),RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST=new core.OlP("ConfiguratorAdapterList"),RulebasedConfiguratorConnector.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorConnector)(core.LFG(RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorCoreConfig,8))},"RulebasedConfiguratorConnector_Factory"),RulebasedConfiguratorConnector.\u0275prov=core.Yz7({token:RulebasedConfiguratorConnector,factory:RulebasedConfiguratorConnector.\u0275fac});class ConfiguratorRouterListener{constructor(configuratorCartService,routingService,configuratorQuantityService){this.configuratorCartService=configuratorCartService,this.routingService=routingService,this.configuratorQuantityService=configuratorQuantityService,this.subscription=new Subscription.w,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(routerState=>{this.isConfiguratorRelatedRoute(routerState.state.semanticRoute)||(this.configuratorCartService.removeCartBoundConfigurations(),this.configuratorQuantityService&&this.configuratorQuantityService.setQuantity(1))}))}isConfiguratorRelatedRoute(semanticRoute){return!!semanticRoute&&semanticRoute.includes("configure")}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorRouterListener,"ConfiguratorRouterListener"),ConfiguratorRouterListener.\u0275fac=__name(function(t){return new(t||ConfiguratorRouterListener)(core.LFG(ConfiguratorCartService),core.LFG(spartacus_core.Znh),core.LFG(ConfiguratorQuantityService,8))},"ConfiguratorRouterListener_Factory"),ConfiguratorRouterListener.\u0275prov=core.Yz7({token:ConfiguratorRouterListener,factory:ConfiguratorRouterListener.\u0275fac,providedIn:"root"});class ConfiguratorRouterModule{constructor(_configuratorRouterListener){}}__name(ConfiguratorRouterModule,"ConfiguratorRouterModule"),ConfiguratorRouterModule.\u0275fac=__name(function(t){return new(t||ConfiguratorRouterModule)(core.LFG(ConfiguratorRouterListener))},"ConfiguratorRouterModule_Factory"),ConfiguratorRouterModule.\u0275mod=core.oAB({type:ConfiguratorRouterModule}),ConfiguratorRouterModule.\u0275inj=core.cJS({});class ConfiguratorBasicEffectService{getFirstGroupWithAttributes(configuration,includeConflicts=!1){const id=this.getFirstGroupWithAttributesForList(configuration.groups,includeConflicts);if(id)return id;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(groups,includeConflicts){let groupWithAttributes,id;return includeConflicts&&groups.length>0&&groups[0].groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP&&(groupWithAttributes=groups[0].subGroups.filter(currentGroup=>currentGroup.attributes&&currentGroup.attributes.length>0).shift()),void 0===groupWithAttributes&&(groupWithAttributes=groups.filter(currentGroup=>currentGroup.attributes&&currentGroup.attributes.length>0&&currentGroup.groupType!==Configurator.GroupType.CONFLICT_GROUP).shift()),id=groupWithAttributes?groupWithAttributes.id:groups.filter(currentGroup=>currentGroup.subGroups&&currentGroup.subGroups.length>0).flatMap(currentGroup=>this.getFirstGroupWithAttributesForList(currentGroup.subGroups,includeConflicts)).filter(groupId=>groupId).shift(),id}}__name(ConfiguratorBasicEffectService,"ConfiguratorBasicEffectService"),ConfiguratorBasicEffectService.\u0275fac=__name(function(t){return new(t||ConfiguratorBasicEffectService)},"ConfiguratorBasicEffectService_Factory"),ConfiguratorBasicEffectService.\u0275prov=core.Yz7({token:ConfiguratorBasicEffectService,factory:ConfiguratorBasicEffectService.\u0275fac,providedIn:"root"});class ConfiguratorBasicEffects{constructor(actions$,configuratorCommonsConnector,commonConfigUtilsService,configuratorGroupUtilsService,configuratorGroupStatusService,store,configuratorBasicEffectService){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorGroupUtilsService=configuratorGroupUtilsService,this.configuratorGroupStatusService=configuratorGroupStatusService,this.store=store,this.configuratorBasicEffectService=configuratorBasicEffectService,this.logger=(0,core.f3M)(spartacus_core.mQy),this.createConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Create Configuration"),(0,mergeMap.zg)(action=>this.configuratorCommonsConnector.createConfiguration(action.payload.owner,action.payload.configIdTemplate,action.payload.forceReset).pipe((0,switchMap.w)(configuration=>{const currentGroup=this.configuratorBasicEffectService.getFirstGroupWithAttributes(configuration);return this.store.dispatch(new UpdatePriceSummary({...configuration,interactionState:{currentGroup}})),[new CreateConfigurationSuccess(configuration),new SearchVariants(configuration)]}),(0,catchError.K)(error=>[new CreateConfigurationFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})]))))),this.readConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Configuration"),(0,mergeMap.zg)(action=>this.configuratorCommonsConnector.readConfiguration(action.payload.configuration.configId,action.payload.groupId,action.payload.configuration.owner).pipe((0,switchMap.w)(configuration=>[new ReadConfigurationSuccess(configuration)]),(0,catchError.K)(error=>[new ReadConfigurationFail({ownerKey:action.payload.configuration.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})]))))),this.updateConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.updateConfiguration(payload).pipe((0,map.U)(configuration=>new UpdateConfigurationSuccess({...configuration,interactionState:{isConflictResolutionMode:payload.interactionState.isConflictResolutionMode}})),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error,this.logger);return[new UpdateConfigurationFail({configuration:payload,error:errorPayload})]}))))),this.updatePriceSummary$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(UPDATE_PRICE_SUMMARY),(0,map.U)(action=>action.payload),(0,filter.h)(configuration=>!0===configuration.pricingEnabled),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.readPriceSummary(payload).pipe((0,map.U)(configuration=>new UpdatePriceSummarySuccess(configuration)),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error,this.logger);return[new UpdatePriceSummaryFail({ownerKey:payload.owner.key,error:errorPayload})]}))))),this.getOverview$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Get Configuration Overview"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.getConfigurationOverview(payload).pipe((0,map.U)(overview=>new GetConfigurationOverviewSuccess({ownerKey:payload.owner.key,overview})),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error,this.logger);return[new GetConfigurationOverviewFail({ownerKey:payload.owner.key,error:errorPayload})]}))))),this.updateOverview$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration Overview"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.updateConfigurationOverview(payload).pipe((0,map.U)(overview=>new UpdateConfigurationOverviewSuccess({ownerKey:payload.owner.key,overview})),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error,this.logger);return[new UpdateConfigurationOverviewFail({ownerKey:payload.owner.key,error:errorPayload})]}))))),this.updateConfigurationSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration Success"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(payload.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getCurrentGroup(payload.owner.key)),(0,take.q)(1),(0,map.U)(currentGroupId=>{const groupIdFromPayload=this.configuratorBasicEffectService.getFirstGroupWithAttributes(payload,payload.interactionState.isConflictResolutionMode);return{currentGroupId,groupIdFromPayload,parentGroupFromPayload:this.configuratorGroupUtilsService.getParentGroup(payload.groups,this.configuratorGroupUtilsService.getGroupById(payload.groups,groupIdFromPayload),void 0)}}),(0,switchMap.w)(container=>{const updateFinalizeSuccessAction=new UpdateConfigurationFinalizeSuccess(payload),updatePriceSummaryAction=new UpdatePriceSummary({...payload,interactionState:{currentGroup:container.groupIdFromPayload}}),searchVariantsAction=new SearchVariants(payload);return container.currentGroupId===container.groupIdFromPayload?[updateFinalizeSuccessAction,updatePriceSummaryAction,searchVariantsAction]:[updateFinalizeSuccessAction,updatePriceSummaryAction,searchVariantsAction,new ChangeGroup({configuration:payload,groupId:container.groupIdFromPayload,parentGroupId:container.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration Fail"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(payload.configuration.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,map.U)(()=>new UpdateConfigurationFinalizeFail(payload.configuration)))))),this.handleErrorOnUpdate$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration finalize fail"),(0,map.U)(action=>action.payload),(0,map.U)(payload=>new ReadConfiguration({configuration:payload,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(payload)})))),this.groupChange$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(CHANGE_GROUP),(0,switchMap.w)(action=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(action.payload.configuration.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,switchMap.w)(()=>this.configuratorCommonsConnector.readConfiguration(action.payload.configuration.configId,action.payload.groupId,action.payload.configuration.owner).pipe((0,switchMap.w)(configuration=>[new SetCurrentGroup({entityKey:action.payload.configuration.owner.key,currentGroup:action.payload.groupId}),new SetMenuParentGroup({entityKey:action.payload.configuration.owner.key,menuParentGroup:action.payload.parentGroupId}),new ReadConfigurationSuccess(configuration),new UpdatePriceSummary({...configuration,interactionState:{currentGroup:action.payload.groupId}})]),(0,catchError.K)(error=>[new ReadConfigurationFail({ownerKey:action.payload.configuration.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})]))))))),this.removeProductBoundConfigurations$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Remove product bound configurations"),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationsState),(0,take.q)(1),(0,map.U)(configuratorState=>{const entities=configuratorState.configurations.entities,ownerKeysToRemove=[];for(const ownerKey in entities)ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.PRODUCT)&&ownerKeysToRemove.push(ownerKey);return new RemoveConfiguration({ownerKey:ownerKeysToRemove})})))))}}__name(ConfiguratorBasicEffects,"ConfiguratorBasicEffects"),ConfiguratorBasicEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorBasicEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorUtilsService),core.LFG(ConfiguratorGroupStatusService),core.LFG(ngrx_store.yh),core.LFG(ConfiguratorBasicEffectService))},"ConfiguratorBasicEffects_Factory"),ConfiguratorBasicEffects.\u0275prov=core.Yz7({token:ConfiguratorBasicEffects,factory:ConfiguratorBasicEffects.\u0275fac});class ConfiguratorCartEffects{constructor(actions$,configuratorCommonsConnector,commonConfigUtilsService,configuratorGroupUtilsService,store,configuratorBasicEffectService){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorGroupUtilsService=configuratorGroupUtilsService,this.store=store,this.configuratorBasicEffectService=configuratorBasicEffectService,this.logger=(0,core.f3M)(spartacus_core.mQy),this.addToCart$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(ADD_TO_CART),(0,map.U)(action=>action.payload),(0,switchMap.w)(payload=>this.configuratorCommonsConnector.addToCart(payload).pipe((0,switchMap.w)(entry=>{const entryNumber=entry.entry?.entryNumber;if(void 0===entryNumber)throw Error("Entry number is required in addToCart response");return[new AddNextOwner({ownerKey:payload.owner.key,cartEntryNo:entryNumber.toString()}),new spartacus_cart_base_core.$.CartAddEntrySuccess({...entry,userId:payload.userId,cartId:payload.cartId,productCode:payload.productCode,quantity:payload.quantity,deliveryModeChanged:entry.deliveryModeChanged,entry:entry.entry,quantityAdded:entry.quantityAdded,statusCode:entry.statusCode,statusMessage:entry.statusMessage})]}),(0,catchError.K)(error=>(0,of.of)(new spartacus_cart_base_core.$.CartAddEntryFail({userId:payload.userId,cartId:payload.cartId,productCode:payload.productCode,quantity:payload.quantity,error:error instanceof http.UA?(0,spartacus_core.cxH)(error,this.logger):error}))))))),this.updateCartEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(UPDATE_CART_ENTRY),(0,map.U)(action=>action.payload),(0,switchMap.w)(payload=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(payload).pipe((0,switchMap.w)(cartModification=>[new spartacus_cart_base_core.$.CartUpdateEntrySuccess({userId:payload.userId,cartId:payload.cartId,entryNumber:payload.cartEntryNumber,quantity:cartModification.quantity})]),(0,catchError.K)(error=>(0,of.of)(new spartacus_cart_base_core.$.CartUpdateEntryFail({userId:payload.userId,cartId:payload.cartId,entryNumber:payload.cartEntryNumber,error:(0,spartacus_core.cxH)(error,this.logger)}))))))),this.readConfigurationForCartEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Cart Entry Configuration"),(0,switchMap.w)(action=>{const parameters=action.payload;return this.configuratorCommonsConnector.readConfigurationForCartEntry(parameters).pipe((0,switchMap.w)(result=>{const updatePriceSummaryAction=new UpdatePriceSummary({...result,interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(result,!result.immediateConflictResolution)}});return[new ReadCartEntryConfigurationSuccess(result),updatePriceSummaryAction,new SearchVariants(result)]}),(0,catchError.K)(error=>[new ReadCartEntryConfigurationFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})]))}))),this.readConfigurationForOrderEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Order Entry Configuration"),(0,switchMap.w)(action=>{const parameters=action.payload;return this.configuratorCommonsConnector.readConfigurationForOrderEntry(parameters).pipe((0,switchMap.w)(result=>[new ReadOrderEntryConfigurationSuccess(result)]),(0,catchError.K)(error=>[new ReadOrderEntryConfigurationFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})]))}))),this.removeCartBoundConfigurations$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Remove cart bound configurations"),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationsState),(0,take.q)(1),(0,map.U)(configuratorState=>{const entities=configuratorState.configurations.entities,ownerKeysToRemove=[],ownerKeysProductBound=[];for(const ownerKey in entities)ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY)?ownerKeysToRemove.push(ownerKey):ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.PRODUCT)&&ownerKeysProductBound.push(ownerKey);return ownerKeysProductBound.forEach(ownerKey=>{void 0!==entities[ownerKey].value?.nextOwner&&ownerKeysToRemove.push(ownerKey)}),new RemoveConfiguration({ownerKey:ownerKeysToRemove})}))))),this.addOwner$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(ADD_NEXT_OWNER),(0,switchMap.w)(action=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(action.payload.ownerKey)),(0,take.q)(1),(0,switchMap.w)(configuration=>{const newOwner=spartacus_product_configurator_common.mR.createOwner(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,action.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(newOwner),[new SetNextOwnerCartEntry({configuration,cartEntryNo:action.payload.cartEntryNo}),new SetInteractionState({entityKey:newOwner.key,interactionState:configuration.interactionState})]})))))}}__name(ConfiguratorCartEffects,"ConfiguratorCartEffects"),ConfiguratorCartEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorCartEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorUtilsService),core.LFG(ngrx_store.yh),core.LFG(ConfiguratorBasicEffectService))},"ConfiguratorCartEffects_Factory"),ConfiguratorCartEffects.\u0275prov=core.Yz7({token:ConfiguratorCartEffects,factory:ConfiguratorCartEffects.\u0275fac});class ConfiguratorVariantEffects{constructor(actions$,configuratorCommonsConnector,configuratorCoreConfig){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.configuratorCoreConfig=configuratorCoreConfig,this.logger=(0,core.f3M)(spartacus_core.mQy),this.searchVariants$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(SEARCH_VARIANTS),(0,filter.h)(()=>!0===this.configuratorCoreConfig.productConfigurator?.enableVariantSearch),(0,filter.h)(action=>"CPQCONFIGURATOR"===action.payload.owner.configuratorType),(0,switchMap.w)(action=>this.configuratorCommonsConnector.searchVariants(action.payload).pipe((0,switchMap.w)(result=>[new SearchVariantsSuccess({ownerKey:action.payload.owner.key,variants:result})]),(0,catchError.K)(error=>[new SearchVariantsFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error,this.logger)})])))))}}__name(ConfiguratorVariantEffects,"ConfiguratorVariantEffects"),ConfiguratorVariantEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(ConfiguratorCoreConfig))},"ConfiguratorVariantEffects_Factory"),ConfiguratorVariantEffects.\u0275prov=core.Yz7({token:ConfiguratorVariantEffects,factory:ConfiguratorVariantEffects.\u0275fac});const ConfiguratorEffects=[ConfiguratorBasicEffects,ConfiguratorCartEffects,ConfiguratorVariantEffects];class ConfiguratorStateUtils{static mergeGroupsWithSupplements(groups,attributeSupplements){const mergedGroups=[];return groups.forEach(group=>mergedGroups.push(this.mergeGroupWithSupplements(group,attributeSupplements))),mergedGroups}static mergeGroupWithSupplements(group,attributeSupplements){return this.isTargetGroup(group,attributeSupplements)?this.mergeTargetGroupWithSupplements(group,attributeSupplements):{...group,subGroups:this.mergeGroupsWithSupplements(group.subGroups,attributeSupplements)}}static mergeTargetGroupWithSupplements(group,attributeSupplements){let mergedAttributes=group.attributes;return attributeSupplements.forEach(attributeSupplement=>{const attributeName=ConfiguratorStateUtils.getAttributeName(attributeSupplement.attributeUiKey);mergedAttributes=this.updateArrayElement(mergedAttributes,attribute=>attribute.name===attributeName,attribute=>({...attribute,values:this.mergeValuesWithSupplement(attribute.values,attributeSupplement)}))}),{...group,attributes:mergedAttributes}}static mergeValuesWithSupplement(attributeValues,attributeSupplement){let mergedValues=attributeValues;return attributeSupplement.valueSupplements.forEach(valueSupplement=>{mergedValues=this.updateArrayElement(mergedValues,value=>value.valueCode===valueSupplement.attributeValueKey,value=>({...value,valuePrice:valueSupplement.priceValue}))}),mergedValues}static isTargetGroup(group,attributeSupplements){const firstSupplement=attributeSupplements[0];if(firstSupplement){const attributeName=ConfiguratorStateUtils.getAttributeName(firstSupplement.attributeUiKey),attributeUiKey=ConfiguratorStateUtils.getKey(firstSupplement.attributeUiKey,attributeName);return group.id.indexOf(attributeUiKey)>=0}throw new Error("We expect at least one attribute supplement")}static updateArrayElement(array,predicate,projection){if(array){const index=array.findIndex(predicate);if(-1===index)return array;const newValue=projection(array[index],index),newArray=[...array];return newArray[index]=newValue,newArray}}static getAttributeName(attributeUiKey){const lastIndexOf=attributeUiKey.lastIndexOf("@");return attributeUiKey.slice(lastIndexOf+1)}static getKey(key,name){return key.replace("@"+name,"")}}__name(ConfiguratorStateUtils,"ConfiguratorStateUtils");const initialState={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:spartacus_product_configurator_common.mR.createInitialOwner()};let reducerMap;function configuratorReducer(state=initialState,action){return ensureReducerMapCreated(),reducerMap.has(action.type)?reducerMap.get(action.type)(state,action):state}function ensureReducerMapCreated(){void 0===reducerMap&&(reducerMap=new Map,reducerMap.set(UPDATE_CONFIGURATION_FINALIZE_SUCCESS,handleActionUpdateConfigurationFinalizeSuccess),reducerMap.set(UPDATE_CART_ENTRY,handleActionUpdateCartEntry),reducerMap.set(CREATE_CONFIGURATION_SUCCESS,handleCreateSuccess),reducerMap.set(READ_CONFIGURATION_SUCCESS,handleReadSucess),reducerMap.set(READ_CART_ENTRY_CONFIGURATION_SUCCESS,handleCartEntryReadSucess),reducerMap.set(UPDATE_PRICE_SUMMARY_SUCCESS,handleUpdatePriceSummarySuccess),reducerMap.set(GET_CONFIGURATION_OVERVIEW_SUCCESS,handleGetConfigurationOverviewSuccess),reducerMap.set(UPDATE_CONFIGURATION_OVERVIEW_SUCCESS,handleUpdateConfigurationOverviewSuccess),reducerMap.set(SEARCH_VARIANTS_SUCCESS,handleSearchVariantsSuccess),reducerMap.set(READ_ORDER_ENTRY_CONFIGURATION_SUCCESS,handleReadOrderEntryConfigurationSuccess),reducerMap.set(SET_NEXT_OWNER_CART_ENTRY,handleSetNextOwnerCartEntry),reducerMap.set(SET_INTERACTION_STATE,handleSetInteractionState),reducerMap.set(SET_CURRENT_GROUP,handleSetCurrentGroup),reducerMap.set(SET_MENU_PARENT_GROUP,handleSetMenuParentGroup),reducerMap.set(SET_GROUPS_VISITED,handleSetGroupsVisited),reducerMap.set(DISMISS_CONFLICT_DIALOG,handleActionDismissConflictSolverDialog),reducerMap.set(CHECK_CONFLICT_DIALOG,handleActionCheckConflictSolverDialog),reducerMap.set(CHANGE_GROUP,handleChangeGroup))}function handleActionUpdateConfigurationFinalizeSuccess(state,action){const result=takeOverChanges(action,state);return checkConflictSolverDialog(result),result.isCartEntryUpdateRequired=!0,result.overview=void 0,void 0!==state.interactionState.newConfiguration&&(result.interactionState.newConfiguration=!1),result}function checkConflictSolverDialog(configuration){configuration.interactionState.showConflictSolverDialog=configuration.immediateConflictResolution&&!configuration.consistent,configuration.interactionState.showConflictSolverDialog&&(configuration.interactionState.issueNavigationDone=!0)}function handleActionDismissConflictSolverDialog(state,action){if(action.type===DISMISS_CONFLICT_DIALOG)return{...state,interactionState:{...state.interactionState,showConflictSolverDialog:!1}}}function handleActionCheckConflictSolverDialog(state){const result={...state,interactionState:{...state.interactionState}};return checkConflictSolverDialog(result),result}function handleActionUpdateCartEntry(state){const result={...state};return result.isCartEntryUpdateRequired=!1,result}function handleCreateSuccess(state,action){const result=setInitialCurrentGroup(takeOverChanges(action,state));return checkConflictSolverDialog(result),result.interactionState.newConfiguration=result.newConfiguration,result}function handleReadSucess(state,action){const result=setInitialCurrentGroup(takeOverChanges(action,state));return checkConflictSolverDialog(result),result}function handleCartEntryReadSucess(state,action){return setInitialCurrentGroup(takeOverChanges(action,state))}function handleUpdatePriceSummarySuccess(state,action){return setInitialCurrentGroup(takeOverPricingChanges(action,state))}function handleGetConfigurationOverviewSuccess(state,action){const content={...action.payload.overview,possibleGroups:action.payload.overview.groups};return{...state,overview:content,priceSummary:content.priceSummary,interactionState:{...state.interactionState,issueNavigationDone:!1}}}function handleUpdateConfigurationOverviewSuccess(state,action){const content={...action.payload.overview};return{...state,overview:content,priceSummary:content.priceSummary,interactionState:{...state.interactionState,issueNavigationDone:!1}}}function handleSearchVariantsSuccess(state,action){return{...state,variants:action.payload.variants}}function handleReadOrderEntryConfigurationSuccess(state,action){const configuration={...action.payload};return{...state,...configuration,priceSummary:configuration.overview?.priceSummary}}function handleSetNextOwnerCartEntry(state,action){const content={...action.payload.configuration};return content.nextOwner=spartacus_product_configurator_common.mR.createOwner(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,action.payload.cartEntryNo),{...state,...content}}function handleSetInteractionState(state,action){return{...state,interactionState:action.payload.interactionState}}function handleSetCurrentGroup(state,action){const newCurrentGroup=action.payload.currentGroup,result={...state,interactionState:{...state.interactionState,currentGroup:newCurrentGroup}};return checkConflictSolverDialog(result),result}function handleSetMenuParentGroup(state,action){const newMenuParentGroup=action.payload.menuParentGroup;return{...state,interactionState:{...state.interactionState,menuParentGroup:newMenuParentGroup}}}function handleSetGroupsVisited(state,action){const groupIds=action.payload.visitedGroups,changedInteractionState={groupsVisited:{}};return state.interactionState.groupsVisited&&Object.keys(state.interactionState.groupsVisited).forEach(groupId=>setGroupsVisited(changedInteractionState,groupId)),groupIds.forEach(groupId=>setGroupsVisited(changedInteractionState,groupId)),{...state,interactionState:{...state.interactionState,groupsVisited:changedInteractionState.groupsVisited}}}function handleChangeGroup(state,action){const isConflictResolutionMode=action.payload.conflictResolutionMode;return{...state,interactionState:{...state.interactionState,isConflictResolutionMode}}}function setGroupsVisited(changedInteractionState,groupId){const groupsVisited=changedInteractionState.groupsVisited;groupsVisited&&(groupsVisited[groupId]=!0)}function setInitialCurrentGroup(state){if(state.interactionState.currentGroup)return state;let initialCurrentGroup;const flatGroups=state.flatGroups;flatGroups&&flatGroups.length>0&&(initialCurrentGroup=state.immediateConflictResolution?flatGroups.find(group=>!group.id.startsWith(Configurator.ConflictIdPrefix))?.id:flatGroups[0].id);const menuParentGroup=initialCurrentGroup?.startsWith(Configurator.ConflictIdPrefix)?Configurator.ConflictHeaderId:void 0;return{...state,interactionState:{...state.interactionState,currentGroup:initialCurrentGroup,menuParentGroup}}}function takeOverChanges(action,state){const content={...action.payload},groups=content.groups.length>0?content.groups:state.groups;return{...state,...content,groups,interactionState:{...state.interactionState,...content.interactionState,showConflictSolverDialog:state.interactionState.showConflictSolverDialog,issueNavigationDone:!0}}}function takeOverPricingChanges(action,state){const content={...action.payload},priceSupplements=content.priceSupplements,groups=priceSupplements&&priceSupplements.length>0?ConfiguratorStateUtils.mergeGroupsWithSupplements(state.groups,priceSupplements):state.groups;return{...state,...content,groups,interactionState:{...state.interactionState,...content.interactionState,issueNavigationDone:!0}}}function getConfiguratorReducers(){return{configurations:spartacus_core.kPG.entityProcessesLoaderReducer(CONFIGURATOR_DATA,configuratorReducer)}}__name(configuratorReducer,"configuratorReducer"),__name(ensureReducerMapCreated,"ensureReducerMapCreated"),__name(handleActionUpdateConfigurationFinalizeSuccess,"handleActionUpdateConfigurationFinalizeSuccess"),__name(checkConflictSolverDialog,"checkConflictSolverDialog"),__name(handleActionDismissConflictSolverDialog,"handleActionDismissConflictSolverDialog"),__name(handleActionCheckConflictSolverDialog,"handleActionCheckConflictSolverDialog"),__name(handleActionUpdateCartEntry,"handleActionUpdateCartEntry"),__name(handleCreateSuccess,"handleCreateSuccess"),__name(handleReadSucess,"handleReadSucess"),__name(handleCartEntryReadSucess,"handleCartEntryReadSucess"),__name(handleUpdatePriceSummarySuccess,"handleUpdatePriceSummarySuccess"),__name(handleGetConfigurationOverviewSuccess,"handleGetConfigurationOverviewSuccess"),__name(handleUpdateConfigurationOverviewSuccess,"handleUpdateConfigurationOverviewSuccess"),__name(handleSearchVariantsSuccess,"handleSearchVariantsSuccess"),__name(handleReadOrderEntryConfigurationSuccess,"handleReadOrderEntryConfigurationSuccess"),__name(handleSetNextOwnerCartEntry,"handleSetNextOwnerCartEntry"),__name(handleSetInteractionState,"handleSetInteractionState"),__name(handleSetCurrentGroup,"handleSetCurrentGroup"),__name(handleSetMenuParentGroup,"handleSetMenuParentGroup"),__name(handleSetGroupsVisited,"handleSetGroupsVisited"),__name(handleChangeGroup,"handleChangeGroup"),__name(setGroupsVisited,"setGroupsVisited"),__name(setInitialCurrentGroup,"setInitialCurrentGroup"),__name(takeOverChanges,"takeOverChanges"),__name(takeOverPricingChanges,"takeOverPricingChanges"),__name(getConfiguratorReducers,"getConfiguratorReducers");const configuratorReducerToken=new core.OlP("ConfiguratorReducers"),configuratorReducerProvider={provide:configuratorReducerToken,useFactory:getConfiguratorReducers};class RulebasedConfiguratorStateModule{}__name(RulebasedConfiguratorStateModule,"RulebasedConfiguratorStateModule"),RulebasedConfiguratorStateModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorStateModule)},"RulebasedConfiguratorStateModule_Factory"),RulebasedConfiguratorStateModule.\u0275mod=core.oAB({type:RulebasedConfiguratorStateModule}),RulebasedConfiguratorStateModule.\u0275inj=core.cJS({providers:[configuratorReducerProvider],imports:[common.ez,spartacus_core.vUS,ngrx_store.Aw.forFeature("productConfigurator",configuratorReducerToken),ngrx_effects.sQ.forFeature(ConfiguratorEffects)]});class ConfiguratorLogoutEventListener{constructor(eventService,configExpertModeService,configuratorCommonsService){this.eventService=eventService,this.configExpertModeService=configExpertModeService,this.configuratorCommonsService=configuratorCommonsService,this.subscription=new Subscription.w,this.onLogout()}onLogout(){this.subscription.add((0,merge.T)(this.eventService.get(spartacus_core.rX_)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorLogoutEventListener,"ConfiguratorLogoutEventListener"),ConfiguratorLogoutEventListener.\u0275fac=__name(function(t){return new(t||ConfiguratorLogoutEventListener)(core.LFG(spartacus_core.POd),core.LFG(ConfiguratorExpertModeService),core.LFG(ConfiguratorCommonsService))},"ConfiguratorLogoutEventListener_Factory"),ConfiguratorLogoutEventListener.\u0275prov=core.Yz7({token:ConfiguratorLogoutEventListener,factory:ConfiguratorLogoutEventListener.\u0275fac,providedIn:"root"});class RulebasedConfiguratorCoreModule{constructor(_configuratorLogoutEventListener){}}__name(RulebasedConfiguratorCoreModule,"RulebasedConfiguratorCoreModule"),RulebasedConfiguratorCoreModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorCoreModule)(core.LFG(ConfiguratorLogoutEventListener))},"RulebasedConfiguratorCoreModule_Factory"),RulebasedConfiguratorCoreModule.\u0275mod=core.oAB({type:RulebasedConfiguratorCoreModule}),RulebasedConfiguratorCoreModule.\u0275inj=core.cJS({providers:[RulebasedConfiguratorConnector,(0,spartacus_core.i51)({productConfigurator:{enableVariantSearch:!1,cpqOverOcc:!1}})],imports:[RulebasedConfiguratorStateModule,ConfiguratorRouterModule]});class OccConfiguratorVariantAddToCartSerializer{constructor(){}convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.productCode},quantity:source.quantity,configId:source.configId}}}var OccConfigurator;__name(OccConfiguratorVariantAddToCartSerializer,"OccConfiguratorVariantAddToCartSerializer"),OccConfiguratorVariantAddToCartSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantAddToCartSerializer)},"OccConfiguratorVariantAddToCartSerializer_Factory"),OccConfiguratorVariantAddToCartSerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantAddToCartSerializer,factory:OccConfiguratorVariantAddToCartSerializer.\u0275fac,providedIn:"root"}),function(OccConfigurator2){let GroupType;var GroupType2;let UiType;var UiType2;let PriceType;let ImageFormatType;var ImageFormatType2;let ImageType;var ImageType2;let OverviewFilterEnum;var OverviewFilterEnum2;(GroupType2=GroupType=OccConfigurator2.GroupType||(OccConfigurator2.GroupType={})).CSTIC_GROUP="CSTIC_GROUP",GroupType2.INSTANCE="INSTANCE",GroupType2.CONFLICT_HEADER="CONFLICT_HEADER",GroupType2.CONFLICT="CONFLICT",(UiType2=UiType=OccConfigurator2.UiType||(OccConfigurator2.UiType={})).STRING="STRING",UiType2.NUMERIC="NUMERIC",UiType2.CHECK_BOX="CHECK_BOX",UiType2.CHECK_BOX_LIST="CHECK_BOX_LIST",UiType2.RADIO_BUTTON="RADIO_BUTTON",UiType2.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",UiType2.DROPDOWN="DROPDOWN",UiType2.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",UiType2.READ_ONLY="READ_ONLY",UiType2.NOT_IMPLEMENTED="NOT_IMPLEMENTED",UiType2.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",UiType2.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE",(PriceType=OccConfigurator2.PriceType||(OccConfigurator2.PriceType={})).BUY="BUY",(ImageFormatType2=ImageFormatType=OccConfigurator2.ImageFormatType||(OccConfigurator2.ImageFormatType={})).VALUE_IMAGE="VALUE_IMAGE",ImageFormatType2.CSTIC_IMAGE="CSTIC_IMAGE",(ImageType2=ImageType=OccConfigurator2.ImageType||(OccConfigurator2.ImageType={})).PRIMARY="PRIMARY",ImageType2.GALLERY="GALLERY",(OverviewFilterEnum2=OverviewFilterEnum=OccConfigurator2.OverviewFilterEnum||(OccConfigurator2.OverviewFilterEnum={})).VISIBLE="PRIMARY",OverviewFilterEnum2.USER_INPUT="USER_INPUT",OverviewFilterEnum2.PRICE_RELEVANT="PRICE_RELEVANT"}(OccConfigurator||(OccConfigurator={}));class OccConfiguratorVariantNormalizer{constructor(config,translation,uiSettingsConfig){this.config=config,this.translation=translation,this.uiSettingsConfig=uiSettingsConfig}convert(source,target){const resultTarget={...target,owner:target?.owner??spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:target?.interactionState??{},configId:source.configId,complete:source.complete,consistent:source.consistent,totalNumberOfIssues:source.totalNumberOfIssues,productCode:source.rootProduct,groups:[],flatGroups:[],kbKey:source.kbKey??void 0,pricingEnabled:source.pricingEnabled??!0,hideBasePriceAndSelectedOptions:source.hideBasePriceAndSelectedOptions,immediateConflictResolution:source.immediateConflictResolution??!1,newConfiguration:source.newConfiguration},flatGroups=[];return source.groups?.forEach(group=>this.convertGroup(group,resultTarget.groups,flatGroups)),resultTarget.flatGroups=flatGroups,resultTarget}convertGroup(source,groupList,flatGroupList){const attributes=[];source.attributes&&source.attributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,attributes));const group={description:source.description,configurable:source.configurable,complete:source.complete,consistent:source.consistent,groupType:this.convertGroupType(source.groupType),name:source.name,id:source.id,attributes,subGroups:[]};this.setGroupDescription(group),source.subGroups&&source.subGroups.forEach(sourceSubGroup=>this.convertGroup(sourceSubGroup,group.subGroups,flatGroupList)),(group.groupType===Configurator.GroupType.ATTRIBUTE_GROUP||group.groupType===Configurator.GroupType.CONFLICT_GROUP)&&flatGroupList.push(group),groupList.push(group)}getGroupId(key,name){return key.replace("@"+name,"")}convertAttribute(sourceAttribute,attributeList){const numberOfConflicts=sourceAttribute.conflicts?sourceAttribute.conflicts.length:0,attributeImages=[],attributeValues=[];sourceAttribute.images&&sourceAttribute.images.forEach(occImage=>this.convertImage(occImage,attributeImages)),this.addRetractValue(sourceAttribute,attributeValues),sourceAttribute.domainValues&&sourceAttribute.domainValues.forEach(value=>this.convertValue(value,attributeValues));const uiType=this.convertAttributeType(sourceAttribute),attribute={name:sourceAttribute.name,label:sourceAttribute.langDepName,required:sourceAttribute.required,uiType,uiTypeVariation:sourceAttribute.type,groupId:this.getGroupId(sourceAttribute.key,sourceAttribute.name),userInput:uiType===Configurator.UiType.NUMERIC||uiType===Configurator.UiType.STRING?sourceAttribute.formattedValue?sourceAttribute.formattedValue:"":void 0,maxlength:(sourceAttribute.maxlength??0)+(sourceAttribute.negativeAllowed?1:0),numDecimalPlaces:sourceAttribute.numberScale,negativeAllowed:sourceAttribute.negativeAllowed,numTotalLength:sourceAttribute.typeLength,selectedSingleValue:void 0,hasConflicts:numberOfConflicts>0,images:attributeImages,values:attributeValues,intervalInDomain:sourceAttribute.intervalInDomain,key:sourceAttribute.key,validationType:sourceAttribute.validationType,visible:sourceAttribute.visible};this.setSelectedSingleValue(attribute),this.compileAttributeIncomplete(attribute),attributeList.push(attribute)}setSelectedSingleValue(attribute){if(attribute.values){const selectedValues=attribute.values.map(entry=>entry).filter(entry=>entry.selected);selectedValues&&1===selectedValues.length&&(attribute.selectedSingleValue=selectedValues[0].valueCode)}}isRetractValueSelected(sourceAttribute){return!(sourceAttribute.domainValues&&sourceAttribute.domainValues.filter(value=>value.selected).length)}setRetractValueDisplay(attributeType,value){(attributeType===Configurator.UiType.DROPDOWN||attributeType===Configurator.UiType.RADIOBUTTON)&&(attributeType===Configurator.UiType.DROPDOWN&&value.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text))}hasSourceAttributeConflicts(sourceAttribute){return!!sourceAttribute.conflicts&&sourceAttribute.conflicts.length>0}isSourceAttributeTypeReadOnly(sourceAttribute){return sourceAttribute.type===OccConfigurator.UiType.READ_ONLY}isRetractBlocked(sourceAttribute){return!!sourceAttribute.retractBlocked&&sourceAttribute.retractBlocked}addRetractValue(sourceAttribute,values){const isRetractBlocked=this.isRetractBlocked(sourceAttribute),isConflicting=this.hasSourceAttributeConflicts(sourceAttribute);if(!isRetractBlocked&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(sourceAttribute)&&isConflicting)){const attributeType=this.convertAttributeType(sourceAttribute);if(attributeType===Configurator.UiType.RADIOBUTTON||attributeType===Configurator.UiType.DROPDOWN){const value={valueCode:Configurator.RetractValueCode,selected:this.isRetractValueSelected(sourceAttribute)};this.setRetractValueDisplay(attributeType,value),values.push(value)}}}convertValue(occValue,values){const valueImages=[];occValue.images&&occValue.images.forEach(occImage=>this.convertImage(occImage,valueImages));const value={valueCode:occValue.key,valueDisplay:occValue.langDepName,name:occValue.name,selected:occValue.selected,images:valueImages};values.push(value)}convertImage(occImage,images){const image={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+occImage.url,altText:occImage.altText,galleryIndex:occImage.galleryIndex,type:this.convertImageType(occImage.imageType),format:this.convertImageFormatType(occImage.format)};images.push(image)}convertAttributeType(sourceAttribute){let uiType;const sourceType=sourceAttribute.type?.toString()??"";switch(this.determineCoreUiType(sourceType)){case OccConfigurator.UiType.RADIO_BUTTON:uiType=Configurator.UiType.RADIOBUTTON;break;case OccConfigurator.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:uiType=Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break;case OccConfigurator.UiType.DROPDOWN:uiType=Configurator.UiType.DROPDOWN;break;case OccConfigurator.UiType.DROPDOWN_ADDITIONAL_INPUT:uiType=Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case OccConfigurator.UiType.STRING:uiType=Configurator.UiType.STRING;break;case OccConfigurator.UiType.NUMERIC:uiType=Configurator.UiType.NUMERIC;break;case OccConfigurator.UiType.READ_ONLY:uiType=!sourceAttribute.retractBlocked&&this.hasSourceAttributeConflicts(sourceAttribute)?Configurator.UiType.RADIOBUTTON:Configurator.UiType.READ_ONLY;break;case OccConfigurator.UiType.CHECK_BOX_LIST:uiType=Configurator.UiType.CHECKBOXLIST;break;case OccConfigurator.UiType.CHECK_BOX:uiType=Configurator.UiType.CHECKBOX;break;case OccConfigurator.UiType.MULTI_SELECTION_IMAGE:uiType=Configurator.UiType.MULTI_SELECTION_IMAGE;break;case OccConfigurator.UiType.SINGLE_SELECTION_IMAGE:uiType=Configurator.UiType.SINGLE_SELECTION_IMAGE;break;default:uiType=Configurator.UiType.NOT_IMPLEMENTED}return uiType}determineCoreUiType(sourceType){const indexCustomSeparator=sourceType.indexOf(Configurator.CustomUiTypeIndicator);return indexCustomSeparator>0?sourceType.substring(0,indexCustomSeparator):sourceType}convertGroupType(groupType){switch(groupType){case OccConfigurator.GroupType.CSTIC_GROUP:return Configurator.GroupType.ATTRIBUTE_GROUP;case OccConfigurator.GroupType.INSTANCE:return Configurator.GroupType.SUB_ITEM_GROUP;case OccConfigurator.GroupType.CONFLICT_HEADER:return Configurator.GroupType.CONFLICT_HEADER_GROUP;case OccConfigurator.GroupType.CONFLICT:return Configurator.GroupType.CONFLICT_GROUP}}setGroupDescription(group){switch(group.groupType){case Configurator.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe((0,take.q)(1)).subscribe(conflictHeaderText=>group.description=conflictHeaderText);break;case Configurator.GroupType.CONFLICT_GROUP:const conflictDescription=group.description;this.translation.translate("configurator.group.conflictGroup",{attribute:group.name}).pipe((0,take.q)(1)).subscribe(conflictGroupText=>group.description=conflictGroupText),group.name=conflictDescription;break;default:if("_GEN"!==group.name)return;this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.description=generalText)}}convertImageType(imageType){switch(imageType){case OccConfigurator.ImageType.GALLERY:return Configurator.ImageType.GALLERY;case OccConfigurator.ImageType.PRIMARY:return Configurator.ImageType.PRIMARY}}convertImageFormatType(formatType){switch(formatType){case OccConfigurator.ImageFormatType.VALUE_IMAGE:return Configurator.ImageFormatType.VALUE_IMAGE;case OccConfigurator.ImageFormatType.CSTIC_IMAGE:return Configurator.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(attribute){switch(attribute.incomplete=!1,attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:case Configurator.UiType.DROPDOWN:(!attribute.selectedSingleValue||attribute.selectedSingleValue===Configurator.RetractValueCode)&&(attribute.incomplete=!0);break;case Configurator.UiType.SINGLE_SELECTION_IMAGE:attribute.selectedSingleValue||(attribute.incomplete=!0);break;case Configurator.UiType.NUMERIC:case Configurator.UiType.STRING:attribute.userInput||(attribute.incomplete=!0);break;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOX:case Configurator.UiType.MULTI_SELECTION_IMAGE:{const isOneValueSelected=void 0!==attribute.values?.find(value=>value.selected);attribute.incomplete=!isOneValueSelected;break}}}}__name(OccConfiguratorVariantNormalizer,"OccConfiguratorVariantNormalizer"),OccConfiguratorVariantNormalizer.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",OccConfiguratorVariantNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantNormalizer)(core.LFG(spartacus_core.Vri),core.LFG(spartacus_core.D7D),core.LFG(ConfiguratorUISettingsConfig))},"OccConfiguratorVariantNormalizer_Factory"),OccConfiguratorVariantNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantNormalizer,factory:OccConfiguratorVariantNormalizer.\u0275fac,providedIn:"root"});const VARIANT_CONFIGURATOR_NORMALIZER=new core.OlP("VariantConfiguratorNormalizer"),VARIANT_CONFIGURATOR_SERIALIZER=new core.OlP("VariantConfiguratorSerializer"),VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER=new core.OlP("VariantConfiguratorPriceSummaryNormalizer"),VARIANT_CONFIGURATOR_PRICE_NORMALIZER=new core.OlP("VariantConfiguratorPriceNormalizer"),VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER=new core.OlP("VariantConfiguratorAddToCartSerializer"),VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER=new core.OlP("VariantConfiguratorUpdateCartEntrySerializer"),VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER=new core.OlP("VariantConfiguratorOverviewNormalizer"),VARIANT_CONFIGURATOR_OVERVIEW_SERIALIZER=new core.OlP("VariantConfiguratorOverviewSerializer");class OccConfiguratorVariantOverviewNormalizer{constructor(translation,converterService){this.translation=translation,this.converterService=converterService}convert(source,target){const prices={priceSummary:source.pricing,configId:source.id},resultTarget={...target,configId:source.id,groups:source.groups?.flatMap(group=>this.convertGroup(group)),priceSummary:this.converterService.convert(prices,VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER),productCode:source.productCode};return this.setIssueCounters(resultTarget,source),resultTarget}convertGroup(source){const result=[],characteristicValues=source.characteristicValues,subGroups=source.subGroups,group={id:source.id,groupDescription:source.groupDescription,attributes:characteristicValues?characteristicValues.map(characteristic=>({attribute:characteristic.characteristic,attributeId:characteristic.characteristicId,value:characteristic.value,valueId:characteristic.valueId,valuePrice:characteristic.price})):[]};if(this.setGeneralDescription(group),subGroups){const resultSubGroups=[];subGroups.forEach(subGroup=>this.convertGroup(subGroup).forEach(groupArray=>resultSubGroups.push(groupArray))),group.subGroups=resultSubGroups}return result.push(group),result}setGeneralDescription(group){"_GEN"===group.id&&this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.groupDescription=generalText)}setIssueCounters(target,source){target.totalNumberOfIssues=source.totalNumberOfIssues,target.numberOfConflicts=source.numberOfConflicts,target.numberOfIncompleteCharacteristics=source.numberOfIncompleteCharacteristics}}__name(OccConfiguratorVariantOverviewNormalizer,"OccConfiguratorVariantOverviewNormalizer"),OccConfiguratorVariantOverviewNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantOverviewNormalizer)(core.LFG(spartacus_core.D7D),core.LFG(spartacus_core.IXI))},"OccConfiguratorVariantOverviewNormalizer_Factory"),OccConfiguratorVariantOverviewNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantOverviewNormalizer,factory:OccConfiguratorVariantOverviewNormalizer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantOverviewSerializer{constructor(converterService){this.converterService=converterService}convert(source,target){return{...target,id:source.configId,productCode:source.productCode,appliedCsticFilter:this.convertAttributeFilters(source.attributeFilters),groupFilterList:this.convertGroupFilters(source.groupFilters)}}convertAttributeFilters(attributeFilters){const result=[];return attributeFilters?.forEach(filter2=>{result.push({key:filter2,selected:!0})}),result}convertGroupFilters(groupFilters){const result=[];return groupFilters?.forEach(filter2=>{result.push({key:filter2,selected:!0})}),result}}__name(OccConfiguratorVariantOverviewSerializer,"OccConfiguratorVariantOverviewSerializer"),OccConfiguratorVariantOverviewSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantOverviewSerializer)(core.LFG(spartacus_core.IXI))},"OccConfiguratorVariantOverviewSerializer_Factory"),OccConfiguratorVariantOverviewSerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantOverviewSerializer,factory:OccConfiguratorVariantOverviewSerializer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantPriceSummaryNormalizer{convert(source,target){return{...target,...source.priceSummary}}}__name(OccConfiguratorVariantPriceSummaryNormalizer,"OccConfiguratorVariantPriceSummaryNormalizer"),OccConfiguratorVariantPriceSummaryNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantPriceSummaryNormalizer)},"OccConfiguratorVariantPriceSummaryNormalizer_Factory"),OccConfiguratorVariantPriceSummaryNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantPriceSummaryNormalizer,factory:OccConfiguratorVariantPriceSummaryNormalizer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantSerializer{convert(source,target){const resultGroups=[];return source.groups.forEach(group=>this.convertGroup(group,resultGroups)),{...target,configId:source.configId,rootProduct:source.productCode,complete:source.complete,groups:resultGroups}}convertGroup(source,occGroups){const resultSubGroups=[],resultAttributes=[];source.attributes&&source.attributes.forEach(attribute=>this.convertAttribute(attribute,resultAttributes)),source.subGroups&&source.subGroups.forEach(subGroup=>this.convertGroup(subGroup,resultSubGroups));const group={name:source.name,id:source.id,configurable:source.configurable,groupType:this.convertGroupType(source.groupType??Configurator.GroupType.ATTRIBUTE_GROUP),description:source.description,attributes:resultAttributes,subGroups:resultSubGroups};occGroups.push(group)}isRetractValue(attribute){return attribute.selectedSingleValue===Configurator.RetractValueCode}getRetractedValue(attribute){return attribute.values?.find(value=>value.selected)?.valueCode}retractValue(attribute,targetAttribute){this.isRetractValue(attribute)?(targetAttribute.value=this.getRetractedValue(attribute),targetAttribute.retractTriggered=!0):targetAttribute.value=attribute.selectedSingleValue}convertAttribute(attribute,occAttributes){const targetAttribute={key:attribute.name,name:attribute.name,langDepName:attribute.label,required:attribute.required,retractTriggered:attribute.retractTriggered,type:this.convertCharacteristicType(attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)};if(attribute.uiType===Configurator.UiType.DROPDOWN||attribute.uiType===Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT||attribute.uiType===Configurator.UiType.RADIOBUTTON||attribute.uiType===Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT||attribute.uiType===Configurator.UiType.SINGLE_SELECTION_IMAGE)this.retractValue(attribute,targetAttribute);else if(attribute.uiType===Configurator.UiType.STRING)targetAttribute.value=attribute.userInput;else if(attribute.uiType===Configurator.UiType.NUMERIC)targetAttribute.formattedValue=attribute.userInput;else if(attribute.uiType===Configurator.UiType.CHECKBOXLIST||attribute.uiType===Configurator.UiType.CHECKBOX||attribute.uiType===Configurator.UiType.MULTI_SELECTION_IMAGE){const domainValues=[];attribute.values&&attribute.values.forEach(value=>{this.convertValue(value,domainValues)}),targetAttribute.domainValues=domainValues}occAttributes.push(targetAttribute)}convertValue(value,values){values.push({key:value.valueCode,langDepName:value.valueDisplay,name:value.name,selected:value.selected})}convertCharacteristicType(type){let uiType;switch(type){case Configurator.UiType.RADIOBUTTON:uiType=OccConfigurator.UiType.RADIO_BUTTON;break;case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:uiType=OccConfigurator.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break;case Configurator.UiType.DROPDOWN:uiType=OccConfigurator.UiType.DROPDOWN;break;case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:uiType=OccConfigurator.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case Configurator.UiType.STRING:uiType=OccConfigurator.UiType.STRING;break;case Configurator.UiType.NUMERIC:uiType=OccConfigurator.UiType.NUMERIC;break;case Configurator.UiType.CHECKBOX:uiType=OccConfigurator.UiType.CHECK_BOX;break;case Configurator.UiType.CHECKBOXLIST:uiType=OccConfigurator.UiType.CHECK_BOX_LIST;break;case Configurator.UiType.MULTI_SELECTION_IMAGE:uiType=OccConfigurator.UiType.MULTI_SELECTION_IMAGE;break;case Configurator.UiType.SINGLE_SELECTION_IMAGE:uiType=OccConfigurator.UiType.SINGLE_SELECTION_IMAGE;break;default:uiType=OccConfigurator.UiType.NOT_IMPLEMENTED}return uiType}convertGroupType(groupType){switch(groupType){case Configurator.GroupType.ATTRIBUTE_GROUP:return OccConfigurator.GroupType.CSTIC_GROUP;case Configurator.GroupType.SUB_ITEM_GROUP:return OccConfigurator.GroupType.INSTANCE;case Configurator.GroupType.CONFLICT_GROUP:return OccConfigurator.GroupType.CONFLICT;case Configurator.GroupType.CONFLICT_HEADER_GROUP:return OccConfigurator.GroupType.CONFLICT_HEADER}}}__name(OccConfiguratorVariantSerializer,"OccConfiguratorVariantSerializer"),OccConfiguratorVariantSerializer.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",OccConfiguratorVariantSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantSerializer)},"OccConfiguratorVariantSerializer_Factory"),OccConfiguratorVariantSerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantSerializer,factory:OccConfiguratorVariantSerializer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantUpdateCartEntrySerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.configuration.productCode},entryNumber:source.cartEntryNumber,configId:source.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]}}}__name(OccConfiguratorVariantUpdateCartEntrySerializer,"OccConfiguratorVariantUpdateCartEntrySerializer"),OccConfiguratorVariantUpdateCartEntrySerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantUpdateCartEntrySerializer)},"OccConfiguratorVariantUpdateCartEntrySerializer_Factory"),OccConfiguratorVariantUpdateCartEntrySerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantUpdateCartEntrySerializer,factory:OccConfiguratorVariantUpdateCartEntrySerializer.\u0275fac,providedIn:"root"});class VariantConfiguratorOccAdapter{constructor(http2,occEndpointsService,converterService,configExpertModeService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService,this.configExpertModeService=configExpertModeService}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let expMode=!1;return this.configExpertModeService.getExpModeRequested().pipe((0,take.q)(1)).subscribe(mode=>expMode=mode),expMode}setExpModeActive(expMode){this.configExpertModeService.setExpModeActive(expMode)}createConfiguration(owner,configIdTemplate,forceReset=!1){const productCode=owner.id,expMode=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode},queryParams:configIdTemplate?{configIdTemplate,expMode,forceReset}:{expMode,forceReset}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner})))}readConfiguration(configId,groupId,configurationOwner){const expMode=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId},queryParams:{groupId,expMode}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:configurationOwner,newConfiguration:!1})))}updateConfiguration(configuration){const configId=configuration.configId,expMode=this.getExpModeRequested(),url=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId},queryParams:{expMode}}),occConfiguration=this.converterService.convert(configuration,VARIANT_CONFIGURATOR_SERIALIZER);return this.http.patch(url,occConfiguration,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:configuration.owner})))}addToCart(parameters){const url=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:parameters.userId,cartId:parameters.cartId}}),occAddToCartParameters=this.converterService.convert(parameters,VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER),headers=new http.WM({"Content-Type":"application/json"});return this.http.post(url,occAddToCartParameters,{headers}).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}readConfigurationForCartEntry(parameters){const expMode=this.getExpModeRequested(),url=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber},queryParams:{expMode}});return this.http.get(url).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:parameters.owner})))}updateConfigurationForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}}),headers=new http.WM({"Content-Type":"application/json"}),occUpdateCartEntryParameters=this.converterService.convert(parameters,VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER);return this.http.put(url,occUpdateCartEntryParameters,{headers}).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}readConfigurationForOrderEntry(parameters){const url=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:parameters.userId,orderId:parameters.orderId,orderEntryNumber:parameters.orderEntryNumber}});return this.http.get(url).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER),(0,map.U)(overview=>({configId:overview.configId,productCode:overview.productCode,groups:[],flatGroups:[],interactionState:{},overview,owner:spartacus_product_configurator_common.mR.createInitialOwner()})),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:parameters.owner})))}readPriceSummary(configuration){const url=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:configuration.configId},queryParams:{groupId:configuration.interactionState.currentGroup}});return this.http.get(url,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_PRICE_NORMALIZER),(0,map.U)(configResult=>({...configuration,priceSummary:configResult.priceSummary,priceSupplements:configResult.priceSupplements})))}getConfigurationOverview(configId){const url=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId}});return this.http.get(url,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER))}updateConfigurationOverview(ovInput){const url=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:ovInput.configId}}),occOverview=this.converterService.convert(ovInput,VARIANT_CONFIGURATOR_OVERVIEW_SERIALIZER);return this.http.patch(url,occOverview,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER),(0,map.U)(overview=>({...overview,attributeFilters:ovInput.attributeFilters,groupFilters:ovInput.groupFilters,possibleGroups:ovInput.possibleGroups})))}searchVariants(configId){const url=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId}});return this.http.get(url,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return(new http.qT).set(spartacus_core.oT0,{sendUserIdAsHeader:!0})}}__name(VariantConfiguratorOccAdapter,"VariantConfiguratorOccAdapter"),VariantConfiguratorOccAdapter.\u0275fac=__name(function(t){return new(t||VariantConfiguratorOccAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI),core.LFG(ConfiguratorExpertModeService))},"VariantConfiguratorOccAdapter_Factory"),VariantConfiguratorOccAdapter.\u0275prov=core.Yz7({token:VariantConfiguratorOccAdapter,factory:VariantConfiguratorOccAdapter.\u0275fac});class OccConfiguratorVariantPriceNormalizer{convert(source,target){const priceSupplements=[];return source.attributes?.forEach(attr=>{this.convertAttributeSupplements(attr,priceSupplements)}),{...target,configId:source.configId,productCode:"",groups:[],flatGroups:[],owner:spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:{},priceSummary:source?.priceSummary,priceSupplements}}convertAttributeSupplements(source,priceSupplements){const attributeSupplement={attributeUiKey:source?.csticUiKey,valueSupplements:[]};source?.priceSupplements?.forEach(value=>{this.convertValueSupplement(value,attributeSupplement?.valueSupplements)}),priceSupplements.push(attributeSupplement)}convertValueSupplement(source,valueSupplements){const valueSupplement={attributeValueKey:source?.attributeValueKey,priceValue:source?.priceValue,obsoletePriceValue:source?.obsoletePriceValue};valueSupplements.push(valueSupplement)}}function defaultOccVariantConfiguratorConfigFactory(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}__name(OccConfiguratorVariantPriceNormalizer,"OccConfiguratorVariantPriceNormalizer"),OccConfiguratorVariantPriceNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantPriceNormalizer)},"OccConfiguratorVariantPriceNormalizer_Factory"),OccConfiguratorVariantPriceNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantPriceNormalizer,factory:OccConfiguratorVariantPriceNormalizer.\u0275fac,providedIn:"root"}),__name(defaultOccVariantConfiguratorConfigFactory,"defaultOccVariantConfiguratorConfigFactory");class VariantConfiguratorOccModule{}__name(VariantConfiguratorOccModule,"VariantConfiguratorOccModule"),VariantConfiguratorOccModule.\u0275fac=__name(function(t){return new(t||VariantConfiguratorOccModule)},"VariantConfiguratorOccModule_Factory"),VariantConfiguratorOccModule.\u0275mod=core.oAB({type:VariantConfiguratorOccModule}),VariantConfiguratorOccModule.\u0275inj=core.cJS({providers:[{provide:RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST,useClass:VariantConfiguratorOccAdapter,multi:!0},{provide:VARIANT_CONFIGURATOR_NORMALIZER,useExisting:OccConfiguratorVariantNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_SERIALIZER,useExisting:OccConfiguratorVariantSerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER,useExisting:OccConfiguratorVariantPriceSummaryNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_PRICE_NORMALIZER,useExisting:OccConfiguratorVariantPriceNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER,useExisting:OccConfiguratorVariantAddToCartSerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER,useExisting:OccConfiguratorVariantUpdateCartEntrySerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER,useExisting:OccConfiguratorVariantOverviewNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_OVERVIEW_SERIALIZER,useExisting:OccConfiguratorVariantOverviewSerializer,multi:!0}],imports:[common.ez,spartacus_core.pEA.withConfigFactory(defaultOccVariantConfiguratorConfigFactory)]});class RulebasedConfiguratorModule{}__name(RulebasedConfiguratorModule,"RulebasedConfiguratorModule"),RulebasedConfiguratorModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorModule)},"RulebasedConfiguratorModule_Factory"),RulebasedConfiguratorModule.\u0275mod=core.oAB({type:RulebasedConfiguratorModule}),RulebasedConfiguratorModule.\u0275inj=core.cJS({imports:[VariantConfiguratorOccModule,RulebasedConfiguratorCoreModule,RulebasedConfiguratorComponentsModule]});var Cpq,forkJoin=__webpack_require__(39448),spartacus_product_configurator_rulebased_root=__webpack_require__(79556);!function(Cpq2){let DisplayAs;var DisplayAs2;let DataType;var DataType2;(DisplayAs2=DisplayAs=Cpq2.DisplayAs||(Cpq2.DisplayAs={}))[DisplayAs2.RADIO_BUTTON=1]="RADIO_BUTTON",DisplayAs2[DisplayAs2.CHECK_BOX=2]="CHECK_BOX",DisplayAs2[DisplayAs2.DROPDOWN=3]="DROPDOWN",DisplayAs2[DisplayAs2.LIST_BOX=4]="LIST_BOX",DisplayAs2[DisplayAs2.LIST_BOX_MULTI=5]="LIST_BOX_MULTI",DisplayAs2[DisplayAs2.READ_ONLY=71]="READ_ONLY",DisplayAs2[DisplayAs2.INPUT=95]="INPUT",DisplayAs2[DisplayAs2.AUTO_COMPLETE_CUSTOM=102]="AUTO_COMPLETE_CUSTOM",(DataType2=DataType=Cpq2.DataType||(Cpq2.DataType={})).INPUT_STRING="String",DataType2.INPUT_NUMBER="Number",DataType2.QTY_ATTRIBUTE_LEVEL="Quantity",DataType2.QTY_VALUE_LEVEL="Attr.Quantity",DataType2.N_A="N/A"}(Cpq||(Cpq={}));class CpqConfiguratorNormalizerUtilsService{constructor(languageService){this.languageService=languageService,this.logger=(0,core.f3M)(spartacus_core.mQy)}convertQuantity(value,attribute){if(!value.selected)return;let quantity;switch(this.convertDataType(attribute)){case Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL:quantity=Number(attribute.quantity);break;case Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL:quantity=Number(value.quantity);break;default:quantity=void 0}return quantity}convertValuePrice(value,currency){let price;return value.price&&(price={currencyIso:currency,value:parseFloat(value.price)},this.formatPriceForLocale(price,this.getLanguage())),price}calculateValuePriceTotal(quantity,valuePrice){let valuePriceTotal;if(valuePrice){const calculationQuantity=quantity||1;valuePriceTotal={currencyIso:valuePrice.currencyIso,value:calculationQuantity*valuePrice.value},this.formatPriceForLocale(valuePriceTotal,this.getLanguage())}return valuePriceTotal}calculateAttributePriceTotal(attribute,currency){const priceTotal=attribute.values?.filter(entry=>entry.selected&&entry.valuePriceTotal).reduce((total,item)=>total+(item.valuePriceTotal?.value??0),0),attributePriceTotal={currencyIso:currency,value:priceTotal??0};return this.formatPriceForLocale(attributePriceTotal,this.getLanguage()),attributePriceTotal}formatPriceForLocale(price,availableLocale){const currencySymbol=(0,common.jK)(price.currencyIso,"narrow",availableLocale);price.formattedValue=(0,common.xG)(price.value,availableLocale,currencySymbol,price.currencyIso)}convertDataType(cpqAttribute){let dataType;switch(cpqAttribute.dataType){case Cpq.DataType.INPUT_STRING:dataType=Configurator.DataType.INPUT_STRING;break;case Cpq.DataType.INPUT_NUMBER:dataType=Configurator.DataType.INPUT_NUMBER;break;case Cpq.DataType.N_A:dataType=Configurator.DataType.USER_SELECTION_NO_QTY;break;case Cpq.DataType.QTY_ATTRIBUTE_LEVEL:dataType=Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;break;case Cpq.DataType.QTY_VALUE_LEVEL:dataType=cpqAttribute.displayAs===Cpq.DisplayAs.RADIO_BUTTON||cpqAttribute.displayAs===Cpq.DisplayAs.DROPDOWN||cpqAttribute.displayAs===Cpq.DisplayAs.CHECK_BOX&&!cpqAttribute.isLineItem?Configurator.DataType.USER_SELECTION_NO_QTY:Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL;break;default:dataType=Configurator.DataType.NOT_IMPLEMENTED}return dataType}convertPriceSummary(cpqConfiguration){const priceSummary={};if(cpqConfiguration.currencyISOCode){const currency=cpqConfiguration.currencyISOCode;if(cpqConfiguration?.responder?.totalPrice&&cpqConfiguration?.currencySign){const currencySign=cpqConfiguration?.currencySign,totalPriceAsString=cpqConfiguration.responder.totalPrice.replace(currencySign,""),totalPrice={currencyIso:currency,value:parseFloat(totalPriceAsString)};this.formatPriceForLocale(totalPrice,this.getLanguage()),priceSummary.currentTotal=totalPrice}if(cpqConfiguration?.responder?.baseProductPrice){const basePriceAsString=cpqConfiguration.responder.baseProductPrice,basePrice={currencyIso:currency,value:parseFloat(basePriceAsString)};this.formatPriceForLocale(basePrice,this.getLanguage()),priceSummary.basePrice=basePrice}if(priceSummary.currentTotal&&priceSummary.basePrice){const selectedOptionsPrice={currencyIso:currency,value:priceSummary.currentTotal.value-priceSummary.basePrice.value};this.formatPriceForLocale(selectedOptionsPrice,this.getLanguage()),priceSummary.selectedOptions=selectedOptionsPrice}}return priceSummary}hasAnyProducts(attributeValues){return attributeValues.some(value=>value?.productSystemId)}convertAttributeLabel(attribute){return attribute.label?attribute.label:attribute.name?attribute.name:""}getLanguage(){const lang=this.getActiveLanguage();try{return(0,common.wM)(lang),lang}catch{return this.reportMissingLocaleData(lang),"en"}}getActiveLanguage(){let result;return this.languageService.getActive().subscribe(lang=>result=lang).unsubscribe(),result??"en"}reportMissingLocaleData(lang){(0,core.X6Q)()&&this.logger.warn(`CpqConfiguratorNormalizerUtilsService: No locale data registered for '${lang}' (see https://angular.io/api/common/registerLocaleData).`)}}__name(CpqConfiguratorNormalizerUtilsService,"CpqConfiguratorNormalizerUtilsService"),CpqConfiguratorNormalizerUtilsService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorNormalizerUtilsService)(core.LFG(spartacus_core.TSl))},"CpqConfiguratorNormalizerUtilsService_Factory"),CpqConfiguratorNormalizerUtilsService.\u0275prov=core.Yz7({token:CpqConfiguratorNormalizerUtilsService,factory:CpqConfiguratorNormalizerUtilsService.\u0275fac,providedIn:"root"});class CpqConfiguratorNormalizer{constructor(cpqConfiguratorNormalizerUtilsService,translation){this.cpqConfiguratorNormalizerUtilsService=cpqConfiguratorNormalizerUtilsService,this.translation=translation}convert(source,target){const resultTarget={...target,configId:source.configurationId?source.configurationId:"",complete:!source.incompleteAttributes?.length,consistent:!(source.invalidMessages?.length||source.failedValidations?.length||source.incompleteMessages?.length||source.errorMessages?.length),totalNumberOfIssues:this.generateTotalNumberOfIssues(source),productCode:source.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(source),groups:[],flatGroups:[],owner:spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:{},errorMessages:this.generateErrorMessages(source),warningMessages:this.generateWarningMessages(source),pricingEnabled:!0};return source.tabs?.forEach(tab=>this.convertGroup(tab,source.attributes??[],source.currencyISOCode,resultTarget.groups,resultTarget.flatGroups)),(!resultTarget.groups||0===resultTarget.groups.length)&&this.convertGenericGroup(source.attributes??[],source.incompleteAttributes??[],source.currencyISOCode,resultTarget.groups,resultTarget.flatGroups),resultTarget}generateTotalNumberOfIssues(source){return(source.incompleteAttributes?.length??0)+(source.incompleteMessages?.length??0)+(source.invalidMessages?.length??0)+(source.failedValidations?.length??0)+(source.errorMessages?.length??0)}generateWarningMessages(source){let warnMsgs=[];return warnMsgs=warnMsgs.concat(source.failedValidations??[]),warnMsgs=warnMsgs.concat(source.incompleteMessages??[]),warnMsgs}generateErrorMessages(source){let errorMsgs=[];return errorMsgs=errorMsgs.concat(source.errorMessages??[]),errorMsgs=errorMsgs.concat(source.invalidMessages??[]),errorMsgs}convertGroup(source,sourceAttributes,currency,groupList,flatGroupList){const attributes=[];source.isSelected&&sourceAttributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,source.id,currency,attributes));const group={id:source.id.toString(),name:source.name,description:source.displayName,configurable:!0,complete:!source.isIncomplete,consistent:!0,groupType:Configurator.GroupType.ATTRIBUTE_GROUP,attributes,subGroups:[]};flatGroupList.push(group),groupList.push(group)}convertGenericGroup(sourceAttributes,incompleteAttributes,currency,groupList,flatGroupList){const attributes=[];sourceAttributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,1,currency,attributes));const group={id:"1",name:"_GEN",configurable:!0,complete:0===incompleteAttributes.length,consistent:!0,groupType:Configurator.GroupType.ATTRIBUTE_GROUP,attributes,subGroups:[]};this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.description=generalText),groupList.push(group),flatGroupList.push(group)}convertAttribute(sourceAttribute,groupId,currency,attributeList){const attribute={attrCode:sourceAttribute.stdAttrCode,name:this.mapPAId(sourceAttribute),description:sourceAttribute.description,label:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(sourceAttribute),required:sourceAttribute.required,isLineItem:sourceAttribute.isLineItem,uiType:this.convertAttributeType(sourceAttribute),dataType:this.cpqConfiguratorNormalizerUtilsService.convertDataType(sourceAttribute),quantity:Number(sourceAttribute.quantity),groupId:groupId.toString(),userInput:sourceAttribute.userInput,hasConflicts:sourceAttribute.hasConflict,selectedSingleValue:void 0,images:[],visible:!0};if(sourceAttribute.values&&sourceAttribute.displayAs!==Cpq.DisplayAs.INPUT){const values=[];sourceAttribute.values.forEach(value=>this.convertValue(value,sourceAttribute,currency,values)),attribute.values=values,this.setSelectedSingleValue(attribute)}attribute.attributePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateAttributePriceTotal(attribute,currency),this.compileAttributeIncomplete(attribute),attributeList.push(attribute)}mapPAId(sourceAttribute){return sourceAttribute.pA_ID?sourceAttribute.pA_ID.toString():sourceAttribute.PA_ID.toString()}setSelectedSingleValue(attribute){const values=attribute.values;if(values){const selectedValues=values.map(entry=>entry).filter(entry=>entry.selected);selectedValues&&1===selectedValues.length&&(attribute.selectedSingleValue=selectedValues[0].valueCode)}}convertValueDisplay(sourceValue,sourceAttribute,value){sourceAttribute.displayAs===Cpq.DisplayAs.DROPDOWN&&sourceValue.selected&&0===sourceValue.paV_ID?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text):value.valueDisplay=sourceValue.valueDisplay}convertValueCode(valueCode){return 0===valueCode?Configurator.RetractValueCode:valueCode.toString()}convertValue(sourceValue,sourceAttribute,currency,values){if(this.hasValueToBeIgnored(sourceAttribute,sourceValue))return;const value={valueCode:this.convertValueCode(sourceValue.paV_ID),name:sourceValue.valueCode,description:sourceValue.description,productSystemId:sourceValue.productSystemId,selected:sourceValue.selected,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(sourceValue,sourceAttribute),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(sourceValue,currency),images:[]};this.convertValueDisplay(sourceValue,sourceAttribute,value),value.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(value.quantity??1,value.valuePrice),values.push(value)}convertAttributeType(sourceAttribute){const displayAs=sourceAttribute.displayAs,displayAsProduct=!(!sourceAttribute.values||!this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(sourceAttribute.values));return sourceAttribute.isEnabled||displayAs!==Cpq.DisplayAs.RADIO_BUTTON&&displayAs!==Cpq.DisplayAs.DROPDOWN&&displayAs!==Cpq.DisplayAs.CHECK_BOX&&displayAs!==Cpq.DisplayAs.INPUT?this.findUiTypeFromDisplayType(displayAs,displayAsProduct,sourceAttribute):Configurator.UiType.READ_ONLY}findUiTypeFromDisplayType(displayAs,displayAsProduct,sourceAttribute){let uiType;switch(displayAs){case Cpq.DisplayAs.RADIO_BUTTON:uiType=displayAsProduct?Configurator.UiType.RADIOBUTTON_PRODUCT:Configurator.UiType.RADIOBUTTON;break;case Cpq.DisplayAs.DROPDOWN:uiType=displayAsProduct?Configurator.UiType.DROPDOWN_PRODUCT:Configurator.UiType.DROPDOWN;break;case Cpq.DisplayAs.CHECK_BOX:uiType=displayAsProduct?Configurator.UiType.CHECKBOXLIST_PRODUCT:Configurator.UiType.CHECKBOXLIST;break;case Cpq.DisplayAs.INPUT:uiType=sourceAttribute.dataType===Cpq.DataType.INPUT_STRING?Configurator.UiType.STRING:Configurator.UiType.NOT_IMPLEMENTED;break;default:uiType=Configurator.UiType.NOT_IMPLEMENTED}return uiType}compileAttributeIncomplete(attribute){switch(attribute.incomplete=!1,attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.DROPDOWN:case Configurator.UiType.DROPDOWN_PRODUCT:case Configurator.UiType.SINGLE_SELECTION_IMAGE:(!attribute.selectedSingleValue||attribute.selectedSingleValue===Configurator.RetractValueCode)&&(attribute.incomplete=!0);break;case Configurator.UiType.NUMERIC:case Configurator.UiType.STRING:attribute.userInput||(attribute.incomplete=!0);break;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:case Configurator.UiType.CHECKBOX:case Configurator.UiType.MULTI_SELECTION_IMAGE:void 0!==attribute.values?.find(value=>value.selected)||(attribute.incomplete=!0)}}hasValueToBeIgnored(attribute,value){const selectedValues=attribute.values?.map(entry=>entry).filter(entry=>entry.selected&&0!==entry.paV_ID);return(attribute.displayAs===Cpq.DisplayAs.DROPDOWN&&attribute.required&&selectedValues&&selectedValues.length>0&&0===value.paV_ID)??!1}}__name(CpqConfiguratorNormalizer,"CpqConfiguratorNormalizer"),CpqConfiguratorNormalizer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorNormalizer)(core.LFG(CpqConfiguratorNormalizerUtilsService),core.LFG(spartacus_core.D7D))},"CpqConfiguratorNormalizer_Factory"),CpqConfiguratorNormalizer.\u0275prov=core.Yz7({token:CpqConfiguratorNormalizer,factory:CpqConfiguratorNormalizer.\u0275fac});class CpqConfiguratorOverviewNormalizer{constructor(cpqConfiguratorNormalizerUtilsService,translation){this.cpqConfiguratorNormalizerUtilsService=cpqConfiguratorNormalizerUtilsService,this.translation=translation,this.NO_OPTION_SELECTED=0}convert(source,target){return{...target,configId:source.configurationId?source.configurationId:"",productCode:source.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(source),groups:source.tabs?.flatMap(tab=>this.convertTab(tab,source.currencyISOCode)).filter(tab=>tab.attributes&&tab.attributes.length>0),totalNumberOfIssues:this.calculateTotalNumberOfIssues(source)}}convertTab(tab,currency){let ovAttributes=[];tab.attributes?.forEach(attr=>{ovAttributes=ovAttributes.concat(this.convertAttribute(attr,currency))});const groupOverview={id:tab.id.toString(),groupDescription:tab.displayName,attributes:ovAttributes};return"0"===groupOverview.id&&this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>groupOverview.groupDescription=generalText),groupOverview}convertAttribute(attr,currency){const attributeOverviewType=attr?.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(attr?.values)?Configurator.AttributeOverviewType.BUNDLE:Configurator.AttributeOverviewType.GENERAL,ovAttr=[];return this.convertAttributeValue(attr,currency).forEach(ovValue=>{ovAttr.push({...ovValue,type:attributeOverviewType,attribute:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(attr),attributeId:attr.stdAttrCode.toString()})}),ovAttr}convertAttributeValue(attr,currency){const ovValues=[];switch(attr.displayAs){case Cpq.DisplayAs.INPUT:attr?.dataType===Cpq.DataType.INPUT_STRING?attr.userInput&&attr.userInput.length>0&&ovValues.push(this.extractValueUserInput(attr,currency)):ovValues.push({attribute:"",value:"NOT_IMPLEMENTED"});break;case Cpq.DisplayAs.RADIO_BUTTON:case Cpq.DisplayAs.DROPDOWN:const selectedValue=attr.values?.find(val=>val.selected&&val.paV_ID!==this.NO_OPTION_SELECTED);selectedValue&&ovValues.push(this.extractValue(selectedValue,attr,currency));break;case Cpq.DisplayAs.CHECK_BOX:attr.values?.filter(val=>val.selected)?.forEach(valueSelected=>{ovValues.push(this.extractValue(valueSelected,attr,currency))});break;default:ovValues.push({attribute:"",value:"NOT_IMPLEMENTED"})}return ovValues}extractValue(valueSelected,attr,currency){const ovValue={attribute:"",value:valueSelected.valueDisplay??valueSelected.paV_ID.toString(),valueId:valueSelected.paV_ID.toString(),productCode:valueSelected.productSystemId,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(valueSelected,attr),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(valueSelected,currency)};return ovValue.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(ovValue.quantity??1,ovValue.valuePrice),ovValue}extractValueUserInput(attr,currency){const value=attr.values?attr.values[0]:void 0,ovValue={attribute:"",value:attr.userInput??attr.stdAttrCode.toString(),valueId:value?.paV_ID.toString(),quantity:1};return value&&(ovValue.valuePrice=this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(value,currency),ovValue.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(ovValue.quantity??1,ovValue.valuePrice)),ovValue}calculateTotalNumberOfIssues(source){return(source.incompleteAttributes?.length??0)+(source.incompleteMessages?.length??0)+(source.invalidMessages?.length??0)+(source.failedValidations?.length??0)+(source.errorMessages?.length??0)}}__name(CpqConfiguratorOverviewNormalizer,"CpqConfiguratorOverviewNormalizer"),CpqConfiguratorOverviewNormalizer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOverviewNormalizer)(core.LFG(CpqConfiguratorNormalizerUtilsService),core.LFG(spartacus_core.D7D))},"CpqConfiguratorOverviewNormalizer_Factory"),CpqConfiguratorOverviewNormalizer.\u0275prov=core.Yz7({token:CpqConfiguratorOverviewNormalizer,factory:CpqConfiguratorOverviewNormalizer.\u0275fac});class CpqConfiguratorUtils{static getUpdateInformation(attribute){const attributeCode=attribute.attrCode,groupId=attribute.groupId;if(attributeCode&&groupId)return{standardAttributeCode:attributeCode.toString(),tabId:groupId};throw new Error("Attribute code of group id not present: "+JSON.stringify(attribute))}static findFirstChangedAttribute(source){const firstGroup=source.groups[0];if(firstGroup.attributes)return firstGroup.attributes[0];throw new Error("No changed attributes found")}}__name(CpqConfiguratorUtils,"CpqConfiguratorUtils");class CpqConfiguratorSerializer{convert(source){const attribute=CpqConfiguratorUtils.findFirstChangedAttribute(source);let updateAttribute;return updateAttribute=source.updateType===Configurator.UpdateType.ATTRIBUTE_QUANTITY?this.convertQuantity(attribute,source.configId):this.convertAttribute(attribute,source.configId),updateAttribute}convertQuantity(attribute,configId){const updateInformation=CpqConfiguratorUtils.getUpdateInformation(attribute);return{configurationId:configId,standardAttributeCode:updateInformation.standardAttributeCode,changeAttributeValue:{quantity:attribute.quantity},tabId:updateInformation.tabId}}convertAttribute(attribute,configurationId){const updateInformation=CpqConfiguratorUtils.getUpdateInformation(attribute),updateAttribute={configurationId,standardAttributeCode:updateInformation.standardAttributeCode,changeAttributeValue:{},tabId:updateInformation.tabId};return attribute.uiType===Configurator.UiType.DROPDOWN||attribute.uiType===Configurator.UiType.DROPDOWN_PRODUCT||attribute.uiType===Configurator.UiType.RADIOBUTTON||attribute.uiType===Configurator.UiType.RADIOBUTTON_PRODUCT||attribute.uiType===Configurator.UiType.SINGLE_SELECTION_IMAGE?updateAttribute.changeAttributeValue.attributeValueIds=this.processSelectedSingleValue(attribute.selectedSingleValue):attribute.uiType===Configurator.UiType.CHECKBOXLIST||attribute.uiType===Configurator.UiType.CHECKBOXLIST_PRODUCT||attribute.uiType===Configurator.UiType.CHECKBOX||attribute.uiType===Configurator.UiType.MULTI_SELECTION_IMAGE?updateAttribute.changeAttributeValue.attributeValueIds=this.prepareValueIds(attribute):(attribute.uiType===Configurator.UiType.STRING||attribute.uiType===Configurator.UiType.NUMERIC)&&(updateAttribute.changeAttributeValue.userInput=attribute.userInput,updateAttribute.changeAttributeValue?.userInput||(updateAttribute.changeAttributeValue.userInput=" ")),updateAttribute}processValueCode(valueCode){return valueCode&&valueCode===Configurator.RetractValueCode?"0":valueCode}processSelectedSingleValue(singleValue){let processedValue=this.processValueCode(singleValue);return processedValue||(processedValue=","),processedValue}prepareValueIds(attribute){let valueIds="";const selectedValues=attribute.values?.filter(value=>value.selected);return selectedValues&&selectedValues.length>0?selectedValues.forEach(value=>{valueIds+=value.valueCode+","}):valueIds=",",valueIds}}__name(CpqConfiguratorSerializer,"CpqConfiguratorSerializer"),CpqConfiguratorSerializer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorSerializer)},"CpqConfiguratorSerializer_Factory"),CpqConfiguratorSerializer.\u0275prov=core.Yz7({token:CpqConfiguratorSerializer,factory:CpqConfiguratorSerializer.\u0275fac});class CpqConfiguratorValueSerializer{convert(source){const attribute=CpqConfiguratorUtils.findFirstChangedAttribute(source);return this.convertAttribute(attribute,source.configId)}convertAttribute(attribute,configurationId){const updateInfo=CpqConfiguratorUtils.getUpdateInformation(attribute),value=this.findFirstChangedValue(attribute);return{configurationId,standardAttributeCode:updateInfo.standardAttributeCode,attributeValueId:value.valueCode,quantity:value.quantity??1,tabId:updateInfo.tabId}}findFirstChangedValue(attribute){if(attribute.values&&attribute.values.length>0)return attribute.values[0];throw new Error("No values present")}}__name(CpqConfiguratorValueSerializer,"CpqConfiguratorValueSerializer"),CpqConfiguratorValueSerializer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorValueSerializer)},"CpqConfiguratorValueSerializer_Factory"),CpqConfiguratorValueSerializer.\u0275prov=core.Yz7({token:CpqConfiguratorValueSerializer,factory:CpqConfiguratorValueSerializer.\u0275fac});const CPQ_CONFIGURATOR_NORMALIZER=new core.OlP("CpqConfiguratorNormalizer"),CPQ_CONFIGURATOR_SERIALIZER=new core.OlP("CpqConfiguratorSerializer"),CPQ_CONFIGURATOR_QUANTITY_SERIALIZER=new core.OlP("CpqConfiguratorValueSerializer"),CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER=new core.OlP("CpqConfiguratorOverviewNormalizer");class CpqConfiguratorCommonModule{}__name(CpqConfiguratorCommonModule,"CpqConfiguratorCommonModule"),CpqConfiguratorCommonModule.\u0275fac=__name(function(t){return new(t||CpqConfiguratorCommonModule)},"CpqConfiguratorCommonModule_Factory"),CpqConfiguratorCommonModule.\u0275mod=core.oAB({type:CpqConfiguratorCommonModule}),CpqConfiguratorCommonModule.\u0275inj=core.cJS({imports:[common.ez]});const CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER=new core.OlP("CpqConfiguratorAddToCartSerializer"),CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER=new core.OlP("CpqConfiguratorUpdateCartEntrySerializer");class OccConfiguratorCpqAddToCartSerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.productCode},quantity:source.quantity,configId:source.configId}}}__name(OccConfiguratorCpqAddToCartSerializer,"OccConfiguratorCpqAddToCartSerializer"),OccConfiguratorCpqAddToCartSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorCpqAddToCartSerializer)},"OccConfiguratorCpqAddToCartSerializer_Factory"),OccConfiguratorCpqAddToCartSerializer.\u0275prov=core.Yz7({token:OccConfiguratorCpqAddToCartSerializer,factory:OccConfiguratorCpqAddToCartSerializer.\u0275fac,providedIn:"root"});class OccConfiguratorCpqUpdateCartEntrySerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,entryNumber:source.cartEntryNumber,configId:source.configuration.configId}}}function defaultOccCpqConfiguratorConfigFactory(){return{backend:{occ:{endpoints:{getCpqAccessData:"users/${userId}/access/cpqconfigurator",addCpqConfigurationToCart:"users/${userId}/carts/${cartId}/entries/cpqconfigurator",readCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",readCpqConfigurationForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator",updateCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",createCpqConfiguration:"products/${productCode}/configurators/cpqconfigurator",readCpqConfiguration:"cpqconfigurator/${configurationId}/configuration?tabId=${tabId}",readCpqConfigurationOverview:"cpqconfigurator/${configurationId}/configurationOverview",updateCpqAttribute:"cpqconfigurator/${configurationId}/attributes/${attributeCode}?tabId=${tabId}",updateCpqAttributeValueQuantity:"cpqconfigurator/${configurationId}/attributes/${attributeCode}/values/${attributeValueId}?tabId=${tabId}",readCpqConfigurationForCartEntryFull:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator/configuration",readCpqConfigurationForOrderEntryFull:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator/configuration"}}}}}__name(OccConfiguratorCpqUpdateCartEntrySerializer,"OccConfiguratorCpqUpdateCartEntrySerializer"),OccConfiguratorCpqUpdateCartEntrySerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorCpqUpdateCartEntrySerializer)},"OccConfiguratorCpqUpdateCartEntrySerializer_Factory"),OccConfiguratorCpqUpdateCartEntrySerializer.\u0275prov=core.Yz7({token:OccConfiguratorCpqUpdateCartEntrySerializer,factory:OccConfiguratorCpqUpdateCartEntrySerializer.\u0275fac,providedIn:"root"}),__name(defaultOccCpqConfiguratorConfigFactory,"defaultOccCpqConfiguratorConfigFactory");class CpqConfiguratorOccService{constructor(http2,occEndpointsService,converterService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService}addToCart(parameters){const url=this.occEndpointsService.buildUrl("addCpqConfigurationToCart",{urlParams:{userId:parameters.userId,cartId:parameters.cartId}}),occAddToCartParameters=this.converterService.convert(parameters,CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER);return this.http.post(url,occAddToCartParameters).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}updateCartEntry(parameters){const url=this.occEndpointsService.buildUrl("updateCpqConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}}),occUpdateCartEntryParameters=this.converterService.convert(parameters,CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER);return this.http.put(url,occUpdateCartEntryParameters).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}getConfigIdForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}});return this.http.get(url).pipe((0,map.U)(response=>response.configId))}getConfigIdForOrderEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntry",{urlParams:{userId:parameters.userId,orderId:parameters.orderId,orderEntryNumber:parameters.orderEntryNumber}});return this.http.get(url).pipe((0,map.U)(response=>response.configId))}createConfiguration(productSystemId){return this.callCreateConfiguration(productSystemId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}readConfiguration(configId,tabId){return this.callReadConfiguration(configId,tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}readConfigurationOverview(configId){return this.callReadConfigurationOverview(configId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER))}updateAttribute(configuration){const updateAttribute=this.converterService.convert(configuration,CPQ_CONFIGURATOR_SERIALIZER);return this.callUpdateAttribute(updateAttribute).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}updateValueQuantity(configuration){const updateValue=this.converterService.convert(configuration,CPQ_CONFIGURATOR_QUANTITY_SERIALIZER);return this.callUpdateValue(updateValue).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}readConfigurationForCartEntry(parameters){return this.callReadConfigurationForCartEntry(parameters).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}readConfigurationForOrderEntry(parameters){return this.callReadConfigurationForOrderEntry(parameters).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER))}callCreateConfiguration(productSystemId){const url=this.occEndpointsService.buildUrl("createCpqConfiguration",{urlParams:{productCode:productSystemId}});return this.http.get(url)}callReadConfiguration(configId,tabId){const url=this.occEndpointsService.buildUrl("readCpqConfiguration",{urlParams:{configurationId:configId},queryParams:tabId?{tabId}:void 0});return this.http.get(url)}callReadConfigurationOverview(configId){const url=this.occEndpointsService.buildUrl("readCpqConfigurationOverview",{urlParams:{configurationId:configId}});return this.http.get(url)}callUpdateAttribute(updateAttribute){const url=this.occEndpointsService.buildUrl("updateCpqAttribute",{urlParams:{configurationId:updateAttribute.configurationId,attributeCode:updateAttribute.standardAttributeCode},queryParams:{tabId:updateAttribute.tabId}});return this.http.patch(url,updateAttribute.changeAttributeValue)}callUpdateValue(updateValue){const url=this.occEndpointsService.buildUrl("updateCpqAttributeValueQuantity",{urlParams:{configurationId:updateValue.configurationId,attributeCode:updateValue.standardAttributeCode,attributeValueId:updateValue.attributeValueId},queryParams:{tabId:updateValue.tabId}});return this.http.patch(url,{quantity:updateValue.quantity})}callReadConfigurationForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntryFull",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}});return this.http.get(url)}callReadConfigurationForOrderEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntryFull",{urlParams:{userId:parameters.userId,orderId:parameters.orderId,orderEntryNumber:parameters.orderEntryNumber}});return this.http.get(url)}}__name(CpqConfiguratorOccService,"CpqConfiguratorOccService"),CpqConfiguratorOccService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOccService)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"CpqConfiguratorOccService_Factory"),CpqConfiguratorOccService.\u0275prov=core.Yz7({token:CpqConfiguratorOccService,factory:CpqConfiguratorOccService.\u0275fac,providedIn:"root"});class CpqConfiguratorOccAdapter{constructor(cpqOccService){this.cpqOccService=cpqOccService}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!0}createConfiguration(owner){return this.cpqOccService.createConfiguration(owner.id).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}readConfiguration(configId,groupId,owner){return this.cpqOccService.readConfiguration(configId,groupId).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}updateConfiguration(configuration){return(configuration.updateType===Configurator.UpdateType.VALUE_QUANTITY?this.cpqOccService.updateValueQuantity:this.cpqOccService.updateAttribute).call(this.cpqOccService,configuration).pipe((0,map.U)(configResponse=>(configResponse.owner=configuration.owner,configResponse)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(parameters){return this.cpqOccService.addToCart(parameters)}readConfigurationForCartEntry(parameters){return this.cpqOccService.readConfigurationForCartEntry(parameters).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))}updateConfigurationForCartEntry(parameters){return this.cpqOccService.updateCartEntry(parameters)}readConfigurationForOrderEntry(parameters){return this.cpqOccService.readConfigurationForOrderEntry(parameters).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))}readPriceSummary(configuration){return(0,of.of)(configuration)}getConfigurationOverview(configId){return this.cpqOccService.readConfigurationOverview(configId)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}__name(CpqConfiguratorOccAdapter,"CpqConfiguratorOccAdapter"),CpqConfiguratorOccAdapter.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOccAdapter)(core.LFG(CpqConfiguratorOccService))},"CpqConfiguratorOccAdapter_Factory"),CpqConfiguratorOccAdapter.\u0275prov=core.Yz7({token:CpqConfiguratorOccAdapter,factory:CpqConfiguratorOccAdapter.\u0275fac});class CpqConfiguratorOccModule{}__name(CpqConfiguratorOccModule,"CpqConfiguratorOccModule"),CpqConfiguratorOccModule.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOccModule)},"CpqConfiguratorOccModule_Factory"),CpqConfiguratorOccModule.\u0275mod=core.oAB({type:CpqConfiguratorOccModule}),CpqConfiguratorOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.x2j)(defaultOccCpqConfiguratorConfigFactory),{provide:CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER,useExisting:OccConfiguratorCpqAddToCartSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER,useExisting:OccConfiguratorCpqUpdateCartEntrySerializer,multi:!0},{provide:RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST,useClass:CpqConfiguratorOccAdapter,multi:!0}],imports:[common.ez]});class CpqConfiguratorEndpointConfig{}__name(CpqConfiguratorEndpointConfig,"CpqConfiguratorEndpointConfig"),CpqConfiguratorEndpointConfig.\u0275fac=__name(function(t){return new(t||CpqConfiguratorEndpointConfig)},"CpqConfiguratorEndpointConfig_Factory"),CpqConfiguratorEndpointConfig.\u0275prov=core.Yz7({token:CpqConfiguratorEndpointConfig,factory:__name(function(t){let r=null;return r=t?new(t||CpqConfiguratorEndpointConfig):core.LFG(spartacus_core.DeH),r},"CpqConfiguratorEndpointConfig_Factory"),providedIn:"root"});class CpqConfiguratorEndpointService{constructor(config){this.config=config,this.logger=(0,core.f3M)(spartacus_core.mQy),this.CPQ_MARKER_HEADER={headers:new http.WM({[spartacus_product_configurator_rulebased_root.O4]:"x"})}}buildUrl(endpointName,urlParams,queryParams){const endpoints=this.config.backend?.cpq?.endpoints;let endpoint;switch(endpointName){case"configurationInit":endpoint=endpoints?.configurationInit;break;case"configurationDisplay":endpoint=endpoints?.configurationDisplay;break;case"attributeUpdate":endpoint=endpoints?.attributeUpdate;break;case"valueUpdate":endpoint=endpoints?.valueUpdate}endpoint||(endpoint="configurations",this.logger.warn(`${endpointName} endpoint configuration missing for cpq backend, please provide it via key: "backend.cpq.endpoints.${endpointName}"`));let url=this.config.backend?.cpq?.prefix+endpoint;return url=urlParams?spartacus_core.leO.resolve(url,urlParams):url,url=queryParams?this.appendQueryParameters(url,queryParams):url,url}appendQueryParameters(url,parameters){let urlWithParameters=url+"?";return parameters.forEach((param,idx)=>{urlWithParameters=idx>0?urlWithParameters+"&":urlWithParameters,urlWithParameters=`${urlWithParameters}${param.name}=${param.value}`}),urlWithParameters}}__name(CpqConfiguratorEndpointService,"CpqConfiguratorEndpointService"),CpqConfiguratorEndpointService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorEndpointService)(core.LFG(CpqConfiguratorEndpointConfig))},"CpqConfiguratorEndpointService_Factory"),CpqConfiguratorEndpointService.\u0275prov=core.Yz7({token:CpqConfiguratorEndpointService,factory:CpqConfiguratorEndpointService.\u0275fac,providedIn:"root"});class CpqConfiguratorRestService{constructor(http2,converterService,endpointService){this.http=http2,this.converterService=converterService,this.endpointService=endpointService}createConfiguration(productSystemId){return this.callConfigurationInit(productSystemId).pipe((0,switchMap.w)(configCreatedResponse=>this.callConfigurationDisplay(configCreatedResponse.configurationId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configCreatedResponse.configurationId})))))}readConfiguration(configId,tabId){return this.callConfigurationDisplay(configId,tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId})))}readConfigurationOverview(configId){return this.getConfigurationWithAllTabsAndAttributes(configId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId})))}getConfigurationWithAllTabsAndAttributes(configId){return this.callConfigurationDisplay(configId).pipe((0,switchMap.w)(currentTab=>{const tabRequests=[];return currentTab.tabs&&currentTab.tabs.length>0?currentTab.tabs.forEach(tab=>{tab.isSelected?tabRequests.push((0,of.of)(currentTab)):tabRequests.push(this.callConfigurationDisplay(configId,tab.id.toString()))}):tabRequests.push((0,of.of)(currentTab)),(0,forkJoin.D)(tabRequests)}),(0,map.U)(this.mergeTabResults))}mergeTabResults(tabReqResultList){const config={...tabReqResultList[tabReqResultList.length-1]};return config.attributes=void 0,config.tabs=[],tabReqResultList.forEach(tabReqResult=>{let tab;const currentTab=tabReqResult.tabs?.find(tabEl=>tabEl.isSelected);tab=currentTab&&tabReqResult.tabs&&tabReqResult.tabs.length>0?{...currentTab}:{id:0},tab.attributes=tabReqResult.attributes,config.tabs?.push(tab)}),config}updateAttribute(configuration){const updateAttribute=this.converterService.convert(configuration,CPQ_CONFIGURATOR_SERIALIZER);return this.callUpdateAttribute(updateAttribute).pipe((0,switchMap.w)(()=>this.callConfigurationDisplay(configuration.configId,updateAttribute.tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configuration.configId})))))}updateValueQuantity(configuration){const updateValue=this.converterService.convert(configuration,CPQ_CONFIGURATOR_QUANTITY_SERIALIZER);return this.callUpdateValue(updateValue).pipe((0,switchMap.w)(()=>this.callConfigurationDisplay(configuration.configId,updateValue.tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configuration.configId})))))}callUpdateValue(updateValue){return this.http.patch(this.endpointService.buildUrl("valueUpdate",{configId:updateValue.configurationId,attributeCode:updateValue.standardAttributeCode,valueCode:updateValue.attributeValueId}),{Quantity:updateValue.quantity},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationInit(productSystemId){return this.http.post(this.endpointService.buildUrl("configurationInit"),{ProductSystemId:productSystemId},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationDisplay(configId,tabId){return this.http.get(this.endpointService.buildUrl("configurationDisplay",{configId},tabId?[{name:"tabId",value:tabId}]:void 0),this.endpointService.CPQ_MARKER_HEADER)}callUpdateAttribute(updateAttribute){return this.http.patch(this.endpointService.buildUrl("attributeUpdate",{configId:updateAttribute.configurationId,attributeCode:updateAttribute.standardAttributeCode}),updateAttribute.changeAttributeValue,this.endpointService.CPQ_MARKER_HEADER)}}__name(CpqConfiguratorRestService,"CpqConfiguratorRestService"),CpqConfiguratorRestService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestService)(core.LFG(http.eN),core.LFG(spartacus_core.IXI),core.LFG(CpqConfiguratorEndpointService))},"CpqConfiguratorRestService_Factory"),CpqConfiguratorRestService.\u0275prov=core.Yz7({token:CpqConfiguratorRestService,factory:CpqConfiguratorRestService.\u0275fac,providedIn:"root"});class CpqConfiguratorRestAdapter{constructor(cpqRestService,cpqOccService){this.cpqRestService=cpqRestService,this.cpqOccService=cpqOccService}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!1}createConfiguration(owner){return this.cpqRestService.createConfiguration(owner.id).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}readConfiguration(configId,groupId,owner){return this.cpqRestService.readConfiguration(configId,groupId).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}updateConfiguration(configuration){return(configuration.updateType===Configurator.UpdateType.VALUE_QUANTITY?this.cpqRestService.updateValueQuantity:this.cpqRestService.updateAttribute).call(this.cpqRestService,configuration).pipe((0,map.U)(configResponse=>(configResponse.owner=configuration.owner,configResponse)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(parameters){return this.cpqOccService.addToCart(parameters)}readConfigurationForCartEntry(parameters){return this.cpqOccService.getConfigIdForCartEntry(parameters).pipe((0,switchMap.w)(configId=>this.cpqRestService.readConfiguration(configId).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))))}updateConfigurationForCartEntry(parameters){return this.cpqOccService.updateCartEntry(parameters)}readConfigurationForOrderEntry(parameters){return this.cpqOccService.getConfigIdForOrderEntry(parameters).pipe((0,switchMap.w)(configId=>this.cpqRestService.readConfiguration(configId).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))))}readPriceSummary(configuration){return(0,of.of)(configuration)}getConfigurationOverview(configId){return this.cpqRestService.readConfigurationOverview(configId)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}__name(CpqConfiguratorRestAdapter,"CpqConfiguratorRestAdapter"),CpqConfiguratorRestAdapter.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestAdapter)(core.LFG(CpqConfiguratorRestService),core.LFG(CpqConfiguratorOccService))},"CpqConfiguratorRestAdapter_Factory"),CpqConfiguratorRestAdapter.\u0275prov=core.Yz7({token:CpqConfiguratorRestAdapter,factory:CpqConfiguratorRestAdapter.\u0275fac});class CpqConfiguratorRestModule{}__name(CpqConfiguratorRestModule,"CpqConfiguratorRestModule"),CpqConfiguratorRestModule.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestModule)},"CpqConfiguratorRestModule_Factory"),CpqConfiguratorRestModule.\u0275mod=core.oAB({type:CpqConfiguratorRestModule}),CpqConfiguratorRestModule.\u0275inj=core.cJS({providers:[{provide:RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST,useClass:CpqConfiguratorRestAdapter,multi:!0},{provide:CPQ_CONFIGURATOR_NORMALIZER,useClass:CpqConfiguratorNormalizer,multi:!0},{provide:CPQ_CONFIGURATOR_SERIALIZER,useClass:CpqConfiguratorSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_QUANTITY_SERIALIZER,useClass:CpqConfiguratorValueSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER,useClass:CpqConfiguratorOverviewNormalizer,multi:!0},(0,spartacus_core.i51)({backend:{cpq:{endpoints:{configurationInit:"configurations",configurationDisplay:"configurations/${configId}/display",attributeUpdate:"configurations/${configId}/attributes/${attributeCode}",valueUpdate:"configurations/${configId}/attributes/${attributeCode}/attributeValues/${valueCode}"},prefix:"/api/configuration/v1/"}}})],imports:[common.ez]});class RulebasedCpqConfiguratorModule{}__name(RulebasedCpqConfiguratorModule,"RulebasedCpqConfiguratorModule"),RulebasedCpqConfiguratorModule.\u0275fac=__name(function(t){return new(t||RulebasedCpqConfiguratorModule)},"RulebasedCpqConfiguratorModule_Factory"),RulebasedCpqConfiguratorModule.\u0275mod=core.oAB({type:RulebasedCpqConfiguratorModule}),RulebasedCpqConfiguratorModule.\u0275inj=core.cJS({imports:[CpqConfiguratorCommonModule,CpqConfiguratorOccModule,CpqConfiguratorRestModule]});const extensions=[];__webpack_require__(90595).N.cpq&&extensions.push(RulebasedCpqConfiguratorModule);class RulebasedConfiguratorWrapperModule{}__name(RulebasedConfiguratorWrapperModule,"RulebasedConfiguratorWrapperModule"),RulebasedConfiguratorWrapperModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorWrapperModule)},"RulebasedConfiguratorWrapperModule_Factory"),RulebasedConfiguratorWrapperModule.\u0275mod=core.oAB({type:RulebasedConfiguratorWrapperModule}),RulebasedConfiguratorWrapperModule.\u0275inj=core.cJS({imports:[RulebasedConfiguratorModule,extensions]})},53137:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>debounce});var _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65814);function debounce(durationSelector){return source=>source.lift(new DebounceOperator(durationSelector))}__name(debounce,"debounce");class DebounceOperator{constructor(durationSelector){this.durationSelector=durationSelector}call(subscriber,source){return source.subscribe(new DebounceSubscriber(subscriber,this.durationSelector))}}__name(DebounceOperator,"DebounceOperator");class DebounceSubscriber extends _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.Ds{constructor(destination,durationSelector){super(destination),this.durationSelector=durationSelector,this.hasValue=!1}_next(value){try{const result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(value,duration){let subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=(0,_innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.ft)(duration,new _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.IY(this)),subscription&&!subscription.closed&&this.add(this.durationSubscription=subscription)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=void 0,subscription.unsubscribe(),this.remove(subscription)),this.value=void 0,this.hasValue=!1,super._next(value)}}}__name(DebounceSubscriber,"DebounceSubscriber")},49352:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>cartGroup_actions,CQ:()=>CartConnector,Eu:()=>CartVoucherAdapter,F5:()=>multiCartGroup_selectors,F7:()=>isSelectiveCart,Jp:()=>CartBaseCoreModule,N4:()=>MULTI_CART_DATA,Qx:()=>ProductImportInfoService,T6:()=>getCartIdByUserId,YA:()=>CART_VALIDATION_NORMALIZER,YW:()=>CartAdapter,i4:()=>CartValidationGuard,n5:()=>CartValidationAdapter,r_:()=>CartConfigService,vI:()=>CartEntryAdapter,xb:()=>isEmpty});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40305),_spartacus_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46167),_ngrx_store__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(91464),_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(638),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(86466),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26942),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2155),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(37505),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(35677),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(63714),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(49320),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2026),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(38845),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(85171),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(95426),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(33029),rxjs_operators__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(21753),rxjs_operators__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(85872),rxjs_operators__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(53137),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(66904),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(95202),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(31765),rxjs__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(79156),rxjs__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(20085),rxjs__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(58834),rxjs__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(76424),rxjs__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(14614),_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48030),_spartacus_storefront__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(25907),_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(86842),_angular_common__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(89318),_angular_router__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9664);const MULTI_CART_DATA="[Multi Cart] Multi Cart Data";class CartAddEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry"}}__name(CartAddEntry,"CartAddEntry");class CartAddEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry Success"}}__name(CartAddEntrySuccess,"CartAddEntrySuccess");class CartAddEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry Fail"}}__name(CartAddEntryFail,"CartAddEntryFail");class CartRemoveEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry"}}__name(CartRemoveEntry,"CartRemoveEntry");class CartRemoveEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry Success"}}__name(CartRemoveEntrySuccess,"CartRemoveEntrySuccess");class CartRemoveEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry Fail"}}__name(CartRemoveEntryFail,"CartRemoveEntryFail");class CartUpdateEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry"}}__name(CartUpdateEntry,"CartUpdateEntry");class CartUpdateEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry Success"}}__name(CartUpdateEntrySuccess,"CartUpdateEntrySuccess");class CartUpdateEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry Fail"}}__name(CartUpdateEntryFail,"CartUpdateEntryFail");const CART_ADD_VOUCHER="[Cart-voucher] Add Cart Vouchers",CART_ADD_VOUCHER_SUCCESS="[Cart-voucher] Add Cart Voucher Success",CART_REMOVE_VOUCHER="[Cart-voucher] Remove Cart Voucher";class CartAddVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.payload=payload,this.type=CART_ADD_VOUCHER}}__name(CartAddVoucher,"CartAddVoucher");class CartAddVoucherFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher",payload.error),this.payload=payload,this.type="[Cart-voucher] Add Cart Voucher Fail"}}__name(CartAddVoucherFail,"CartAddVoucherFail");class CartAddVoucherSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.payload=payload,this.type=CART_ADD_VOUCHER_SUCCESS}}__name(CartAddVoucherSuccess,"CartAddVoucherSuccess");class CartResetAddVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoaderResetAction{constructor(){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.type="[Cart-voucher] Reset Add Cart Voucher"}}__name(CartResetAddVoucher,"CartResetAddVoucher");class CartRemoveVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=CART_REMOVE_VOUCHER}}__name(CartRemoveVoucher,"CartRemoveVoucher");class CartRemoveVoucherFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-voucher] Remove Cart Voucher Fail"}}__name(CartRemoveVoucherFail,"CartRemoveVoucherFail");class CartRemoveVoucherSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-voucher] Remove Cart Voucher Success"}}__name(CartRemoveVoucherSuccess,"CartRemoveVoucherSuccess");const CREATE_CART="[Cart] Create Cart",CREATE_CART_SUCCESS="[Cart] Create Cart Success",LOAD_CART="[Cart] Load Cart",LOAD_CART_SUCCESS="[Cart] Load Cart Success",LOAD_CARTS_SUCCESS="[Cart] Load Carts Success",REMOVE_CART="[Cart] Remove Cart",DELETE_CART="[Cart] Delete Cart",DELETE_CART_SUCCESS="[Cart] Delete Cart Success";class CreateCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(MULTI_CART_DATA,payload.tempCartId),this.payload=payload,this.type=CREATE_CART}}__name(CreateCart,"CreateCart");class CreateCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(MULTI_CART_DATA,payload.tempCartId),this.payload=payload,this.type="[Cart] Create Cart Fail"}}__name(CreateCartFail,"CreateCartFail");class CreateCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=CREATE_CART_SUCCESS}}__name(CreateCartSuccess,"CreateCartSuccess");class AddEmailToCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart"}}__name(AddEmailToCart,"AddEmailToCart");class AddEmailToCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart Fail"}}__name(AddEmailToCartFail,"AddEmailToCartFail");class AddEmailToCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart Success"}}__name(AddEmailToCartSuccess,"AddEmailToCartSuccess");class LoadCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=LOAD_CART}}__name(LoadCart,"LoadCart");class LoadCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId,payload.error),this.payload=payload,this.type="[Cart] Load Cart Fail"}}__name(LoadCartFail,"LoadCartFail");class LoadCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=LOAD_CART_SUCCESS}}__name(LoadCartSuccess,"LoadCartSuccess");class LoadCartsSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.map(cart=>cart?.code??"")),this.payload=payload,this.type=LOAD_CARTS_SUCCESS}}__name(LoadCartsSuccess,"LoadCartsSuccess");class MergeCart{constructor(payload){this.payload=payload,this.type="[Cart] Merge Cart"}}__name(MergeCart,"MergeCart");class MergeCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.oldCartId),this.payload=payload,this.type="[Cart] Merge Cart Success"}}__name(MergeCartSuccess,"MergeCartSuccess");class ResetCartDetails extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.ProcessesLoaderResetAction{constructor(){super(MULTI_CART_DATA),this.type="[Cart] Reset Cart Details"}}__name(ResetCartDetails,"ResetCartDetails");class RemoveCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=REMOVE_CART}}__name(RemoveCart,"RemoveCart");class DeleteCart{constructor(payload){this.payload=payload,this.type=DELETE_CART}}__name(DeleteCart,"DeleteCart");class DeleteCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=DELETE_CART_SUCCESS}}__name(DeleteCartSuccess,"DeleteCartSuccess");class DeleteCartFail{constructor(payload){this.payload=payload,this.type="[Cart] Delete Cart Fail"}}__name(DeleteCartFail,"DeleteCartFail");const CLEAR_CART_STATE="[Cart] Clear Cart State",SET_CART_TYPE_INDEX="[Cart] Set cart type index",SET_CART_DATA="[Cart] Set cart data";class CartProcessesIncrement extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload),this.payload=payload,this.type="[Cart] Cart Processes Increment"}}__name(CartProcessesIncrement,"CartProcessesIncrement");class CartProcessesDecrement extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload),this.payload=payload,this.type="[Cart] Cart Processes Decrement"}}__name(CartProcessesDecrement,"CartProcessesDecrement");class SetActiveCartId{constructor(payload){this.payload=payload,this.type="[Cart] Set Active Cart Id"}}__name(SetActiveCartId,"SetActiveCartId");class ClearCartState extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAllAction{constructor(){super(MULTI_CART_DATA),this.type=CLEAR_CART_STATE}}__name(ClearCartState,"ClearCartState");class SetCartTypeIndex{constructor(payload){this.payload=payload,this.type=SET_CART_TYPE_INDEX}}__name(SetCartTypeIndex,"SetCartTypeIndex");class SetCartData extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=SET_CART_DATA}}__name(SetCartData,"SetCartData");var cartGroup_actions=Object.freeze({__proto__:null,ADD_EMAIL_TO_CART:"[Cart] Add Email to Cart",ADD_EMAIL_TO_CART_FAIL:"[Cart] Add Email to Cart Fail",ADD_EMAIL_TO_CART_SUCCESS:"[Cart] Add Email to Cart Success",AddEmailToCart,AddEmailToCartFail,AddEmailToCartSuccess,CART_ADD_ENTRY:"[Cart-entry] Add Entry",CART_ADD_ENTRY_FAIL:"[Cart-entry] Add Entry Fail",CART_ADD_ENTRY_SUCCESS:"[Cart-entry] Add Entry Success",CART_ADD_VOUCHER,CART_ADD_VOUCHER_FAIL:"[Cart-voucher] Add Cart Voucher Fail",CART_ADD_VOUCHER_SUCCESS,CART_PROCESSES_DECREMENT:"[Cart] Cart Processes Decrement",CART_PROCESSES_INCREMENT:"[Cart] Cart Processes Increment",CART_REMOVE_ENTRY:"[Cart-entry] Remove Entry",CART_REMOVE_ENTRY_FAIL:"[Cart-entry] Remove Entry Fail",CART_REMOVE_ENTRY_SUCCESS:"[Cart-entry] Remove Entry Success",CART_REMOVE_VOUCHER,CART_REMOVE_VOUCHER_FAIL:"[Cart-voucher] Remove Cart Voucher Fail",CART_REMOVE_VOUCHER_SUCCESS:"[Cart-voucher] Remove Cart Voucher Success",CART_RESET_ADD_VOUCHER:"[Cart-voucher] Reset Add Cart Voucher",CART_UPDATE_ENTRY:"[Cart-entry] Update Entry",CART_UPDATE_ENTRY_FAIL:"[Cart-entry] Update Entry Fail",CART_UPDATE_ENTRY_SUCCESS:"[Cart-entry] Update Entry Success",CLEAR_CART_STATE,CREATE_CART,CREATE_CART_FAIL:"[Cart] Create Cart Fail",CREATE_CART_SUCCESS,CartAddEntry,CartAddEntryFail,CartAddEntrySuccess,CartAddVoucher,CartAddVoucherFail,CartAddVoucherSuccess,CartProcessesDecrement,CartProcessesIncrement,CartRemoveEntry,CartRemoveEntryFail,CartRemoveEntrySuccess,CartRemoveVoucher,CartRemoveVoucherFail,CartRemoveVoucherSuccess,CartResetAddVoucher,CartUpdateEntry,CartUpdateEntryFail,CartUpdateEntrySuccess,ClearCartState,CreateCart,CreateCartFail,CreateCartSuccess,DELETE_CART,DELETE_CART_FAIL:"[Cart] Delete Cart Fail",DELETE_CART_SUCCESS,DeleteCart,DeleteCartFail,DeleteCartSuccess,LOAD_CART,LOAD_CARTS_SUCCESS,LOAD_CART_FAIL:"[Cart] Load Cart Fail",LOAD_CART_SUCCESS,LoadCart,LoadCartFail,LoadCartSuccess,LoadCartsSuccess,MERGE_CART:"[Cart] Merge Cart",MERGE_CART_SUCCESS:"[Cart] Merge Cart Success",MergeCart,MergeCartSuccess,REMOVE_CART,RESET_CART_DETAILS:"[Cart] Reset Cart Details",RemoveCart,ResetCartDetails,SET_ACTIVE_CART_ID:"[Cart] Set Active Cart Id",SET_CART_DATA,SET_CART_TYPE_INDEX,SetActiveCartId,SetCartData,SetCartTypeIndex});class CartEntryAdapter{}__name(CartEntryAdapter,"CartEntryAdapter");class CartEntryConnector{constructor(adapter){this.adapter=adapter}add(userId,cartId,productCode,quantity,pickupStore){return this.adapter.add(userId,cartId,productCode,quantity,pickupStore)}update(userId,cartId,entryNumber,qty,pickupStore,pickupToDelivery=!1){return this.adapter.update(userId,cartId,entryNumber,qty,pickupStore,pickupToDelivery)}remove(userId,cartId,entryNumber){return this.adapter.remove(userId,cartId,entryNumber)}}__name(CartEntryConnector,"CartEntryConnector"),CartEntryConnector.\u0275fac=__name(function(t){return new(t||CartEntryConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEntryAdapter))},"CartEntryConnector_Factory"),CartEntryConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEntryConnector,factory:CartEntryConnector.\u0275fac,providedIn:"root"});class CartEntryEffects{constructor(actions$,cartEntryConnector){this.actions$=actions$,this.cartEntryConnector=cartEntryConnector,this.contextChange$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE)),this.logger=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.f3M)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.mQy),this.addEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.add(payload.userId,payload.cartId,payload.productCode,payload.quantity,payload.pickupStore).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartModification=>new CartAddEntrySuccess({...payload,...cartModification})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartAddEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.removeEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Remove Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.remove(payload.userId,payload.cartId,payload.entryNumber).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new CartRemoveEntrySuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartRemoveEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.updateEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Update Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.update(payload.userId,payload.cartId,payload.entryNumber,payload.quantity,payload.pickupStore,payload.pickupToDelivery).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new CartUpdateEntrySuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartUpdateEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$)))}}__name(CartEntryEffects,"CartEntryEffects"),CartEntryEffects.\u0275fac=__name(function(t){return new(t||CartEntryEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEntryConnector))},"CartEntryEffects_Factory"),CartEntryEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEntryEffects,factory:CartEntryEffects.\u0275fac});class CartVoucherAdapter{}__name(CartVoucherAdapter,"CartVoucherAdapter");class CartVoucherConnector{constructor(adapter){this.adapter=adapter}add(userId,cartId,voucherId){return this.adapter.add(userId,cartId,voucherId)}remove(userId,cartId,voucherId){return this.adapter.remove(userId,cartId,voucherId)}}__name(CartVoucherConnector,"CartVoucherConnector"),CartVoucherConnector.\u0275fac=__name(function(t){return new(t||CartVoucherConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartVoucherAdapter))},"CartVoucherConnector_Factory"),CartVoucherConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherConnector,factory:CartVoucherConnector.\u0275fac,providedIn:"root"});class CartVoucherEffects{constructor(actions$,cartVoucherConnector,messageService){this.actions$=actions$,this.cartVoucherConnector=cartVoucherConnector,this.messageService=messageService,this.logger=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.f3M)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.mQy),this.addCartVoucher$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartVoucherConnector.add(payload.userId,payload.cartId,payload.voucherId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>(this.showGlobalMessage("voucher.applyVoucherSuccess",payload.voucherId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_CONFIRMATION),new CartAddVoucherSuccess({...payload}))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartAddVoucherFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new CartProcessesDecrement(payload.cartId),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))))),this.removeCartVoucher$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_REMOVE_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartVoucherConnector.remove(payload.userId,payload.cartId,payload.voucherId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>(this.showGlobalMessage("voucher.removeVoucherSuccess",payload.voucherId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_INFO),new CartRemoveVoucherSuccess({userId:payload.userId,cartId:payload.cartId,voucherId:payload.voucherId}))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartRemoveVoucherFail({error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger),cartId:payload.cartId,userId:payload.userId,voucherId:payload.voucherId}),new LoadCart({userId:payload.userId,cartId:payload.cartId})]))))))}showGlobalMessage(text,param,messageType){this.messageService.add({key:text,params:{voucherCode:param}},messageType)}}function getCartIdByUserId(cart,userId){return userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds?cart?.guid??"":cart?.code??""}function isSelectiveCart(cartId=""){return cartId.startsWith("selectivecart")}function isCartNotFoundError(error){return"notFound"===error.reason&&"cart"===error.subjectType&&!isSelectiveCart(error.subject)}function voucherExceededError(error){return"coupon.already.redeemed"===error.message}function voucherInvalidError(error){return"coupon.invalid.code.provided"===error.message}function isVoucherError(error){return"VoucherOperationError"===error.type}function isCartError(error){return"CartError"===error.type||"CartAddressError"===error.type||"CartEntryError"===error.type||"CartEntryGroupError"===error.type}function isTempCartId(cartId){return cartId.startsWith("temp-")}function isEmpty(cart){return!cart||"object"==typeof cart&&0===Object.keys(cart).length}function isEmail(str){return!!str&&!!str.match(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.QIJ)}function isJustLoggedIn(userId,previousUserId){return userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&previousUserId!==userId}__name(CartVoucherEffects,"CartVoucherEffects"),CartVoucherEffects.\u0275fac=__name(function(t){return new(t||CartVoucherEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartVoucherConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.IWp))},"CartVoucherEffects_Factory"),CartVoucherEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherEffects,factory:CartVoucherEffects.\u0275fac}),__name(getCartIdByUserId,"getCartIdByUserId"),__name(isSelectiveCart,"isSelectiveCart"),__name(isCartNotFoundError,"isCartNotFoundError"),__name(voucherExceededError,"voucherExceededError"),__name(voucherInvalidError,"voucherInvalidError"),__name(isVoucherError,"isVoucherError"),__name(isCartError,"isCartError"),__name(isTempCartId,"isTempCartId"),__name(isEmpty,"isEmpty"),__name(isEmail,"isEmail"),__name(isJustLoggedIn,"isJustLoggedIn");const getMultiCartState=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.ZF)("cart"),getMultiCartEntities=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartState,state=>state.carts),getCartEntitySelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityProcessesLoaderStateSelector(state,cartId)),"getCartEntitySelectorFactory"),getCartSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityValueSelector(state,cartId)),"getCartSelectorFactory"),getCartIsStableSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityIsStableSelector(state,cartId)),"getCartIsStableSelectorFactory"),getCartHasPendingProcessesSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityHasPendingProcessesSelector(state,cartId)),"getCartHasPendingProcessesSelectorFactory"),getCartEntriesSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartSelectorFactory(cartId),state=>state&&state.entries?state.entries:[]),"getCartEntriesSelectorFactory"),getCartEntrySelectorFactory=__name((cartId,productCode)=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartEntriesSelectorFactory(cartId),state=>state.find(entry=>entry.product?.code===productCode)),"getCartEntrySelectorFactory"),getCartsSelectorFactory=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>Object.keys(state.entities).map(key=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityValueSelector(state,key))),getCartTypeIndex=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartState,state=>state.index),getCartIdByTypeFactory=__name(type=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartTypeIndex,state=>state&&state[type]),"getCartIdByTypeFactory");class CartAdapter{}__name(CartAdapter,"CartAdapter");class CartConnector{constructor(adapter){this.adapter=adapter}loadAll(userId){return this.adapter.loadAll(userId)}load(userId,cartId){return this.adapter.load(userId,cartId)}create(userId,oldCartId,toMergeCartGuid){return this.adapter.create(userId,oldCartId,toMergeCartGuid)}delete(userId,cartId){return this.adapter.delete(userId,cartId)}save(userId,cartId,saveCartName,saveCartDescription){return this.adapter.save(userId,cartId,saveCartName,saveCartDescription)}addEmail(userId,cartId,email){return this.adapter.addEmail(userId,cartId,email)}}__name(CartConnector,"CartConnector"),CartConnector.\u0275fac=__name(function(t){return new(t||CartConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartAdapter))},"CartConnector_Factory"),CartConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartConnector,factory:CartConnector.\u0275fac,providedIn:"root"});class CartEffects{handleLoadCartError(payload,error){if(error?.error?.errors){if(error.error.errors.filter(err=>"invalid"===err.reason).length>0)return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(new LoadCart({...payload}));if(error.error.errors.filter(err=>isCartNotFoundError(err)||"UnknownResourceError"===err.reason).length>0)return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(new RemoveCart({cartId:payload.cartId}))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(new LoadCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}))}constructor(actions$,cartConnector,store){this.actions$=actions$,this.cartConnector=cartConnector,this.store=store,this.contextChange$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE)),this.logger=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.f3M)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.mQy),this.loadCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.v)(payload=>payload.cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(group$=>group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(payload=>(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartHasPendingProcessesSelectorFactory(payload.cartId)))))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([_,hasPendingProcesses])=>!hasPendingProcesses),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([payload])=>payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(payload=>this.cartConnector.load(payload.userId,payload.cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(cart=>{let actions=[];return cart?(actions.push(new LoadCartSuccess({...payload,cart,cartId:getCartIdByUserId(cart,payload.userId)})),payload.cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv&&actions.push(new RemoveCart({cartId:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv}))):actions=[new LoadCartFail({...payload,error:{}})],actions}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>this.handleLoadCartError(payload,error)))))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.createCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CREATE_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.create(payload.userId,payload.oldCartId,payload.toMergeCartGuid).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cart=>{const conditionalActions=[];return payload.oldCartId&&conditionalActions.push(new MergeCartSuccess({extraData:payload.extraData,userId:payload.userId,tempCartId:payload.tempCartId,cartId:getCartIdByUserId(cart,payload.userId),oldCartId:payload.oldCartId})),[new CreateCartSuccess({...payload,cart,cartId:getCartIdByUserId(cart,payload.userId)}),new RemoveCart({cartId:payload.tempCartId}),...conditionalActions]}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(new CreateCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}))))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.mergeCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart] Merge Cart"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(payload=>this.cartConnector.load(payload.userId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(currentCart=>{if(currentCart?.code!==payload.cartId)return new CreateCart({userId:payload.userId,oldCartId:payload.cartId,toMergeCartGuid:currentCart?currentCart.guid:void 0,extraData:payload.extraData,tempCartId:payload.tempCartId})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.refresh$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER_SUCCESS),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartProcessesDecrement(payload.cartId),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))),this.refreshWithoutProcesses$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry Success","[Cart-entry] Remove Entry Success","[Cart-entry] Update Entry Success","[Cart-voucher] Remove Cart Voucher Success"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(payload=>new LoadCart({userId:payload.userId,cartId:payload.cartId})))),this.resetCartDetailsOnSiteContextChange$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(()=>[new ResetCartDetails]))),this.addEmail$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart] Add Email to Cart"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.addEmail(payload.userId,payload.cartId,payload.email).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(()=>[new AddEmailToCartSuccess({...payload}),new LoadCart({userId:payload.userId,cartId:payload.cartId})]),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new AddEmailToCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.deleteCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(DELETE_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.delete(payload.userId,payload.cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new DeleteCartSuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new DeleteCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error,this.logger)}),new LoadCart({...payload})]))))))}}__name(CartEffects,"CartEffects"),CartEffects.\u0275fac=__name(function(t){return new(t||CartEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh))},"CartEffects_Factory"),CartEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEffects,factory:CartEffects.\u0275fac});class MultiCartEffectsService{getActiveCartTypeOnLoadSuccess(action){if(action?.payload?.extraData?.active)return action.payload?.cart.saveTime?new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:""}):new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.meta.entityId})}}__name(MultiCartEffectsService,"MultiCartEffectsService"),MultiCartEffectsService.\u0275fac=__name(function(t){return new(t||MultiCartEffectsService)},"MultiCartEffectsService_Factory"),MultiCartEffectsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartEffectsService,factory:MultiCartEffectsService.\u0275fac});class MultiCartEffects{getActiveCartTypeOnLoad(action){if(action?.payload?.cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv)return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:""})}getActiveCartTypeOnLoadSuccess(action){return this.multiCartEffectsService.getActiveCartTypeOnLoadSuccess(action)}getActiveCartTypeOnCreate(action){if(action?.payload?.extraData?.active)return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.meta.entityId})}constructor(actions$,multiCartEffectsService){this.actions$=actions$,this.multiCartEffectsService=multiCartEffectsService,this.processesIncrement$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(payload=>new CartProcessesIncrement(payload.cartId)))),this.setSelectiveId$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART_SUCCESS),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>{switch(action.type){case LOAD_CART_SUCCESS:{const payload=action.payload;if(isSelectiveCart(payload.cartId))return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.SELECTIVE,cartId:payload.cartId});break}}}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))),this.setActiveCartId$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART_SUCCESS,LOAD_CART,CREATE_CART_SUCCESS,CREATE_CART,"[Cart] Set Active Cart Id"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>{switch(action.type){case LOAD_CART:return this.getActiveCartTypeOnLoad(action);case LOAD_CART_SUCCESS:return this.getActiveCartTypeOnLoadSuccess(action);case CREATE_CART:return this.getActiveCartTypeOnCreate(action);case CREATE_CART_SUCCESS:return new SetCartTypeIndex({cartType:action?.payload?.extraData?.active?_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.NEW_CREATED,cartId:action.meta.entityId});case"[Cart] Set Active Cart Id":return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.payload})}}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN)))}}__name(MultiCartEffects,"MultiCartEffects"),MultiCartEffects.\u0275fac=__name(function(t){return new(t||MultiCartEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(MultiCartEffectsService))},"MultiCartEffects_Factory"),MultiCartEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartEffects,factory:MultiCartEffects.\u0275fac});const effects=[CartEntryEffects,CartVoucherEffects,CartEffects,MultiCartEffects],cartTypeIndexInitialState={[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:""};function cartTypeIndexReducer(state=cartTypeIndexInitialState,action){switch(action.type){case SET_CART_TYPE_INDEX:return{...state,[action.payload.cartType]:action.payload.cartId};case REMOVE_CART:case DELETE_CART_SUCCESS:return action.payload?.cartId===state[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]?{...state,[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:""}:state;case CLEAR_CART_STATE:return cartTypeIndexInitialState}return state}__name(cartTypeIndexReducer,"cartTypeIndexReducer");const cartEntitiesInitialState=void 0;function cartEntitiesReducer(state=cartEntitiesInitialState,action){switch(action.type){case LOAD_CARTS_SUCCESS:return action.payload;case LOAD_CART_SUCCESS:case CREATE_CART_SUCCESS:case SET_CART_DATA:return action.payload.cart}return state}function clearMultiCartState(reducer){return function(state,action){return action.type===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.uQL.LOGOUT&&(state=void 0),reducer(state,action)}}__name(cartEntitiesReducer,"cartEntitiesReducer"),__name(clearMultiCartState,"clearMultiCartState");const multiCartMetaReducers=[clearMultiCartState],multiCartReducerToken=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("MultiCartReducers");function getMultiCartReducers(){return{carts:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityProcessesLoaderReducer(MULTI_CART_DATA,cartEntitiesReducer),index:cartTypeIndexReducer}}__name(getMultiCartReducers,"getMultiCartReducers");const multiCartReducerProvider={provide:multiCartReducerToken,useFactory:getMultiCartReducers};var multiCartGroup_selectors=Object.freeze({__proto__:null,getCartEntitySelectorFactory,getCartEntriesSelectorFactory,getCartEntrySelectorFactory,getCartHasPendingProcessesSelectorFactory,getCartIdByTypeFactory,getCartIsStableSelectorFactory,getCartSelectorFactory,getCartTypeIndex,getCartsSelectorFactory,getMultiCartEntities,getMultiCartState});class MultiCartStatePersistenceService{constructor(statePersistenceService,store,siteContextParamsService){this.statePersistenceService=statePersistenceService,this.store=store,this.siteContextParamsService=siteContextParamsService,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_15__.w}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:"cart",state$:this.getCartState(),context$:this.siteContextParamsService.getValues([_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.iEg]),storageType:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.iHd.LOCAL_STORAGE,onRead:state=>this.onRead(state)}))}getCartState(){return this.store.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(store=>!!store.cart),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getMultiCartState),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(state=>!!state),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(state=>state.index),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.g)("Active"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(indexState=>({active:indexState[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]??""})))}onRead(state){this.store.dispatch(new ClearCartState),state?this.store.dispatch(new SetActiveCartId(state.active)):this.store.dispatch(new SetActiveCartId(""))}ngOnDestroy(){this.subscription.unsubscribe()}}function cartStatePersistenceFactory(cartStatePersistenceService,configInit){return __name(()=>configInit.getStable("context").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(()=>{cartStatePersistenceService.initSync()})).toPromise(),"result")}function uninitializeActiveCartMetaReducerFactory(){return __name(reducer=>(state,action)=>{const newState={...state};return"@ngrx/store/init"===action.type&&(newState.cart={...newState.cart,index:{[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:void 0}}),reducer(newState,action)},"metaReducer")}__name(MultiCartStatePersistenceService,"MultiCartStatePersistenceService"),MultiCartStatePersistenceService.\u0275fac=__name(function(t){return new(t||MultiCartStatePersistenceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.WBb),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Qnj))},"MultiCartStatePersistenceService_Factory"),MultiCartStatePersistenceService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartStatePersistenceService,factory:MultiCartStatePersistenceService.\u0275fac,providedIn:"root"}),__name(cartStatePersistenceFactory,"cartStatePersistenceFactory"),__name(uninitializeActiveCartMetaReducerFactory,"uninitializeActiveCartMetaReducerFactory");class CartPersistenceModule{}__name(CartPersistenceModule,"CartPersistenceModule"),CartPersistenceModule.\u0275fac=__name(function(t){return new(t||CartPersistenceModule)},"CartPersistenceModule_Factory"),CartPersistenceModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartPersistenceModule}),CartPersistenceModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.z4I,useFactory:cartStatePersistenceFactory,deps:[MultiCartStatePersistenceService,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.yUt],multi:!0},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.sr,useFactory:uninitializeActiveCartMetaReducerFactory,multi:!0}]});class CartValidationAdapter{}__name(CartValidationAdapter,"CartValidationAdapter");class CartValidationConnector{constructor(adapter){this.adapter=adapter}validate(cartId,userId){return this.adapter.validate(cartId,userId)}}__name(CartValidationConnector,"CartValidationConnector"),CartValidationConnector.\u0275fac=__name(function(t){return new(t||CartValidationConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationAdapter))},"CartValidationConnector_Factory"),CartValidationConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationConnector,factory:CartValidationConnector.\u0275fac,providedIn:"root"});class CartEventBuilder{constructor(actionsSubject,event,activeCartService,stateEventService){this.actionsSubject=actionsSubject,this.event=event,this.activeCartService=activeCartService,this.stateEventService=stateEventService,this.register()}register(){this.registerCreateCart(),this.registerAddEntry(),this.registerRemoveEntry(),this.registerUpdateEntry(),this.registerDeleteCart(),this.registerAddCartVoucher(),this.registerRemoveCartVoucher(),this.registerMergeCartSuccess()}registerAddEntry(){this.registerMapped({action:"[Cart-entry] Add Entry",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uP}),this.registerMapped({action:"[Cart-entry] Add Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.VD}),this.registerMapped({action:"[Cart-entry] Add Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.K$})}registerRemoveEntry(){this.registerMapped({action:"[Cart-entry] Remove Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.A7}),this.registerMapped({action:"[Cart-entry] Remove Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.dC})}registerUpdateEntry(){this.registerMapped({action:"[Cart-entry] Update Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.X}),this.registerMapped({action:"[Cart-entry] Update Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.gI})}registerMergeCartSuccess(){this.registerMapped({action:"[Cart] Merge Cart Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.pA})}registerCreateCart(){this.stateEventService.register({action:CREATE_CART,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.su}),this.stateEventService.register({action:CREATE_CART_SUCCESS,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.cA}),this.stateEventService.register({action:"[Cart] Create Cart Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Cj})}registerDeleteCart(){this.stateEventService.register({action:DELETE_CART,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aY,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aY,{...action.payload,cartCode:action.payload.cartId})}),this.stateEventService.register({action:DELETE_CART_SUCCESS,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.N0,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.N0,{...action.payload,cartCode:action.payload.cartId})}),this.stateEventService.register({action:"[Cart] Delete Cart Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Ks,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Ks,{...action.payload,cartCode:action.payload.cartId})})}registerAddCartVoucher(){this.stateEventService.register({action:CART_ADD_VOUCHER,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aT}),this.stateEventService.register({action:CART_ADD_VOUCHER_SUCCESS,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Es}),this.stateEventService.register({action:"[Cart-voucher] Add Cart Voucher Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.re})}registerRemoveCartVoucher(){this.stateEventService.register({action:CART_REMOVE_VOUCHER,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uX}),this.stateEventService.register({action:"[Cart-voucher] Remove Cart Voucher Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.FC}),this.stateEventService.register({action:"[Cart-voucher] Remove Cart Voucher Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.kd})}registerMapped(mapping){const eventStream$=this.getAction(mapping.action).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(action=>(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(action).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartService.getActive(),this.activeCartService.getActiveCartId()))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([action,_activeCart,activeCartId])=>action.payload.cartId===activeCartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([action,activeCart])=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(mapping.event,{...action.payload,cartCode:activeCart.code,entry:action.payload.entry?action.payload.entry:activeCart.entries?.[Number(action.payload.entryNumber)]})));return this.event.register(mapping.event,eventStream$)}getAction(actionType){return this.actionsSubject.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(...[].concat(actionType)))}}__name(CartEventBuilder,"CartEventBuilder"),CartEventBuilder.\u0275fac=__name(function(t){return new(t||CartEventBuilder)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.POd),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.vL$))},"CartEventBuilder_Factory"),CartEventBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEventBuilder,factory:CartEventBuilder.\u0275fac,providedIn:"root"});class CartEventModule{constructor(_CartEventBuilder){}}__name(CartEventModule,"CartEventModule"),CartEventModule.\u0275fac=__name(function(t){return new(t||CartEventModule)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEventBuilder))},"CartEventModule_Factory"),CartEventModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartEventModule}),CartEventModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({});class CartPageEventBuilder{constructor(eventService){this.eventService=eventService,this.register()}register(){this.eventService.register(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uB,this.buildCartPageEvent())}buildCartPageEvent(){return this.eventService.get(_spartacus_storefront__WEBPACK_IMPORTED_MODULE_18__.z4w).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(navigationEvent=>"cart"===navigationEvent.semanticRoute),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(navigationEvent=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uB,{navigation:navigationEvent})))}}__name(CartPageEventBuilder,"CartPageEventBuilder"),CartPageEventBuilder.\u0275fac=__name(function(t){return new(t||CartPageEventBuilder)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.POd))},"CartPageEventBuilder_Factory"),CartPageEventBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartPageEventBuilder,factory:CartPageEventBuilder.\u0275fac,providedIn:"root"});class CartPageEventModule{constructor(_cartPageEventBuilder){}}__name(CartPageEventModule,"CartPageEventModule"),CartPageEventModule.\u0275fac=__name(function(t){return new(t||CartPageEventModule)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartPageEventBuilder))},"CartPageEventModule_Factory"),CartPageEventModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartPageEventModule}),CartPageEventModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({});class ActiveCartService{constructor(multiCartFacade,userIdService,winRef){this.multiCartFacade=multiCartFacade,this.userIdService=userIdService,this.winRef=winRef,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_15__.w,this.activeCartId$=this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(()=>this.multiCartFacade.getCartIdByType(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartId=>void 0!==cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartId=>""===cartId?_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv:cartId)),this.cartEntity$=this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.multiCartFacade.getCartEntity(cartId))),this.shouldLoadCartOnCodeFlow=!0,this.checkInitLoad=void 0,this.initActiveCart(),this.detectUserChange()}initActiveCart(){const cartValue$=this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartEntity=>({cart:cartEntity.value,isStable:!cartEntity.loading&&0===cartEntity.processesCount,loaded:Boolean((cartEntity.error||cartEntity.success)&&!cartEntity.loading)})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(({isStable,cart})=>isStable||isEmpty(cart))),loading=cartValue$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$,this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(([{cart,loaded,isStable},cartId,userId])=>{isStable&&isEmpty(cart)&&!loaded&&!isTempCartId(cartId)&&this.shouldLoadCartOnCodeFlow&&this.load(cartId,userId)}));this.activeCart$=(0,rxjs__WEBPACK_IMPORTED_MODULE_20__.g)(()=>loading.subscribe(),()=>cartValue$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(({cart})=>cart||{}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.d)({bufferSize:1,refCount:!0}))}detectUserChange(){this.subscription.add(this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.G)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$)).subscribe(([[previousUserId,userId],cartId])=>{isJustLoggedIn(userId,previousUserId)&&this.loadOrMerge(cartId,userId,previousUserId)})),this.isLoggedInWithCodeFlow()&&(this.shouldLoadCartOnCodeFlow=!1,this.subscription.add(this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$)).subscribe(([userId,cartId])=>{this.loadOrMerge(cartId,userId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds),this.winRef?.localStorage?.removeItem(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VXE)})))}getActive(){return this.activeCart$}takeActive(){return this.isStable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(isStable=>isStable),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(()=>this.getActive()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cart=>!!cart),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1))}getActiveCartId(){return this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cart,userId])=>getCartIdByUserId(cart,userId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}takeActiveCartId(){return this.isStable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(isStable=>isStable),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(()=>this.getActiveCartId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartId=>!!cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1))}getEntries(){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.multiCartFacade.getEntries(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}getLastEntry(productCode){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.multiCartFacade.getLastEntry(cartId,productCode)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}getLoading(){return this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartEntity=>Boolean(cartEntity.loading)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}isStable(){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.multiCartFacade.isStable(cartId)))}load(cartId,userId){userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv||this.multiCartFacade.loadCart({userId,cartId,extraData:{active:!0}})}loadOrMerge(cartId,userId,previousUserId){cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv||previousUserId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds?this.multiCartFacade.loadCart({userId,cartId,extraData:{active:!0}}):Boolean((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.P51)(this.isGuestCart()))?this.guestCartMerge(cartId):this.multiCartFacade.mergeToCurrentCart({userId,cartId,extraData:{active:!0}})}guestCartMerge(cartId){this.getEntries().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).subscribe(entries=>{this.multiCartFacade.deleteCart(cartId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds),this.addEntriesGuestMerge(entries)})}addEntriesGuestMerge(cartEntries){const entriesToAdd=cartEntries.map(entry=>({productCode:entry.product?.code??"",quantity:entry.quantity??0}));this.requireLoadedCart(!0).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{this.multiCartFacade.addEntries(userId,getCartIdByUserId(cart,userId),entriesToAdd)})}isCartCreating(cartState,cartId){return isTempCartId(cartId)&&(cartState.loading||cartState.success||cartState.error)}isLoggedInWithCodeFlow(){return!!this.winRef?.localStorage?.getItem(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VXE)}requireLoadedCart(forGuestMerge=!1){this.checkInitLoad=void 0===this.checkInitLoad;const cartSelector$=(forGuestMerge?this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(()=>!Boolean((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.P51)(this.isGuestCart())))):this.cartEntity$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartState=>!cartState.loading||!!this.checkInitLoad));return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartId,cartState])=>!this.isCartCreating(cartState,cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([,cartState])=>cartState),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(([cartState,userId])=>{isEmpty(cartState.value)&&userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&!cartState.loading&&this.load(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv,userId),this.checkInitLoad=!1}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(()=>cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartState,userId])=>Boolean(userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds||cartState.success||cartState.error)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(([cartState,userId])=>{isEmpty(cartState.value)&&this.multiCartFacade.createCart({userId,extraData:{active:!0}})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(()=>cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartState=>Boolean(cartState.success||cartState.error)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartState,cartId])=>!this.isCartCreating(cartState,cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartState])=>cartState.value),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cart=>!isEmpty(cart)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1))}addEntry(productCode,quantity,pickupStore){this.requireLoadedCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{this.multiCartFacade.addEntry(userId,getCartIdByUserId(cart,userId),productCode,quantity,pickupStore)})}removeEntry(entry){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.removeEntry(userId,cartId,entry.entryNumber)})}updateEntry(entryNumber,quantity,pickupStore,pickupToDelivery=!1){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.updateEntry(userId,cartId,entryNumber,quantity,pickupStore,pickupToDelivery)})}getEntry(productCode){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.multiCartFacade.getEntry(cartId,productCode)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}addEmail(email){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.assignEmail(cartId,userId,email)})}getAssignedUser(){return this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cart=>cart.user))}isGuestCart(cart){return cart?(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(this.isCartUserGuest(cart)):this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(activeCart=>this.isCartUserGuest(activeCart)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}isCartUserGuest(cart){const cartUser=cart.user;return Boolean(cartUser&&(cartUser.name===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.YI5||isEmail(cartUser.uid?.split("|").slice(1).join("|"))))}addEntries(cartEntries){const entriesToAdd=cartEntries.map(entry=>({productCode:entry.product?.code??"",quantity:entry.quantity??0}));this.requireLoadedCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{cart&&this.multiCartFacade.addEntries(userId,getCartIdByUserId(cart,userId),entriesToAdd)})}reloadActiveCart(){(0,rxjs__WEBPACK_IMPORTED_MODULE_24__.aj)([this.getActiveCartId(),this.userIdService.takeUserId()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartId,userId])=>{this.multiCartFacade.loadCart({cartId,userId,extraData:{active:!0}})})).subscribe()}hasPickupItems(){return this.getActive().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cart=>!!cart.pickupItemsQuantity&&cart.pickupItemsQuantity>0))}hasDeliveryItems(){return this.getActive().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cart=>!!cart.deliveryItemsQuantity&&cart.deliveryItemsQuantity>0))}getPickupEntries(){return this.getEntries().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(entries=>entries.filter(entry=>void 0!==entry.deliveryPointOfService)))}getDeliveryEntries(){return this.getEntries().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(entries=>entries.filter(entry=>void 0===entry.deliveryPointOfService)))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ActiveCartService,"ActiveCartService"),ActiveCartService.\u0275fac=__name(function(t){return new(t||ActiveCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.X9E,8))},"ActiveCartService_Factory"),ActiveCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ActiveCartService,factory:ActiveCartService.\u0275fac});class CartValidationStateService{constructor(routingService){this.routingService=routingService,this.NAVIGATION_SKIPS=2,this.navigationIdCount=0,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_15__.w,this.cartValidationResult$=new rxjs__WEBPACK_IMPORTED_MODULE_25__.t(1),this.checkForValidationResultClear$=this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.cartValidationResult$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(([routerState,cartModifications])=>{this.navigationIdCount+this.NAVIGATION_SKIPS<=routerState.navigationId&&cartModifications.length&&(this.cartValidationResult$.next([]),this.navigationIdCount=routerState.navigationId)})),this.setInitialState()}ngOnDestroy(){this.subscription.unsubscribe()}setInitialState(){this.setNavigationIdStep(),this.subscription.add(this.checkForValidationResultClear$.subscribe())}updateValidationResultAndRoutingId(cartModification){this.cartValidationResult$.next(cartModification),this.setNavigationIdStep()}setNavigationIdStep(){this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1)).subscribe(routerState=>this.navigationIdCount=routerState.navigationId)}}__name(CartValidationStateService,"CartValidationStateService"),CartValidationStateService.\u0275fac=__name(function(t){return new(t||CartValidationStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Znh))},"CartValidationStateService_Factory"),CartValidationStateService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationStateService,factory:CartValidationStateService.\u0275fac,providedIn:"root"});class CartValidationService{constructor(cartValidationConnector,command,userIdService,activeCartFacade,cartValidationStateService){this.cartValidationConnector=cartValidationConnector,this.command=command,this.userIdService=userIdService,this.activeCartFacade=activeCartFacade,this.cartValidationStateService=cartValidationStateService,this.validateCartCommand=this.command.create(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_24__.aj)([this.activeCartFacade.getActiveCartId(),this.userIdService.takeUserId(),this.activeCartFacade.isStable()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([_,__,loaded])=>loaded),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(([cartId,userId])=>this.cartValidationConnector.validate(cartId,userId))),{strategy:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.flE.CancelPrevious})}validateCart(){return this.validateCartCommand.execute()}getValidationResults(){return this.cartValidationStateService.cartValidationResult$}}__name(CartValidationService,"CartValidationService"),CartValidationService.\u0275fac=__name(function(t){return new(t||CartValidationService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VDr),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationStateService))},"CartValidationService_Factory"),CartValidationService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationService,factory:CartValidationService.\u0275fac});class CartVoucherService{constructor(store,activeCartFacade,userIdService){this.store=store,this.activeCartFacade=activeCartFacade,this.userIdService=userIdService}addVoucher(voucherId,cartId){this.combineUserAndCartId(cartId).subscribe(([occUserId,cartIdentifier])=>this.store.dispatch(new CartAddVoucher({userId:occUserId,cartId:cartIdentifier,voucherId})))}removeVoucher(voucherId,cartId){this.combineUserAndCartId(cartId).subscribe(([occUserId,cartIdentifier])=>this.store.dispatch(new CartRemoveVoucher({userId:occUserId,cartId:cartIdentifier,voucherId})))}getAddVoucherResultError(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessErrorFactory("addVoucher")))}getAddVoucherResultSuccess(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessSuccessFactory("addVoucher")))}getAddVoucherResultLoading(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessLoadingFactory("addVoucher")))}resetAddVoucherProcessingState(){this.store.dispatch(new CartResetAddVoucher)}combineUserAndCartId(cartId){return cartId?this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(userId=>[userId,cartId])):(0,rxjs__WEBPACK_IMPORTED_MODULE_24__.aj)([this.userIdService.getUserId(),this.activeCartFacade.getActiveCartId()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1))}}__name(CartVoucherService,"CartVoucherService"),CartVoucherService.\u0275fac=__name(function(t){return new(t||CartVoucherService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"CartVoucherService_Factory"),CartVoucherService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherService,factory:CartVoucherService.\u0275fac});class MultiCartService{constructor(store,userIdService){this.store=store,this.userIdService=userIdService}getCart(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartSelectorFactory(cartId)))}getCarts(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartsSelectorFactory))}getCartEntity(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntitySelectorFactory(cartId)))}isStable(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartIsStableSelectorFactory(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.D)(isStable=>isStable?(0,rxjs__WEBPACK_IMPORTED_MODULE_27__.H)(0):rxjs__WEBPACK_IMPORTED_MODULE_28__.E),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}generateTempCartId(){return`temp-${Math.random().toString(36).substring(2,11)}`}createCart({userId,oldCartId,toMergeCartGuid,extraData}){const tempCartId=this.generateTempCartId();return this.store.dispatch(new CreateCart({extraData,userId,oldCartId,toMergeCartGuid,tempCartId})),this.getCartIdByType(extraData?.active?_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.NEW_CREATED).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(cartId=>this.getCart(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))}mergeToCurrentCart({userId,cartId,extraData}){const tempCartId=this.generateTempCartId();this.store.dispatch(new MergeCart({userId,cartId,extraData,tempCartId}))}loadCart({cartId,userId,extraData}){this.store.dispatch(new LoadCart({userId,cartId,extraData}))}getEntries(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntriesSelectorFactory(cartId)))}getLastEntry(cartId,productCode){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntriesSelectorFactory(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(entries=>{const filteredEntries=entries.filter(entry=>entry.product?.code===productCode);return filteredEntries?filteredEntries[filteredEntries.length-1]:void 0}))}addEntry(userId,cartId,productCode,quantity,pickupStore){this.store.dispatch(new CartAddEntry({userId,cartId,productCode,quantity,pickupStore}))}addEntries(userId,cartId,products){products.forEach(product=>{this.store.dispatch(new CartAddEntry({userId,cartId,productCode:product.productCode,quantity:product.quantity}))})}removeEntry(userId,cartId,entryNumber){this.store.dispatch(new CartRemoveEntry({userId,cartId,entryNumber:`${entryNumber}`}))}updateEntry(userId,cartId,entryNumber,quantity,pickupStore,pickupToDelivery=!1){void 0!==quantity&&quantity<=0?this.removeEntry(userId,cartId,entryNumber):this.store.dispatch(new CartUpdateEntry({userId,cartId,pickupStore,pickupToDelivery,entryNumber:`${entryNumber}`,quantity}))}getEntry(cartId,productCode){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntrySelectorFactory(cartId,productCode)))}assignEmail(cartId,userId,email){this.store.dispatch(new AddEmailToCart({userId,cartId,email}))}removeCart(cartId){this.store.dispatch(new RemoveCart({cartId}))}deleteCart(cartId,userId){this.store.dispatch(new DeleteCart({userId,cartId}))}reloadCart(cartId,extraData){this.userIdService.takeUserId().subscribe(userId=>this.store.dispatch(new LoadCart({userId,cartId,extraData})))}getCartIdByType(cartType){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartIdByTypeFactory(cartType)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)())}}__name(MultiCartService,"MultiCartService"),MultiCartService.\u0275fac=__name(function(t){return new(t||MultiCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"MultiCartService_Factory"),MultiCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartService,factory:MultiCartService.\u0275fac});class SelectiveCartService{constructor(userProfileFacade,multiCartFacade,baseSiteService,userIdService){this.userProfileFacade=userProfileFacade,this.multiCartFacade=multiCartFacade,this.baseSiteService=baseSiteService,this.userIdService=userIdService}getCart(){return this.selectiveCart$||(this.selectiveCart$=(0,rxjs__WEBPACK_IMPORTED_MODULE_24__.aj)([this.getSelectiveCartId(),this.userProfileFacade.get(),this.userIdService.getUserId(),this.baseSiteService.getActive()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.b)(([selectiveId,user,userId,activeBaseSite])=>{!Boolean(selectiveId)&&userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&user?.customerId&&this.multiCartFacade.loadCart({userId,cartId:`selectivecart${activeBaseSite}${user.customerId}`})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([selectiveId])=>Boolean(selectiveId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(([selectiveId])=>this.multiCartFacade.getCart(selectiveId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.d)({bufferSize:1,refCount:!0}))),this.selectiveCart$}getEntries(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(selectiveId=>this.multiCartFacade.getEntries(selectiveId)))}isStable(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(selectiveId=>this.multiCartFacade.isStable(selectiveId)))}addEntry(productCode,quantity){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.addEntry(userId,selectiveId,productCode,quantity)})}removeEntry(entry){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.removeEntry(userId,selectiveId,entry.entryNumber)})}updateEntry(entryNumber,quantity){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.updateEntry(userId,selectiveId,entryNumber,quantity)})}getEntry(productCode){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.w)(selectiveId=>this.multiCartFacade.getEntry(selectiveId,productCode)))}getSelectiveCartId(){return this.multiCartFacade.getCartIdByType(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.SELECTIVE)}getSelectiveIdWithUserId(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.q)(1))}}__name(SelectiveCartService,"SelectiveCartService"),SelectiveCartService.\u0275fac=__name(function(t){return new(t||SelectiveCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_29__.aT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Do$),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"SelectiveCartService_Factory"),SelectiveCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:SelectiveCartService,factory:SelectiveCartService.\u0275fac});const facadeProviders=[ActiveCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu,useExisting:ActiveCartService},CartVoucherService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.LN,useExisting:CartVoucherService},MultiCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT,useExisting:MultiCartService},SelectiveCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Oo,useExisting:SelectiveCartService},CartValidationService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.mU,useExisting:CartValidationService}];class BadCartRequestHandler extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck{constructor(){super(...arguments),this.responseStatus=_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.sdw.BAD_REQUEST}getPriority(){return 0}hasMatch(errorResponse){return super.hasMatch(errorResponse)&&this.getErrors(errorResponse).some(isCartError)}handleError(request,response){this.handleCartNotFoundError(request,response),this.handleOtherCartErrors(request,response)}handleCartNotFoundError(_request,response){this.getErrors(response).filter(e=>isCartNotFoundError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.cartNotFound"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}handleOtherCartErrors(_request,response){this.getErrors(response).filter(e=>"notFound"!==e.reason||"cart"!==e.subjectType).forEach(error=>{this.globalMessageService.add(error.message?error.message:{key:"httpHandlers.otherCartErrors"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}getErrors(response){return(response.error?.errors||[]).filter(error=>"JaloObjectNoLongerValidError"!==error.type)}}__name(BadCartRequestHandler,"BadCartRequestHandler"),BadCartRequestHandler.\u0275fac=function(){let \u0275BadCartRequestHandler_BaseFactory;return __name(function(t){return(\u0275BadCartRequestHandler_BaseFactory||(\u0275BadCartRequestHandler_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(BadCartRequestHandler)))(t||BadCartRequestHandler)},"BadCartRequestHandler_Factory")}(),BadCartRequestHandler.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:BadCartRequestHandler,factory:BadCartRequestHandler.\u0275fac,providedIn:"root"});class BadVoucherRequestHandler extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck{constructor(){super(...arguments),this.responseStatus=_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.sdw.BAD_REQUEST}getPriority(){return 0}hasMatch(errorResponse){return super.hasMatch(errorResponse)&&this.getErrors(errorResponse).some(isVoucherError)}handleError(request,response){this.handleVoucherExceededError(request,response),this.handleVoucherInvalidError(request,response)}handleVoucherExceededError(_request,response){this.getErrors(response).filter(e=>voucherExceededError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.voucherExceeded"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}handleVoucherInvalidError(_request,response){this.getErrors(response).filter(e=>voucherInvalidError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.invalidCodeProvided"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}getErrors(response){return(response.error?.errors||[]).filter(error=>"JaloObjectNoLongerValidError"!==error.type)}}__name(BadVoucherRequestHandler,"BadVoucherRequestHandler"),BadVoucherRequestHandler.\u0275fac=function(){let \u0275BadVoucherRequestHandler_BaseFactory;return __name(function(t){return(\u0275BadVoucherRequestHandler_BaseFactory||(\u0275BadVoucherRequestHandler_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(BadVoucherRequestHandler)))(t||BadVoucherRequestHandler)},"BadVoucherRequestHandler_Factory")}(),BadVoucherRequestHandler.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:BadVoucherRequestHandler,factory:BadVoucherRequestHandler.\u0275fac,providedIn:"root"});class MultiCartStoreModule{}__name(MultiCartStoreModule,"MultiCartStoreModule"),MultiCartStoreModule.\u0275fac=__name(function(t){return new(t||MultiCartStoreModule)},"MultiCartStoreModule_Factory"),MultiCartStoreModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:MultiCartStoreModule}),MultiCartStoreModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[multiCartReducerProvider,MultiCartEffectsService],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_30__.ez,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.vUS,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Aw.forFeature("cart",multiCartReducerToken,{metaReducers:multiCartMetaReducers}),_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.sQ.forFeature(effects)]});class CartBaseCoreModule{}__name(CartBaseCoreModule,"CartBaseCoreModule"),CartBaseCoreModule.\u0275fac=__name(function(t){return new(t||CartBaseCoreModule)},"CartBaseCoreModule_Factory"),CartBaseCoreModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartBaseCoreModule}),CartBaseCoreModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[CartConnector,CartEntryConnector,CartVoucherConnector,CartValidationConnector,...facadeProviders,{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck,useExisting:BadCartRequestHandler,multi:!0},{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck,useExisting:BadVoucherRequestHandler,multi:!0}],imports:[CartEventModule,MultiCartStoreModule,CartPersistenceModule,CartPageEventModule]});const CART_VALIDATION_NORMALIZER=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("CartValidationNormalizer");class CartConfigService{constructor(config){this.config=config}isSelectiveCartEnabled(){return Boolean(this.config?.cart?.selectiveCart?.enabled)}isCartValidationEnabled(){return Boolean(this.config?.cart?.validation?.enabled)}}__name(CartConfigService,"CartConfigService"),CartConfigService.\u0275fac=__name(function(t){return new(t||CartConfigService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.qB))},"CartConfigService_Factory"),CartConfigService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartConfigService,factory:CartConfigService.\u0275fac,providedIn:"root"});class CartValidationGuard{constructor(cartValidationService,semanticPathService,router,globalMessageService,activeCartService,cartValidationStateService,cartConfigService){this.cartValidationService=cartValidationService,this.semanticPathService=semanticPathService,this.router=router,this.globalMessageService=globalMessageService,this.activeCartService=activeCartService,this.cartValidationStateService=cartValidationStateService,this.cartConfigService=cartConfigService,this.GLOBAL_MESSAGE_TIMEOUT=1e4}canActivate(){return this.cartConfigService.isCartValidationEnabled()?this.cartValidationService.validateCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartService.getEntries()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartModificationList,cartEntries])=>{if(this.cartValidationStateService.updateValidationResultAndRoutingId(cartModificationList.cartModifications??[]),void 0!==cartModificationList.cartModifications&&0!==cartModificationList.cartModifications.length){let validationResultMessage;const modification=cartModificationList.cartModifications[0];return validationResultMessage=1===cartEntries.length&&cartEntries[0].product?.code===modification.entry?.product?.code&&modification.statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.v$.NO_STOCK?{key:"validation.cartEntryRemoved",params:{name:modification.entry?.product?.name}}:{key:"validation.cartEntriesChangeDuringCheckout"},this.globalMessageService.add(validationResultMessage,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR,this.GLOBAL_MESSAGE_TIMEOUT),this.activeCartService.reloadActiveCart(),this.router.parseUrl(this.semanticPathService.get("cart")??"")}return!0})):(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(!0)}}__name(CartValidationGuard,"CartValidationGuard"),CartValidationGuard.\u0275fac=__name(function(t){return new(t||CartValidationGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.mU),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.hCH),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_router__WEBPACK_IMPORTED_MODULE_31__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.IWp),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationStateService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartConfigService))},"CartValidationGuard_Factory"),CartValidationGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationGuard,factory:CartValidationGuard.\u0275fac,providedIn:"root"});class ProductImportInfoService{constructor(actionsSubject){this.actionsSubject=actionsSubject,this.logger=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.f3M)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.mQy)}getResults(cartId){return this.actionsSubject.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry Success","[Cart-entry] Add Entry Fail"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(action=>action.payload.cartId===cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>this.mapMessages(action)))}mapMessages(action){const{productCode}=action.payload;if(action instanceof CartAddEntrySuccess){const{quantity,quantityAdded,entry,statusCode}=action.payload;if(statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.LOW_STOCK)return{productCode,statusCode,productName:entry?.product?.name,quantity,quantityAdded};if(statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.SUCCESS||statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.NO_STOCK)return{productCode,statusCode,productName:entry?.product?.name}}else if(action instanceof CartAddEntryFail){const{error}=action.payload;if("UnknownIdentifierError"===error?.details[0]?.type)return{productCode,statusCode:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.UNKNOWN_IDENTIFIER}}return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.X6Q)()&&this.logger.warn("Unrecognized cart add entry action type while mapping messages",action),{productCode,statusCode:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.UNKNOWN_ERROR}}}__name(ProductImportInfoService,"ProductImportInfoService"),ProductImportInfoService.\u0275fac=__name(function(t){return new(t||ProductImportInfoService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.UO))},"ProductImportInfoService_Factory"),ProductImportInfoService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ProductImportInfoService,factory:ProductImportInfoService.\u0275fac,providedIn:"root"})}};